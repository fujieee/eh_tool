(function(){var k;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}var ca="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};function da(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var ea=da(this);function l(a,b){if(b)a:{var c=ea;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ca(c,a,{configurable:!0,writable:!0,value:b})}}
l("Symbol",function(a){function b(f){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new c(d+(f||"")+"_"+e++,f)}function c(f,g){this.Iz=f;ca(this,"description",{configurable:!0,writable:!0,value:g})}if(a)return a;c.prototype.toString=function(){return this.Iz};var d="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",e=0;return b});l("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=ea[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&ca(d.prototype,a,{configurable:!0,writable:!0,value:function(){return fa(aa(this))}})}return a});function fa(a){a={next:a};a[Symbol.iterator]=function(){return this};return a}
function q(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}function ha(a){if(!(a instanceof Array)){a=q(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}var ia="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ka;if("function"==typeof Object.setPrototypeOf)ka=Object.setPrototypeOf;else{var la;a:{var ma={a:!0},na={};try{na.__proto__=ma;la=na.a;break a}catch(a){}la=!1}ka=la?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var oa=ka;function r(a,b){a.prototype=ia(b.prototype);a.prototype.constructor=a;if(oa)oa(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.IH=b.prototype}function pa(){this.Rl=!1;this.gi=null;this.se=void 0;this.ma=1;this.cw=this.il=0;this.ki=null}function qa(a){if(a.Rl)throw new TypeError("Generator is already running");a.Rl=!0}pa.prototype.bm=function(a){this.se=a};pa.prototype.Wm=function(a){this.ki={Uv:a,zB:!0};this.ma=this.il||this.cw};pa.prototype.return=function(a){this.ki={return:a};this.ma=this.cw};function sa(a,b,c){a.ma=c;return{value:b}}function ta(a){a.il=0;var b=a.ki.Uv;a.ki=null;return b}function ua(a){this.Va=new pa;this.kC=a}ua.prototype.bm=function(a){qa(this.Va);if(this.Va.gi)return va(this,this.Va.gi.next,a,this.Va.bm);this.Va.bm(a);return xa(this)};function ya(a,b){qa(a.Va);var c=a.Va.gi;if(c)return va(a,"return"in c?c["return"]:function(d){return{value:d,done:!0}},b,a.Va.return);a.Va.return(b);return xa(a)}ua.prototype.Wm=function(a){qa(this.Va);if(this.Va.gi)return va(this,this.Va.gi["throw"],a,this.Va.bm);this.Va.Wm(a);return xa(this)};function va(a,b,c,d){try{var e=b.call(a.Va.gi,c);if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object");if(!e.done)return a.Va.Rl=!1,e;var f=e.value}catch(g){return a.Va.gi=null,a.Va.Wm(g),xa(a)}a.Va.gi=null;d.call(a.Va,f);return xa(a)}
function xa(a){for(;a.Va.ma;)try{var b=a.kC(a.Va);if(b)return a.Va.Rl=!1,{value:b.value,done:!1}}catch(c){a.Va.se=void 0,a.Va.Wm(c)}a.Va.Rl=!1;if(a.Va.ki){b=a.Va.ki;a.Va.ki=null;if(b.zB)throw b.Uv;return{value:b.return,done:!0}}return{value:void 0,done:!0}}function za(a){this.next=function(b){return a.bm(b)};this.throw=function(b){return a.Wm(b)};this.return=function(b){return ya(a,b)};this[Symbol.iterator]=function(){return this}}
function Aa(a,b){b=new za(new ua(b));oa&&a.prototype&&oa(b,a.prototype);return b}
l("Promise",function(a){function b(g){this.Lk=0;this.um=void 0;this.uk=[];this.gx=!1;var h=this.dr();try{g(h.resolve,h.reject)}catch(m){h.reject(m)}}function c(){this.hh=null}function d(g){return g instanceof b?g:new b(function(h){h(g)})}if(a)return a;c.prototype.Iu=function(g){if(null==this.hh){this.hh=[];var h=this;this.Ju(function(){h.PA()})}this.hh.push(g)};var e=ea.setTimeout;c.prototype.Ju=function(g){e(g,0)};c.prototype.PA=function(){for(;this.hh&&this.hh.length;){var g=this.hh;this.hh=[];for(var h=0;h<g.length;++h){var m=g[h];g[h]=null;try{m()}catch(n){this.Wz(n)}}}this.hh=null};c.prototype.Wz=function(g){this.Ju(function(){throw g;})};b.prototype.dr=function(){function g(n){return function(p){m||(m=!0,n.call(h,p))}}var h=this,m=!1;return{resolve:g(this.vC),reject:g(this.wt)}};b.prototype.vC=function(g){if(g===this)this.wt(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof b)this.NC(g);else{a:switch(typeof g){case "object":var h=null!=g;break a;case "function":h=!0;break a;default:h=!1}h?this.uC(g):this.nw(g)}};b.prototype.uC=function(g){var h=void 0;try{h=g.then}catch(m){this.wt(m);return}"function"==typeof h?this.OC(h,g):this.nw(g)};b.prototype.wt=function(g){this.Qy(2,g)};b.prototype.nw=function(g){this.Qy(1,g)};b.prototype.Qy=function(g,h){if(0!=this.Lk)throw Error("Cannot settle("+g+", "+h+"): Promise already settled in state"+this.Lk);this.Lk=g;this.um=h;2===this.Lk&&this.GC();this.QA()};b.prototype.GC=function(){var g=this;e(function(){if(g.YB()){var h=ea.console;"undefined"!==typeof h&&h.error(g.um)}},1)};b.prototype.YB=function(){if(this.gx)return!1;var g=ea.CustomEvent,h=ea.Event,m=ea.dispatchEvent;if("undefined"===typeof m)return!0;"function"===typeof g?g=new g("unhandledrejection",{cancelable:!0}):"function"===typeof h?g=new h("unhandledrejection",{cancelable:!0}):(g=ea.document.createEvent("CustomEvent"),g.initCustomEvent("unhandledrejection",!1,!0,g));g.promise=this;g.reason=this.um;return m(g)};b.prototype.QA=function(){if(null!=this.uk){for(var g=0;g<this.uk.length;++g)f.Iu(this.uk[g]);this.uk=null}};var f=new c;b.prototype.NC=function(g){var h=this.dr();g.En(h.resolve,h.reject)};b.prototype.OC=function(g,h){var m=this.dr();try{g.call(h,m.resolve,m.reject)}catch(n){m.reject(n)}};b.prototype.then=function(g,h){function m(C,E){return"function"==typeof C?function(ja){try{n(C(ja))}catch(ba){p(ba)}}:E}var n,p,y=new b(function(C,E){n=C;p=E});this.En(m(g,n),m(h,p));return y};b.prototype.catch=function(g){return this.then(void 0,g)};b.prototype.En=function(g,h){function m(){switch(n.Lk){case 1:g(n.um);break;case 2:h(n.um);break;default:throw Error("Unexpected state: "+n.Lk);}}var n=this;null==this.uk?f.Iu(m):this.uk.push(m);this.gx=!0};b.resolve=d;b.reject=function(g){return new b(function(h,m){m(g)})};b.race=function(g){return new b(function(h,m){for(var n=q(g),p=n.next();!p.done;p=n.next())d(p.value).En(h,m)})};b.all=function(g){var h=q(g),m=h.next();return m.done?d([]):new b(function(n,p){function y(ja){return function(ba){C[ja]=ba;E--;0==E&&n(C)}}var C=[],E=0;do C.push(void 0),E++,d(m.value).En(y(C.length-1),p),m=h.next();while(!m.done)})};return b});l("Number.isNaN",function(a){return a?a:function(b){return"number"===typeof b&&isNaN(b)}});function Ba(a,b){a instanceof String&&(a+="");var c=0,d=!1,e={next:function(){if(!d&&c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}d=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e}
l("Array.prototype.keys",function(a){return a?a:function(){return Ba(this,function(b){return b})}});l("Object.is",function(a){return a?a:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}});l("Array.prototype.includes",function(a){return a?a:function(b,c){var d=this;d instanceof String&&(d=String(d));var e=d.length;c=c||0;for(0>c&&(c=Math.max(c+e,0));c<e;c++){var f=d[c];if(f===b||Object.is(f,b))return!0}return!1}});function Ca(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""}l("String.prototype.includes",function(a){return a?a:function(b,c){return-1!==Ca(this,b,"includes").indexOf(b,c||0)}});function Da(a,b){return Object.prototype.hasOwnProperty.call(a,b)}
var Ea="function"==typeof Object.assign?Object.assign:function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var e in d)Da(d,e)&&(a[e]=d[e])}return a};l("Object.assign",function(a){return a||Ea});l("Array.from",function(a){return a?a:function(b,c,d){c=null!=c?c:function(h){return h};var e=[],f="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof f){b=f.call(b);for(var g=0;!(f=b.next()).done;)e.push(c.call(d,f.value,g++))}else for(f=b.length,g=0;g<f;g++)e.push(c.call(d,b[g],g));return e}});l("WeakMap",function(a){function b(m){this.Kl=(h+=Math.random()+1).toString();if(m){m=q(m);for(var n;!(n=m.next()).done;)n=n.value,this.set(n[0],n[1])}}function c(){}function d(m){var n=typeof m;return"object"===n&&null!==m||"function"===n}function e(m){if(!Da(m,g)){var n=new c;ca(m,g,{value:n})}}function f(m){var n=Object[m];n&&(Object[m]=function(p){if(p instanceof c)return p;Object.isExtensible(p)&&e(p);return n(p)})}if(function(){if(!a||!Object.seal)return!1;try{var m=Object.seal({}),n=Object.seal({}),p=new a([[m,2],[n,3]]);if(2!=p.get(m)||3!=p.get(n))return!1;p.delete(m);p.set(n,4);return!p.has(m)&&4==p.get(n)}catch(y){return!1}}())return a;var g="$jscomp_hidden_"+Math.random();f("freeze");f("preventExtensions");f("seal");var h=0;b.prototype.set=function(m,n){if(!d(m))throw Error("Invalid WeakMap key");e(m);if(!Da(m,g))throw Error("WeakMap key fail: "+m);m[g][this.Kl]=n;return this};b.prototype.get=function(m){return d(m)&&Da(m,g)?m[g][this.Kl]:void 0};b.prototype.has=function(m){return d(m)&&Da(m,g)&&Da(m[g],this.Kl)};b.prototype.delete=function(m){return d(m)&&Da(m,g)&&Da(m[g],this.Kl)?delete m[g][this.Kl]:!1};return b});l("Map",function(a){function b(){var h={};return h.previous=h.next=h.head=h}function c(h,m){var n=h.Dg;return fa(function(){if(n){for(;n.head!=h.Dg;)n=n.previous;for(;n.next!=n.head;)return n=n.next,{done:!1,value:m(n)};n=null}return{done:!0,value:void 0}})}function d(h,m){var n=m&&typeof m;"object"==n||"function"==n?f.has(m)?n=f.get(m):(n=""+ ++g,f.set(m,n)):n="p_"+m;var p=h.tl[n];if(p&&Da(h.tl,n))for(h=0;h<p.length;h++){var y=p[h];if(m!==m&&y.key!==y.key||m===y.key)return{id:n,list:p,index:h,od:y}}return{id:n,list:p,index:-1,od:void 0}}function e(h){this.tl={};this.Dg=b();this.size=0;if(h){h=q(h);for(var m;!(m=h.next()).done;)m=m.value,this.set(m[0],m[1])}}if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var h=Object.seal({x:4}),m=new a(q([[h,"s"]]));if("s"!=m.get(h)||1!=m.size||m.get({x:4})||m.set({x:4},"t")!=m||2!=m.size)return!1;var n=m.entries(),p=n.next();if(p.done||p.value[0]!=h||"s"!=p.value[1])return!1;p=n.next();return p.done||4!=p.value[0].x||"t"!=p.value[1]||!n.next().done?!1:!0}catch(y){return!1}}())return a;var f=new WeakMap;e.prototype.set=function(h,m){h=0===h?0:h;var n=d(this,h);n.list||(n.list=this.tl[n.id]=[]);n.od?n.od.value=m:(n.od={next:this.Dg,previous:this.Dg.previous,head:this.Dg,key:h,value:m},n.list.push(n.od),this.Dg.previous.next=n.od,this.Dg.previous=n.od,this.size++);return this};e.prototype.delete=function(h){h=d(this,h);return h.od&&h.list?(h.list.splice(h.index,1),h.list.length||delete this.tl[h.id],h.od.previous.next=h.od.next,h.od.next.previous=h.od.previous,h.od.head=null,this.size--,!0):!1};e.prototype.clear=function(){this.tl={};this.Dg=this.Dg.previous=b();this.size=0};e.prototype.has=function(h){return!!d(this,h).od};e.prototype.get=function(h){return(h=d(this,h).od)&&h.value};e.prototype.entries=function(){return c(this,function(h){return[h.key,h.value]})};e.prototype.keys=function(){return c(this,function(h){return h.key})};e.prototype.values=function(){return c(this,function(h){return h.value})};e.prototype.forEach=function(h,m){for(var n=this.entries(),p;!(p=n.next()).done;)p=p.value,h.call(m,p[1],p[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var g=0;return e});l("Array.prototype.values",function(a){return a?a:function(){return Ba(this,function(b,c){return c})}});l("Set",function(a){function b(c){this.dg=new Map;if(c){c=q(c);for(var d;!(d=c.next()).done;)this.add(d.value)}this.size=this.dg.size}if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),d=new a(q([c]));if(!d.has(c)||1!=d.size||d.add(c)!=d||1!=d.size||d.add({x:4})!=d||2!=d.size)return!1;var e=d.entries(),f=e.next();if(f.done||f.value[0]!=c||f.value[1]!=c)return!1;f=e.next();return f.done||f.value[0]==c||4!=f.value[0].x||f.value[1]!=f.value[0]?!1:e.next().done}catch(g){return!1}}())return a;b.prototype.add=function(c){c=0===c?0:c;this.dg.set(c,c);this.size=this.dg.size;return this};b.prototype.delete=function(c){c=this.dg.delete(c);this.size=this.dg.size;return c};b.prototype.clear=function(){this.dg.clear();this.size=0};b.prototype.has=function(c){return this.dg.has(c)};b.prototype.entries=function(){return this.dg.entries()};b.prototype.values=function(){return this.dg.values()};b.prototype.keys=b.prototype.values;b.prototype[Symbol.iterator]=b.prototype.values;b.prototype.forEach=function(c,d){var e=this;this.dg.forEach(function(f){return c.call(d,f,f,e)})};return b});l("String.prototype.startsWith",function(a){return a?a:function(b,c){var d=Ca(this,b,"startsWith");b+="";var e=d.length,f=b.length;c=Math.max(0,Math.min(c|0,d.length));for(var g=0;g<f&&c<e;)if(d[c++]!=b[g++])return!1;return g>=f}});l("Array.prototype.fill",function(a){return a?a:function(b,c,d){var e=this.length||0;0>c&&(c=Math.max(0,e+c));if(null==d||d>e)d=e;d=Number(d);0>d&&(d=Math.max(0,e+d));for(c=Number(c||0);c<d;c++)this[c]=b;return this}});function Fa(a){return a?a:Array.prototype.fill}l("Int8Array.prototype.fill",Fa);l("Uint8Array.prototype.fill",Fa);l("Uint8ClampedArray.prototype.fill",Fa);l("Int16Array.prototype.fill",Fa);l("Uint16Array.prototype.fill",Fa);l("Int32Array.prototype.fill",Fa);l("Uint32Array.prototype.fill",Fa);l("Float32Array.prototype.fill",Fa);l("Float64Array.prototype.fill",Fa);function Ga(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{Qw:e,Tk:f}}return{Qw:-1,Tk:void 0}}l("Array.prototype.find",function(a){return a?a:function(b,c){return Ga(this,b,c).Tk}});l("String.prototype.trimLeft",function(a){function b(){return this.replace(/^[\s\xa0]+/,"")}return a||b});l("String.prototype.trimStart",function(a){return a||String.prototype.trimLeft});l("Number.MIN_SAFE_INTEGER",function(){return-9007199254740991});l("Array.prototype.findIndex",function(a){return a?a:function(b,c){return Ga(this,b,c).Qw}});l("Promise.prototype.finally",function(a){return a?a:function(b){return this.then(function(c){return Promise.resolve(b()).then(function(){return c})},function(c){return Promise.resolve(b()).then(function(){throw c;})})}});l("String.prototype.repeat",function(a){return a?a:function(b){var c=Ca(this,null,"repeat");if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var d="";b;)if(b&1&&(d+=c),b>>>=1)c+=c;return d}});l("Object.entries",function(a){return a?a:function(b){var c=[],d;for(d in b)Da(b,d)&&c.push([d,b[d]]);return c}});l("Array.prototype.entries",function(a){return a?a:function(){return Ba(this,function(b,c){return[b,c]})}});function Ha(){this.Do=!1}
ea.Object.defineProperties(Ha.prototype,{current:{configurable:!0,enumerable:!0,get:function(){return this.value},set:function(a){this.Do||(this.value=a,this.Do=!0)}}});function Ia(){Ha.apply(this,arguments)}r(Ia,Ha);ea.Object.defineProperties(Ia.prototype,{current:{configurable:!0,enumerable:!0,get:function(){return this.value},set:function(a){this.Do||(this.value=a,this.Do=!0)}}});var Ja=new Ia;var Ka=window.Hls,La;function t(){if(void 0===La){var a=!0;try{window.localStorage.setItem("cbModernizr","cbModernizr"),window.localStorage.removeItem("cbModernizr")}catch(b){a=!1}La=a}return La}function Ma(){try{return!!document.createElement("audio").canPlayType}catch(a){return!1}}var Na;function Oa(){if(void 0!==Na)return Na;Na=!1;try{if("webkitAudioContext"in window)var a=new webkitAudioContext;else if("AudioContext"in window)a=new AudioContext;else return Na;if(null===a)return Na;Na="function"===typeof a.createGain&&"function"===typeof a.decodeAudioData&&"function"===typeof a.createBufferSource&&"function"===typeof a.createBufferSource().start;"function"===typeof a.close&&a.close()}catch(b){u("Error checking for audio context: "+b)}return Na}var Pa;function Qa(){if(void 0!==Pa)return Pa;var a=document.createElement("audio");return Pa="function"===typeof a.canPlayType&&""!==a.canPlayType("audio/mpeg;codecs=mp3")}var Ra=Object.prototype.hasOwnProperty.call(window,"onorientationchange");function Sa(){var a=document.createElement("video").canPlayType("application/vnd.apple.mpegurl");return"probably"===a||"maybe"===a}
function Ta(){return window.hasOwnProperty("requestAnimationFrame")?window.requestAnimationFrame:window.hasOwnProperty("webkitRequestAnimationFrame")?window.webkitRequestAnimationFrame:window.hasOwnProperty("mozRequestAnimationFrame")?window.mozRequestAnimationFrame:function(a){window.setTimeout(function(){a(0)},1E3/7);return Date.now()}}var Ua;function Va(){if(void 0!==Ua)return Ua;try{var a=Object.defineProperty({},"passive",{get:function(){Ua=!0}});window.addEventListener("testPassive",function(){},a);window.removeEventListener("testPassive",function(){},a);void 0===Ua&&(Ua=!1)}catch(b){Ua=!1}return Ua}var Wa,Xa=!1;window.setTimeout(function(){Xa=!0},200);function Ya(){if(void 0!==Wa&&!Xa)return Wa;var a=document.documentElement.scrollTop;document.documentElement.style.height=window.innerHeight+1+"px";document.documentElement.scrollTop=a+1;Wa=document.documentElement.scrollTop!==a?document.documentElement:document.body;document.documentElement.style.height="";document.documentElement.scrollTop=a;Xa=!1;return Wa}function Za(){return void 0!==window.performance&&void 0!==window.performance.now}
function $a(){return void 0!==window.chrome&&(!!window.chrome.loadTimes||!!window.chrome.webstore||!!window.chrome.runtime)}function ab(){return/Edge\//i.test(navigator.userAgent)}function bb(){if(cb()&&/WebKit/i.test(navigator.userAgent)&&!/CriOS/i.test(navigator.userAgent))return!0;var a=!1;void 0!==window.safari&&void 0!==window.safari.pushNotification&&(a="[object SafariRemoteNotification]"===window.safari.pushNotification.toString());return/constructor/i.test(window.HTMLElement)||a}
function db(){return[/SM-T827R4/,/SM-T550/,/SM-T330/,/SM-T232/,/SM-T335/,/SM-T813/,/SM-T510/].some(function(a){return a.test(navigator.userAgent)})}function eb(){return(/iPad/i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints)&&void 0===window.MSStream}function fb(){return/iPhone/i.test(navigator.userAgent)&&void 0===window.MSStream}function cb(){return/iPod/i.test(navigator.userAgent)&&void 0===window.MSStream||fb()||eb()}
function gb(){if(cb()){var a=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/);return null===a?void 0:parseInt(a[1])}}function hb(){return/Android|webOS|BlackBerry|IEMobile|Opera Mini|SamsungBrowser/i.test(navigator.userAgent)||cb()}function ib(){return!!document.documentMode}function jb(){return ib()&&void 0===window.atob}function kb(){return/Puffin/i.test(navigator.userAgent)}function lb(){var a="unload";cb()&&bb()&&(a="pagehide");return a}
function mb(){return"object"===typeof navigator&&"object"===typeof navigator.mediaDevices&&"function"===typeof navigator.mediaDevices.getUserMedia}var nb;(new Promise(function(a){if(void 0!==nb)a(nb);else{var b=new Image;b.onerror=function(){a(!1)};b.onload=function(){nb=2!==b.width;a(nb)};b.src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QAiRXhpZgAASUkqAAgAAAABABIBAwABAAAABgASAAAAAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAABAAIDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD+/iiiigD/2Q=="}})).then(function(a){nb=a}).catch();function ob(a){switch(a){case 1:return 255;case 2:return 65535;case 4:return 4294967295;default:return 1.8446744073709552E19}}function pb(a){var b;"crypto"in window?b=window.crypto:"msCrypto"in window&&(b=window.msCrypto);if(void 0===b){if(null!==a){b=a.length;for(var c=ob(a.byteLength/b),d=0;d<b;d+=1)a[d]=Math.floor(Math.random()*c)}}else a=b.getRandomValues(a);return a};var qb={},rb={};function sb(a){return Number.isNaN(Number(a))?0:Number(a)}
function v(a,b,c,d,e){d=void 0===d?!1:d;e=void 0===e?!1:e;if(b===window)var f=qb[a]=sb(qb[a])+1;else if(b===document)f=rb[a]=sb(rb[a])+1;else if(b instanceof HTMLElement){var g="data-listener-count-"+a;f=sb(b.getAttribute(g))+1;b.setAttribute(g,""+f)}else f=1;42<f&&w('event listener "'+a+'" has too many listeners. Element: '+(b===document?"document":b===window?"window":b.outerHTML.split(">")[0]+">"),{listeners:f,"max-listeners":42});void 0!==window.addEventListener?(d=Va()?{capture:d,passive:e}:d,b.addEventListener(a,c,d)):void 0!==window.attachEvent?b.attachEvent("on"+a,c):u("Could not resolve addEventListenerPoly( "+a+" ) to "+b)}function tb(a,b,c){var d=void 0===d?!1:d;var e=void 0===e?!1:e;a=q(a);for(var f=a.next();!f.done;f=a.next())v(f.value,b,c,d,e)}
function x(a,b,c,d,e){d=void 0===d?!1:d;e=void 0===e?!1:e;if(b===window)var f=qb[a]=sb(qb[a])-1;else if(b===document)f=rb[a]=sb(rb[a])-1;else if(b instanceof HTMLElement){var g="data-listener-count-"+a;f=sb(b.getAttribute(g))-1;b.setAttribute(g,""+f)}else f=1;0>f&&u('event listener "'+a+'" removed without being added',{listeners:f});void 0!==window.removeEventListener?(d=Va()?{capture:d,passive:e}:d,b.removeEventListener(a,c,d)):void 0!==window.detachEvent?b.detachEvent("on"+a,c):u("Could not resolve removeEventListenerPoly( "+
a+" ) from "+b)}function ub(a,b){function c(f){b(f);x("touchend",a,c,d,e)}var d=void 0===d?!1:d;var e=void 0===e?!1:e;v("touchend",a,c,d,e)};function vb(a){for(var b="",c=q(Object.keys(a)),d=c.next();!d.done;d=c.next()){d=d.value;""!==b&&(b+="&");var e=a[d];void 0===e&&(e="");b+=encodeURIComponent(d)+"="+encodeURIComponent(e)}return b}function wb(){var a=window.location.search;0<a.length&&"?"===a[0]&&(a=a.slice(1));var b={};a=q(a.split("&"));for(var c=a.next();!c.done;c=a.next())c=c.value,c.includes("=")&&(c=c.split("="),0<c[0].length&&(b[decodeURIComponent(c[0])]=0<c[1].length?decodeURIComponent(c[1]):void 0));return b};function xb(a){var b=a.length+1;return document.cookie.split(";").map(function(c){return c.trim()}).filter(function(c){return c.substring(0,b)===a+"="}).map(function(c){return decodeURIComponent(c.substring(b))})[0]}function yb(a){var b;return null!==(b=xb(a))&&void 0!==b?b:""}function zb(a,b,c){Ab(a,b,86400*c)}function Ab(a,b,c){var d=new Date;d.setTime(d.getTime()+1E3*c);document.cookie=a+"="+b+"; expires="+d.toUTCString()+"; path=/"};function Bb(a){var b="";null===a.match(/^[a-zA-Z]+:\/\//)&&(b="/");return""+b+a}function Cb(a){for(var b=new FormData,c=q(Object.keys(a)),d=c.next();!d.done;d=c.next())d=d.value,b.append(d,a[d]);return b}
function Db(a){switch(a.readyState){case 0:return"request not sent";case 4:switch(a.status){case 0:return"network error";case 400:return"bad request";case 401:return"unauthorized";case 403:return"access denied";case 404:return"not found";case 429:return"request throttled";case 500:return"server error";default:return"unknown status "+a.status}default:return"unknown ready state "+a.readyState}}
function Eb(a){var b=Error.call(this,Db(a));this.message=b.message;"stack"in b&&(this.stack=b.stack);var c=this;this.ud=a;this.toString=function(){return"XhrError: "+c.message}}r(Eb,Error);function Fb(a){return 200<=a&&299>=a||1223===a}function Gb(a){return Hb(a)[1]}
function Hb(a){var b=6E4;b=void 0===b?6E4:b;var c=new XMLHttpRequest;return[c,new Promise(function(d,e){c.open("GET",Bb(a));c.withCredentials=!0;c.onerror=function(){e(new Eb(c))};c.onload=function(){Fb(c.status)?d(c):e(new Eb(c))};c.timeout=b;c.setRequestHeader("X-Requested-With","XMLHttpRequest");c.send()})]}
function z(a,b){var c=b instanceof FormData?b:Cb(b);b=Ib(c);void 0===b?u("CSRF token is undefined",{cookies:document.cookie}):c.set("csrfmiddlewaretoken",b);return new Promise(function(d,e){var f=new XMLHttpRequest;f.open("POST",Bb(a),!0);f.withCredentials=!0;f.onerror=function(){e(new Eb(f))};f.onload=function(){Fb(f.status)?d(f):e(new Eb(f))};f.setRequestHeader("X-Requested-With","XMLHttpRequest");f.send(c)})}
function Jb(a,b){var c=Object.keys(b).map(function(f){return f+"="+b[f]}).join("&"),d=""===c?a:a+"?"+c,e=xb("csrftoken");return new Promise(function(f,g){var h=new XMLHttpRequest;h.open("DELETE",Bb(d),!0);h.withCredentials=!0;h.onerror=function(){g(new Eb(h))};h.onload=function(){Fb(h.status)?f(h):g(new Eb(h))};void 0===e?(u("CSRF token is undefined",{cookies:document.cookie}),g(new Eb(h))):(h.setRequestHeader("X-Requested-With","XMLHttpRequest"),h.setRequestHeader("X-CSRFToken",e),h.send())})}
function Ib(a){var b;a.has("csrfmiddlewaretoken")&&(b=a.get("csrfmiddlewaretoken"));return void 0!==xb("csrftoken")?xb("csrftoken"):b};var Kb=window.newrelic,Mb,Nb,Ob;function A(a,b,c){b=void 0===b?{}:b;try{-1!==Pb&&(b.PlayerVol=Pb);-1!==(0===Pb?0:Qb)&&(b.TipVol=0===Pb?0:Qb);var d={};d["attributes.room_user"]=Mb;for(var e in b)d["attributes."+e]=b[e];if(void 0!==c&&c&&Za()){var f=window.performance.now();d["attributes.timeSinceLoad"]=f/1E3;d["attributes.timeSinceLoadMS"]=f}void 0!==Nb&&(d["attributes.player"]=Nb);void 0!==Ob&&(d["attributes.currentMode"]=Ob);wb();void 0!==Kb&&(d==={}?Kb.addPageAction(a):Kb.addPageAction(a,d))}catch(g){u("New Relic Error in addPageAction: "+g)}}
function Rb(){x("load",window,Rb);for(var a=q(document.getElementsByTagName("script")),b=a.next();!b.done;b=a.next())b=b.value,null!==b.src.match(/https:\/\/js-agent\.newrelic\.com\/.*/)&&v("error",b,function(){u("Ad blocker stopped analytics collection");z("api/adblocker/",{})})}var Qb=-1,Pb=-1;v("load",window,Rb);function Sb(a,b){this.tm=this.Ci=this.active=!1;this.name=a;var c=window.experiments;if(void 0!==c){var d=c.active;this.active=void 0!==d&&-1!==d.indexOf(a);c=c.eligible;this.Ci=void 0!==c&&-1!==c.indexOf(a)}!0===(void 0===b?!0:b)&&this.tt()}Sb.prototype.tt=function(){if(this.Ci&&!this.tm){var a={experimentName:this.name,experimentGroup:"inactive"};this.active&&(a.experimentGroup="active");A("ExperimentEntered",a,!0);this.tm=!0}};function Tb(a,b){var c=void 0===c?!0:c;this.OB=b;this.tm=this.Ci=this.active=!1;var d=window.experiments;if(void 0!==d){b=d.active;var e=d.eligible;if(void 0!==e){var f=q(a);for(d=f.next();!d.done;d=f.next())if(-1!==e.indexOf(d.value)){this.Ci=!0;break}if(this.Ci&&void 0!==b)for(a=q(a),d=a.next();!d.done;d=a.next())if(d=d.value,-1!==b.indexOf(d)){this.active=!0;this.lq=d;break}}}!0===c&&this.tt()}
Tb.prototype.tt=function(){if(this.Ci&&!this.tm){var a={experimentName:this.lq,experimentGroup:"inactive",namespace:this.OB};this.active&&(a.experimentGroup="active");A("ExperimentEntered",a,!0);this.tm=!0}};var Ub={};function Vb(){void 0===Ub.NewChatStyles&&(Ub.NewChatStyles=(new Sb("NewChatStyles")).active);return Ub.NewChatStyles};function Wb(){this.dd=!0;this.fe=10;this.Bd=50}function Xb(a,b){this.BC=a;this.listener=b}Xb.prototype.removeListener=function(){this.BC.removeListener(this.listener)};function B(a,b){b.add(a)}function D(a,b){this.Tv=a;this.listeners=[];this.history=[];this.options=Object.assign(new Wb,b)}
D.prototype.j=function(a,b,c){b=void 0===b?!0:b;c=void 0===c?!1:c;this.listeners.push(a);if(b)for(b=q(this.history),c=b.next();!c.done;c=b.next())a(c.value);else c&&0<this.history.length&&a(this.history[this.history.length-1]);-1!==this.options.Bd&&this.listeners.length>this.options.Bd&&w('EventRouter "'+this.Tv+'" has too many listeners',{listeners:this.listeners.length,"max-listeners":this.options.Bd});return new Xb(this,a)};D.prototype.once=function(a,b){function c(e){a(e);d.removeListener(c)}var d=this;return this.j(c,!1,void 0===b?!0:b)};D.prototype.h=function(a){this.history.push(a)>this.options.fe&&this.history.shift();for(var b=q([].concat(ha(this.listeners))),c=b.next();!c.done;c=b.next()){c=c.value;try{c(a)}catch(d){u("Event listener error: "+d,{event_name:this.Tv,event_listeners:this.listeners.length,listener:c,error_stack:d.stack})}}};D.prototype.removeListener=function(a){a=this.listeners.indexOf(a);0<=a&&this.listeners.splice(a,1)};function Yb(){this.Dq=[]}Yb.prototype.add=function(a){this.Dq.push(a)};function Zb(a){for(var b=q(a.Dq),c=b.next();!c.done;c=b.next())c.value.removeListener();a.Dq=[]};function F(a,b){a=void 0===a?"div":a;this.sg=[];this.Bw=!1;this.Kv=new D("didReposition",{dd:!1});this.element="string"===typeof a?this.nv(a):a;this.initData(b);this.ya(b);this.element.setAttribute("ts",""+this.constructor.name)}k=F.prototype;k.nv=function(a){a=document.createElement(a);a.style.height="100%";a.style.width="100%";a.style.position="absolute";a.style.overflow="hidden";a.style.webkitTapHighlightColor="transparent";return a};k.initData=function(){};k.ya=function(){};k.As=function(){this.Bw=!0};k.G=function(){};k.Y=function(){this.G();for(var a=q(this.children()),b=a.next();!b.done;b=a.next())b.value.Y();this.Kv.h(void 0)};k.qq=function(){};k.Re=function(){this.qq();for(var a=q(this.children()),b=a.next();!b.done;b=a.next())b.value.Re()};k.H=function(a,b){$b(this,a);void 0===b&&(b=this.element);a.Bw||a.As();b.appendChild(a.element);return a};function ac(a,b){$b(a,b,0);if(void 0===c)var c=a.element;c.insertBefore(b.element,a.element.firstChild);return b}
function $b(a,b,c){void 0!==b.parent&&b.parent!==a&&b.parent.removeChild(b);void 0===c?a.sg.push(b):a.sg.splice(c,0,b);b.parent=a}k.removeChild=function(a){var b=this.sg.indexOf(a);if(-1===b)u("tried removing component that doesn't exist");else{this.sg.splice(b,1);a.parent===this&&(a.parent=void 0);bc(a);b=q(a.children());for(var c=b.next();!c.done;c=b.next())c.value.Nf();a.Nf()}};function bc(a){var b=a.element.parentNode;null!==b?b.removeChild(a.element):u("couldn't find parent element to use for node removal")}function cc(a){for(var b=q(a.children()),c=b.next();!c.done;c=b.next())c=c.value,c.parent===a&&(c.parent=void 0),bc(c),c.Nf();a.sg=[]}k.children=function(){return this.sg};k.Nf=function(){};k.Za=function(a){this.element.style.display=void 0===this.Zx?void 0===a?"block":a:this.Zx};k.Oa=function(){"none"!==this.element.style.display&&(""!==this.element.style.display&&(this.Zx=this.element.style.display),this.element.style.display="none")};k.nb=function(){return"none"!==this.element.style.display};k.previousSibling=function(){if(void 0!==this.parent)return dc(this,this.parent.children())};k.nextSibling=function(){if(void 0!==this.parent)return dc(this,this.parent.children().slice().reverse())};k.lastChild=function(){return 0<this.children().length?this.children()[this.children().length-1]:void 0};function dc(a,b){b=q(b);for(var c=b.next();!c.done;c=b.next()){c=c.value;if(c===a)break;var d=c}return d};function G(a,b){a=a instanceof F?a.element:a;a.classList.contains(b)||a.classList.add(b)}function H(a,b){a=a instanceof F?a.element:a;a.classList.contains(b)&&a.classList.remove(b)};function ec(){this.zw=[]}function fc(a,b){a.zw.push(b)}function gc(a,b){a=q(a.zw);for(var c=a.next();!c.done;c=a.next())if(c=c.value,b.which===c.keyCode&&(!c.ij||b.ctrlKey||b.metaKey))return c.P(b),!0;return!1};var hc={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},ic="webkitFullscreenEnabled webkitFullscreenElement webkitRequestFullscreen webkitExitFullscreen webkitfullscreenchange webkitfullscreenerror".split(" "),jc="mozFullScreenEnabled mozFullScreenElement mozRequestFullScreen mozCancelFullScreen mozfullscreenchange mozfullscreenerror".split(" "),kc="msFullscreenEnabled msFullscreenElement msRequestFullscreen msExitFullscreen MSFullscreenChange MSFullscreenError".split(" "),lc;"fullscreenEnabled"in document?lc=Object.keys(hc):ic[0]in document?lc=ic:jc[0]in document?lc=jc:kc[0]in document&&(lc=kc);function mc(a){if(void 0!==lc)a[lc[hc.requestFullscreen]]()}function nc(){void 0!==lc&&document[lc[hc.exitFullscreen]].bind(document)()}function oc(){return void 0===lc?!1:!!document[lc[hc.fullscreenEnabled]]}function I(){if(void 0!==lc)return document[lc[hc.fullscreenElement]]}function pc(){return void 0===lc?"":lc[hc.fullscreenchange]}
function qc(){return void 0===lc?"":("on"+lc[hc.fullscreenerror]).toLowerCase()};function rc(){var a=this;this.message=document.createElement("div");this.vb=document.createElement("div");this.qc=document.createElement("div");this.title=document.createElement("div");this.Ac=document.createElement("div");this.accept=document.createElement("div");this.Um=function(){};this.my=[];G(this.vb,"modalAlert");this.vb.style.display="none";this.vb.style.position="fixed";this.vb.style.overflow="auto";this.vb.style.top="0";this.vb.style.left="0";this.vb.style.width="100%";this.vb.style.height="100%";this.vb.style.zIndex="2000";G(this.qc,"dialog");this.qc.style.width="440px";this.qc.style.position="relative";this.qc.style.display="inline-block";this.qc.style.borderRadius="10px";this.qc.style.textAlign="left";this.qc.style.overflow="hidden";this.qc.style.zIndex="2001";this.qc.style.fontFamily="UbuntuRegular, Helvetica, Arial, sans-serif";this.title.style.display="block";this.title.style.fontSize="20px";this.title.style.paddingTop="20px";this.title.style.paddingLeft="20px";this.title.style.paddingRight="20px";this.title.style.whiteSpace="nowrap";this.title.style.fontWeight="bold";this.title.style.overflow="hidden";this.title.style.textOverflow="ellipsis";this.qc.appendChild(this.title);this.message.style.display="inline-block";this.message.style.wordWrap="break-word";this.message.style.padding="20px";this.message.style.textAlign="left";this.qc.appendChild(this.message);var b=document.createElement("div");G(b,"dialogForm");b.style.borderTopWidth="1px";b.style.borderTopStyle="solid";b.style.textAlign="center";b.style.height="40px";G(this.accept,"accept");this.accept.style.minWidth="70px";this.accept.style.padding="3px";this.accept.style.display="inline-block";this.accept.style.cssFloat="right";this.accept.style.position="relative";this.accept.style.top="7px";this.accept.style.right="10px";this.accept.style.boxSizing="border-box";this.accept.innerText="OK";this.accept.style.cursor="pointer";this.accept.style.borderWidth="1px";this.accept.style.borderStyle="solid";this.accept.onclick=function(c){c.stopPropagation();void 0!==a.Gj&&a.Gj();sc.Um()};b.appendChild(this.accept);G(this.Ac,"decline");this.Ac.style.minWidth="70px";this.Ac.style.padding="3px";this.Ac.style.display="inline-block";this.Ac.style.cssFloat="right";this.Ac.style.position="relative";this.Ac.style.top="7px";this.Ac.style.right="25px";this.Ac.innerText="Cancel";this.Ac.style.cursor="pointer";this.Ac.style.borderWidth="1px";this.Ac.style.borderStyle="solid";this.Ac.onclick=function(c){c.stopPropagation();void 0!==a.cm?a.cm():void 0!==a.Gj&&a.Gj();sc.Um()};b.appendChild(this.Ac);this.qc.appendChild(b);this.vb.appendChild(this.qc)}rc.prototype.resize=function(){this.qc.style.width=Math.min(440,document.documentElement.clientWidth-40)+"px";this.qc.style.left=Math.max(0,(this.vb.offsetWidth-this.qc.offsetWidth)/2)+"px";this.qc.style.top=Math.max(0,(this.vb.offsetHeight-80-this.qc.offsetHeight)/2)+"px"};rc.prototype.display=function(a,b,c,d,e){var f=this;d=void 0===d?!1:d;if(this.active)this.my.push({NB:a,Gj:b,cm:c,innerHTML:d,config:e});else{d?this.message.innerHTML=a:this.message.innerText=a;tc(this,e);this.vb.style.display="block";this.Gj=b;void 0===c?sc.Ac.style.display="none":(this.cm=c,sc.Ac.style.display="");var g=new ec,h=function(n){n.stopPropagation();n.preventDefault();gc(g,n)};fc(g,{keyCode:13,ij:!1,P:function(){b();f.Um()}});fc(g,{keyCode:27,ij:!1,P:function(){void 0!==c?c():b();f.Um()}});this.active=!0;var m=function(){f.resize()};v("keydown",document,h,!0);v("resize",window,m);v("orientationchange",window,m);this.Um=function(){try{x("keydown",document,h,!0)}catch(p){}try{x("resize",window,m)}catch(p){}f.vb.style.display="none";f.active=!1;f.vb.parentElement===document.body&&document.body.removeChild(f.vb);f.Gj=void 0;f.cm=void 0;var n=f.my.shift();void 0!==n&&f.display(n.NB,n.Gj,n.cm,n.innerHTML)};a=I();void 0!==a&&a?a.appendChild(this.vb):document.body.appendChild(this.vb);this.resize()}};function tc(a,b){void 0!==(null===b||void 0===b?void 0:b.title)?(a.title.style.display="block",a.title.innerText=b.title):a.title.style.display="none";a.accept.innerText=void 0!==(null===b||void 0===b?void 0:b.Lz)?b.Lz:"OK";a.Ac.innerText=void 0!==(null===b||void 0===b?void 0:b.GA)?b.GA:"Cancel"}var sc=new rc;function J(a,b,c){void 0===b&&(b=function(){});sc.display(a,b,void 0,void 0===c?!1:c,void 0)}
function uc(a,b,c){sc.display(a,null!==b&&void 0!==b?b:function(){},null!==c&&void 0!==c?c:function(){},!1,void 0)};var K=new D("roomLoaded",{Bd:100,fe:1}),vc=new D("roomCleanup",{Bd:20}),wc=new D("userViewedPm");new D("tipSent");var xc=new D("externalChatMessage");new D("context");new D("context");function yc(a){return{left:a.offsetLeft,top:a.offsetTop,width:a.offsetWidth,height:a.offsetHeight}}function zc(a,b,c){var d=Object.assign({},a);d.top=a.top+b;d.height=a.height-b;0>d.top?(d.height+=d.top,d.top=0):d.height<c&&(d.top-=c-d.height,d.height=c);return d}function Ac(a,b,c,d){var e=Object.assign({},a);e.height=a.height+b;e.top+e.height>d?e.height=d-e.top:e.height<c&&(e.height=c);return e}
function Bc(a,b,c){var d=Object.assign({},a);d.left=a.left+b;d.width=a.width-b;0>d.left?(d.width+=d.left,d.left=0):d.width<c&&(d.left-=c-d.width,d.width=c);return d}function Cc(a,b,c,d){var e=Object.assign({},a);e.width=a.width+b;e.left+e.width>d?e.width=d-e.left:e.width<c&&(e.width=c);return e};function Dc(a){F.call(this,"div",a);this.hc=new D("overlayClick")}r(Dc,F);k=Dc.prototype;k.ya=function(a){var b=this;F.prototype.ya.call(this,a);this.V=document.createElement("div");this.V.style.position="fixed";this.V.style.display="none";this.V.style.left="0";this.V.style.top="0";this.V.style.right="0";this.V.style.bottom="0";this.V.style.zIndex="1000";this.V.style.cursor="auto";this.V.onclick=function(c){c.stopPropagation();b.mb();b.hc.h(void 0)};this.element.style.zIndex="1001";this.element.onclick=function(c){c.stopPropagation()}};k.As=function(){var a=this;F.prototype.As.call(this);window.setTimeout(function(){a.Re()},0)};k.Re=function(){F.prototype.Re.call(this);null!==this.element.parentElement&&this.element.parentElement.insertBefore(this.V,this.element)};k.Vg=function(){this.V.style.display="block"};k.mb=function(){this.V.style.display="none"};k.Nf=function(){F.prototype.Nf.call(this);null!==this.V.parentElement&&this.V.parentElement.removeChild(this.V)};function Ec(a){a=a.toLowerCase().split(" ");for(var b=0;b<a.length;b+=1)a[b]=a[b].charAt(0).toUpperCase()+a[b].slice(1);return a.join(" ")}function Fc(a,b){return null===a||void 0===a||""===a?null===b||void 0===b?"":b:a};var L=window.gettext;void 0===L&&(w("gettext is undefined."),L=function(a){return a});var Gc=window.ngettext;void 0===Gc&&(w("ngettext is undefined."),Gc=function(a,b,c){return 1<c?b:a});var M=window.interpolate;void 0===M&&(w("interpolate is undefined."),M=function(a){return a});function Hc(a){return Gc("token","tokens",a)}function Ic(a){return M(L("Confirm tip of %(tokens)s tokens"),{tokens:a},!0)}function Jc(a){return M(L('room subject changed to "%(subject)s"'),{subject:a},!0)}
function Kc(a,b,c,d){a=M(L("Enter private chat with %(username)s?\n%(price)s tokens per minute, minimum %(minMinutes)s minute(s)\n\n"),{username:a,price:b,minMinutes:c},!0);return a=d?a+L("This broadcaster allows private show recordings, so you will receive a recorded video of this show in your collection."):a+L("This broadcaster does not allow private show recordings, so you will not receive a recorded video of this show in your collection.")}
function Lc(a){return M(L("Broadcaster %(username)s is running these apps: "),{username:a},!0)}function Mc(a){return M(L("PM conversation with %(username)s &lt;ctrl-l to close&gt;"),{username:a},!0)}function Nc(){var a=Oc.Ip;return M(L("Caution: The %(siteName)s Team will NEVER contact you via chat or ask for your password."),{siteName:a},!0)}L("SEND PM");L("Send PM");var Pc=L("You must be a supporter, fan club member, or moderator to send this private message."),Qc=L("You must be a supporter, fan club member, moderator, or have received a tip today from this user to send this private message."),Rc=L("Sign up for a"),Sc=L("Supporter Membership");function Tc(a){return M(L("to send a pm to %(pmUser)s"),{pmUser:a},!0)}function Uc(a){return M(L("%(username)s is ignored"),{username:a},!0)}function Vc(a){return M(L("Ignore %(username)s"),{username:a},!0)}
function Wc(a){return M(L("Ban %(username)s?"),{username:a},!0)}function Xc(a){return M(L("%(username)s has tipped me"),{username:a},!0)}function Yc(a){return M(L("%(tokens)s in the past hour"),{tokens:a},!0)}function Zc(a){return M(L("%(tokens)s in the past day"),{tokens:a},!0)}function $c(a){return M(L("%(tokens)s in the past 2 weeks"),{tokens:a},!0)}function ad(a){return M(L("Start Cam To Cam with %(username)s"),{username:a},!0)}
function bd(a){return M(L("You are currently showing your cam to %(room)s. If your cam has ended, please wait up to 1 minute to be able to broadcast again."),{room:a},!0)}function cd(a){return M(L("Private conversation with %(username)s"),{username:a},!0)}L("Join Chaturbate's community.");L("Chat live, follow broadcasters, access private shows, or earn money!");L("Sign Up Free");var dd=L("Chat Color"),ed=L("Font Family"),fd=L("Font Size"),gd=L("Show Emoticons"),hd=L("Autocomplete Delay");L("Sort Users");var id=L("Highest Token Color");L("Chat Allowed By");L("Moderators Expire After");L("Silence Other Age-Verified Broadcasters");L("Yes, Always");var jd=L("Tip Volume");L("Use New Tip Alerts");var kd=L("View/Edit Ignored Users"),ld=L("THE ACT OF MASTURBATING WHILE CHATTING ONLINE");L("CHAT ROOMS");L("BETA");L("TAGS");L("EARN FREE TOKENS");L("MY COLLECTION");var md=L("My Collection"),nd=L("Log in");L("Log In");var od=L("Sign Up");L("Sign up");var pd=L("Include an optional message:");L("Optional message:");var qd=L("Send Tip"),rd=L("SEND TIP"),sd=L("Send a tip");L("Send tip to broadcaster");var td=L("Public Tipping"),ud=L("Username is visible to all users."),vd=L("Anonymous Tipping"),wd=L("Username only visible to broadcaster."),yd=L("Send Anonymous Tip"),zd=L("Sending..."),Ad=L("Click OK to continue to supporter signup.");L("Include optional message");L("Tip note...");L("Tap to chat...");var Bd=L("This broadcaster doesn't accept tips."),Cd=L("Purchase Tokens"),Dd=L("Upgrade");L("Upgrade now");L("Supporter");L("Basic Member");L("MY PROFILE");L("LOG OUT");L("SEND FEEDBACK");var Ed=L("My Profile"),Fd=L("Log Out"),Gd=L("Send Feedback");L("Status");L("You have:");L("Get More");var Hd=L("Get more tokens"),Id=L("Get More Tokens"),Jd=L("Chat disconnected. The broadcaster has set a new password on this room."),Kd=L("Private"),Ld=L("Start Private Show"),Md=L("Spy on Private Show"),Nd=L("Private show has started."),Od=L("Private show has finished."),Pd=L("Private show has been declined."),Qd=L("Cancel Private Request"),Rd=L("Cannot cancel private show. Please try again in a few seconds."),Sd=L("Leave Private Show"),Td=L("Private show request has been sent. Waiting on broadcaster to approve."),Ud=L("Broadcaster has returned from away mode."),Vd=L("You were disconnected because you have joined this room again."),Wd=L("The broadcaster has kicked you from the room."),Xd=L("You were kicked from the room."),Yd=L("signup to chat"),Zd=L("About Me"),$d=L("Wish List");L("PURCHASED");L("OR");var ae=L("Photos and Videos"),be=L("Real Name"),ce=L("Followers"),de=L("I am"),ee=L("We are"),fe=L("Birthday");L("Birth Date");var ge=L("Age");L("Date");L("Action");var he=L("Body Type"),ie=L("Body Decorations"),je=L("Interested In"),ke=L("Location");L("Language(s)");var le=L("Last Broadcast"),me=L("Languages"),ne=L("Smoke Drink");L("Smoke / Drink");var oe=L("User has no available BIO");L("Bio and Free Webcam");L("Unable to submit");L("Submitting...");var pe=L("Loading"),qe=L("loading"),re=L("SETTINGS"),se=L("Settings"),te=L("Chat settings saved"),ue=L("CHAT"),ve=L("SEND"),we=L("Send"),xe=L("TIP"),ye=L("Tip"),ze=L("Users"),Ae=L("USERS"),Be=L("a user"),Ce=L("Report Abuse"),De=L("REPORT ABUSE"),Ee=L("More Rooms"),Fe=L("spy private show"),Ge=L("Unfollow");L("unfollow");var He=L("Follow");L("NOTIFY ME");L("Always");L("Auto");L("Never");var Ie=L("Refresh Rooms"),Je=L("Women");L("WOMEN");L("women");var Ke=L("Men");L("MEN");L("men");var Le=L("Trans");L("TRANS");var Me=L("Couples");L("COUPLES");L("couples");L("Followed");L("FOLLOWED");L("SPY SHOWS");var Ne=L("SAVE"),Oe=L("Save");L("Standard Emoticons");var Pe=L("Recently used"),Qe=L("Smileys & People"),Re=L("Animals & Nature"),Se=L("Food & Drink"),Te=L("Activities"),Ue=L("Travel & Places"),Ve=L("Objects"),We=L("Symbols"),Xe=L("Flags"),Ye=L("Upload"),Ze=L("Tone"),$e=L("Your current balance:");L("Balance:");L("Token Balance");var af=L("You currently have: "),bf=L("WARNING: This room has a low satisfaction rating."),cf=L("TIP AT YOUR OWN RISK!"),df=L("Enter tip amount:"),ef=L("Invalid tip amount!");L("Amount:");var ff=L("Toggle this window with CTRL-S"),jf=L("Leave open after tipping"),kf=L("Select One"),lf=L("Please select a reason"),mf=L("Loading user list"),nf=L("refresh userlist"),of=L("Send private message"),pf=L("Mention this user");L("HIDE ALL ADS NOW");L("Powered by ExoticAds<br>Buy/Sell Traffic");L("Show More");L("Pics & Videos");var qf=L("Social Media");L("Unique Registered Viewers Watching");L("Points");L("Current Hour's Top Cams");L("Every hour, the cam with the most points wins a $10 prize. The cam in 2nd place wins a $5 prize.");L("Apps & Bots");L("Customize your chat room experience by launching an app or using bots to make your room unique. Explore a wide array of options, or even write your own app with javascript at the <a href='/apps/' target='_blank' rel='noopener noreferrer'>Apps and Bots page</a>.");L("Games");L("dismiss this message");L("Only 5 #hashtags will be applied");var rf=L("dismiss"),sf=L("Register later"),tf=L("Already have an account?"),uf=L("Login here");L("Please sign in using the form below");var vf=L("Username"),wf=L("Password");L("Prove you are human");var xf=L("Keep me logged in"),yf=L("Forgot password?");L("Incorrect password");L("Incorrect captcha");L("Create Free Account");L("We've improved Chaturbate's mobile site by adding these feature(s):");L("Satisfaction Voting");L("Visit the ");L("mobile site");L("survey");L(" again, or give us some ");L("feedback");L(" on why you left.");L("Or ");var zf=L("or");L("the mobile site");L("FOLLOWER BROWSER NOTIFICATIONS");L("Would you like to receive browser notifications when a broadcaster you follow comes online?");L("Subscription failure. Please try again from the Settings & Privacy page on your profile.");L("Yes");L("Not now");L("This room requires a password.");L("Login to room");L("Moderators");L("Remove Moderators");L("Non-Moderators");var Af=L("Remove Ignored Users"),Bf=L("Unignore this user"),Cf=L("Unignored Users");L("Ignore");var Df=L("Ignore this user"),Ef=L("Report this message"),Ff=L("Ignored Users"),Gf=L("Click on a user to unignore them."),Hf=L("Select a user from the list to unignore them.");L("Click on a user to revoke their moderator status.");var If=L("You must be logged in to ignore a user"),Jf=L("Room is currently offline");L("Follow broadcasters to receive instant notifications when they come online.");L("UNFOLLOW");L("FOLLOW");L("Share");L("Bio");L("Contest Stats");L("Settings & Privacy");L("Settings saved");L("Token Stats");L("Memberships");L("Submit feedback to broadcaster");L("Optional comment for broadcaster:");L("Submitted");L("SATISFIED?");L("Satisfied?");L("SCAN CAMS");L("NEXT CAM");L("SCAN / NEXT");L("SCAN");L("SKIP CAM");L("EXIT SCANNING");L("Token Linkcodes");L("Earn up to 10 tokens for every registered user and 500 tokens for users who broadcast (broadcasters must earn $20.00 before they qualify).");L("Please send to chaturbate using one of the link codes below.");L("Embed Chaturbate's Top Cam on Your Webpage");L("the affiliate program stats");L("See details about tokens earned in ");L('Your browser is outdated and may not function correctly. Update it for the best Chaturbate experience and new features. <br> We recommend <a href="https://www.google.com/chrome/">Chrome</a>, <a href="https://www.mozilla.org/firefox/">Firefox</a>, or <a href="https://www.microsoft.com/edge">Edge</a>');L('Add an extra layer of protection to your account by setting up 2-Step Verification at the <a href="/security/">Security Center</a>');var Kf=L("Silence for 6 hours"),Lf=L("Remove Silence"),Mf=L("Theater Mode"),Nf=L("Full Screen"),Of=L("Exit Full Screen"),Pf=L("Split Mode"),Qf=L("unknown"),Rf=L("Show All"),Sf=L(" to follow your favorite broadcasters and see when they are live."),Tf=L("Follow your favorite broadcasters to see when they are live.");L("Promote your room");L("Not enough tokens.");L("Purchase more tokens");L("You are no longer eligible to promote your room.");L("User promotion currently unavailable - please check your settings.");L("You must be logged in to promote your room.");L("You must be broadcasting to promote your room.");L("Get More Viewers");L("Add your room to a rotating promoted spot on the homepage for 5 minutes.");L("details");L("Promote now");L("In Progress");L("Get more tokens");L("Current price");L("Setting up user promotion...");L("Promotion ending...");L("Unknown error occurred while retrieving promotion purchase price. Please try again.");L("Unknown error occurred while purchasing user promotion. Please try again.");L("Loading new pricing...");L("Announce you're online");L("Announce again in ");L("You have 1 follower");L("Send email and browser notifications to your followers.");L("Add a photo");L("Update photo");L("Must be non-nude");L("Recommended size: 1280 x 720 px");L("Shown in notification and featured emails");L("Send notifications");L("In Progress");L("New photos must be approved. If not approved in 15 minutes, email notifications will be sent without a photo.");L("You have no followers to notify.");L("Are you sure you want to notify your followers without an image?");L("Please use a jpeg, gif, or png image.");L("Image must not be larger than 10 megabytes.");L("A notification has already been sent.");L("Something went wrong after submit. Please try again.");L("Something went wrong during submit. Please try again.");L("Image must be at least 200px wide and 200px tall.");L("Image is too wide.");L("Image is too tall.");L("Please wait until all pending notifications have been sent.");L("Remove approved photo?");L("Sorry, this feature is not supported in your browser. Please upgrade to a modern browser like Chrome or Firefox.");var Uf=L("Close"),Vf=L("Cancel");L("cancel");var Wf=L("CANCEL");L("SUBMIT");L("Submit");L("You have unsaved changes, are you sure you want to leave this page?");var Xf=L("Choose a category");L("Abuse Report");var Yf=L("Broadcaster is underage"),Zf=L("Broadcaster is advertising"),$f=L("Broadcaster is abusive"),ag=L("Broadcaster is intoxicated"),bg=L("Using a toy that is too large"),cg=L("Asking for offline payments"),dg=L("Broadcasting in public"),eg=L("Broadcasting in service uniform"),fg=L("Broadcaster is sleeping"),gg=L("Broadcaster is wrong gender"),hg=L("Other");L("Please choose a category");var ig=L("Additional comments:"),jg=L("Please add a description"),kg=L("Message is inappropriate"),lg=L("Message is rude towards the broadcaster"),mg=L("Message is spam"),ng=L("Other (please describe):"),og=L("User is inappropriate"),pg=L("User is rude towards the broadcaster"),qg=L("User is spam"),rg=L("Other (please describe):"),sg=L("Report"),tg=L("REPORT"),ug=L("Unable to send report."),vg=L("Too many reports sent. Try slowing down."),wg=L("There was an error requesting your private show. Please try again."),xg=L("There was an error requesting your spy show. Please try again."),yg=L("Private Shows"),zg=L("Are you sure?"),Ag=L("This broadcaster allows private show recordings, so you will receive a recorded video of this show in your collection.");L("You may continue chatting while you wait for the broadcaster to return.");L("Performer Is Away");L("Group Show");var Bg=L("LEAVE PRIVATE SHOW"),Cg=L("CANCEL PRIVATE REQUEST"),Dg=L("START PRIVATE SHOW");L("SPY PRIVATE SHOW");var Eg=L("LEAVE SPY SHOW"),Fg=L("Private Show");L("Private Show in Progress");var Gg=L("This feature is not currently enabled on your device."),Hg=L('You must be logged in to enter a private show. Click "OK" to login.'),Ig=L('You must be logged in to spy on a private show. Click "OK" to login.'),Jg=L("Spy has been disabled by the broadcaster");L("More Rooms Like This");L("Here are some trending rooms instead:");L("RECOMMENDED");L("OFFLINE");L("EXHIBITIONIST");L("NEW");L("HD");L("HD+");L("IN PRIVATE");L("GAMING");L("CHATURBATING");L("BROADCASTING");L("HIDDEN - STAFF ONLY");var Kg=L("View on Twitter"),Lg=L("Show tips and messages"),Mg=L("How Can We Improve?"),Ng=L("Updates");L("This user has not added any photos or videos yet.");L("More Pics & Videos");L("FAN");L("CLUB");L("Tokens");L("Token");L("Uploaded");L("If you already purchased this photo set, try reloading the page to view it.");L("If you already purchased this video, try reloading the page to view it.");L("minutes");L("seconds");L("or");L("View Hi-Res Image");L('You must be logged in to purchase this photo set.  Click "OK" to login.');L('You must be logged in to view hi-res images.  Click "OK" to login.');L('You must be logged in to purchase this video.  Click "OK" to login.');L('Click "OK" to get more tokens.');L("Upload more Photos");L("Re-Order Items");L("Change video thumbnail image");L("Edit Details");L("Compliance");L("Deactivate");L("STAFF");L("Audio is disabled.");L("Audio muted to remove music");L("Enable Audio");L("(Check compliance for eligibility before enabling)");L("(Removes this item from being seen on the bio but does not remove from anyone's MyCollection.  To remove from MyCollections, reject in Compliance instead of deactivating.)");L("FAILED");L("PENDING");L("APPROVAL");L("VIDEO");L("PROCESSING");L("ERROR");L("Failed Approval");L("Please delete or edit offending items.");L("Open in new window");var Og=L("iPad has failed to setup the broadcast. Please try again."),Pg=L("Please check your internet connection or close other applications"),Qg=L("No camera found."),Rg=L("Permission to use your camera and microphone is currently denied."),Sg=L("We need permission to use your camera and microphone in order to proceed."),Tg=L("Visit our <a class=\"hrefColor\" target='_blank' href='https://support.chaturbate.com/hc/en-us/articles/360040862791'>support page</a> for help enabling your devices."),Ug=L("Request Device Permissions");L("support page");var Vg=L("Make sure there are no other broadcast tabs open."),Wg=L("Low FPS"),Yg=L("Are you sure you want to leave?"),Zg=L('This private show has ended. To give you\ntime to prepare, you are now shown as "Away" to\nthose in your room. To return and be visible on\ncam, click "Exit Away Mode" below.'),$g=L("Exit Away Mode"),ah=L("Could not get devices"),bh=L("Turn your device 180 degrees."),ch=L("Turn your device into landscape mode."),dh=L("Camera"),eh=L("Resolution"),fh=L("Microphone"),gh=L("Input Level"),hh=L("Mute"),ih=L("None (Silent)"),jh=L("Start Broadcasting"),kh=L("Stop Broadcasting"),lh=L("You Are Away"),mh=L("For high quality streams we strongly recommend"),nh=L("Use external software (OBS)"),oh=L("Please wait. Connecting in"),ph=L("Could not start broadcast"),qh=L("Welcome back"),rh=L("Could not setup preview. Please make any possible adjustments and reload the page"),sh=L("Could not setup broadcast"),th=L("My Cam Preview"),uh=L("Cam To Cam"),vh=L("Stop Cam To Cam"),wh=L("Unable to share cam: You are already broadcasting from another window or tab"),xh=L("Your cam will not be visible to other users."),yh=L("The cam icon will turn orange when the broadcaster is viewing you."),zh=L("Error sharing cam"),Ah=L("Error sharing cam: Timed out trying to connect");L("Error viewing cam");var Bh=L("Unable to share cam: Make sure you are connected to chat and the broadcast is playing"),Ch=L("Unable to share cam: Broadcaster is in a private show");L("You are not allowed to share your cam with this user");var Dh=L("Sharing your cam is only available to users who have purchased tokens. Click OK to purchase tokens now.");L("Sharing your cam will remove your room password");L("Viewer ");L(" started sharing their cam");L(" stopped sharing their cam");var Eh=L(" started viewing your cam"),Gh=L(" stopped viewing your cam"),Hh=L("is currently viewing your cam"),Ih=L("is not currently viewing your cam"),Jh=L("Muted"),Kh=L("Close Cam");L("Block Cam");L("Pop Out Cam");L("Report Cam");L("Are you sure you want to block");L("User is broadcasting in public");L("User is rude/abusive");L("User is intoxicated");L("User is sleeping");L("User is spamming");L("User is underage");var Lh=L("My Cam");L("View Cam");L("Stop Viewing Cam");L("Unable to view cam: A maximum of five cams can be viewed at once");L("Unable to view cam: This viewer is no longer sharing their cam");var Mh=L("Leaving this page will end your cam. Click OK to proceed."),Nh=L("has left the room."),Oh=L("Follow to be notified when online."),Ph=L("Describe your issue or share your ideas:"),Qh=L("Some account and system information may be sent to %SITE_NAME%. We will use the information you give us to help address technical issues to improve our services, subject to our Privacy Policy and Terms of Service."),Rh=L("Send feedback"),Sh=L("Add screenshot"),Th=L("Scroll down to capture lower on the page"),Uh=L("Scroll up to capture higher on the page"),Vh=L("Click to highlight or hide info"),Wh=L("Highlight issues with orange or hide sensitive info with black. Hit the ESC key to finish."),Xh=L("Highlight issue"),Yh=L("Hide sensitive info"),Zh=L("Permission to capture screen not granted"),$h=L("Could not capture screen"),ai=L("Please take screenshot again after resizing"),bi=L("Your feedback has been sent! Thank you for your feedback."),ci=L("Something went wrong. Please try again later."),di=L("Please wait before submitting more feedback."),ei=L("Unable to submit feedback. Please contact support."),fi=L("Done");L("Watching");L("Deny Private");L("Accept Private");L("Return to Public Chat");L("Your private show has ended.");L("Your camera will remain hidden until you re-enter public chat.");L("You're about to stop the group show. Do you want to continue?");L("You're about to stop the private show. Do you want to continue?");L("Error broadcasting");var gi=L("Font Settings"),hi=L("Emoticons Settings"),ii=L("Users Settings"),ji=L("Notifications Settings"),ki=L("Other Settings");L("You have no users ignored.");L("Back to Settings");var li=L("Notify on Entry For"),mi=L("Notify on Leave For"),ni=L("No new updates");L("The video is currently being processed.  It may take several minutes depending on the size of the video.");L("The video is damaged or its format is not supported.");L("Please delete this video and reupload again.");var oi=L("You must be a supporter to use this feature.");L("To disable, go to ");L(' on the homepage and uncheck "Enable floating player".');L("Options");L('You must be logged in to Follow. Click "OK" to login.');var pi=L("Log in or sign up to use this feature"),qi=L("Log in to continue"),ri=L("Don't have an account yet?"),si=L("Tipped Tons"),ti=L("1000+ tokens in the past 2 weeks"),ui=L("Tipped Lots"),vi=L("250+ tokens in the past 2 weeks"),wi=L("Tipped Recently"),xi=L("50+ tokens in the past 2 weeks"),yi=L("Purchased Tokens"),zi=L("Has bought tokens"),Ai=L("Fan Club Member"),Bi=L("Moderator"),Ci=L("Broadcaster");L('<a class="hrefColor" href="/supporter/upgrade/" >Upgrade to supporter</a> for no ads, private messaging, and more!');L("Outbound Tip");L("Tip From");L("Transfer tokens to cash");L("Transfer tokens to advertising credit");L("Referred Member");L("Admin Adjustment");L("This has been resolved by an administrator");L("email");L("Spy Show");L("Fan Club Membership");L("Broadcaster Rules: Tokens are the only form of payment allowed. You may promote your personal website as long as it does not offer video chat. Do not provide your Skype or Yahoo Messenger to anyone, and do not ask users to chat with you elsewhere.");L("Use External Encoder to Broadcast");L("Use the legacy in-browser broadcast");L("Broadcast yourself using Open Broadcaster Software (OBS)");L("Accept");L("Decline");L("User(s) Token Rate");L("Private Show Stats");L("Exit Private Show");L("Use the Apps & Bots tab below to select an app and up to 5 bots to enhance your room.");L('You must <a class="hrefColor" href="/accounts/age_verification/"> submit age verification </a> to enable the ability to receive tokens while broadcasting.');L("Disabled");L("Allowed");L("Privates");L("Broadcaster's Guide");L("Age Verification");L('All persons appearing on your cam must have approved <a href="/accounts/age_verification/" style="color:#0A5A83">age verification</a> on file prior to appearing.');L("Tutorial Videos");L('Users and broadcasters have created <a href="https://vimeo.com/chaturbate" target="_blank" style="color:#0A5A83">videos</a> to teach you how to Chaturbate and earn money. You can view them on <a href="https://vimeo.com/chaturbate" target="_blank" style="color:#0A5A83">Chaturbate\'s Vimeo channel</a>.');L("Money Making Tips");L("Get an HD camera to receive the HD tag on your room.");L("Members love hearing you. Make sure to turn your microphone on and greet users by name.");L("Ask your users to type ':tipher' in order to enable emoticons that encourage members to tip");L("Grow Your User Base");L("Encourage viewers to 'Follow' you.");L("Send private messages to blue users and use the [Tab Key] to switch between PM windows.");L("Update your bio with colors and feature top tippers and longest fan club members.");L("Encourage users to raise their spending limits and get 200 tokens for free.");L("Broadcast on a known schedule so your biggest fans always know when to find you.");L("Fan Clubs");L('Enable your fan club in the "Settings & Privacy" tab to earn extra income.');L("Click On a Username To");L("Send a user a PM");L("Add/Remove a Moderator");L("Ignore a user's messages");L("Silence a user for 6 hours");L("Kick/Ban a user for 30 days");L("Assign Moderators");L("Those you trust can help monitor your chat room and silence troublemakers");L("Change Room Subject");L("Click on the room subject at the top of your broadcast to change the text, list token goals, and input all other forms of useful information.");L('<span style="background-color: #FF3;">Tips Are Highlighted</span>');L("Be sure to thank those who are generous enough to tip you.");L("Username Colors");L('<span style="color: #DC5500">Orange</span> names are Broadcasters');L('<span style="color: #ff0000">Red</span> names are Moderators');L('<span style="color: #090">Green</span> names are fan club members');L('<span style="color: #804baa">Dark Purple</span> names have tipped at least 1000 tokens in the past 2 weeks');L('<span style="color: #be6aff">Light Purple</span> names have tipped at least 250 tokens in the past 2 weeks');L('<span style="color: #009">Dark Blue</span> names have tipped at least 50 tokens in the past 2 weeks');L('<span style="color: #69A">Light Blue</span> names own or have purchased tokens');L('<span style="color: #666">Grey</span> names have no tokens');L("Checking Stats");L('Click on the "Contest Stats" and "Token Stats" tabs to see how much money you\'ve earned broadcasting.');L("Trouble Broadcasting?");L('Ensure you are running the latest version of your browser, we recommend Chrome, Firefox or Safari. If you are still having issues, <a href="https://support.chaturbate.com/hc/en-us/requests/new" style="color:#0A5A83">contact support</a>.');L("My Broadcast");L("Your room is password protected. Users may not enter your room unless they know your password. To remove your password, edit your settings & privacy.");var Di=L("Kick/Ban"),Ei=L("Remove Moderator Status"),Fi=L("Promote to Moderator");L("WARNING: Never show or share your broadcast token with anyone!");L("Your broadcast token");L("RTMP/OBS Broadcasting Information");L("Click here to view our OBS Setup Guide");L("Important Information");L("Do not upscale your source input (e.g. using a 1080p camera to a 1440p stream).");L("Ensure you use the minimum video bitrate specified in this table for a given resolution");L("You may only have copyrighted content -- including music, movies, and video games -- in your stream if you are the rights holder or have the permission of all rights holders.");L("Recommended Settings Table");L("Generate a new broadcast token? \n(This will invalidate your prior RTMP / OBS token and disconnect your current broadcast)");L('This is your satisfaction score. You can hide this by setting "Show my satisfaction score" to "No" in the Settings & Privacy tab.');L("This data is updated once per day and is based on votes in the past 90 days.");L("Click on your score (%) to view your rating history.");L("Fetching rating history");L("No history to show");L("Active App");L("Active Game");L("Bot #1");L("Bot #2");L("Bot #3");L("Bot #4");L("Bot #5");L("None Selected");L("Deactivate This App");L("Choose an App");L("Choose a Bot");L("Choose a Game");L("End Game");L("Stop streaming game");L("Are you a publisher?");L("Add your game.");L("Restart");L("Add new social media");L('You must be <a href="/accounts/age_verification/">age verified</a> to add new social media');L('You must purchase tokens or be <a href="/accounts/age_verification/">age verified</a> to add new photos and videos');L("Upload new pics");L("Upload new videos");L("Edit Your Bio");L("Current Contest Statistics for");L("Payout Information");L("Refresh Stats");L("See contest details");L("Manage photo sets");L("Update Bio");L("January");L("February");L("March");L("April");L("May");L("June");L("July");L("August");L("September");L("October");L("November");L("December");L("Expired Fan Club Memberships");L("Expired Social Media Subscriptions");L("You Have No Active Memberships");L("Expires");L("Expired");L("Extend by 3 months");L("Renews");L("renew");L("can't renew");L("can't extend");L("No email address on file");L("Blocked countries");L("Able to view");L("Blocked regions");L("Security");L("Statistics");L("Update Settings");L("Change your password");L("View the security center and adjust Two-Step Verification settings");L("Authorize your 3rd party stats");L("Add an email address");L("Change email address");L("E-mail Verified");L("Resend verification email");L("Verification Email Sent");L("Email is Unverified. Verify to receive follower notifications and newsletters.");L("Detailed Income Stats");L("Payment Information Form");L("required for payments");L("Broadcaster Verification Form");L("Download Transaction History");L("Please wait for the file to be generated");L("Download your last 30 days of transactions?\nProcessing may take up to 20 seconds.");L("Your Account's Activity");L("Latest cashouts");L("tokens are automatically cashed out at midnight");L("Please verify your identity to enable tokens on your account");L("Transfer Tokens");L("Tokens transferred on the 1st-15th of the month will be sent by the 22nd. Tokens transferred on the 16th-31st will be sent by the 7th.");L("Listed are users currently silenced from your room. Silences expire after 6 hours by default. You can convert a silence to a ban.");L("Listed are users currently banned from your room. Bans expire after 1 month by default. You can convert a ban to a permanent ban.");L("Banned");L("Silenced");L("Actions");L("Remove");L("Make Permanent");L("Convert to Ban");L("Click here to clear hidden silences and bans");L("Add ban");L("Enter Username To Ban");L("View/Edit Bans and Silences");L("View/Edit Moderators");L("View Fan Club Members");L("View/Edit Region Block Exemptions");L("Alphabetically");L("All Users");L("Users who tipped me today");L("Users who have tipped me");L("Users who have tokens");L("1 Day");L("2 Days");L("1 Week");L("2 Weeks");L("1 Month");L("2 Months");L("6 Months");L("No");L("Yes");L("Yes, only if they're broadcasting now");L("Age Verification Required");L("Only age verified broadcasters can change this setting");L("Listed are your current fan club members, the date they last joined, and the total number of months they've been your fan (Expiring memberships have a short grace period to renew before removed from your fanclub.)");L("Listed are all of your fan club members past and present and how long they were a member for. Current members are <strong>highlighted</strong>.");L("Add username");L("Add");L("No Region Block Exemptions");L("Unique Registered Viewers");L("Your Points");L("Your Rank");L("You may use some HTML tags (a p i strong b u ul ol li h1 h2 h3 img font br span).");L("You may post links to external wish lists (amazon wish list, for example) and use some HTML tags (a p i strong b u ul ol li h1 h2 h3 img font br).");L("Display Name");L("Display Birthday");L("Interested in");L("Spoken languages");L("Wish Lists");L("Join Fan Club");L("Member");L("Fan Club Member");L("Last Joined");L("Total Months a Member");L("Improve Video Quality");var Gi=L("Dark Mode");L("Search");L("Broadcasting right now");L("Recently online");var Hi=L("TAP TO UNMUTE");L("Modify Supporter Membership");L("Yes, cancel the membership");L("No, keep the features");L("Cancellation Successful");L("Send and close");L("Supporter Plan");L("Renew subscription");L("Why did you decide to cancel your membership plan? (Optional)");L("Would you like to cancel your supporter membership and lose all your supporter features?");L("You are about to renew your subscription.");L("Cancellation Failed");L("OK");L("Error, please try and refresh your window.");L("Please note that the 'Room subject' of your broadcast and the 'Location' field of your bio may not be used for promotion of social media or other websites. Thank you for your understanding.");var Ii=L("Note");L("Notes");var Ji=L("Loading..."),Ki=L("Enter notes about this user (only seen by you)"),Li=L("(unsaved)");L("Type a message...");L("Close tab");L("Ctrl + l to close tab");L("One of your linked Guests has become inactive. <a href='/accounts/age_verification/'>Review your Guests</a> now.");var Mi=L("Back"),Ni=L("Loading More Messages");L("Report this user");var Oi=L("Send a private message");L("Private Messages");L("Don't have an account?");var Pi=L("Search users"),Qi=L("now"),Ri=L("1 minute ago"),Si=L("an hour ago"),Ti=L("a day ago"),Ui=L("minutes ago"),Vi=L("hours ago"),Wi=L("days ago");L("To avoid ending the private show, a new tab will open. Click OK to continue.");L("We launched the new Cam To Cam feature last month, hoping that this would be the best way to share your cam with broadcasters you are watching. You can help improve this feature by taking 30 seconds to complete a ");var Xi=L("Accept Rules"),Yi=L("Chat"),Zi=L("Unmute");L("Clean, Ad-Free Interface");L("Custom Chat Font & Color Options");L("Private Messaging");L("Anonymous Tipping");L("Animate Room Images");L("There was an error cancelling your Fan Club.");L("Are you sure you wish to remove your supporter status? You will remain a supporter until your currently paid month expires.");L("There was an error cancelling your supporter membership.");L("You can renew after membership expires.");L("Since");var $i=L("Ban removed"),aj=L("Silence removed"),bj=L("Error removing ban, please try again"),cj=L("Error converting to ban, please try again"),dj=L("Error removing silence \u2013\u2013\u00a0it may have already been removed"),ej=L("Undo"),fj=L("Ban"),gj=L("Cam To Cam is the best way to share your cam with broadcasters you are watching.");L("trans viewers");L("and");L("How is Chaturbate doing today?");L("Your feedback has been sent!");L("Describe your issues or share your ideas.");L("You will no longer receive notifications or see them in your followed tab.");L("Switch to OBS to stream games");L("Select your game from the list of approved games below.");L("Install and start the game");L("Download and and run the game.");L("Download OBS and set it up");L("Authorize this game");var hj=L("Pro tip: Viewers who use Cam To Cam tip 50% more on average than viewers who don\u2019t. Encouraging your viewers to share their cam can build a more intimate connection and potentially earn you more tokens!");function ij(a,b,c){new Promise(function(d){var e;I()?(nc(),window.setTimeout(function(){var f=window.open(a,b,c,void 0);null!==f&&window.setTimeout(function(){f.focus()},200);d(null!==f&&void 0!==f?f:void 0)},500)):d(null!==(e=window.open(a,b,c,void 0))&&void 0!==e?e:void 0)})}var jj="",kj="";"hidden"in document?(jj="hidden",kj="visibilitychange"):"msHidden"in document?(jj="msHidden",kj="msvisibilitychange"):"webkitHidden"in document&&(jj="webkitHidden",kj="webkitvisibilitychange");var lj=new D("documentVisibilityChange",{fe:1}),mj=!document[jj];function nj(a){mj!==a&&(mj=a,lj.h(mj))}if(""!==jj&&""!==kj){var oj=function(){nj(!document[jj])};v(kj,document,oj);var pj=function(){x(kj,document,oj);x("pagehide",window,pj);nj(!1);v("pagehide",window,function(){nj(!1)});v("pageshow",window,function(){nj(!0)})};v("pagehide",window,pj)}else v("blur",window,function(){nj(!1)}),v("focus",window,function(){nj(!0)});var qj=new D("bioClicked"),rj=new D("userListRequest"),sj=new D("openTipCalloutRequest"),tj=new D("loadRoomRequest"),uj=new D("reportAbuseRequest"),vj=new D("privateWindowRequest"),wj=new D("chatWindowRequest"),xj=new D("colorModeChangeRequest"),yj=new D("roomChangeColorModeUpdateRequest");var zj=new D("navigationRequest");var Aj=new D("modalReposition");v("resize",window,function(){Aj.h(void 0)});v("orientationchange",window,function(){Aj.h(void 0)});var Bj=new D("modalFullscreenChange");v(pc(),document,function(){Bj.h(void 0)});var Cj=new D("modalEscape");v("keydown",document,function(a){27===a.keyCode&&Cj.h(a)});var Dj=new D("modalExit");v("popstate",window,function(){Dj.h(void 0)});zj.j(function(){Dj.h(void 0)});var Ej=new D("modalOpened");function Fj(a){a=void 0===a?{ul:!0}:a;F.call(this);var b=this;this.options=a;this.hc=new D("overlayClick");this.J=new Yb;this.mp=this.bt=this.mb=this.jk=!1;this.V=document.createElement("div");this.V.style.position="fixed";this.V.style.display="none";this.V.style.left="0";this.V.style.top="0";this.V.style.right="0";this.V.style.bottom="0";this.V.style.zIndex="1100";this.V.style.background="rgb(0,0,0,0)";this.V.onclick=function(c){c.stopPropagation();b.hc.h(void 0);b.bt||b.D()};this.element.style.zIndex="1101";this.element.onclick=function(c){c.stopPropagation()};this.rC=function(){b.jk&&b.Y()};this.dB=function(){b.jk&&b.show()}}r(Fj,F);Fj.prototype.show=function(){var a=this,b=I();I()&&void 0!==b?(b.appendChild(this.V),b.appendChild(this.element)):(document.body.appendChild(this.V),document.body.appendChild(this.element));this.jk||(B(Aj.j(this.rC,!1),this.J),B(Bj.j(this.dB,!1),this.J),B(Dj.j(function(){a.D()},!1),this.J),this.options.ul&&B(Cj.j(function(c){c.preventDefault();a.D()},!1),this.J),this.mp&&Ej.h(!0),void 0!==this.options.vk&&this.options.vk(),this.jk=!0);this.mb||(this.V.style.display="block")};Fj.prototype.D=function(){this.V.style.display="none";null!==this.element.parentElement&&this.element.parentElement.removeChild(this.element);null!==this.V.parentElement&&this.V.parentElement.removeChild(this.V);this.jk&&(Zb(this.J),this.mp&&Ej.h(!1),void 0!==this.options.tk&&this.options.tk(),this.jk=!1)};function Gj(){function a(y){if("close"===y.data)g.hl=!0,e();else if("hide-spinner"===y.data)g.bz.style.display="none";else if("crypto-submit"===y.data)g.hl=!1,g.V.onclick=function(C){C.preventDefault()},p.onclick=function(C){C.preventDefault()};else if("crypto-error"===y.data)g.hl=!0,g.V.onclick=function(C){C.stopPropagation();e();g.hc.h(void 0)},p.onclick=e;else if(0===y.data.indexOf("crypto-redirect: "))b(y.data.substring(17),950,780);else if(0===y.data.indexOf("billing-redirect: "))b(y.data.substring(18),715,430);else if(0<=y.origin.indexOf(window.location.hostname)){switch(y.data){case "/tipping/purchase_tokens/":n.style.display="none"}p.onclick=e;null!==h.contentWindow&&v("keydown",h.contentWindow,d)}}function b(y,C,E){window.open(y,"_blank","status=0,toolbar=0,menubar=0,directories=0,resizable=1,scrollbars=1,height="+C+",width="+E);g.hl=!0;e()}function c(y){var C=document.createElement("div");C.style.position="absolute";C.style.width="3px";C.style.height="15px";C.style.left="5px";C.style.background="#C4C4C4";C.style.transform=y;return C}function d(y){"Esc"!==y.key&&"Escape"!==y.key||e()}function e(){g.hl&&!g.hs&&(g.hs=!0,x("message",window,a),x("keydown",document,d),f())}function f(){clearInterval(g.sC);g.element.style.opacity="0";g.content.style.right="-500px";window.setTimeout(function(){g.D()},500)}Fj.call(this,{ul:!1});var g=this;this.hs=!1;this.hl=!0;this.width=430;this.Qq=135;this.url="/tipping/purchase_tokens/"+window.location.search;this.element.style.width=this.width+20+"px";this.element.style.position="fixed";this.element.style.right="0";this.element.style.top=this.Qq+"px";this.element.style.minHeight="200px";this.element.style.zIndex="1001";this.element.style.overflow="hidden";this.element.style.opacity="0";this.element.style.transition="opacity 1s";this.element.style.zIndex="1003";this.V.style.zIndex="1002";this.V.style.background="rgba(0, 0, 0, 0.5)";this.content=document.createElement("div");this.content.style.position="absolute";this.content.style.right="-500px";this.content.style.minHeight="200px";this.content.style.maxHeight="735px";this.content.style.width=this.width+"px";this.content.style.border="1px solid #ccc";this.content.style.borderRadius="5px";this.content.style.background="#FFF";this.content.style.transition="right 500ms";this.content.style.zIndex="1002";this.element.appendChild(this.content);var h=Hj(this),m=document.createElement("div");this.content.appendChild(m);var n=Ij();m.appendChild(n);var p=document.createElement("div");p.onclick=f;p.style.display="inline-block";p.style.height="12.73px";p.style.width="12.73px";p.style.cursor="pointer";p.style.position="absolute";p.style.right="15px";p.style.top="10px";p.appendChild(c("rotate(-135deg)"));p.appendChild(c("rotate(-45deg)"));m.appendChild(p);this.bz=this.Yq();this.content.appendChild(this.bz);this.V.onclick=function(y){y.stopPropagation();e();g.hc.h(void 0)};n.onclick=function(){h.src=g.url};h.onload=function(){clearInterval(g.sC);var y=document.createElement("a");y.href=h.src;-1===g.url.indexOf(""+y.pathname+
y.search)&&(n.style.display="inline-block",p.onclick=f)};window.setTimeout(function(){g.content.appendChild(h)},1);v("message",window,a);v("keydown",document,d);this.show();window.setTimeout(function(){h.style.opacity="1"},1E3);this.G()}r(Gj,Fj);function Hj(a){var b=document.createElement("iframe");b.className="purchaseFrame";b.src=a.url;b.style.border="none";b.style.padding="0";b.style.background="transparent";b.style.height="calc(100% - 5px)";b.style.width="100%";b.style.transition="height 200ms, opacity 1s";b.style.opacity="0";return b}
function Ij(){var a=document.createElement("div");a.innerHTML="&lt; ";a.style.display="none";a.style.color="#999";a.style.cursor="pointer";a.style.fontSize="20px";a.style.fontWeight="bold";a.style.borderRadius="50px";a.style.padding="2px 0 5px 7px";var b=document.createElement("small");b.innerText="Back";b.style.fontSize="12px";b.style.verticalAlign="middle";b.style.lineHeight="9px";a.appendChild(b);return a}
Gj.prototype.Yq=function(){var a=document.createElement("div");a.style.animationName="spin";a.style.position="absolute";a.style.top="50%";a.style.left="50%";a.style.width="30px";a.style.height="31px";a.style.margin="-15px 0 0 -15px";a.style.background='url("https://static-assets.highwebmedia.com/tsdefaultassets/images/loading_spinner.svg")';a.style.backgroundSize="cover";a.style.animationName="spin";a.style.animationDuration="2s";a.style.webkitAnimationDuration="2s";a.style.animationTimingFunction="linear";a.style.webkitAnimationTimingFunction="linear";a.style.animationIterationCount="infinite";a.style.webkitAnimationIterationCount="infinite";a.style.zIndex="-1";return a};Gj.prototype.show=function(){var a=this;Fj.prototype.show.call(this);window.setTimeout(function(){a.element.style.opacity="1"},1);window.setTimeout(function(){a.content.style.right="10px"},500)};Gj.prototype.G=function(){this.content.style.height=window.innerHeight-this.Qq-10+"px";this.element.style.top=Math.min(this.Qq,window.innerHeight-this.content.offsetHeight-10)+"px"};function Jj(a,b,c,d){d=void 0===d?3:d;var e=document.createElement("div");e.style.position="absolute";e.style.height="0";e.style.width="0";e.style.top="-8px";e.style.left=c;c=document.createElement("div");G(c,"divotBorder");c.style.borderLeft="8px solid transparent";c.style.borderRight="8px solid transparent";c.style.borderBottomWidth="8px";c.style.borderBottomStyle="solid";""!==a&&(c.style.borderBottomColor=""+a);e.appendChild(c);a=8-d;var f=document.createElement("div");G(f,"divotBackground");f.style.position="absolute";f.style.top=d+"px";f.style.left=d+"px";f.style.borderLeft=a+"px solid transparent";f.style.borderRight=a+"px solid transparent";f.style.borderBottomWidth=a+"px";f.style.borderBottomStyle="solid";""!==b&&(f.style.borderBottomColor=""+b);c.appendChild(f);return e}
function Kj(a,b,c,d){d=void 0===d?3:d;var e=document.createElement("div");e.style.position="absolute";e.style.height="0";e.style.width="0";e.style.bottom="0";e.style.left=c;c=document.createElement("div");G(c,"divotBorder");c.style.borderLeft="8px solid transparent";c.style.borderRight="8px solid transparent";c.style.borderTopWidth="8px";c.style.borderTopStyle="solid";""!==a&&(c.style.borderTopColor=""+a);e.appendChild(c);a=8-d;var f=document.createElement("div");G(f,"divotBackground");f.style.position="absolute";f.style.top="0";f.style.left=d+"px";f.style.borderLeft=a+"px solid transparent";f.style.borderRight=a+"px solid transparent";f.style.borderTopWidth=a+"px";f.style.borderTopStyle="solid";""!==b&&(f.style.borderTopColor=""+b);c.appendChild(f);return e}
function Lj(a,b,c,d){d=void 0===d?3:d;var e=document.createElement("div");e.style.position="absolute";e.style.height="0";e.style.width="0";e.style.left="-8px";e.style.top=c;c=document.createElement("div");G(c,"divotBorder");c.style.borderTop="8px solid transparent";c.style.borderBottom="8px solid transparent";c.style.borderRightWidth="8px";c.style.borderRightStyle="solid";""!==a&&(c.style.borderRightColor=""+a);e.appendChild(c);a=8-d;var f=document.createElement("div");G(f,"divotBackground");f.style.position="absolute";f.style.top=d+"px";f.style.left=d+"px";f.style.borderTop=a+"px solid transparent";f.style.borderBottom=a+"px solid transparent";f.style.borderRightWidth=a+"px";f.style.borderRightStyle="solid";""!==b&&(f.style.borderRightColor=""+b);c.appendChild(f);return e}
function Mj(a,b,c,d){d=void 0===d?3:d;var e=document.createElement("div");e.style.position="absolute";e.style.height="0";e.style.width="0";e.style.right="0";e.style.top=c;c=document.createElement("div");G(c,"divotBorder");c.style.borderTop="8px solid transparent";c.style.borderBottom="8px solid transparent";c.style.borderLeftWidth="8px";c.style.borderLeftStyle="solid";""!==a&&(c.style.borderLeftColor=""+a);e.appendChild(c);a=8-d;var f=document.createElement("div");G(f,"divotBackground");f.style.position="absolute";f.style.top=d+"px";f.style.right="-"+a+"px";f.style.borderTop=a+"px solid transparent";f.style.borderBottom=a+"px solid transparent";f.style.borderLeftWidth=a+"px";f.style.borderLeftStyle="solid";""!==b&&(f.style.borderLeftColor=""+b);c.appendChild(f);return e};function Nj(){return"FRAGMENT"}
function Oj(a,b,c){var d=Pj(a)?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a);c=Qj(c);d.appendChild(c);var e=null===b?{}:b;Object.keys(e).forEach(function(f){if("style"===f)Object.assign(d.style,e[f]);else if("ref"===f&&"function"===typeof e.ref)e.ref(d,e);else if("className"===f||"class"===f)d.classList.add(e[f].split(" "));else if("colorClass"===f)f=e[f],Array.isArray(f)?f.forEach(function(m){""!==m&&d.classList.add(m)}):d.classList.add(f);else if("htmlFor"===f)d.setAttribute("for",e[f]);else if("xlinkHref"===f)d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e[f]);else if("dangerouslySetInnerHTML"===f)d.innerHTML=e[f].TD;else if(0===f.indexOf("on")){var g=f.toLowerCase(),h=!1;-1<f.indexOf("Capture",f.length-7)&&(h=!0,g=g.slice(-7));null===d[g]?v(g.slice(2),d,e[f],h):w("Event declared for JSX element that does not exist on type "+a+": "+f)}else d.setAttribute(f,e[f])});return d}function Rj(a,b){"function"===typeof a.ref&&a.ref(b,a)}
function Pj(a){var b=new RegExp("^"+a+"$","i");return["path","svg","use","g"].some(function(c){return b.test(c)})}
function Qj(a){function b(d){d instanceof HTMLElement||d instanceof SVGElement||d instanceof Comment||d instanceof DocumentFragment?c.appendChild(d):"string"===typeof d||"number"===typeof d?c.appendChild(document.createTextNode(""+d)):d instanceof Array?d.forEach(b):!1===d||null===d||void 0===d||w("Unexpected child in Tsx fragment: "+d)}var c=document.createDocumentFragment();a.forEach(b);return c}
function N(a,b,c){for(var d=[],e=2;e<arguments.length;++e)d[e-2]=arguments[e];if("function"===typeof a)if(void 0===a.prototype||void 0===a.prototype.render){e=Object.assign({},{},b,{children:d});var f=a(e);d="FRAGMENT"===f?Qj(d):f;Rj(e,d)}else d=Object.assign({},{},b,{children:d}),e=[],void 0!==d.unsafeArgs&&(e=d.unsafeArgs),e=new(Function.prototype.bind.apply(a,[null,d].concat(ha(e)))),f=e.render(),"function"===typeof d.classRef&&d.classRef(e,d),Rj(d,f),d=f;else d=Oj(a,b,d);return d};function Sj(a){a=void 0===a?"16px":a;return N("a",{className:"closeBtnContainer",style:{height:a,borderRadius:"5px",color:"inherit"}},N("svg",{style:{width:a,height:a},width:"12",height:"12",viewBox:"0 0 12 12"},N("path",{d:"M7.15006 6.08867C7.13842 6.07705 7.12919 6.06326 7.12288 6.04807C7.11658 6.03289 7.11334 6.01661 7.11334 6.00017C7.11334 5.98372 7.11658 5.96744 7.12288 5.95226C7.12919 5.93707 7.13842 5.92328 7.15006 5.91167L11.7816 1.28067C11.9222 1.13984 12.0011 0.94891 12.001 0.749887C12.0008 0.550864 11.9216 0.360048 11.7808 0.219417C11.64 0.0787862 11.4491 -0.000140462 11.25 1.87661e-07C11.051 0.000140838 10.8602 0.0793373 10.7196 0.220167L6.08856 4.84917C6.07695 4.86081 6.06316 4.87004 6.04797 4.87634C6.03278 4.88265 6.0165 4.88589 6.00006 4.88589C5.98362 4.88589 5.96734 4.88265 5.95215 4.87634C5.93697 4.87004 5.92317 4.86081 5.91156 4.84917L1.28056 0.220167C1.21093 0.150501 1.12826 0.0952322 1.03726 0.0575166C0.946271 0.0198009 0.84874 0.000376944 0.75024 0.00035373C0.551311 0.000306846 0.360511 0.0792862 0.219814 0.219917C0.0791162 0.360548 4.6905e-05 0.551311 2.08617e-08 0.75024C-4.68632e-05 0.94917 0.0789325 1.13997 0.219564 1.28067L4.85006 5.91167C4.8617 5.92328 4.87094 5.93707 4.87724 5.95226C4.88354 5.96744 4.88679 5.98372 4.88679 6.00017C4.88679 6.01661 4.88354 6.03289 4.87724 6.04807C4.87094 6.06326 4.8617 6.07705 4.85006 6.08867L0.219564 10.7202C0.14993 10.7898 0.0947003 10.8725 0.0570276 10.9635C0.0193548 11.0546 -2.31938e-05 11.1521 2.08617e-08 11.2506C4.6905e-05 11.4495 0.0791162 11.6403 0.219814 11.7809C0.28948 11.8505 0.372179 11.9058 0.46319 11.9435C0.554201 11.9811 0.651741 12.0005 0.75024 12.0005C0.94917 12.0004 1.13993 11.9214 1.28056 11.7807L5.91156 7.14917C5.92317 7.13753 5.93697 7.12829 5.95215 7.12199C5.96734 7.11569 5.98362 7.11244 6.00006 7.11244C6.0165 7.11244 6.03278 7.11569 6.04797 7.12199C6.06316 7.12829 6.07695 7.13753 6.08856 7.14917L10.7196 11.7807C10.8602 11.9214 11.051 12.0004 11.2499 12.0005C11.4488 12.0005 11.6396 11.9215 11.7803 11.7809C11.921 11.6403 12.0001 11.4495 12.0001 11.2506C12.0002 11.0517 11.9212 10.8609 11.7806 10.7202L7.15006 6.08867Z"})))}
function Tj(){return N("div",{style:{display:"inline-block"}},N("svg",{style:{height:"1em"},width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},N("path",{d:"M3.482 7.91071C3.45013 7.89982 3.4223 7.87953 3.40219 7.85252C3.38208 7.8255 3.37062 7.79303 3.36933 7.75937C3.36827 7.72563 3.37736 7.69233 3.39542 7.66381C3.41349 7.63528 3.4397 7.61284 3.47067 7.59937C3.92472 7.40632 4.29812 7.06231 4.52765 6.62556C4.75718 6.18882 4.82875 5.68617 4.73025 5.20272C4.63174 4.71927 4.3692 4.2847 3.98708 3.97259C3.60495 3.66048 3.12672 3.48999 2.63333 3.48999C2.13995 3.48999 1.66171 3.66048 1.27959 3.97259C0.897467 4.2847 0.63493 4.71927 0.536421 5.20272C0.437912 5.68617 0.509482 6.18882 0.739017 6.62556C0.968551 7.06231 1.34195 7.40632 1.796 7.59937C1.82712 7.61253 1.85351 7.63484 1.87166 7.66334C1.88982 7.69184 1.89888 7.72518 1.89765 7.75895C1.89642 7.79271 1.88496 7.82531 1.86478 7.85241C1.8446 7.87952 1.81666 7.89985 1.78467 7.91071C1.26465 8.08858 0.813146 8.4244 0.4932 8.87127C0.173253 9.31815 0.000829249 9.85377 0 10.4034L0 12.3787C0 12.4661 0.0346975 12.5498 0.0964595 12.6116C0.158221 12.6733 0.241989 12.708 0.329333 12.708H0.916667C0.95808 12.7081 0.997978 12.7236 1.02847 12.7516C1.05896 12.7797 1.07783 12.8181 1.08133 12.8594L1.318 15.6987C1.32486 15.7809 1.36241 15.8576 1.42317 15.9134C1.48394 15.9692 1.56348 16.0002 1.646 16H3.62133C3.70374 16 3.78311 15.969 3.84374 15.9132C3.90436 15.8574 3.94181 15.7808 3.94867 15.6987L4.186 12.8594C4.18935 12.8182 4.20807 12.7797 4.23846 12.7517C4.26884 12.7237 4.30866 12.7081 4.35 12.708H4.938C4.98122 12.708 5.02401 12.6995 5.06393 12.683C5.10385 12.6664 5.14011 12.6421 5.17064 12.6115C5.20117 12.5809 5.22536 12.5446 5.24184 12.5047C5.25832 12.4647 5.26675 12.4219 5.26667 12.3787V10.4034C5.26604 9.85372 5.09369 9.31801 4.77372 8.8711C4.45374 8.42418 4.00213 8.08841 3.482 7.91071Z"}),N("path",{d:"M14.2154 7.91071C14.1834 7.89985 14.1555 7.87952 14.1353 7.85241C14.1151 7.82531 14.1036 7.79271 14.1024 7.75895C14.1012 7.72518 14.1102 7.69184 14.1284 7.66334C14.1466 7.63484 14.1729 7.61253 14.2041 7.59937C14.6581 7.40632 15.0315 7.06231 15.261 6.62556C15.4906 6.18882 15.5622 5.68617 15.4636 5.20272C15.3651 4.71927 15.1026 4.2847 14.7205 3.97259C14.3384 3.66048 13.8601 3.48999 13.3667 3.48999C12.8733 3.48999 12.3951 3.66048 12.013 3.97259C11.6309 4.2847 11.3683 4.71927 11.2698 5.20272C11.1713 5.68617 11.2429 6.18882 11.4724 6.62556C11.7019 7.06231 12.0753 7.40632 12.5294 7.59937C12.5605 7.61259 12.5868 7.63496 12.6049 7.6635C12.623 7.69204 12.632 7.72541 12.6307 7.75918C12.6294 7.79295 12.6179 7.82553 12.5977 7.85259C12.5774 7.87965 12.5494 7.89992 12.5174 7.91071C11.9974 8.08861 11.546 8.42445 11.2262 8.87134C10.9064 9.31822 10.7341 9.85383 10.7334 10.4034V12.3787C10.7333 12.4219 10.7417 12.4647 10.7582 12.5047C10.7747 12.5446 10.7989 12.5809 10.8294 12.6115C10.86 12.6421 10.8962 12.6664 10.9361 12.683C10.9761 12.6995 11.0188 12.708 11.0621 12.708H11.6501C11.6914 12.7081 11.7312 12.7237 11.7616 12.7517C11.792 12.7797 11.8107 12.8182 11.8141 12.8594L12.0514 15.6987C12.0583 15.7808 12.0957 15.8574 12.1563 15.9132C12.217 15.969 12.2963 16 12.3787 16H14.3541C14.4366 16.0002 14.5161 15.9692 14.5769 15.9134C14.6377 15.8576 14.6752 15.7809 14.6821 15.6987L14.9187 12.8594C14.9222 12.8181 14.9411 12.7797 14.9716 12.7516C15.0021 12.7236 15.042 12.7081 15.0834 12.708H15.6707C15.7581 12.708 15.8418 12.6733 15.9036 12.6116C15.9654 12.5498 16.0001 12.4661 16.0001 12.3787V10.4034C15.9992 9.85377 15.8268 9.31815 15.5069 8.87127C15.1869 8.4244 14.7354 8.08858 14.2154 7.91071Z"}),N("path",{d:"M8.78198 3.75737C8.75083 3.74636 8.72367 3.7263 8.70399 3.69976C8.68431 3.67323 8.67299 3.64142 8.67148 3.60842C8.66998 3.57541 8.67836 3.54271 8.69555 3.51449C8.71274 3.48628 8.73796 3.46384 8.76798 3.45004C9.14122 3.27559 9.4438 2.97908 9.62578 2.60945C9.80775 2.23983 9.85823 1.8192 9.76889 1.41701C9.67954 1.01482 9.4557 0.655134 9.13434 0.39733C8.81298 0.139525 8.4133 -0.000976562 8.00131 -0.000976562C7.58932 -0.000976562 7.18965 0.139525 6.86828 0.39733C6.54692 0.655134 6.32309 1.01482 6.23374 1.41701C6.14439 1.8192 6.19487 2.23983 6.37685 2.60945C6.55882 2.97908 6.86141 3.27559 7.23465 3.45004C7.26467 3.46384 7.28988 3.48628 7.30707 3.51449C7.32426 3.54271 7.33264 3.57541 7.33114 3.60842C7.32964 3.64142 7.31832 3.67323 7.29863 3.69976C7.27895 3.7263 7.2518 3.74636 7.22065 3.75737C6.7746 3.91826 6.38891 4.21259 6.116 4.60036C5.8431 4.98813 5.69621 5.45053 5.69531 5.9247V6.91337C5.69635 7.00039 5.73138 7.08356 5.79292 7.1451C5.85446 7.20663 5.93762 7.24166 6.02465 7.2427H6.57065C6.61112 7.24247 6.65024 7.25728 6.68042 7.28426C6.7106 7.31123 6.72968 7.34845 6.73398 7.3887L7.01398 9.91337C7.023 9.99387 7.06137 10.0682 7.12176 10.1222C7.18214 10.1762 7.26031 10.206 7.34131 10.206H8.65865C8.73958 10.206 8.81766 10.1762 8.87794 10.1222C8.93821 10.0682 8.97645 9.99381 8.98531 9.91337L9.26598 7.3887C9.27057 7.34846 9.28984 7.31131 9.32009 7.28438C9.35035 7.25744 9.38947 7.24261 9.42998 7.2427H9.97531C10.0627 7.2427 10.1464 7.208 10.2082 7.14624C10.2699 7.08448 10.3046 7.00071 10.3046 6.91337V5.92404C10.304 5.45025 10.1575 4.98815 9.8851 4.60051C9.61268 4.21287 9.22753 3.91849 8.78198 3.75737Z"})))}
function Uj(a){return N("div",{style:{display:"inline-block",paddingTop:(void 0===a?1:a)+"px",fill:"currentColor"}},N("svg",{style:{height:"1.2em"},width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},N("path",{d:"M14.9474 6.50932L14.1034 6.20998C13.9826 6.16702 13.8721 6.09916 13.7791 6.01078C13.6862 5.92241 13.6128 5.8155 13.5638 5.69697C13.5148 5.57845 13.4912 5.45094 13.4946 5.32272C13.498 5.19451 13.5282 5.06843 13.5834 4.95265L13.9674 4.14398C14.1075 3.84868 14.1528 3.51727 14.0971 3.19521C14.0414 2.87315 13.8874 2.57621 13.6563 2.3451C13.4252 2.11398 13.1283 1.96002 12.8062 1.90432C12.4842 1.84862 12.1528 1.89391 11.8574 2.03398L11.0488 2.41865C10.9329 2.47361 10.8069 2.50365 10.6787 2.50683C10.5505 2.51002 10.4231 2.48628 10.3046 2.43715C10.1862 2.38802 10.0794 2.31458 9.99111 2.2216C9.90283 2.12861 9.83504 2.01814 9.79211 1.89732L9.49211 1.05398C9.38235 0.746123 9.18003 0.479756 8.91292 0.291408C8.6458 0.103059 8.32696 0.00195313 8.00011 0.00195312C7.67327 0.00195312 7.35443 0.103059 7.08731 0.291408C6.82019 0.479756 6.61788 0.746123 6.50811 1.05398L6.20811 1.89798C6.16512 2.01875 6.09728 2.12915 6.00897 2.22206C5.92066 2.31498 5.81384 2.38834 5.69541 2.4374C5.57699 2.48647 5.44959 2.51015 5.32144 2.50692C5.19329 2.50369 5.06725 2.47362 4.95145 2.41865L4.14278 2.03398C3.84747 1.89391 3.51607 1.84862 3.19401 1.90432C2.87195 1.96002 2.575 2.11398 2.34389 2.3451C2.11278 2.57621 1.95882 2.87315 1.90312 3.19521C1.84742 3.51727 1.89271 3.84868 2.03278 4.14398L2.41678 4.95265C2.47188 5.06844 2.50207 5.19451 2.5054 5.3227C2.50873 5.45089 2.48513 5.57835 2.43613 5.69685C2.38712 5.81535 2.31379 5.92224 2.22089 6.01063C2.12799 6.09902 2.01757 6.16693 1.89678 6.20998L1.05278 6.50998C0.744848 6.61958 0.478381 6.8218 0.289952 7.08887C0.101523 7.35595 0.000366211 7.6748 0.000366211 8.00165C0.000366211 8.32851 0.101523 8.64735 0.289952 8.91443C0.478381 9.1815 0.744848 9.38372 1.05278 9.49332L1.89678 9.79332C2.01755 9.83629 2.12795 9.90414 2.22085 9.99246C2.31375 10.0808 2.38708 10.1876 2.43609 10.3061C2.4851 10.4245 2.50871 10.5519 2.50538 10.6801C2.50206 10.8082 2.47187 10.9342 2.41678 11.05L2.03278 11.8587C1.89271 12.154 1.84742 12.4854 1.90312 12.8074C1.95882 13.1295 2.11278 13.4264 2.34389 13.6575C2.575 13.8887 2.87195 14.0426 3.19401 14.0983C3.51607 14.154 3.84747 14.1087 4.14278 13.9687L4.95145 13.5847C5.06722 13.5295 5.19329 13.4992 5.3215 13.4959C5.44971 13.4926 5.57718 13.5162 5.69566 13.5653C5.81415 13.6144 5.92099 13.6878 6.00927 13.7809C6.09755 13.8739 6.1653 13.9844 6.20811 14.1053L6.50811 14.9487C6.61788 15.2565 6.82019 15.5229 7.08731 15.7112C7.35443 15.8996 7.67327 16.0007 8.00011 16.0007C8.32696 16.0007 8.6458 15.8996 8.91292 15.7112C9.18003 15.5229 9.38235 15.2565 9.49211 14.9487L9.79211 14.1047C9.83509 13.9839 9.90293 13.8735 9.99126 13.7806C10.0796 13.6877 10.1864 13.6144 10.3049 13.5653C10.4233 13.5163 10.5507 13.4927 10.6789 13.496C10.807 13.4994 10.933 13.5296 11.0488 13.5847L11.8574 13.9687C12.1528 14.1087 12.4842 14.154 12.8062 14.0983C13.1283 14.0426 13.4252 13.8887 13.6563 13.6575C13.8874 13.4264 14.0414 13.1295 14.0971 12.8074C14.1528 12.4854 14.1075 12.154 13.9674 11.8587L13.5834 11.05C13.5284 10.9342 13.4982 10.8082 13.4948 10.6801C13.4915 10.5519 13.5151 10.4245 13.5641 10.3061C13.6131 10.1876 13.6865 10.0808 13.7794 9.99246C13.8723 9.90414 13.9827 9.83629 14.1034 9.79332L14.9474 9.49265C15.2554 9.38305 15.5218 9.18084 15.7103 8.91376C15.8987 8.64669 15.9999 8.32784 15.9999 8.00098C15.9999 7.67413 15.8987 7.35528 15.7103 7.08821C15.5218 6.82113 15.2554 6.61892 14.9474 6.50932ZM8.00011 11.1907C7.37045 11.1815 6.75667 10.9917 6.2318 10.6437C5.70693 10.2958 5.29306 9.80438 5.03945 9.22798C4.71516 8.44275 4.71553 7.56095 5.04046 6.77598C5.3654 5.99102 5.98838 5.36695 6.77278 5.04065C7.55892 4.72626 8.43681 4.73154 9.21911 5.05537C10.0014 5.3792 10.6262 5.99594 10.9601 6.77398C11.2844 7.55922 11.284 8.44102 10.9591 9.22598C10.6342 10.011 10.0112 10.635 9.22678 10.9613C8.83799 11.1212 8.42042 11.1993 8.00011 11.1907Z"})))}
function Vj(a){var b=N("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},N("path",{d:"M9.41624 6.5001C8.36101 5.49058 6.91921 5.42139 6.31151 5.44408C6.2877 5.44511 6.26454 5.43559 6.2474 5.41774C6.23026 5.39989 6.22063 5.37525 6.22074 5.34955V4.37708C6.22037 4.2304 6.1414 4.09718 6.01813 4.0353C5.89485 3.97341 5.74953 3.99404 5.64528 4.08821L3.01893 6.49519C2.93812 6.56704 2.89133 6.67411 2.89136 6.78708C2.89077 6.89782 2.93585 7.00312 3.01437 7.07444L5.64739 9.58388C5.75212 9.677 5.89728 9.69652 6.02 9.63396C6.14272 9.57141 6.22092 9.43803 6.22074 9.29161V8.14408C6.22076 8.09924 6.25009 8.06064 6.29083 8.05182C6.95951 7.90058 9.14183 7.61398 10.2721 9.90072C10.3101 9.97676 10.3911 10.0153 10.4688 9.99434C10.5465 9.97338 10.6011 9.89827 10.6015 9.81187C10.6015 8.36716 10.2027 7.25328 9.41624 6.5001Z"}));return N("div",{colorClass:"replyIconSvg",style:a},b)};function Wj(a){v(pc(),document,function(){I()?window.setTimeout(function(){"fullscreen"!==a.Qd&&Xj("noninteractive-fullscreen")},0):Xj(a.ox)})}
function Xj(a,b){var c=Yj,d,e;var f=null!==(d=null===b||void 0===b?void 0:b.update)&&void 0!==d?d:!1;void 0!==f&&f||a!==c.Qd?(-1===["noninteractive-fullscreen","fullscreen","fullvideo"].indexOf(c.Qd)&&(c.ox=c.Qd),c.qx=c.Qd,c.Qd=a,a=!0):a=!1;if(a||null!==(e=null===b||void 0===b?void 0:b.h)&&void 0!==e&&e)b=c.Qd,"videoonly"!==b&&(Ob=b),c.Td.h({nh:c.Qd,aH:c.qx})}function Zj(){var a=Yj;t()&&window.localStorage.setItem(a.vj,JSON.stringify({isTheaterMode:"theater"===a.Qd}))}
function ak(){var a=Yj,b=a.Qd;t()&&(a=window.localStorage.getItem(a.vj),null!==a&&(b=JSON.parse(a).isTheaterMode?"theater":"split"));return b}function O(){return Yj.Qd}var Yj=new function(){this.vj="isTheaterMode";this.Td=new D("changeVideoMode",{Bd:17});this.Qd="split";this.qx="theater";this.ox="split";Wj(this)};function bk(){return document.documentElement.clientHeight!==window.outerHeight||cb()?Math.max(window.innerHeight,document.documentElement.clientHeight):window.innerHeight}function ck(){return document.documentElement.clientWidth};function dk(a){F.call(this);var b=this;this.$=a;this.state={videoWidth:500,videoHeight:300};this.Bo=!1;this.Oh=[];ek(this);this.element.style.display="inline-block";this.element.style.width="8px";this.element.style.boxSizing="border-box";v("mousedown",this.element,function(c){c.preventDefault();b.$.element.onmousemove=function(d){d=d.pageX-a.bc.element.getBoundingClientRect().left-b.element.offsetWidth/2;b.jf(d);b.$.Y()};b.$.element.onmouseup=function(){fk(b)};b.$.element.onmouseleave=function(){fk(b)};b.Bo=!0});v("touchmove",this.element,function(c){c.preventDefault();1===c.targetTouches.length&&(b.$.element.ontouchmove=function(){var d=c.targetTouches.item(0);null!==d&&(d=d.pageX-a.bc.element.getBoundingClientRect().left-b.element.offsetWidth/2,b.jf(d),b.$.Y())},b.$.element.ontouchend=function(){fk(b)},b.Bo=!0)});window.setTimeout(function(){b.element.style.cursor=gk(b);G(b.element,"resizeHandle");b.jf();fk(b)},0);Yj.Td.j(function(){"split"===O()&&(ek(b),b.jf())})}r(dk,F);k=dk.prototype;k.jf=function(a){a=void 0===a?this.state.videoWidth:a;a=Math.max(a,502);a=Math.min(this.bk(),a);var b=O();switch(b){case "split":if(0===this.element.offsetWidth)return;this.$.bc.element.style.width=a+"px";var c=this.Cl(a)+this.$.bc.ka.N.Wb();this.$.bc.ka.element.style.height=c+"px";this.$.lb.element.style.height=c+hk(this.$.bc)+"px";this.element.style.height=c+hk(this.$.bc)+"px";this.$.lb.element.style.width=this.$.element.clientWidth-a-this.element.offsetWidth-2*this.$.wm+"px";this.$.bc.Aj();ik.h();break;case "theater":this.$.bc.element.style.width=this.$.element.clientWidth-2*this.$.wm+"px";break;case "fullscreen":this.$.bc.element.style.width=window.innerWidth+"px";break;case "videoonly":break;case "noninteractive-fullscreen":break;default:u("Unexpected VideoMode: "+b)}this.state.videoWidth=a;"split"===b&&(a=gk(this),this.element.style.cursor=a,this.$.element.style.cursor=a)};function jk(a){var b=a.Oh[a.Oh.length-1],c={videoWidth:a.state.videoWidth,videoHeight:a.state.videoHeight,gv:parseInt(a.$.lb.element.style.width),dv:parseInt(a.$.lb.element.style.height)};void 0!==b&&b.videoWidth===c.videoWidth&&b.videoHeight===c.videoHeight||a.Oh.push(c)}
function fk(a){jk(a);2<a.Oh.length&&(a.Oh=a.Oh.slice(1));if(2===a.Oh.length){var b=q(a.Oh),c=b.next().value;b=b.next().value;A("VideoResized",{video_width_old:c.videoWidth,video_height_old:c.videoHeight,video_width_new:b.videoWidth,video_height_new:b.videoHeight,chat_width_old:c.gv,chat_height_old:c.dv,chat_width_new:b.gv,chat_height_new:b.dv})}"split"===O()&&0!==a.element.offsetWidth&&(a.Gb(),a.$.element.onmousemove=function(){},a.$.element.onmouseup=function(){},a.$.element.onmouseleave=function(){},a.$.element.ontouchend=function(){},a.$.element.ontouchmove=function(){},a.$.element.style.cursor="",a.Bo=!1)}k.bk=function(){return"split"===O()?this.$.element.clientWidth-this.Ro():this.$.element.clientWidth-2*this.$.wm};k.ak=function(){return window.innerHeight-166};function gk(a){var b=a.$.bc.element.offsetWidth;return 500>=b?"e-resize":b>=a.bk()?"w-resize":"ew-resize"}
function ek(a){if(t()){var b=window.localStorage.getItem("defaultVideoWidth");if(null!==b){b=JSON.parse(b);a.state={videoWidth:b.videoWidth,videoHeight:b.videoHeight};return}}"split"===O()&&0!==a.element.offsetWidth&&a.Dp({vx:!0})}k.Gb=function(){t()&&window.localStorage.setItem("defaultVideoWidth",JSON.stringify({videoWidth:this.state.videoWidth,videoHeight:this.state.videoHeight}))};k.G=function(){this.jf();this.Bo||fk(this)};k.Dp=function(a){a=(void 0===a?{vx:!1}:a).vx;var b=ck();if(this.bk()-95>b/2){if(a){var c=bk();c=c/b>kk(this)?this.bk()-95:(c-200)/kk(this)}else c=b/2;b=this.Cl(c)}else b=this.ak(),c=b/kk(this);!a&&b>this.ak()&&(b=this.ak(),c=b/kk(this));500>c&&(c=500);this.state.videoWidth=c};function kk(a){return a.$.bc.ka.Hg?.5625:.75}k.Cl=function(a){return a*kk(this)};k.Ro=function(){return 155};var ik=new D("splitModeDragResize");function P(a,b){var c=a instanceof F?a.element:a;var d=b;b instanceof Function&&(d=b(a));a=q(Object.keys(d));for(d=a.next();!d.done;d=a.next())d=d.value,c.style[d]=b[d]}function lk(a){v("mouseenter",a,function(){a.style.textDecoration="underline"});v("mouseleave",a,function(){a.style.textDecoration=""})}function mk(a){if(null===a)return"rgba(0, 0, 0, 0)";var b=getComputedStyle(a).backgroundColor;return""===b||"rgba(0, 0, 0, 0)"===b||"transparent"===b?mk(a.parentElement):b}
function nk(a){function b(h,m,n){return 0===h?0===m?void 0===n?0:n:m:h}a=a.getBoundingClientRect();var c=document.body,d=document.documentElement,e=b(window.pageYOffset,d.scrollTop,c.scrollTop),f=b(window.pageXOffset,d.scrollLeft,c.scrollLeft),g=b(d.clientTop,c.clientTop);c=b(d.clientLeft,c.clientLeft);return new DOMRect(a.left+f-c,a.top+e-g,a.width,a.height)}function pk(a){if(null===a)return 0;try{var b=parseFloat(a.substring(0,a.indexOf("px")));return isNaN(b)?0:b}catch(c){return 0}}
function qk(a){var b=new D("hover");a=a instanceof F?a.element:a;v("mouseenter",a,function(){b.h(!0)});v("mouseleave",a,function(){b.h(!1)});return b}var rk;function sk(){if(void 0!==rk)return rk;var a=document.createElement("div");a.style.visibility="hidden";a.style.width="100px";a.style.msOverflowStyle="scrollbar";document.body.appendChild(a);var b=a.offsetWidth;a.style.overflow="scroll";var c=document.createElement("div");c.style.width="100%";a.appendChild(c);c=c.offsetWidth;document.body.removeChild(a);return rk=b-c}
function tk(){var a=document.querySelector("#advanced_search_options"),b=document.querySelector(".advanced-search-element");return null===a?null===b?void 0:b:a};function uk(a,b){this.Hr=a;this.config=b;this.Eq=this.rt=!1}function vk(a){if(1===a.config.md)clearTimeout(a.DA),a.DA=window.setTimeout(a.Hr,a.config.xc);else{var b=function(){a.Eq&&2===a.config.md?(a.Eq=!1,a.Hr(),window.setTimeout(b,a.config.xc)):a.rt=!1};a.rt?a.Eq=!0:(a.rt=!0,a.Hr(),window.setTimeout(b,a.config.xc))}};function wk(){D.apply(this,arguments)}r(wk,D);wk.prototype.j=function(a,b){a=D.prototype.j.call(this,a,void 0===b?!0:b);vk(xk);return a};var yk=new wk("resizeDebounceEvent"),xk=zk(function(){yk.h(!1)});function Ak(a,b,c,d,e,f){function g(){var m=c instanceof Function?c():c,n=d instanceof Function?d():d,p=m+(n-m)*(Math.max(Math.min(document.body.clientWidth,e),h)-h)/(e-h),y=a instanceof F?a.element:a;b instanceof Array?b.forEach(function(C){y.style[C]=p+"px"}):y.style[b]=p+"px";a instanceof F&&a.Y();void 0!==f&&f(p)}var h=500;h=void 0===h?500:h;e=void 0===e?1003:e;yk.j(g);window.setTimeout(function(){g()})}
function zk(a){var b=new uk(function(){a(!0)},{xc:80,md:2}),c=new uk(function(){a(!1)},{xc:200,md:1});v("resize",window,function(){vk(b);vk(c)});v("orientationchange",window,function(){a(!1);window.setTimeout(function(){a(!1)},80)});return c}if(eb()&&bb()){var Bk=document.createElement("div");P(Bk,{position:"absolute",width:"100%"});document.body.appendChild(Bk);var Ck=Bk.offsetWidth;window.setInterval(function(){Ck!==Bk.offsetWidth&&(yk.h(!0),Ck=Bk.offsetWidth)},150)};function Dk(a,b,c,d){d=void 0===d?document.body:d;var e,f;F.call(this);var g=this;this.target=a;this.vj=b;this.eC=d;this.J=new Yb;this.Wf=function(){return 0};this.qg=function(){return 0};this.element=Ek(c);this.element.style.paddingRight="40px";G(this,"modern");!0!==c.DG&&Fk(this);this.Ud=c.Ud;this.bf=c.bf;this.Wf=null!==(e=c.Wf)&&void 0!==e?e:this.Wf;this.qg=null!==(f=c.qg)&&void 0!==f?f:this.qg;B(yk.j(function(){Gk(g)}),this.J);B(Hk.j(function(h){g.vj===h&&g.Lb()}),this.J);void 0!==c.Ep&&(this.Az=c.Ep,B(Yj.Td.j(function(){Gk(g);Ik(g)}),this.J),B(ik.j(function(){Gk(g)}),this.J));Gk(this);Ik(this);d.appendChild(this.element)}r(Dk,F);function Jk(a){a.Lb();void 0!==a.vj&&(Hk.h(a.vj),t()&&localStorage.setItem(a.vj,"true"))}Dk.prototype.Lb=function(){var a,b;this.D();null===(a=this.parent)||void 0===a?void 0:a.removeChild(this);null===(b=this.element.parentElement)||void 0===b?void 0:b.removeChild(this.element);Zb(this.J)};function Fk(a){var b=Sj("12px");b.style.position="absolute";b.style.right="5px";b.style.top="5px";G(b,"tooltipCloseButton");v("click",b,function(){Jk(a)});a.element.appendChild(b)}
function Gk(a){var b=a.eC.getBoundingClientRect(),c=a.target.getBoundingClientRect(),d=c.top-b.top;b=c.left-b.left;c=pk(a.bf);1===a.Ud?(a.element.style.top=d-a.element.clientHeight-a.target.clientHeight+a.qg(a.target)+"px",a.element.style.left=b-c+a.Wf(a.target)+"px"):0===a.Ud?(a.element.style.top=d+a.target.clientHeight+a.qg(a.target)+"px",a.element.style.left=b-c+a.Wf(a.target)+"px"):2===a.Ud?(a.element.style.top=d-c+a.qg(a.target)+"px",a.element.style.left=b+a.target.clientWidth+a.Wf(a.target)+
"px"):3===a.Ud&&(a.element.style.top=d-c+a.qg(a.target)+"px",a.element.style.left=b-a.element.clientWidth+a.Wf(a.target)+"px")}function Kk(a,b,c){var d;a.bf=null!==c&&void 0!==c?c:a.bf;a.Ud=b;b=a.element.querySelector(".divot");null===(d=null===b||void 0===b?void 0:b.parentElement)||void 0===d?void 0:d.removeChild(b);d=Lk(a.Ud,a.bf);void 0!==d&&a.element.appendChild(d);Gk(a)}Dk.prototype.show=function(){Ik(this)};function Ik(a){void 0===a.Az||a.Az.includes(O())?a.element.style.display="block":a.D()}Dk.prototype.D=function(){this.element.style.display="none"};function Mk(a,b,c){if(!0===b.wH||!t()||"true"!==localStorage.getItem("showMyCamTip"))return new Dk(a,"showMyCamTip",b,c)}var Hk=new D("key");function Ek(a){var b=void 0===a.hasHTML?a:{content:a.content,Il:"true"===a.hasHTML,width:parseInt(a.width),Ud:parseInt(a.divotPosition),bf:a.divotLeftOrTop};a=document.createElement("div");G(a,"tooltip");b.Il?a.innerHTML=b.content:a.textContent=b.content;a.style.width=b.width+"px";a.style.borderWidth="2px";a.style.position="absolute";a.style.borderStyle="solid";a.style.borderRadius="6px";a.style.fontSize="12px";a.style.padding="8px";a.style.display="none";a.style.zIndex="5";b=Lk(b.Ud,b.bf);void 0!==b&&a.appendChild(b);return a}function Lk(a,b){var c="";switch(a){case 0:a=Jj;c="divotTop";break;case 1:a=Kj;c="divotBottom";break;case 2:a=Lj;c="divotLeft";break;case 3:a=Mj;c="divotRight";break;default:a=void 0}if(void 0!==a)return b=a("","",b),G(b,c),G(b,"divot"),b};function Nk(a){F.call(this);var b=this;this.data=a;this.disabled=!1;this.aC=function(d){b.disabled&&(d.preventDefault(),void 0!==b.data.Lv?uc(b.data.Lv,function(){void 0!==b.xg&&b.xg(d)}):void 0!==b.xg&&b.xg(d))};this.$C=function(){void 0!==b.af&&(b.af.style.display="block")};this.oB=function(){void 0!==b.af&&(b.af.style.display="none")};this.element.removeAttribute("id");G(this.element,"menuItem");this.element.style.padding="9px 0";this.element.style.cursor="pointer";this.element.style.boxSizing="border-box";this.element.style.position="relative";this.element.style.overflow="visible";this.element.style.borderWidth="1px";this.element.style.borderStyle="solid";void 0!==a.af&&(this.af=a.af,this.af.style.top="57px",this.element.appendChild(a.af));this.yg=document.createElement("dt");this.yg.style.margin="0";this.yg.style.padding="0 8px 5px 28px";this.yg.style.backgroundSize="14px 14px";this.yg.innerText=a.label;this.element.appendChild(this.yg);var c=a.description;void 0!==c&&0<c.length&&(this.Qj=document.createElement("dd"),this.Qj.style.margin="0",this.Qj.style.padding="0 8px 0 28px",this.Qj.innerText=c,this.element.appendChild(this.Qj));Ok+=1;c="ButtonMenuItem"+Ok.toString();this.input=document.createElement("input");this.input.id=c;this.input.setAttribute("name",c);this.input.setAttribute("type","radio");this.input.style.cursor="pointer";this.input.style.position="absolute";this.input.style.opacity="0";this.input.style.width="0";this.input.style.height="0";this.element.appendChild(this.input);void 0!==a.xg&&(this.xg=a.xg);v("mouseenter",this.element,function(){b.disabled&&void 0!==b.af&&b.$C()});v("mouseleave",this.element,function(){b.disabled&&void 0!==b.af&&b.oB()});this.xl=a.xl;v("click",this.element,function(d){b.disabled?void 0!==b.xg&&b.xg(d):b.xl(d)});v("touchstart",this.element,this.aC);v("focus",this.input,function(){b.element.style.outline="2px solid Highlight"});v("blur",this.input,function(){b.element.style.removeProperty("outline")})}r(Nk,F);k=Nk.prototype;k.select=function(){G(this.yg,"selected")};k.xe=function(){return this.data.value};k.bo=function(){var a=this.data.Uu;return void 0===a?this.data.label:a};k.disable=function(){this.disabled||(this.disabled=!0,G(this.element,"disabled"))};k.enable=function(){this.disabled&&(this.disabled=!1,H(this.element,"disabled"))};var Ok=0;function Pk(a,b){Dc.call(this);var c=this;this.width=280;this.visible=!1;this.Au=new D("visibilityChange");this.Kt=new D("selectionChange");var d=[],e=a.length;0===e&&u("ButtonMenu requires at least one option!");G(this.element,"menu");this.element.style.padding="0";this.element.style.display="none";this.element.style.width=this.width+"px";this.element.style.textAlign="left";this.element.style.fontSize="14px";this.element.style.lineHeight="14px";this.element.style.borderRadius="2px";this.V.style.zIndex="1002";this.element.style.zIndex="1003";this.element.style.overflow="visible";this.element.style.removeProperty("height");for(var f=-1,g=e-1,h={},m=0;m<e;h={Rd:h.Rd,nn:h.nn},m+=1){var n=a[m];n.value===b&&(f=m);n.xl=function(p){return function(y){y.stopPropagation();Qk(c,p.Rd)}}(h);h.Rd=new Nk(n);h.nn=function(p){return function(y){y.preventDefault();y.stopPropagation();Qk(c,p.Rd);return!1}}(h);v("keyup",h.Rd.input,function(p){return function(y){return 32===y.keyCode?p.nn(y):!0}}(h));v("keydown",h.Rd.input,function(p){return function(y){return 13===y.keyCode?p.nn(y):!0}}(h));0===m&&(h.Rd.element.style.borderTopWidth="1px",h.Rd.element.style.borderTopLeftRadius="2px",h.Rd.element.style.borderTopRightRadius="2px");m===g&&(h.Rd.element.style.borderBottomLeftRadius="2px",h.Rd.element.style.borderBottomRightRadius="2px");this.H(h.Rd);d.push(h.Rd.input)}this.Am=this.children()[-1===f?0:f];this.Vj=d;this.Kt.j(function(p){p.current.select();void 0!==p.previous&&H(p.previous.yg,"selected")});this.hc.j(function(){c.D()})}
r(Pk,Dc);k=Pk.prototype;k.xe=function(){return this.Am.xe()};k.bo=function(){return this.Am.bo()};k.isVisible=function(){return this.visible};k.show=function(a){this.isVisible()||(this.Au.h(!0),this.element.style.display="inline-block",this.element.style.top=a.top+"px",this.element.style.left=a.left+"px",this.Vg(),this.visible=!0,this.Y())};k.D=function(a){a=void 0===a?!1:a;this.isVisible()&&(a||this.Au.h(!1),this.visible=!1,this.element.style.display="none",this.mb())};k.toggle=function(a){this.isVisible()?this.D():this.show(a)};k.Re=function(){Dc.prototype.Re.call(this);var a={current:this.Am};a.current.select();void 0!==a.previous&&H(a.previous.yg,"selected")};k.Dr=function(){for(var a,b=this.parent;void 0!==b;b=b.parent)if("hidden"===window.getComputedStyle(b.element).overflowY){a=b.element;break}return a};k.G=function(){if(this.isVisible()){var a=this.Dr();a=(void 0!==a?a.getBoundingClientRect().bottom:document.documentElement.clientHeight)-this.element.getBoundingClientRect().bottom;32>a&&(this.element.style.top=this.element.offsetTop-(32-a)+"px")}};function Qk(a,b){var c=a.Am;a.D();b!==c&&(a.Am=b,a.Kt.h({previous:c,current:b}))}
function Rk(a){F.call(this);var b=this;this.enabled=this.Ij=this.Wl=!0;this.vD=new D("tipTypeChange");G(this.element,"sendTip");this.element.style.margin="6px";this.element.style.display="inline-block";this.element.style.verticalAlign="top";this.element.style.overflow="visible";this.element.style.position="static";this.element.style.removeProperty("width");this.element.style.removeProperty("height");this.Hb=Sk(this);this.we=Tk(this);this.we.innerHTML="&#9660;";this.we.id="id_tip_type_select_tm";this.rc=new Pk(Uk,a);this.Hb.innerText=this.rc.bo();a=q(this.rc.children());for(var c=a.next();!c.done;c=a.next())Vk(c.value);this.element.appendChild(this.Hb);this.element.appendChild(this.we);this.xj=this.rc.xe();this.H(this.rc);this.rc.Kt.j(function(d){b.Ij&&(Wk(b,d.current.xe()),b.Hb.focus())});v("mouseenter",this.Hb,function(){b.Hb.style.textDecoration="underline"});v("mouseleave",this.Hb,function(){b.Hb.style.textDecoration="none"});v("click",this.we,function(d){d.preventDefault();d.stopPropagation();d=b.element;var e=yc(b.Hb);b.rc.toggle({top:e.height+2*e.top,left:d.offsetLeft+d.offsetWidth+1-b.rc.width});return!1});this.rc.Au.j(function(d){d||b.Hb.focus()});this.Vj=[this.Hb,this.we];K.j(function(d){if(d.C.Rz){d=b.rc.xe();b.Ij=!0;var e=b.rc.children();1<e.length&&e[1].enable();Wk(b,d)}else b.Ij=!1,d=b.rc.children(),1<d.length&&d[1].disable(),Wk(b,"public")})}r(Rk,F);function Xk(a,b){a.Hb.innerHTML=b+" &#9656;";a.Wl&&(a.hasFocus()&&a.Hb.focus(),a.Wl=!1,a.rc.D(),a.Hb.style.borderRadius="4px",a.we.style.display="none",a.Vj=[a.Hb])}function Yk(a){a.Ij?a.Hb.innerText=a.rc.bo():a.Hb.innerHTML=""+qd}k=Rk.prototype;k.isEnabled=function(){return this.enabled};k.disable=function(){this.isEnabled()&&(this.enabled=!1,this.rc.D(),this.Hb.disabled=!0,G(this.Hb,"disabled"),this.we.disabled=!0,G(this.we,"disabled"))};k.enable=function(){this.isEnabled()||(this.enabled=!0,this.Hb.disabled=!1,H(this.Hb,"disabled"),this.we.disabled=!1,H(this.we,"disabled"))};k.hasFocus=function(){return-1<Zk(this).index};function $k(a){a=Zk(a);var b=a.elements.length;--a.index;if(-2===a.index)a.index=b-1;else if(-1===a.index)return!1;a.elements[a.index].focus();return!0}function al(a){a=Zk(a);var b=a.elements.length;a.index+=1;if(a.index>=b)return!1;a.elements[a.index].focus();return!0}
function Zk(a){var b=a.Vj;a.Wl&&a.rc.isVisible()&&(b=a.Vj.concat(a.rc.Vj));return{elements:b,index:b.indexOf(document.activeElement)}}function Wk(a,b){a.xj=b;a.vD.h(b);Yk(a)}function Vk(a){a.yg.style.fontFamily="'UbuntuMedium', Helvetica, Arial, sans-serif";void 0!==a.Qj&&(a.Qj.style.fontFamily="'UbuntuRegular', Helvetica, Arial, sans-serif")}
k.Ln=function(){var a=document.createElement("button");G(a,"buttons");a.style.position="relative";a.style.display="inline-block";a.style.cursor="pointer";a.style.fontSize="14px";a.style.borderWidth="1px";a.style.borderStyle="solid";a.style.height="32px";a.style.verticalAlign="top";a.style.margin="0";v("focus",a,function(){a.style.zIndex="100"});v("blur",a,function(){a.style.zIndex="auto"});return a};function Sk(a){a=a.Ln();a.setAttribute("type","submit");a.style.padding="6px 18px";a.style.borderRadius="4px 0 0 4px";a.style.borderRight="0 none transparent";return a}function Tk(a){a=a.Ln();a.style.padding="6px 0";a.style.borderRadius="0 4px 4px 0";a.style.width="24px";return a}
var Uk=[{label:td,value:"public",description:ud,Uu:qd,xl:function(){}},{label:vd,value:"anonymous",description:wd,Uu:yd,xl:function(){},xg:function(){A("SupporterPageOpened",{source:"anon_tip"});window.top.location.href="/supporter/upgrade/"},af:Ek({content:oi,Il:!1,width:240,Ud:0,bf:"40px"}),Lv:oi+" "+Ad}];function bl(a,b){window.setTimeout(function(){b.Ij&&A("SendTipViewed",{source:a,tipType:b.xj,localStorage:t()})},0)}
function cl(){var a=document.createElement("input");G(a,"tipAmountInput");v("keypress",a,function(b){b.metaKey||8===b.charCode||0===b.charCode||13===b.charCode||48<=b.charCode&&57>=b.charCode||b.preventDefault()});v("paste",a,function(){window.setTimeout(function(){/^[1-9]\d*$/.test(a.value)||(a.value="")},0)});return a}var dl;function el(a){a=void 0===a?!1:a;var b=""===window.location.search?"/tipping/purchase_tokens/":"/tipping/purchase_tokens/"+window.location.search,c=new Tb(["PrchPgIfrmV4","PrchPgPopupV4"],"purchaseredesign");c.Ci&&c.active?(b=c.lq,c=""===window.location.search?"/tipping/purchase_tokens/":"/tipping/purchase_tokens/"+window.location.search,"PrchPgIfrmV4"===b?a?ij(c,"_blank","height=715, width=430, scrollbars=1"):void 0===dl||dl.hs?dl=new Gj:dl.show():"PrchPgPopupV4"===b?ij(c,"_blank","height=715, width=430, scrollbars=1"):ij(c,"_blank","height=615, width=850, scrollbars=1")):ij(b,"_blank","height=615, width=850, scrollbars=1")}function fl(a){for(var b=q(document.querySelectorAll(".tokencount[updatable-count]")),c=b.next();!c.done;c=b.next())c.value.textContent=""+a}function gl(a){a.onclick=function(b){b.ctrlKey||b.metaKey||(b.preventDefault(),el(b.target.className.includes("popup_only")))};""===a.href&&(a.href="/tipping/purchase_tokens/")};function hl(){var a;return void 0===(null===(a=Ja.current)||void 0===a?void 0:a.xb)}var il;function jl(a){a=void 0===a?"Login required":a;return hl()?(void 0!==il?il():uc(a,function(){window.top.location.href="/auth/login/?next="+window.location.pathname+window.location.search},void 0),!0):!1};function kl(a,b,c){b=void 0===b?!0:b;F.call(this,"div",c);var d=this;this.ah=new D("dropDownToggled",{dd:!1});this.me=a;void 0!==a&&(v("click",a,function(e){e instanceof MouseEvent&&(e.metaKey||e.ctrlKey)||(d.nb()?d.Oa(e):d.Za(void 0,e))},!1),v("keydown",a,function(e){if(32===e.keyCode||"Space"===e.code)e.preventDefault(),d.nb()?d.Oa(e):d.Za(void 0,e)}));ll(this,b)}r(kl,F);kl.prototype.ya=function(a){F.prototype.ya.call(this,a);this.element.style.overflow="visible";this.element.style.position="absolute";this.element.style.top="0";this.element.style.left="0";this.element.style.right="auto";this.element.style.bottom="auto";this.element.style.width="";this.element.style.height="";this.element.style.display="none"};kl.prototype.Za=function(a,b){if(this.nb())return!1;this.element.style.display=void 0===a?"block":a;this.ah.h(new ml(!0,b));return!0};kl.prototype.Oa=function(a){if(!this.nb())return!1;this.element.style.display="none";this.ah.h(new ml(!1,a));return!0};function ll(a,b){b=void 0===b?!0:b;nl.j(function(c){!(a.nb()&&c.target instanceof Element)||b&&a.element.contains(c.target)||void 0!==a.me&&a.me.contains(c.target)||a.Oa(c)})}function ol(a){kl.call(this,a)}r(ol,kl);ol.prototype.ya=function(){kl.prototype.ya.call(this);this.element.style.display="block"};ol.prototype.Za=function(){var a=this.element.parentElement;if(null===a)return!1;a.classList.toggle("pushmenu-animate",!0);this.ah.h(new ml(!0));return!0};ol.prototype.Oa=function(){var a=this.element.parentElement;if(null===a)return!1;a.classList.toggle("pushmenu-animate",!1);this.ah.h(new ml(!1));return!0};ol.prototype.nb=function(){var a=this.element.parentElement;return null===a?!1:a.classList.contains("pushmenu-animate")};function ml(a,b){this.Xc=a;this.event=b}
var nl=new D("documentClick"),pl=!1,ql;v("touchmove",document,function(){pl=!0});v("touchstart",document,function(){pl=!1});v("click",document,function(a){nl.h(a);void 0!==ql&&(clearTimeout(ql),ql=void 0)});(eb()||fb())&&v("touchend",document,function(a){pl||(ql=window.setTimeout(function(){ql=void 0;nl.h(a)},200))},!1);function rl(a){F.call(this,"div");this.element.style.height="";this.element.style.width="";this.element.style.position="relative";void 0!==a&&(a instanceof F?this.H(a):this.element.appendChild(a))}r(rl,F);function sl(a,b){kl.call(this,a,!1);var c=this;this.me=a;this.Qz=!0===b;this.Nq=new tl;this.H(this.Nq);yk.j(function(){c.nb()&&c.Mh()})}r(sl,kl);sl.prototype.Za=function(a,b){if(!kl.prototype.Za.call(this,void 0===a?"block":a,b))return!1;this.me.classList.add("active");document.body.appendChild(this.element);this.Mh();return!0};sl.prototype.Oa=function(a){if(!kl.prototype.Oa.call(this,a))return!1;this.me.classList.remove("active");document.body.removeChild(this.element);return!0};sl.prototype.Mh=function(){var a=nk(this.me),b=this.Qz||this.element.offsetWidth+a.left>document.documentElement.clientWidth&&0<a.right-this.element.offsetWidth;this.element.style.position="absolute";this.element.style.backgroundColor=mk(this.me);"0px"!==ul(this,b?"borderRightWidth":"borderLeftWidth")&&(this.element.style.borderWidth=ul(this,b?"borderRightWidth":"borderLeftWidth"),this.element.style.borderStyle=ul(this,b?"borderRightStyle":"borderLeftStyle"),this.element.style.borderColor=ul(this,b?"borderRightColor":"borderLeftColor"));var c=ul(this,b?"borderTopRightRadius":"borderTopLeftRadius");""!==c&&(this.element.style.borderRadius=(b?c+" 0":"0 "+c)+" "+c+" "+c);c=pk(getComputedStyle(this.element).borderBottomWidth)-pk(getComputedStyle(this.me).borderLeftWidth);this.element.style.top=a.bottom+4+"px";b?(this.element.style.left="",a=document.documentElement.clientWidth-a.right-c,this.element.style.right=a+"px",this.element.style.right=a-vl(this.me,this.element)-c+"px"):(this.element.style.right="",a=a.left-c,this.element.style.left=a+"px",this.element.style.left=a+wl(this.me,this.element)-c+"px");a=this.Nq;var d=this.me,e=getComputedStyle(this.element);a.element.style.borderLeftWidth=e.borderLeftWidth;a.element.style.borderLeftStyle=e.borderLeftStyle;a.element.style.borderLeftColor=e.borderLeftColor;a.element.style.borderRightWidth=e.borderLeftWidth;a.element.style.borderRightStyle=e.borderLeftStyle;a.element.style.borderRightColor=e.borderLeftColor;var f=pk(getComputedStyle(d).width)+2*c;a.element.style.width=f+"px";var g=this.element.offsetTop-nk(d).bottom+1;a.element.style.height=g+2+"px";a.element.style.top="-"+(g+2)+"px";a.element.style.backgroundColor=e.backgroundColor;g=Fc(e.borderWidth,e.borderLeftWidth);a.element.style.right=b?"-"+g:"";a.element.style.left=b?"":"-"+g;a.element.style.zIndex=""+(parseInt(Fc(e.zIndex,"0"))+1);a.element.style.width=b?f-wl(d,a.element)+c+"px":f+vl(d,a.element)+c+"px";this.element.style.zIndex=getComputedStyle(this.Nq.element).zIndex};function ul(a,b){return Fc(a.me.style[b],getComputedStyle(a.me)[b])}function tl(){F.call(this);P(this.element,{position:"absolute",zIndex:4})}r(tl,F);function wl(a,b){return a.getBoundingClientRect().left-b.getBoundingClientRect().left}function vl(a,b){return a.getBoundingClientRect().right-b.getBoundingClientRect().right};function xl(a,b){F.call(this,a);var c=this;this.Hv="inline-block";this.Lq=new D("collapse",{dd:!1});this.Kh=[];this.$t=[];this.Yg=new rl;this.Mq=[];if(void 0===a||"string"===typeof a)this.element.appendChild(document.createTextNode(yl)),P(this.element,{cursor:"pointer",width:"",height:"",padding:"0 10px",textAlign:"center"});this.Wd=new sl(this.element,!0===b);P(this,{userSelect:"none"});this.Oa();P(this.Yg,{cssFloat:"right",height:"100%",visibility:"hidden"});this.Wd.ah.j(function(d){c.onToggle(d)});yk.j(function(d){c.Wd.nb()&&c.Wd.Oa();zl(c,!d)});window.setTimeout(function(){if(void 0!==c.parent||null!==c.element.parentElement){var d=void 0===c.parent?c.element.parentElement:c.parent.element;a:{if(void 0!==c.parent){var e=q(c.parent.children());for(var f=e.next();!f.done;f=e.next())if(f=f.value,Al(f.element)){e=f;break a}}e=void 0}void 0!==e&&d.insertBefore(c.Yg.element,e.element.nextSibling)}zl(c)})}r(xl,F);function zl(a,b){b=void 0===b?!0:b;var c=a.Wd.nb();c&&Bl(a);Cl(a);if(0===a.Kh.length)a.nb()&&(a.Oa(),a.Yg.element.style.paddingLeft="0px",a.Lq.h(!1));else{var d;if(d=1===a.Kh.length&&a.nb()){d=a.Kh[0];var e=getComputedStyle(d.element);d=d.element.offsetWidth+pk(e.marginLeft)+pk(e.marginRight)+5<=a.element.offsetWidth+a.Yg.element.offsetLeft-a.element.offsetLeft}d?(a.Oa(),d=a.Yg.element.style.paddingLeft,a.Yg.element.style.paddingLeft="0px",Cl(a),0<a.Kh.length?(a.Za(a.Hv),a.Yg.element.style.paddingLeft=d):a.Lq.h(!1)):a.nb()||(a.Za(a.Hv),a.Mh(),a.Lq.h(!0),Cl(a))}b&&a.nb()&&Dl(a);c&&(0===a.Kh.length?a.Wd.Oa():(El(a),a.Wd.Mh()))}xl.prototype.G=function(){F.prototype.G.call(this);zl(this)};xl.prototype.onToggle=function(a){a.Xc?(Cl(this),El(this)):Bl(this)};function El(a){a.Kh.forEach(function(b){a.Mq.unshift([b,b.nextSibling()]);a.Wd.H(b);b.collapse(!0)})}
function Bl(a){var b=a.parent;a.Mq.forEach(function(c){var d=c[0];c=c[1];void 0!==d.parent&&d.parent!==b&&d.parent.removeChild(d);c=void 0===c?-1:b.sg.indexOf(c);0>c?b.element.appendChild(d.element):b.element.insertBefore(d.element,b.sg[c].element);b.sg.splice(c,0,d);d.parent=b;d.collapse(!1)});a.Mq=[]}function Fl(a){return void 0===a.parent?[]:a.parent.children().filter(function(b){return b instanceof Gl&&b.nb()})}
function Cl(a){if(null!==a.element.parentElement&&null!==a.element.parentElement.offsetParent){var b=Fl(a);a.Kh=[];a.$t=[];b.forEach(function(c){(Vb()?2<=c.element.offsetTop:c.element.offsetTop+2>=c.element.offsetHeight)?a.Kh.push(c):a.$t.push(c)})}}
xl.prototype.Mh=function(){null!==this.element.parentElement&&(P(this.element,{position:"absolute",boxSizing:"border-box",textAlign:"center"}),this.Yg.element.style.paddingLeft=this.element.offsetWidth+"px",this.element.removeAttribute("data-floatingnav"),""===this.element.style.width&&(this.element.style.width=this.element.offsetWidth+1+"px"))};function Dl(a){if(void 0!==a.parent){for(var b=0,c=q(a.parent.children()),d=c.next();!d.done;d=c.next())d=d.value,!Al(d.element)||d===a||d instanceof Gl&&-1===a.$t.indexOf(d)||(b=Math.max(d.element.offsetLeft+d.element.offsetWidth+pk(getComputedStyle(d.element).marginRight),b));a.element.offsetLeft!==b&&(a.element.style.left=b+"px",window.setTimeout(function(){a.element.style.left=""}))}}var yl=".\u2009.\u2009.";function Al(a){return"none"!==a.style.display&&"right"!==a.style.cssFloat&&"absolute"!==a.style.position&&"fixed"!==a.style.position}function Gl(a){F.call(this,void 0===a?"div":a);var b=this;this.Zo=new D("collapse",{dd:!1});this.collapsed=!1;window.setTimeout(function(){b.Zo.h(b.collapsed)})}r(Gl,F);Gl.prototype.collapse=function(a){(this.collapsed=a)?this.element.classList.add("collapsed"):this.element.classList.remove("collapsed");this.Zo.h(a)};function Hl(){F.call(this);this.ke={position:"relative",padding:"5px",margin:"2px 0 0 2px",borderRadius:"4px 4px 0 0",minWidth:"16px",width:"auto",height:"100%",fontSize:"10px",cursor:"pointer",cssFloat:"left",LH:"none",WebkitTextSizeAdjust:"none",userSelect:"none"};this.kD={cursor:"default"};G(this.element,"BaseTabsContainer");this.Rb=new rl;this.Rb.element.id="tab-row";this.Rb.element.style.overflow="hidden";this.Rb.element.style.width="100%";F.prototype.H.call(this,this.Rb);this.window=document.createElement("div");this.window.style.width="100%";this.window.style.position="absolute";G(this.window,"window");this.element.appendChild(this.window);Vb()&&(G(this.element,"modern"),delete this.ke.borderRadius,delete this.ke.margin,delete this.ke.marginRight,this.ke.padding="0 8px",this.ke.lineHeight="22px",this.ke.height="22px")}r(Hl,F);k=Hl.prototype;k.G=function(){this.window.style.height=this.element.clientHeight-this.Rb.element.offsetHeight+"px"};k.H=function(){throw Error("addChild not implemented");};function Il(a,b){b.element.style.width="100%";b.element.style.height="100%";b.element.style.display="none";F.prototype.H.call(a,b,a.window);a.xq(b);return b}k.xq=function(a){var b=Jl(a);this.Rb.H(b);Kl(a);G(b,"tab");G(b,"chatAreaTabColor");return b};k.children=function(){return F.prototype.children.call(this).filter(function(a){return a instanceof Ll})};function Ml(a,b){a.Qn=b;b=a.children();for(var c=b.length-1;0<=c;--c){var d=b[c];d!==a.Qn?d.Oa():a.Qn.active||d.Za()}a.Y();a.Re()}k.ec=function(){return this.Qn};k.Pb=function(){for(var a=!1,b=q(this.children()),c=b.next();!c.done;c=b.next())a=Kl(c.value)||a;a&&this.Rb.Y()};k.Li=function(a){a.active?G(a.P,"active"):(H(a.P,"active"),a instanceof Nl&&(a.collapsed?G(a.P,"collapsed"):H(a.P,"collapsed")));return Object.assign(Object.assign(Object.assign({},this.ke),a instanceof Nl&&a.collapsed?a.jB:{}),a.active?this.kD:{})};function Ll(){F.call(this);this.bx=this.active=!1;this.element.style.position="relative"}r(Ll,F);k=Ll.prototype;k.Md=function(){Ol(this)};k.lk=function(){return"none"===this.P.element.style.display};k.gf=function(){return[document.createTextNode("\u00a0")]};k.Cg=function(){return""};function Kl(a){for(var b=a.P.element.textContent;null!==a.P.element.firstChild;)a.P.element.removeChild(a.P.element.firstChild);for(var c=document.createElement("span"),d=q(a.gf()),e=d.next();!e.done;e=d.next())c.appendChild(e.value);a.P.element.appendChild(c);Pl(a);c="none"===a.P.element.style.display;a.P.element.style.display=a.lk()?"none":"inline-block";return b!==a.P.element.textContent||c!==("none"===a.P.element.style.display)}
function Jl(a){a.P=a.lv();for(tb(["click","touchstart"],a.P.element,function(d){a.Md(d);a instanceof Nl&&a.collapsed&&(a.bx=!1)});null!==a.P.element.firstChild;)a.P.element.removeChild(a.P.element.firstChild);for(var b=q(a.gf()),c=b.next();!c.done;c=b.next())a.P.element.appendChild(c.value);a.P.element.id=a.Cg();Pl(a);qk(a.P).j(function(d){a.bx=d;Pl(a)});return a.P}k.lv=function(){return new F(document.createElement("div"))};function Ol(a){void 0===a.parent?u("no parent"):Ml(a.parent,a)}
function Ql(a){return void 0===a.parent?(u("no parent"),!1):a.parent.ec()===a}k.Pb=function(){void 0===this.parent?u("no parent"):this.parent.Pb()};k.Li=function(){return void 0!==this.parent?this.parent.Li(this):{}};function Pl(a){P(a.P,a.Li())}k.Oa=function(){F.prototype.Oa.call(this);this.active=!1;Pl(this)};k.Za=function(){F.prototype.Za.call(this);this.active=!0;Pl(this)};function Nl(){Ll.apply(this,arguments);this.jB={display:"block",cssFloat:"none",padding:"9px 12px",margin:0,borderRadius:"",border:"none",boxSizing:"border-box",width:"100%",height:"auto"}}r(Nl,Ll);Nl.prototype.lv=function(){var a=this,b=new Gl(document.createElement("div"));b.Zo.j(function(c){a.collapsed=c;void 0!==a.ZB&&a.ZB(c);Kl(a)});return b};function Rl(a){var b=gb();void 0!==b&&9>=b||(a.style["-webkit-overflow-scrolling"]="touch");a.style.overflowY="scroll";v("touchstart",a,function(c){1<c.touches.length?c.preventDefault():0===a.scrollTop&&(a.scrollTop=1)});v("touchmove",a,function(c){c.stopPropagation();a.scrollHeight<=a.clientHeight&&c.preventDefault()});v("scroll",a,function(){0===a.scrollTop?a.scrollTop=1:a.scrollTop===a.scrollHeight-a.offsetHeight&&(a.scrollTop=a.scrollHeight-a.offsetHeight-1)})};function Sl(a){F.call(this);G(this.element,"twitterUpdateRow");this.element.style.fontFamily="UbuntuRegular, Helvetica, Arial, sans-serif";this.element.style.fontStyle="normal";this.element.style.fontWeight="normal";this.element.style.position="relative";this.element.style.height="";this.element.style.width="";this.element.style.margin="7px";this.element.style.padding="6px";a.Th?G(this.element,"seen"):H(this.element,"seen");this.element.style.borderWidth="1px";this.element.style.borderStyle="solid";this.element.style.borderRadius="4px";var b=this.element,c=b.appendChild,d=document.createElement("div");d.innerHTML=a.text;Tl(d);G(d,"contentSection");d.style.fontSize="12px";d.style.lineHeight="14px";d.style.whiteSpace="pre-wrap";d.style.marginBottom="6px";d.style["word-wrap"]=d.style["word-break"]="break-word";d.style.overflow="hidden";c.call(b,d);""!==a.Xm&&(b=a.Xm,c=document.createElement("div"),G(c,"timeSince"),c.appendChild(document.createTextNode(b)),c.style.fontSize="9px",c.style.lineHeight="13px",c.style.cssFloat="left",this.element.appendChild(c));""!==a.url&&(b="twitter_feed",void 0!==a.Dx&&(b=a.Dx),a=Ul(a.url,b),this.element.appendChild(a))}r(Sl,F);function Tl(a){Array.from(a.querySelectorAll("a")).forEach(function(b){G(b,"tweetLink");b.target="_blank";b.style.outline="none";b.style.color="#e45900";b.style.fontSize="12px";b.style.lineHeight="14px";null!==b.firstChild&&b.firstChild instanceof Text&&null!==b.firstChild.textContent&&(b.firstChild.textContent=b.firstChild.textContent.replace(/^http(s)?:\/\//,"").replace(/^www\./,""));b.onclick=function(){A("NewsfeedItemLinkClick")}})}
function Ul(a,b){var c=document.createElement("a");c.href=a;c.target="_blank";a="twitter_feed"===b;c.appendChild(document.createTextNode(a?Kg:Lg));G(c,"twitterLink");c.style.fontSize="9px";c.style.lineHeight="13px";c.style.textAlign="right";c.style.cssFloat="right";a&&(c.onclick=function(){A("NewsfeedItemViewOnTwitter")});return c};function Vl(){F.call(this);this.element.style.overflow="";this.element.style.position="static";this.element.style.overflowX="hidden";this.element.style.overflowY="auto";Wl(this)}r(Vl,F);function Wl(a){if(/iPad|iPhone|iPod/.test(navigator.platform)){a.element.style["-webkit-overflow-scrolling"]="touch";var b=function(){a.element.style.overflowY="scroll";x("scroll",a.element,b)};v("scroll",a.element,b)}};function Xl(){Vl.call(this);this.H(new Sl({text:qe+"...",Th:!0,timestamp:0,Xm:"",url:""}))}r(Xl,Vl);function Yl(a,b){cc(a);0===b.length&&a.H(new Sl({text:""+ni,Th:!0,timestamp:0,Xm:"",url:""}));b.forEach(function(c){a.H(new Sl(c))})}Xl.prototype.ya=function(){G(this.element,"updatesTabContents");this.element.style.maxHeight="307px";this.element.style["-webkit-transform"]="translateZ(0)"};function Zl(){Xl.apply(this,arguments)}r(Zl,Xl);Zl.prototype.ya=function(){Xl.prototype.ya.call(this);this.element.style.maxHeight="";Rl(this.element)};var $l=new D("dropDownToggle"),am=new D("updatesAreRead"),bm=new D("toggleElementHasUnseen");function Q(a){this.wz={};if("string"===typeof a){this.He=a;try{this.parsed=JSON.parse(a)}catch(b){this.parsed={},u("Cannot JSON parse",{message:a})}}else"object"===typeof a?(this.parsed=a,this.He=JSON.stringify(a)):u("Invalid input type",{message:a})}Q.prototype.mf=function(a){this.wz[a]=!0};function R(a,b){a.mf(b);if(null!==a.parsed[b])return a.parsed[b]}function cm(a,b){a.mf(b);if(null!==a.parsed[b]&&void 0!==a.parsed[b])return a.parsed[b].map(function(c){return new Q(c)})}
function dm(a,b){a.mf(b);return Array.isArray(a.parsed[b])?a.parsed[b].map(function(c){return c}):[]}Q.prototype.getAsString=function(a){return""+R(this,a)};function S(a,b,c){c=void 0===c?!0:c;var d=R(a,b);if("string"!==typeof d)c&&void 0!==d&&w("getStringOrUndefined("+b+"): "+d+" is wrong type",{message:a.He});else return d}function T(a,b,c){c=void 0===c?!0:c;var d=R(a,b);return"string"!==typeof d?(c&&w("getString("+b+"): "+d+" is wrong type",{message:a.He}),""):d}
function U(a,b,c){c=void 0===c?!0:c;var d=R(a,b);return"string"!==typeof d&&"number"!==typeof d?(c&&w("getStringWithNumbers("+b+"): "+d+" is wrong type",{message:a.He}),""):""+d}function V(a,b,c,d){c=void 0===c?!1:c;d=void 0===d?!0:d;var e=R(a,b);return"boolean"!==typeof e?(d&&w("getBoolean("+b+"): "+e+" is wrong type",{message:a.He}),c):e}function W(a,b,c){c=void 0===c?!0:c;var d=R(a,b);return"number"!==typeof d?(c&&w("getNumber("+b+"): "+d+" is wrong type",{message:a.He}),NaN):d}
function em(a,b){var c=void 0===c?!0:c;var d=R(a,b);if("number"!==typeof d)c&&void 0!==d&&w("getNumberOrUndefined("+b+"): "+d+" is wrong type",{message:a.He});else return d}function fm(a,b){return new Q(gm(a,b))}function hm(a,b,c){a=im(a,b,void 0===c?!0:c);if(void 0!==a)return new Q(a)}function jm(a,b){a=km(a,b);return""===a?new Q("{}"):new Q(a)}
function km(a,b,c){c=void 0===c?!0:c;var d=R(a,b);return"object"!==typeof d?(c&&w("getObjectString("+b+"): "+d+" is wrong type",{message:a.He}),""):JSON.stringify(d)}function lm(a,b,c){c=void 0===c?!0:c;var d=R(a,b);if("object"!==typeof d)c&&void 0!==d&&w("getObjectStringOrUndefined("+b+"): "+d+" is wrong type",{message:a.He});else return JSON.stringify(d)}
function gm(a,b){var c=void 0===c?!0:c;var d=R(a,b);return"object"!==typeof d?(c&&w("getObject("+b+"): "+d+" is wrong type",{message:a.He}),{}):d}function im(a,b,c){c=void 0===c?!0:c;var d=R(a,b);if("object"!==typeof d)c&&void 0!==d&&w("getObjectOrUndefined("+b+"): "+d+" is wrong type",{message:a.He});else return d}function mm(a){var b=[],c;for(c in a.parsed)!0!==a.wz[c]&&b.push(c);b=q(b);for(c=b.next();!c.done;c=b.next())c=c.value,"object"===typeof a.parsed[c]&&JSON.stringify(a.parsed[c])};function nm(a){var b=["twitter_feed","offline_tip"].map(function(c){return"notification_type="+c}).join("&");Gb("notifications/updates/?"+b).then(function(c){c=cm(new Q(c.responseText),"items");void 0!==c&&(c=c.map(function(d){return{text:T(d,"text"),url:T(d,"url"),timestamp:W(d,"timestamp"),Xm:T(d,"time_since"),Th:V(d,"seen"),Dx:T(d,"notification_type")}}),a(c))}).catch()}function om(a,b){Gb("notifications/record_last_seen/?timestamp="+a).then(function(){b()}).catch()};function pm(){}function qm(){this.enabled=!0;this.Sw=!1;this.Zk=new Map;this.creationTime=(new Date).getTime();this.nl=new D("connectionStateChange");this.disabled=new D("disabled",{fe:1,Bd:1})}k=qm.prototype;k.bs=function(){return this.Sw?Promise.resolve():this.enabled?(this.Sw=!0,Promise.resolve()):Promise.reject(this.sr)};k.isEnabled=function(){return this.enabled};k.disable=function(a){this.enabled=!1;this.isConnected()&&this.close();void 0===this.sr&&(this.sr=a,this.disabled.h(a))};function rm(a,b,c){c=void 0===c?{}:c;void 0!==Kb&&(c.action=b,c.created=a.creationTime,c.client=a.sA,A("PushServiceClient",c))}k.isConnected=function(){return"connected"===sm(this.ie.connection.state)};function tm(a){return a.isConnected()?Promise.resolve():a.isEnabled()?a.connect():Promise.reject(a.sr)}
function um(a,b){return tm(a).then(function(){var c=vm(a.auth,b);return void 0===c||(new Date).getTime()>=c.expires?Promise.reject("Auth context has no capability: "+a.auth.Vh()):Promise.resolve()})}k.ss=function(a){var b=vm(this.auth,a);return void 0!==b&&!((new Date).getTime()>=b.expires)&&this.Zk.has(a.Bc())};function wm(a,b){a.Zk.set(b.Bc(),b);b.Hl()}function xm(a,b){a.Zk.has(b.Bc())&&a.Zk.delete(b.Bc())}k.qw=function(){return""};function ym(a){this.mu=a}r(ym,pm);ym.prototype.Bc=function(){return this.mu};ym.prototype.uh=function(){return this.mu};ym.prototype.Hl=function(){};function zm(){this.mu=Am}r(zm,ym);zm.prototype.uh=function(){return Am};zm.prototype.Ha=function(a){return{text:T(a,"text"),url:T(a,"url"),timestamp:W(a,"timestamp"),Xm:T(a,"time_since"),Th:V(a,"seen",!1,!1)}};zm.prototype.listener=function(a){Bm.h(a)};var Am="global:news",Bm=new D(Am);function Cm(a){function b(d,e){e=String(e.getAttribute("data-callback"));"null"!==e&&(window[e]=function(){d.fx=!0;d.Gn()})}var c={name:"",Yd:"",yr:"",dx:!1,Ao:!1,Pl:!1,Zw:!1,eo:!0,yB:!1,qs:!1,TE:"",fx:!1,Ow:a,$d:function(){c.yr=String(a.tagName.toLowerCase());var d=c.Ir();c.name=null!==d?d:"";c.Yd=c.name;if("captcha"===a.getAttribute("data-type"))c.qs=!0,b(c,a);else{var e=String(a.getAttribute("id")).split("_"),f=e[e.length-1];var g=["day","month","year"];d=!1;if(-1<g.indexOf(f))for(e.pop(),e=e.join("_"),d=!0,g=q(g),f=g.next();!f.done;f=g.next())null===document.querySelector("#"+(e+"_"+f.value))&&(d=!1);d&&(c.yB=!0,d=String(a.getAttribute("id")).split("_"),d.shift(),d.pop(),c.Yd=d.join("_"))}d=String(a.getAttribute("type"));"checkbox"===d?c.Ao=!0:"hidden"===d?c.Pl=!0:"select"===c.yr&&"select-multiple"===a.type&&(c.dx=!0);c.Zw=null!==a.getAttribute("disabled");c.Aw()&&(c.eo=!1)},Ir:function(){if("captcha"===a.getAttribute("data-type")){var d=String(a.getAttribute("id")).split("_");d.shift();d=d.join("_")}else d=a.getAttribute("name");return d},ZC:function(){if(!c.Pl&&!c.qs){var d=document.querySelector("#"+c.Yd+"_spinner");null!==d&&d.classList.remove("formvalidate_hidden")}},nB:function(){var d=document.querySelector("#"+c.Yd+"_spinner");null!==d&&d.classList.add("formvalidate_hidden")},fB:function(){return String(a.getAttribute("id"))},co:function(){return c.Ao?a.checked?"on":"":a.value},cv:function(){c.eo=!1},Aw:function(){if(c.Pl)return!1;var d=document.querySelector("."+c.Yd+"_error");return null!==d&&"none"!==d.style.display},Uy:function(d,e){c.Pl||(e&&(c.eo=!1),c.eo||(document.querySelector("."+c.Yd+"_error .error_msg").appendChild(document.createTextNode(d)),d=document.querySelector("."+c.Yd+"_error"),d.style.display="tr"===String(d.tagName.toLowerCase())?"table-row":"block",d=document.querySelector("."+c.Yd+"_label"),null!==d&&d.classList.add("formvalidate_error")))},Gn:function(){if(!c.Pl){for(var d=document.querySelector("."+c.Yd+"_error .error_msg");null!==d.firstChild;)d.removeChild(d.firstChild);document.querySelector("."+c.Yd+"_error").style.display="none";d=document.querySelector("."+c.Yd+"_label");null!==d&&d.classList.remove("formvalidate_error")}}};c.$d();return c}
function Dm(a){function b(){var f=document.createElement("button");f.style.display="none";a.appendChild(f);window.setTimeout(function(){f.click();a.removeChild(f)},0)}var c=!1;c=void 0===c?!0:c;var d="1"===a.getAttribute("data-formvalidate-disable-on-submit")?[].concat(ha(a.querySelectorAll("button:not([type=button]),input[type=submit]"))):[],e={Gi:[],kF:a,Ae:!0,kk:!1,mk:!1,zz:"",Cr:{},mx:{},fj:!1,ps:!1,pm:[],$d:function(){e.zz=String(a.getAttribute("data-formvalidate")).substring(1);if(c){v("submit",a,function(p){e.kk?p.preventDefault():(e.kk=!0,e.Ae&&!e.mk?e.hy(p):(e.ps=!1,d.map(function(y){return y.disabled=!0}),e.validate(!0).then(function(){e.Ae?e.hy(p):(e.kk=!1,d.map(function(y){return y.disabled=!1}))}).catch(function(){e.kk=!1;d.map(function(y){return y.disabled=!1})}),p.preventDefault()))});var f=a.getAttribute("data-formvalidate-eagerness")?Number(a.getAttribute("data-formvalidate-eagerness")):2,g;"1"===a.getAttribute("data-formvalidate-debounce")&&(g=new uk(function(){e.validate()},{xc:1E3,md:2}));for(var h=q(a.querySelectorAll("input[type=text], input[type=checkbox], input[type=password], input[type=email], select")),m=h.next();!m.done;m=h.next()){m=m.value;var n=m.getAttribute("data-formvalidate-eagerness")?Number(m.getAttribute("data-formvalidate-eagerness")):f;1<=n&&v("change",m,function(p){e.Gi[e.Cr[String(p.target.getAttribute("id"))]].cv();e.validate()});2<=n&&v("input",m,function(p){e.Gi[e.Cr[String(p.target.getAttribute("id"))]].cv();void 0!==g?vk(g):e.validate()})}}f=0;h=q(a.querySelectorAll("input[type=text], input[type=checkbox], input[type=hidden], input[type=password], input[type=email], select, .g-recaptcha"));for(m=h.next();!m.done;m=h.next())m=Cm(m.value),e.Gi.push(m),e.Cr[m.fB()]=f,f+=1},Vh:function(){return e.Gi.map(function(f){if(""!==f.name&&!f.Zw){if(f.dx)return Array.from(f.Ow.options).filter(function(h){return h.selected}).map(function(h){return encodeURIComponent(f.name)+"="+encodeURIComponent(h.value)}).join("&");if(!f.Ao&&"radio"!==f.yr||f.Ow.checked){var g=f.co();return encodeURIComponent(f.name)+"="+encodeURIComponent(g)}}}).filter(function(f){return void 0!==f}).join("&").replace(/%20/g,"+")},validate:function(f){f=void 0===f?!1:f;if(e.mk&&!f)return e.fj=!0,Promise.resolve();e.mk=!0;for(var g={},h={},m=!1,n=q(e.Gi),p=n.next();!p.done;p=n.next())if(p=p.value,h[p.name]=p.co(),p.Ao&&""===p.co()||(g[p.name]=p.co()),h[p.name]!==e.mx[p.name]||f)p.ZC(),m=!0;if(!m)return e.mk=!1,e.fj&&(e.fj=!1,e.validate()),Promise.resolve();e.mx=Object.assign({},h);return z(e.zz,g).then(function(y){y=JSON.parse(y.responseText);e.Ae=y.valid;for(var C=q(e.Gi),E=C.next();!E.done;E=C.next())E=E.value,E.qs&&!E.fx?(E.Gn(),E.Uy("Captcha has to be completed",f)):void 0!==y.errors[E.Yd]?(E.Gn(),E.Uy(y.errors[E.Yd],f)):E.Gn(),E.nB();e.qA();if(void 0!==y.errors.__all__){y=q(y.errors.__all__);for(C=y.next();!C.done;C=y.next())e.Nz(C.value);e.YC()}e.mk=!1;e.fj&&(e.fj=!1,e.validate())}).catch(function(y){Em("error: "+y);e.mk=!1;if(e.fj)e.fj=!1,e.validate();else throw y;})},hy:function(f){d.map(function(g){return g.disabled=!0});if(e.ps||0===e.pm.length)return window.setTimeout(function(){d.map(function(g){return g.disabled=!1})},700),Promise.resolve();f.preventDefault();return Promise.all(e.pm.map(function(g){return g()})).then(function(g){e.kk=!1;window.setTimeout(function(){d.map(function(h){return h.disabled=!1})},10);g.reduce(function(h,m){return h&&m},!0)&&(e.ps=!0,b())}).catch(function(g){u("Can't complete preSubmitValidation in form "+a.action,g);e.kk=!1;d.map(function(h){return h.disabled=!1});throw g;})},Nz:function(f){var g=document.querySelector("#error_notice > .errorlist"),h=document.createElement("li");h.appendChild(document.createTextNode(f));g.appendChild(h)},qA:function(){var f=document.querySelector("#error_notice");if(null!==f&&(f.classList.add("formvalidate_hidden"),f=document.querySelector("#error_notice > .errorlist"),null!==f))for(;null!==f.firstChild;)f.removeChild(f.firstChild)},YC:function(){var f=document.querySelector("#error_notice");null!==f&&f.classList.remove("formvalidate_hidden")},zF:function(){for(var f=!1,g=q(e.Gi),h=g.next();!h.done;h=g.next())h=h.value,f=f||h.Aw();g=0!==Array.from(a.getElementsByClassName("errorlist")).filter(function(m){return""!==m.innerHTML.trim()}).length;return f||g},VD:function(f){e.pm.push(f);var g=!1;return function(){g||(e.pm.splice(e.pm.indexOf(f),1),g=!0)}}};e.$d();return e};var Fm="https://cbjpeg.stream.highwebmedia.com/",Gm="https://roomimg.stream.highwebmedia.com/";var Hm=bb()&&!hb();function Im(a,b,c){c=void 0===c?{}:c;this.Z=a;this.vo=b;this.jq=this.Xk=!1;this.Br=this.Eh=0;this.options=Object.assign(Object.assign({},{tj:!1,FB:!0,Vv:2E3}),c);a=navigator.userAgent.match(/Puffin\/(\d)/);this.fD=null!==a&&8>parseInt(a[1])?1500:140;this.options.tj?this.tj():this.options.FB&&Jm(this,0)}Im.prototype.Fk=function(){this.jq||(Km(this,!1),this.Br=0,Jm(this,0))};function Lm(a){return!a.Xk&&0<a.options.Vv&&(new Date).getTime()<=a.Br}
function Km(a,b){a.Br=b?0:(new Date).getTime()+a.options.Vv;a.Xk=b}function Jm(a,b){0===a.Eh&&(a.Eh=b);if(!(0===b||b-a.Eh>a.fD))return Promise.resolve();a.Eh=b;var c=a.Xk||Lm(a)?Fm+"minifwap/"+a.Z+".jpg?f="+Math.random():Gm+"riw/"+a.Z+".jpg?"+Math.floor((new Date).getTime()/3E4);return new Promise(function(d,e){var f=new Image;f.onload=function(){a.vo.onload=function(){a.jq=!0};a.jq=!1;a.vo.src=f.src;d()};f.onerror=function(){e("Error downloading image "+c)};f.src=c})}
Im.prototype.tj=function(){var a=this;if(!kb()){var b=this.Xk||Lm(this);Km(this,!0);if(!b){var c=function(d){(a.Xk||Lm(a))&&Jm(a,d).then(function(){requestAnimationFrame(function(e){c(e)})}).catch(function(){c(0)})};c(0)}}};function Mm(a){"Escape"!==a.key&&a.stopImmediatePropagation()}var Nm="";K.j(function(a){Nm=a.A.B()});function Om(){function a(){""!==ja.value.trim()&&""!==e.Fj.value.trim()&&(e.rb.style.opacity="1")}function b(ba,ra){return function(Lb){"Tab"===Lb.key&&(Lb.preventDefault(),Lb.shiftKey?ra.focus():ba.focus())}}function c(ba,ra,Lb,gf){var hf=document.createElement("label"),wa=document.createElement("input");hf.innerText=ra;hf.htmlFor=gf;wa.type=Lb;wa.id=gf;wa.name=gf;wa.style.height="checkbox"===Lb?"18px":"26px";wa.style.width="checkbox"===Lb?"18px":"100%";wa.style.font="100% Arial,Helvetica,sans-serif";wa.style.color="#000";wa.style.boxSizing="border-box";wa.style.border="1px solid #d5d5d5";wa.style.padding="2px 4px";wa.style.margin="1px 0";wa.style.lineHeight="18px";wa.style.borderRadius="4px";v("keydown",wa,function(Xg){"Enter"===Xg.key&&(Xg.preventDefault(),e.rb.click())});ba.appendChild(hf);ba.appendChild(wa);return wa}function d(ba){var ra=document.createElement("div");ra.style.display="block";ra.style.margin="10px 0 0 0";ba.appendChild(ra);return ra}Fj.call(this,{vk:function(){e.G();e.isVisible=!0;e.Fj.focus();v("keydown",e.element,Mm);v(pc(),document,e.Pr);e.Pr()},tk:function(){var ba=e.isVisible;e.element.style.display="none";e.isVisible=!1;ba&&(x("keydown",e.element,Mm),x(pc(),document,e.Pr));e.sz()},ul:!0});var e=this;this.isVisible=!1;this.sz=function(){void 0!==e.ri&&(e.ri.style.overflow="",e.ri.style.visibility="",e.ri.style.backgroundColor="")};this.Pr=function(){e.sz();null!==e.element.parentElement&&(e.ri=e.element.parentElement,e.ri.style.overflow="hidden",e.ri.style.visibility="hidden",e.ri.style.backgroundColor="#000000")};this.element.style.display="none";this.element.style.position="fixed";this.element.style.fontSize="12px";this.element.style.width="364px";this.element.style.height="264px";this.element.style.color="currentSiteSettings.defaultColor";this.element.style.margin="auto";this.element.style.boxShadow="0px 0px 10px rgba(0, 0, 0, 0.4)";this.element.style.background="white";this.element.style.border="3px solid #0E6C92";this.element.style.borderRadius="10px";this.element.style.visibility="visible";this.V.style.backgroundColor="#000000";this.V.style.opacity="1";this.V.style.visibility="visible";this.V.style["-webkit-overflow-scrolling"]="touch";this.Yc=document.createElement("form");this.Yc.target="_top";this.Yc.style.padding="5px 30px 10px 30px";this.Yc.action="/auth/login/?next="+window.location.pathname+encodeURIComponent(window.location.search);this.Yc.method="POST";this.Yc.onclick=function(ba){ba.stopPropagation()};this.element.appendChild(this.Yc);var f=d(this.Yc),g=d(this.Yc),h=d(this.Yc),m=d(this.Yc),n=d(this.Yc),p=d(this.Yc),y=d(this.Yc),C=d(this.Yc),E=document.createElement("input");E.type="submit";E.onclick=function(ba){ba.preventDefault();e.D()};E.value="";E.style.background="transparent url(https://static-assets.highwebmedia.com/tsdefaultassets/close_icon2.svg) no-repeat center center";E.style.backgroundSize="10px";E.style.padding="10px 20px 8px 12px";E.style.border="none";E.style.cursor="pointer";f.appendChild(E);f.style.position="absolute";f.style.top="0px";f.style.right="0px";f.style.margin="0px";this.xa=document.createElement("h1");this.xa.style.font="18px ubuntumedium,Arial,Helvetica,sans-serif";this.xa.style.color="#f47422";g.appendChild(this.xa);g.style.textAlign="center";this.Fj=c(h,vf+":","text","username");this.Fj.required=!0;f=document.createElement("a");f.target="_top";f.href="/auth/password_reset/";f.tabIndex=0;f.textContent=yf;f.style.cssFloat="right";f.style.color="#0373a3";m.appendChild(f);var ja=c(m,wf+":","password","password");ja.required=!0;m=c(n,xf+":","checkbox","rememberme");m.style.marginLeft="10px";this.rb=document.createElement("input");this.rb.id="id_login_btn";this.rb.type="submit";this.rb.value=nd;this.rb.style.backgroundColor="#F47321";this.rb.style.opacity="0.5";this.rb.style.border="1px solid #A8A8A8";this.rb.style.borderRadius="4px";this.rb.style.boxSizing="border-box";this.rb.style.cursor="pointer";this.rb.style.height="36px";this.rb.style.width="100%";this.rb.style.font="16px ubuntumedium,Arial,Helvetica,sans-serif";this.rb.style.color="#FFFFFF";this.rb.style.webkitAppearance="none";p.appendChild(this.rb);p=document.createElement("p");p.textContent=ri+" ";p.style.display="inline";n=document.createElement("a");n.target="_top";n.href="/accounts/register/?src=login_gate";n.tabIndex=0;n.textContent=od;n.style.display="inline";n.style.color="#0373a3";y.appendChild(p);y.appendChild(n);y.style.textAlign="center";this.am=document.createElement("input");this.ql=document.createElement("input");this.am.type=this.ql.type="hidden";this.am.name="next";this.am.value=""+window.location.pathname+window.location.search;this.ql.name="csrfmiddlewaretoken";this.ql.value=yb("csrftoken");C.appendChild(this.am);C.appendChild(this.ql);C.style.display="none";E.onkeydown=b(this.Fj,n);this.Fj.onkeydown=b(ja,E);ja.onkeydown=b(f,this.Fj);f.onkeydown=b(m,ja);m.onkeydown=b(this.rb,f);this.rb.onkeydown=b(n,m);n.onkeydown=b(E,this.rb);this.Fj.oninput=a;ja.oninput=a;K.j(function(){e.am.value=""+window.location.pathname+window.location.search})}r(Om,Fj);Om.prototype.nf=function(a){a=void 0===a?!1:a;window.self!==window.top&&""!==Nm?ij("/auth/login/?next=/"+Nm+"/",void 0,void 0):(this.xa.innerText=a?pi:qi,this.ql.value=yb("csrftoken"),this.element.style.display="block",Fj.prototype.show.call(this))};Om.prototype.G=function(){var a=Math.max(document.documentElement.clientHeight,window.innerHeight);this.element.style.left=(Math.max(document.documentElement.clientWidth,window.innerWidth)-this.Yc.offsetWidth)/2+"px";this.element.style.top=(a-this.Yc.offsetHeight)/2+"px"};var Pm;function Qm(a){a=void 0===a?!1:a;void 0===Pm&&(Pm=new Om,A("LoginOverlayOpened"));Pm.nf(a)}function Rm(){return void 0!==Pm?Pm.isVisible:!1};function Sm(a){"Escape"!==a.key&&a.stopImmediatePropagation()}
function Tm(a){function b(d){return function(e){"Tab"===e.key&&(e.preventDefault(),d.focus())}}Fj.call(this,{vk:function(){c.G();c.isVisible=!0;c.rb.focus();v("keydown",c.element,Sm)},tk:function(){var d=c.isVisible;c.element.style.display="none";c.isVisible=!1;d&&x("keydown",c.element,Sm)},ul:!0});var c=this;this.isVisible=!1;this.Yz=new Sb("AutoLgnPopUpActn");this.Pq=N("div",{style:{display:"block",margin:"10px 0 0 0"}},N("div",{style:{position:"absolute",top:"0px",right:"0px",margin:"4px"}},N("button",{style:{background:"transparent url(https://static-assets.highwebmedia.com/tsdefaultassets/close_icon2.svg) no-repeat center center",backgroundSize:"10px",padding:"16px",border:"none",cursor:"pointer"},type:"submit",ref:function(d){return c.Qa=d},onClick:function(d){d.preventDefault();c.D()}})),N("div",{style:{font:"1em/1.3em 'UbuntuMedium', Arial, Helvetica, sans-serif",padding:"0 19px 0 32px"}},N("h1",{style:{textAlign:"center",margin:"22px 0 24px",font:"1.733em/1.0769em 'UbuntuMedium', Arial, Helvetica, sans-serif",color:"#f47321"}},"Auto Login"),N("h2",{style:{margin:"0 0 24px",font:"1.166em/1.142em 'UbuntuMedium', Arial, Helvetica, sans-serif"}},"You are attempting to log in as ",N("span",{className:"login_name"},a.username),"."),N("form",{method:"post",action:"/accounts/autologin/"},N("input",{type:"hidden",name:"csrfmiddlewaretoken",value:xb("csrftoken")}),N("input",{type:"submit",value:nd,style:{backgroundColor:"#F47321",border:"1px solid #A8A8A8",borderRadius:"4px",boxSizing:"border-box",cursor:"pointer",height:"36px",width:"100%",font:"16px ubuntumedium,Arial,Helvetica,sans-serif",color:"#FFFFFF",WebkitAppearance:"none"},ref:function(d){return c.rb=d}}),N("input",{type:"hidden",name:"username",value:a.username}),N("input",{type:"hidden",name:"t",value:a.t}),N("input",{type:"hidden",name:"e",value:a.e}),N("input",{type:"hidden",name:"next",value:a.next})),N("br",null),N("h3",{style:{textAlign:"center"}},"Not ",N("span",{className:"login_name"},a.username),"? ",N("a",{href:"/auth/login/?next="+a.next,ref:function(d){return c.ux=d}},"Click here to log in as a different user."))));this.element.appendChild(this.Pq);this.element.style.display="none";this.element.style.position="fixed";this.element.style.width="364px";this.element.style.height="204px";this.element.style.color="currentSiteSettings.defaultColor";this.element.style.margin="auto";this.element.style.boxShadow="0px 0px 10px rgba(0, 0, 0, 0.4)";this.element.style.background="white";this.element.style.border="3px solid #0E6C92";this.element.style.borderRadius="10px";this.element.style.visibility="visible";this.V.style["-webkit-overflow-scrolling"]="touch";this.V.style.backgroundColor="rgb(0, 0, 0, "+(this.Yz.active?1:.5)+")";this.rb.onkeydown=b(this.ux);this.ux.onkeydown=b(this.Qa);this.Qa.onkeydown=b(this.rb)}r(Tm,Fj);Tm.prototype.G=function(){var a=Math.max(document.documentElement.clientHeight,window.innerHeight);this.element.style.left=(Math.max(document.documentElement.clientWidth,window.innerWidth)-this.Pq.offsetWidth)/2+"px";this.element.style.top=(a-this.Pq.offsetHeight)/2+"px"};Tm.prototype.nf=function(){this.element.style.display="block";this.show()};var Um;function Vm(){var a=xb("aldata");if(void 0===a)return!1;void 0===Um&&(a=decodeURIComponent(a),a=new Q(a),a={username:T(a,"username"),t:T(a,"t"),e:T(a,"e"),next:T(a,"next")},Um=new Tm(a));Um.nf();return!0}function Wm(a){a=void 0===a?!1:a;(new Sb("AutoLgnPopUpActn")).active&&Vm()||Qm(a)};var Xm=new D("newFollowedOnline"),Ym=new D("onlineFollowedStorage"),Zm=new D("onlineFollowedStorage");function $m(){if(t()){var a=window.localStorage.getItem("onlineFollowedTab");null!==a&&(a=JSON.parse(a),a.timestamp=Date.now(),window.localStorage.setItem("onlineFollowedTab",JSON.stringify(a)))}}
function an(){if(t()){var a=window.localStorage.getItem("onlineFollowedTab");if(null!==a){a=JSON.parse(a);var b=a.username,c=a.onlineFollowedList,d={wf:{Ih:c.onlineFollowed.online,total:c.onlineFollowed.total},vp:[]};c=q(c.roomList);for(var e=c.next();!e.done;e=c.next())e=e.value,d.vp.push({B:e.room,image:e.image});c=a.seenRooms;e=[];for(var f=q(a.unseenRooms),g=f.next();!g.done;g=f.next())g=g.value,e.push({B:g.room,image:g.image});return{username:b,Wx:d,pj:c,ou:e,Hi:a.flash,timestamp:a.timestamp}}}}
function bn(){t()&&v("storage",window,function(a){if("onlineFollowedTab"===a.key){var b=an();void 0!==b&&Ym.h(b)}"followedDropdownClicked"===a.key&&null!==a.newValue&&(b=an(),void 0!==b&&(b.timestamp=JSON.parse(a.newValue).timestamp,b.Hi=!1,b.ou=[],Zm.h(b)))})}function cn(a){a=a.split(/[()/]+/);return 4!==a.length?{Ih:0,total:0}:{Ih:parseInt(a[1]),total:parseInt(a[2])}}
function dn(){function a(b){return b.map(function(c){return{B:c.room,image:c.image}})}return Gb("follow/api/online_followed_rooms/").then(function(b){b=new Q(b.responseText);return{wf:{Ih:W(b,"online"),total:W(b,"total")},vp:a(R(b,"online_rooms"))}})};function en(){var a=Ja.current.xb;return void 0===a?!1:a.Si&&a.Tz}function fn(){this.first=!0;this.Rf=[];this.Ui=[];this.pj={};this.kw={};this.Cw=!1}
fn.prototype.$d=function(a){var b=this;this.gb=a;if(this.Cw)gn(this.gb.Uc);else{hn=en();tj.j(function(){b.gb.Uc.Oa()});K.j(function(d){gn(b.gb.Uc);jn(b,[d.C.B])});kn.j(function(){b.gb.Uc.nb()&&ln(b.gb.Uc)});mn.j(function(d){hn=d});yk.j(function(){b.gb.Uc.nb()&&b.gb.Uc.Oa()});gn(this.gb.Uc);!0===window.showcam&&"string"===typeof window.broadcaster&&jn(this,[window.broadcaster]);if(!this.gb.wb){bn();Ym.j(function(d){b.Sk(d,!1,b.gb.username,b.gb.Sk)});Zm.j(function(d){b.Sk(d,!1,void 0,b.gb.VA)});window._followedTabUpdate=function(d){jn(b,[d]);nn(b,!0,b.gb.username,b.gb.Yp)};a=0===window.location.pathname.indexOf("/followed-cams/",0)?void 0:an();void 0!==a&&a.username===this.gb.username&&3E4>Date.now()-a.timestamp?(this.first=!1,this.Sk(a,!0,this.gb.username,this.gb.Sk),$m(),nn(this,!0,this.gb.username,this.gb.Yp)):nn(this,!1,this.gb.username,this.gb.Yp);var c=function(d){clearInterval(b.vz);b.vz=window.setInterval(function(){b.gb.Uc.nb()||nn(b,!1,b.gb.username,b.gb.Yp)},d)};c(1E4);window.setTimeout(function(){c(3E4)},6E5);window.setTimeout(function(){c(6E5)},18E5);window.setTimeout(function(){clearInterval(b.vz)},216E5);Xm.j(function(){b.gb.WA.Hi()})}this.Cw=!0}};function jn(a,b){b=q(b);for(var c=b.next();!c.done;c=b.next())c=c.value,a.pj[c]=!0,a.kw[c]=!0}fn.prototype.Sk=function(a,b,c,d){b=void 0===b?!1:b;a.timestamp<=this.zs||a.username!==c||(this.wf=a.Wx.wf,this.pj=a.pj,this.Ui=a.ou,this.update(a.Wx,!0),void 0!==d&&d(a,b),this.zs=a.timestamp)};fn.prototype.update=function(a,b){var c=this;b=void 0===b?!1:b;var d={},e=[],f=[];a=q(a.vp);for(var g=a.next();!g.done;g=a.next())g=g.value,void 0!==this.pj[g.B]||this.first?f.push(g):e.push(g),this.pj[g.B]=!0,d[g.B]=g;a=0<e.length;this.Ui=this.Ui.reduce(function(m,n){void 0===d[n.B]||c.kw[n.B]||m.push(d[n.B]);return m},[]);e=q(e);for(g=e.next();!g.done;g=e.next())this.Ui.push(g.value);e={};this.Rf=[];var h=q(this.Ui);for(g=h.next();!g.done;g=h.next())g=g.value,e[g.B]=!0,this.Rf.push(new on(g,!0,this.Rf.length+1));f=q(f);for(g=f.next();!g.done;g=f.next())g=g.value,void 0===e[g.B]&&this.Rf.push(new on(g,!1,this.Rf.length+1));gn(this.gb.Uc);(f=!this.first&&a)&&!b&&Xm.h(void 0);this.first=!1;return{Hi:f,Fy:this.Ui}};function nn(a,b,c,d){(void 0===b||!b)&&1E4>Date.now()-a.zs||dn().then(function(e){a.zs=Date.now();a.wf=e.wf;var f=a.update(e);d(f);var g=a.pj,h=f.Hi,m=f.Fy;if(t()){f={onlineFollowed:{online:e.wf.Ih,total:e.wf.total},roomList:[]};e=q(e.vp);for(var n=e.next();!n.done;n=e.next())n=n.value,f.roomList.push({room:n.B,image:n.image});e=[];m=q(m);for(n=m.next();!n.done;n=m.next())n=n.value,e.push({room:n.B,image:n.image});g={username:c,onlineFollowedList:f,seenRooms:g,unseenRooms:e,flash:h,timestamp:Date.now()};window.localStorage.setItem("onlineFollowedTab",JSON.stringify(g))}}).catch()}var pn=new fn;var kn=new D("refreshRoomImages"),mn=new D("setAnimateThumbnails"),qn={fontSize:"13px",fontFamily:"UbuntuMedium, Helvetica, Arial, sans-serif",width:"auto",height:"auto",position:"absolute",display:"none",overflow:"",cursor:"default",top:"0px",left:"0px"},rn={width:"314px",maxHeight:"450px",overflowY:"auto",overflowX:"hidden",position:"relative",boxSizing:"border-box",padding:"8px",borderRadius:"0px 4px 4px 4px",WebkitBorderRadius:"0px 4px 4px 4px"};function sn(a,b){sl.call(this,a);this.wb=b;this.ef=pn;this.vq()}var hn;r(sn,sl);sn.prototype.nv=function(){var a=this;return N("div",{className:"followedDropdown",colorClass:"tabActiveColor",style:qn},N("div",{className:"followedContainer",style:rn,colorClass:["tabActiveBgColor","tabBorderNoHover"],ref:function(b){a.df=b}}))};function gn(a){if(!a.nb()){for(;null!==a.df.firstChild;)a.df.removeChild(a.df.firstChild);if(!a.wb){var b;a.df.appendChild(N("div",{style:{margin:"5px 3px"}},N("a",{href:"/followed-cams/",style:{height:"auto",width:"auto",border:"none",borderRadius:"0px",textDecoration:"none",cursor:"pointer",cssFloat:"none",padding:"0px"},"data-floatingnav":"",colorClass:["tabActiveBgColor","hrefColor"],ref:function(h){b=h},onMouseEnter:function(){b.style.textDecoration="underline";G(b,"tabActiveColor");H(b,"hrefColor")},onMouseLeave:function(){b.style.textDecoration="none";G(b,"hrefColor");H(b,"tabActiveColor")},onClick:function(){A("FollowedDropdownSeeAll")}},Rf)))}a.df.style.width="auto";var c=N("div",{style:{display:"table"}}),d=N("div",null),e=0;a.ef.Rf.forEach(function(h){0===e%2&&(d=N("div",{style:{display:"table-row"}}),c.appendChild(d));var m=N("div",{style:{display:"table-cell"}});m.appendChild(h.Hq);d.appendChild(m);e+=1});a.df.appendChild(c);if(0===a.ef.Rf.length){var f=N("div",{colorClass:"textColor",style:{margin:"5px 3px 5px 3px",fontSize:"12px",fontFamily:"UbuntuRegular"}});if(a.wb){var g=function(h){var m=N("a",{href:h.href,style:{height:"auto",width:"auto",border:"none",borderRadius:"0px",textDecoration:"none",cursor:"pointer",cssFloat:"none",padding:"0px"},colorClass:["tabActiveBgColor","hrefColor"],onMouseEnter:function(){m.style.textDecoration="underline"},onMouseLeave:function(){m.style.textDecoration="none"},onClick:void 0!==h.onClick?h.onClick:void 0},h.children);return m};f.appendChild(N(Nj,null,N(g,{href:"/accounts/register/?src=followed_tab&next="+window.location.pathname},od),N("span",null," "+zf+" "),N(g,{href:"/auth/login/?next="+window.location.pathname,onClick:function(h){h.metaKey||h.ctrlKey||(h.preventDefault(),a.Oa(),Wm())}},nd)))}g=N("span",null,a.wb?Sf:Tf);f.appendChild(g);a.df.appendChild(f);a.df.style.width="265px"}}}function ln(a){a=q(a.ef.Rf);for(var b=a.next();!b.done;b=a.next())b=b.value,""!==b.B.image&&Jm(b.uo,0)}
sn.prototype.vq=function(){var a=this;Hm&&v("pageshow",window,function(b){b.persisted&&a.ef.Rf.forEach(function(c){c.Fk()})})};sn.prototype.Za=function(){if(!sl.prototype.Za.call(this))return!1;ln(this);this.df.scrollTop=0;this.ef.Ui=[];var a=nk(this.element),b=Math.max(ck(),pk(document.body.style.minWidth));a.right>b&&(this.element.style.width=this.element.offsetWidth-(a.right-b)-4+"px",this.df.style.overflowX="auto");return!0};sn.prototype.Oa=function(a){if(void 0!==a&&(a.metaKey||a.ctrlKey)||!sl.prototype.Oa.call(this))return!1;a=q(this.ef.Rf);for(var b=a.next();!b.done;b=a.next())b=b.value,b.Kw=!1,G(b.a,"notHighlighted"),H(b.a,"isHighlighted");this.element.style.width="auto";this.df.style.overflowX="hidden";gn(this);return!0};function on(a,b,c){var d=this;this.B=a;this.Kw=b;this.username="";this.username=a.B;this.a=N("a",{className:"roomElementAnchor",colorClass:["tabInactiveColor",this.Kw?"isHighlighted":"notHighlighted"],style:{width:"180px",height:"126px",borderRadius:"4px",border:"none",padding:"0px",margin:"0px",display:"block",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",textDecoration:"none"},"data-room":this.B.B,href:"/"+this.B.B+"/",onClick:function(){A("FollowedDropdownVisit")}},N("img",{src:""!==this.B.image?this.B.image:"https://static-assets.highwebmedia.com/images/no_thumbnail_1_wide.jpg",width:180,height:101,style:{borderRadius:"3px 3px 0px 0px"},ref:function(e){d.vo=e}}),N("span",{style:{padding:"5px"}},this.B.B));this.Hq=N("div",{className:"roomElement",style:{display:"inline-block",width:"180px",height:"126px",borderRadius:"4px",margin:"3px",cursor:"pointer"}},this.a);tn(this);tb(["click","mousedown","touchstart"],this.a,function(){un(d.username,"ft",c)})}on.prototype.Fk=function(){this.uo.Fk()};function tn(a){""!==a.B.image&&(a.uo=new Im(a.username,a.vo),v("mouseenter",a.Hq,function(){hn&&a.uo.tj()}),v("mouseleave",a.Hq,function(){hn&&Km(a.uo,!1)}))};function vn(a){switch(a){case "df":case "rc":case "ft":case "fo":case "ff":case "ml":case "mr":case "tp":case "pr":case "fn":case "bs":case "nc":case "sc":case "dc":return a;default:return"un"}}
function wn(a){switch(a){case "Default":return"df";case "Recommended":return"rc";case "FollowedTab":return"ft";case "FollowedPageOnline":return"fo";case "FollowedPageOffline":return"ff";case "MoreLikeThis":return"ml";case "MoreRooms":return"mr";case "TagPage":return"tp";case "Promoted":return"pr";case "FollowedNotification":return"fn";case "Boosted":return"bs";case "NextCam":return"nc";case "ScanCam":return"sc";case "Discover":return"dc";default:return"un"}}
function un(a,b,c,d,e){void 0===e&&(e="");Ab("tbu_"+a,[b,""+c,""+("number"===typeof d&&0<d?d:-1),e,void 0].join(),30)}function xn(){this.Lx=[];this.Sm=new Map}var yn,zn;function An(){for(var a=[],b=q(document.querySelectorAll(".endless_page_template")),c=b.next();!c.done;c=b.next())a.push(c.value);return a}function Bn(a,b){a.Lx.push(b)}xn.prototype.onSuccess=function(){for(var a=q(this.Lx),b=a.next();!b.done;b=a.next())b=b.value,b()};function Cn(){void 0===yn&&(yn=new xn);return yn}
function Dn(a){a=a.getAttribute("data-href");a="string"!==typeof a||0===a.length?window.location.href.replace(""===location.hash?"#":location.hash,""):"/"===a[0]?a.substr(1):a;var b="?";-1!==a.indexOf("?")&&(b="&");var c=document.getElementById("filter_search_form");c=null!==c?Dm(c).Vh():"";return a+b+c}function En(a){if(0<a){var b=Cn();zn=window.setTimeout(function(){Fn(b);kn.h(void 0);En(a)},a)}}
function Fn(a,b){for(var c=q(a.Sm.values()),d=c.next();!d.done;d=c.next())Km(d.value,!1);a.Sm.clear();c={};d=q(An());for(var e=d.next();!e.done;c={ln:c.ln},e=d.next())c.ln=e.value,e=Dn(c.ln),Gb(e).then(function(f){return function(g){f.ln.innerHTML=g.responseText;a.onSuccess();void 0!==b&&b()}}(c)).catch()}function Gn(){return{addOnLoadHandler:Hn,loadRooms:In,scheduleRefresh:Jn,chatRoomListOnClick:Kn,startStreaming:Ln,stopStreaming:Mn,clearRefresh:Nn,setRoomAnimation:On}}
function Hn(a){Bn(Cn(),a)}function In(a){Fn(Cn(),a)}function Jn(a){En(a)}function Nn(){clearTimeout(zn)}function Kn(a,b,c,d,e){un(b,wn(a),c,d,e)}var Pn=!1;function On(a){Pn=a;mn.h(Pn)}function Ln(a,b){if(Pn&&null!==b){var c=Cn(),d=c.Sm.get(a);void 0===d&&(d=new Im(a,b,{tj:!0}),c.Sm.set(a,d));d.tj()}}function Mn(a){Pn&&(a=Cn().Sm.get(a),void 0!==a&&Km(a,!1))}var Qn={buildTooltip:Ek};function X(a){return{ic:1,message:a}}function Rn(a){return{ic:0,Ja:a}}function Sn(a,b){return-1!==b.indexOf(a)?{ic:2,message:a}:X("#"+a)};var Tn;K.j(function(a){Tn=a.C.B});function Un(a){var b=Vn(a);b.Ki=S(a,"gender",!1);return b}
function Vn(a){for(var b=new Map,c=q(["from_username","user","username"]),d=c.next();!d.done;d=c.next())d=d.value,void 0!==S(a,d,!1)&&b.set(d,S(a,d,!1));1!==b.size&&u('getStrings(["from_username", "user", "username"]): '+b+" length is not 1 in "+a.He);b=b.values().next().value;return{username:b,Db:b===Tn,Ec:V(a,"in_fanclub"),ye:V(a,"has_tokens"),Ob:V(a,"is_mod"),If:V(a,"tipped_recently"),lg:V(a,"tipped_alot_recently"),Jf:V(a,"tipped_tons_recently"),Cb:T(a,"exploringHashTag",!1),lc:vn(T(a,"source_name",!1))}}function Wn(a,b){b={O:Un(b),message:T(b,"m"),font:S(b,"f",!1),Ie:S(b,"c",!1),Zc:S(b,"i",!1),backgroundColor:S(b,"background",!1),aa:W(b,"tid",!1)};b.O.username!==a&&u("Parsing username match failed");return b}function Xn(a){return{O:Un(fm(a,"from_user")),message:T(a,"m"),Ie:S(a,"c",!1),Zc:S(a,"i",!1),Ya:T(a,"other_user"),font:T(a,"f"),aa:W(a,"tid",!1)}}function Yn(a){return{O:Un(a),message:T(a,"message"),amount:W(a,"amount"),zo:V(a,"is_anonymous_tip"),Zm:S(a,"to_username"),aa:W(a,"tid")}}
function Zn(a){var b=R(a,"messages"),c=[];if("string"===typeof b)c.push([X("Notice: "+b)]);else if(b instanceof Array){b=q(b);for(var d=b.next();!d.done;d=b.next())c.push([X("Notice: "+d.value)])}else u("handleAppNotice error: Invalid message type "+(void 0===b?"undefined":b.toString()));b=S(a,"weight");return{Na:S(a,"foreground"),background:S(a,"background"),weight:""===b?void 0:b,ja:c,na:V(a,"showInPrivateMessage",!1,!1),aa:W(a,"tid")}};var $n=new D("privateMessage"),ao=new D("pushRoomNoticeEvent"),bo=new D("logMessage"),co=new D("showPmSession"),eo=new D("closePmSession"),fo=new D("closePmSessionSyncPmList");new D("updateTipBalance");var go=new D("updateSearchBar"),ho=new D("pmMarkedReadEvent");new D("pmEmoticonLoaded");var io=new D("navigateSuggestions"),jo=new D("openCurrentSuggestion"),ko=new D("suggestionSelectedEvent");var lo=new Set;function mo(){for(var a=[],b=q(lo),c=b.next();!c.done;c=b.next())a.push(c.value);t()&&window.localStorage.setItem("ignorelist",JSON.stringify({Je:a}))}
function no(){Gb("api/ts/chat/ignored-users/").then(function(a){t()&&(window.localStorage.setItem("ignorelist",a.responseText),window.localStorage.setItem("ignorelistlastfetch",Date.now().toString()));try{lo=new Set(JSON.parse(a.responseText).users)}catch(b){u("Cannot parse ignore list: "+b)}}).catch(function(a){u("Network error retrieving ignore list: "+a)})}function oo(a){var b=lo;return void 0===b?(u("ignoreSet should not be undefined"),!1):b.has(a)};function po(){var a=document.createElement("div");a.style.position="absolute";a.style.width="100%";a.style.height="100%";a.style.top="0px";a.style.left="0px";a.style.display="none";a.style.zIndex="1003";a.style.backgroundColor="rgba(0, 0, 0, .3)";a.style.boxShadow="0px 0px 4px rgba(0, 0, 0, 0.5)";return a}
function qo(a){function b(h){h.target!==e&&(f.style.display="none",g=!1,x("touchstart",document,b,!0))}var c=Math.floor(a.$r/2),d=document.createElement("div");d.style.display="inline-block";d.style.position="absolute";d.style.width=d.style.height=a.$r+"px";d.style.top="calc("+a.bv+" - "+c+"px)";var e=document.createElement("img");e.src="https://static-assets.highwebmedia.com/"+a.Rw;e.style.position="relative";e.style.height="100%";e.style.width="100%";e.style.zIndex="1";d.appendChild(e);var f=document.createElement("div");f.style.position="absolute";f.style.display="none";f.style.width="39px";f.style.height="39px";f.style.top=-19+c+"px";f.style.left=-19+c+"px";f.style.borderRadius="4px";f.style.zIndex="0";f.style.backgroundColor="rgba(255, 255, 255, .25)";c=document.createElement("div");c.textContent=a.td;c.style.position="relative";c.style.display="inline-block";c.style.top="42px";c.style.left="50%";c.style.transform="translateX(-50%)";c.style.padding="0px 7px";c.style.whiteSpace="nowrap";c.style.fontFamily="UbuntuRegular";c.style.fontSize="12px";c.style.color="#FFF";c.style.backgroundColor="rgba(0, 0, 0, .9)";c.style.border="1px solid #8A8A8A";f.appendChild(c);d.appendChild(f);void 0!==a.mB&&a.mB.j(function(){f.style.display="none"});void 0!==a.onClick&&(e.style.cursor="pointer",v("click",e,a.onClick));v("mouseenter",e,function(){f.style.display="block"});v("mouseleave",e,function(){f.style.display="none"});var g=!1;v("touchstart",e,function(h){g?void 0!==a.onClick&&ub(e,a.onClick):(f.style.display="block",g=!0,v("touchstart",document,b,!0),h.preventDefault(),h.stopPropagation())});return d}function ro(a){return Gb("api/online/"+a+"/").then(function(b){return JSON.parse(b.responseText).online})}function so(){return Gb("api/ts/chat/share-my-cam/").then(function(a){a=JSON.parse(a.responseText).cam_room;return 0<a.length?a[0]:""})}function to(a){function b(){so().then(function(c){""===c?a():window.setTimeout(b,5E3)}).catch()}b()}var uo=!1;function vo(a,b){this.prefix=a;this.username=b;if(0===a.length)throw Error("prefix cannot be empty");if(0===b.length)throw Error("username cannot be empty");}r(vo,pm);vo.prototype.Bc=function(){return this.prefix+":"+this.username};vo.prototype.uh=function(){return this.prefix};vo.prototype.Hl=function(){};function wo(a){vo.call(this,xo,a)}r(wo,vo);wo.prototype.Ha=function(a){return{timestamp:W(a,"read_ts")}};wo.prototype.listener=function(a){yo.h(a)};var xo="user:news_seen",yo=new D(xo);function zo(a){vo.call(this,Ao,a)}r(zo,vo);zo.prototype.Ha=function(a){return{O:Un(fm(a,"from_user")),message:T(a,"message"),Ie:S(a,"font_color",!1),Zc:S(a,"id",!1),aa:W(a,"tid",!1),Ya:T(a,"other_user"),font:T(a,"font_family"),backgroundColor:S(a,"background")}};zo.prototype.listener=function(a){Bo.h(a);oo(a.O.username)||$n.h(a)};zo.prototype.Hl=function(){Co.h(this.username)};var Ao="user:message",Co=new D(Ao+":subscribed",{fe:1}),Bo=new D(Ao);function Do(a){vo.call(this,Eo,a)}r(Do,vo);Do.prototype.Ha=function(a){return{target:T(a,"target"),aa:W(a,"tid")}};Do.prototype.listener=function(a){Fo.h(a)};var Eo="user:update",Fo=new D(Eo);function Go(a){vo.call(this,Ho,a)}r(Go,vo);Go.prototype.Ha=function(a){return{gd:W(a,"tokens"),aa:W(a,"tid")}};Go.prototype.listener=function(a){Io.h(a)};var Ho="user:token_update",Io=new D(Ho);function Jo(a){vo.call(this,Ko,a)}r(Jo,vo);Jo.prototype.Ha=function(a){return{O:Un(a),message:T(a,"message"),amount:W(a,"amount"),zo:V(a,"is_anonymous_tip"),Db:V(a,"is_broadcaster"),history:V(a,"history"),Zm:T(a,"to_username"),aa:W(a,"tid")}};Jo.prototype.listener=function(a){Lo.h(a)};var Ko="user:tip_alert",Lo=new D(Ko);function Mo(a){vo.call(this,No,a)}r(Mo,vo);Mo.prototype.Ha=function(a){return{tE:T(a,"context_user"),ja:dm(a,"messages")}};Mo.prototype.listener=function(a){Oo.h(a)};var No="user:pm_notice",Oo=new D(No),Po=new D("showMyCamStarted"),Qo=new D("showMyCamStopped"),Ro=new D("showMyCamViewStarted"),So=new D("showMyCamViewStopped");function To(a){var b=Object,c=b.assign,d=Object,e=d.assign;var f={username:T(a,"username"),Db:!1,Ec:V(a,"in_fanclub"),ye:V(a,"has_tokens"),Ob:V(a,"is_mod"),If:V(a,"tipped_recently"),lg:V(a,"tipped_alot_recently"),Jf:V(a,"tipped_tons_recently"),Cb:"",lc:"df"};return c.call(b,e.call(d,{},f),{Ff:V(a,"started")})}
function Uo(a){vo.call(this,Vo,a)}r(Uo,vo);Uo.prototype.Ha=function(a){return To(a)};Uo.prototype.listener=function(a){Wo.h(a);a.Ff?Po.h(a):Qo.h(a)};var Vo="user:smc_notify",Wo=new D(Vo);function Xo(a){vo.call(this,Yo,a)}r(Xo,vo);Xo.prototype.Ha=function(a){return To(a)};Xo.prototype.listener=function(a){Zo.h(a);a.Ff?Ro.h(a):So.h(a)};var Yo="user:smc_watching",Zo=new D(Yo);function $o(a){vo.call(this,ap,a)}r($o,vo);$o.prototype.Ha=function(){return{}};$o.prototype.listener=function(){};var ap="smc:presence";function bp(){Ll.call(this);var a=this;this.K=0;this.ls=!1;this.items=[];this.Is=void 0;this.$p=0;this.Dw=!1;this.H(this.Ye);bm.j(function(b){a.Dw=b});$l.j(function(b){(a.Oi=b)?(A("NewsfeedOpened",{is_orange:a.Dw}),cp(a),a.$p=(new Date).getTime()):(am.h(void 0),a.K=0,a.Pb(),0<a.items.length&&(dp(a,a.items[0].timestamp),ep(a,a.items[0].timestamp)),a.Qt())});this.wb=void 0===Ja.current.xb;v("beforeunload",window,this.Qt.bind(this));v("unload",window,this.Qt.bind(this))}r(bp,Ll);function ep(a,b,c){!1===a.wb&&om(b,function(){void 0!==c&&c()})}k=bp.prototype;k.initData=function(){this.Ye=new Xl};k.Qt=function(){if(0!==this.$p){var a={duration_seconds:((new Date).getTime()-this.$p)/1E3};this.$p=0;A("NewsfeedClosed",a)}};k.gf=function(){return[document.createTextNode(99<this.K?Ng+" (99+)":0<this.K?Ng+" ("+this.K+")":Ng)]};k.Cg=function(){return"updates-tab"};k.Za=function(){Ll.prototype.Za.call(this);this.Pb();this.G()};function cp(a){a.ls?(Yl(a.Ye,a.items),fp(a)):nm(function(b){a.items=b;Yl(a.Ye,b);a.K=b.filter(function(c){return!c.Th}).length;a.Pb();a.ls=!0;fp(a);yo.j(function(c){dp(a,c.timestamp);a.K=a.items.filter(function(d){return!d.Th}).length;a.Pb()});Bm.j(function(c){var d=0;0<a.items.length&&(d=Math.max.apply(Math,ha(a.items.map(function(e){return e.timestamp}))));d<c.timestamp&&(a.items.splice(0,0,c),a.K=a.items.filter(function(e){return!e.Th}).length,Yl(a.Ye,a.items),a.Pb(),fp(a))})})}
function dp(a,b){a.items.forEach(function(c){c.timestamp<=b&&(c.Th=!0)})}function fp(a){0<a.K?(void 0!==a.Is&&clearTimeout(a.Is),a.Is=window.setTimeout(function(){a.Oi&&ep(a,a.items[0].timestamp,function(){am.h(void 0)})},500)):am.h(void 0)}function gp(){bp.apply(this,arguments)}r(gp,bp);gp.prototype.initData=function(){this.Ye=new Zl};function hp(){var a,b;return null!==(b=null===(a=Ja.current)||void 0===a?void 0:a.CA)&&void 0!==b?b:"https://static-assets.highwebmedia.com/images/logo.svg"};var ip={Jz:"chaturbate.com",Kz:"",qD:ld,rD:"#0b5d81",Ip:"Chaturbate",bgColor:"#ffffff",SB:"#0c6a93",Cx:"#ffffff",RB:"#f47321",PB:"#ffffff",QB:"url(https://static-assets.highwebmedia.com/tsdefaultassets/gender_tab_bg.gif) repeat-x",iB:"#004B5E",Ie:"#494949",rr:"#494949",Iv:"#222222",BD:"#222222",rB:"#0A5B83",Np:"#8bb3da",iD:"#ffffff",lD:"#dde9f5",jD:"#dc5500",mD:"#5e81a4",nD:"#6D85B5",oD:"#FFF",pD:"#2472B4",sD:"#4F4F4F",tD:"#B60A42",xA:"#FFFFFF",fA:"#F0F1F1",gA:"#ACACAC",iA:"#000",jA:"#0A5A83",eA:"#575757",hA:"#0A5A83",xD:"#e45900",ZA:"#676767",cB:"#494949",yA:"#494949",IB:hp(),aD:"#f47321",JB:void 0,$A:"",lB:"#ffffff url(https://static-assets.highwebmedia.com/tsdefaultassets/header_bg.gif) repeat-x",YA:"#ffffff url(https://static-assets.highwebmedia.com/tsdefaultassets/footer_bg.gif) repeat-x",CD:"#e9e9e9",GD:"#ffffff",UB:"#FCEADB",XA:"#494949",aB:"#0A5A83",bB:"#dc5500",nA:"#4C4C4C",HA:"",Sl:!1,Vt:!1,QC:!1,RC:!1,PC:!1,VC:!0,XC:!0,SC:!0,UC:!0,TC:!0,zC:"#494949",HB:"#000000",JA:"#494949",xz:"#3C87BA",DD:"#F47321",ED:"#ffffff",wu:"https://www.surveymonkey.com/r/DXYF5T8",Hw:!0===window.hide_entrance_terms},Oc=ip;if(void 0!==window.siteSettings){var Y=window.siteSettings,jp=Y.navigation_font_color,kp=Y.text_color,lp=Y.tab_inactive_color,mp=Y.tab_inactive_font_color,np=Y.content_bgcolor,op=Y.footer_href_color,pp=Y.footer_text_color,qp=Y.cam_href_color;Oc={Jz:Y.chaturbate_alias,Kz:Y.dbwl_domain,qD:Y.tagline,rD:Y.tagline_color,Ip:Y.site_name,bgColor:Y.bgcolor,SB:Y.navigation_bgcolor,Cx:jp,RB:Y.navigation_alt_bgcolor,PB:Y.navigation_alt_2_bgcolor,QB:"",iB:Y.h1_color,Ie:kp,rr:ip.rr,Iv:ip.Iv,BD:kp,rB:Y.href_color,Np:Y.tab_border_color,iD:Y.tab_active_color,lD:lp,jD:Y.tab_active_font_color,mD:mp,nD:Y.tag_exhibitionist_color,oD:Y.tag_font_color,pD:Y.tag_hd_color,sD:Y.tag_offline_color,tD:Y.tag_private_group_color,xA:np,fA:Y.cam_background_color,gA:Y.cam_border_color,iA:Y.cam_text_color,jA:"#0C6A93",eA:Y.cam_text_alt_color,hA:qp,xD:qp,ZA:op,cB:pp,yA:pp,IB:Y.logo_image_name,aD:Y.signup_bg_color,JB:Y._logo_width,$A:Y.footer_html,lB:"",YA:"",CD:np,GD:jp,UB:lp,XA:mp,aB:op,bB:op,nA:"#0C6A93",HA:Y.default_campaign_slug,Sl:!0,Vt:!0,QC:!0,RC:!0,PC:!0,VC:!1,XC:!1,SC:!1,UC:!1,TC:!1,zC:"#222222",HB:kp,JA:kp,py:Y.whitelabel_hit_count_referring_url,xz:Y.tab_inactive_color,DD:Y.tab_active_color,ED:Y.tab_active_font_color,wu:ip.wu,Hw:ip.Hw}}void 0!==Oc.py&&z("whitelabels/record_hit/",{referer:Oc.py}).catch(function(a){u("Error recording whitelabel hit: "+a)});var rp={enabled:!1,move:function(){},end:function(){}};function sp(a,b){tp(a,b,function(c){return{valid:!0,x:c.clientX,y:c.clientY}},"mousedown","mousemove","mouseup");tp(a,b,function(c){return 1===c.touches.length&&(c=c.touches.item(0),null!==c)?{valid:!0,x:c.clientX,y:c.clientY}:{valid:!1,x:0,y:0}},"touchstart","touchmove","touchend")}
function tp(a,b,c,d,e,f){v(d,a,function(g){var h=c(g);if(h.valid){var m=b(g,h.x,h.y);if(m.enabled){m.move(h.x,h.y);g.preventDefault();var n=function(C){C=c(C);C.valid&&m.move(C.x,C.y)},p=function(C){C.preventDefault();void 0!==C.buttons&&(jb()?0===C.buttons:1===C.buttons)||void 0!==C.touches&&1===C.touches.length?n(C):y(C,!1)};v(e,document,p,!0);var y=function(C,E){(void 0===E||E)&&n(C);x(e,document,p,!0);x(f,document,y,!0);m.end()};v(f,document,y,!0)}}})};function up(a,b,c){this.Vb=a;this.config=c;this.L={ee:NaN,ne:NaN,Sd:NaN,je:NaN,width:NaN,height:NaN};this.tx="window__"+b;a={ee:NaN,ne:NaN,Sd:NaN,je:NaN,width:NaN,height:NaN};if(t()&&(b=window.localStorage.getItem(this.tx),null!==b)){a=JSON.parse(b);for(var d in a)null===a[d]&&(a[d]=NaN);isNaN(a.width)&&(a.width=this.config.$e);isNaN(a.height)&&(a.height=this.config.Ze)}this.L=a;isNaN(this.L.width)&&(this.L.width=this.config.$e);isNaN(this.L.height)&&(this.L.height=this.config.Ze);isNaN(this.L.ee)&&isNaN(this.L.je)&&(0<=this.config.Tf.indexOf(1)?this.L.je=sk():this.L.ee=0<=this.config.Tf.indexOf(4)?Math.max(0,ck()/2-this.config.$e/2):0);isNaN(this.L.ne)&&isNaN(this.L.Sd)&&(0<=this.config.Tf.indexOf(3)?this.L.Sd=sk():this.L.ne=0<=this.config.Tf.indexOf(4)?Math.max(0,window.innerHeight/2-this.config.Ze/2):0)}
up.prototype.save=function(){var a=this.Vb.element.parentElement;if(null===a)u("no parent element");else{var b=this.Vb.element.offsetLeft,c=this.Vb.element.offsetTop,d=a.clientHeight-(this.Vb.element.offsetHeight+c);a=a.clientWidth-(this.Vb.element.offsetWidth+b);this.L.height=this.Vb.element.offsetHeight;this.L.width=this.Vb.element.offsetWidth;b<=a?(this.L.ee=b,this.L.je=NaN):(this.L.ee=NaN,this.L.je=a);c<=d?(this.L.ne=c,this.L.Sd=NaN):(this.L.ne=NaN,this.L.Sd=d)}t()&&window.localStorage.setItem(this.tx,JSON.stringify(this.L))};up.prototype.apply=function(){var a=this.Vb.element.parentElement;if(null===a)u("no parent element");else if(0!==a.clientHeight){void 0!==this.config.zn&&this.config.zn?(this.Vb.Fc.style.position="relative",this.Vb.element.style.width="auto",this.Vb.element.style.height="auto",this.L.height=this.Vb.element.offsetHeight,this.L.width=this.Vb.element.offsetWidth):(this.config.Ph?(this.L.width=Math.min(this.L.width,a.clientWidth),this.L.height=Math.min(this.L.height,a.clientHeight),this.L.width=Math.max(this.L.width,this.config.minWidth),this.L.height=Math.max(this.L.height,this.config.minHeight)):(this.L.width=this.config.$e,this.L.height=this.config.Ze+vp(this.Vb)),this.Vb.element.style.width=this.L.width+"px",this.Vb.element.style.height=this.L.height+"px");var b=!isNaN(this.L.ee)&&!isNaN(this.L.je)||isNaN(this.L.ee)&&isNaN(this.L.je);if(!isNaN(this.L.ne)&&!isNaN(this.L.Sd)||isNaN(this.L.ne)&&isNaN(this.L.Sd)||b)Em("unexpected bounds: top:"+this.L.ne+" bottom:"+this.L.Sd+" left:"+this.L.ee+" right: "+this.L.je);else{b=a.clientHeight;if(!isNaN(this.L.ne)){if(this.L.ne+this.L.height>b||0>this.L.ne)Em("set topBound to container height - bounds height to make fit"),this.L.ne=Math.max(0,b-this.L.height);this.Vb.element.style.top=this.L.ne+"px"}else if(!isNaN(this.L.Sd)){if(this.L.Sd+this.L.height>b||0>this.L.Sd)Em("set bottomBound to container height - bounds height to make fit"),this.L.Sd=Math.max(0,b-this.L.height);this.Vb.element.style.top=b-this.L.height-this.L.Sd+"px"}a=a.clientWidth;if(!isNaN(this.L.ee)){if(this.L.ee+
this.L.width>a||0>this.L.ee)Em("set leftBound to 0 to make fit"),this.L.ee=0;this.Vb.element.style.left=this.L.ee+"px"}else if(!isNaN(this.L.je)){if(this.L.je+this.L.width>a||0>this.L.je)Em("set rightBound to 0 to make fit"),this.L.je=0;this.Vb.element.style.left=a-this.L.width-this.L.je+"px"}}}};function wp(a){F.call(this);var b=this;this.element.style.height="0";this.element.style.width="0";this.element.style.overflow="visible";this.element.style.position="fixed";this.element.style.top="0";this.element.style.left="0";this.wd=a.wd;this.listener=function(){b.Y()};this.wd.Kv.j(this.listener);this.H(new xp(this,a));this.H(new yp(this,a));this.H(new zp(this,a));this.H(new Ap(this,a));this.H(new Bp(this,a));this.H(new Cp(this,a));this.H(new Dp(this,a));this.H(new Ep(this,a))}r(wp,F);wp.prototype.G=function(){};function Fp(a,b,c){F.call(this);var d=this;this.options=b;this.cursor=c;this.vc=8;this.element.style.height=this.vc+"px";this.element.style.width=this.vc+"px";this.element.style.cursor=this.cursor;sp(this.element,function(e,f,g){e.stopPropagation();void 0!==b.Rx&&b.Rx();var h=Object.freeze(yc(b.wd.element)),m=new uk(function(){b.wd.Y()},{xc:10});return{enabled:!0,move:function(n,p){n=d.Fh(h,{x:n-f,y:p-g});p=b.wd.element;p.style.left=n.left+"px";p.style.top=n.top+"px";p.style.width=n.width+"px";p.style.height=n.height+"px";vk(m)},end:function(){void 0!==b.Sx&&b.Sx()}}})}r(Fp,F);function xp(a,b){Fp.call(this,a,b,"ns-resize")}r(xp,Fp);xp.prototype.G=function(){var a=this.options.wd.element.getBoundingClientRect();this.element.style.top=a.top-this.vc/2+"px";this.element.style.left=a.left+"px";this.element.style.width=a.right-a.left+"px"};xp.prototype.Fh=function(a,b){return zc(a,b.y,this.options.minHeight)};function yp(a,b){Fp.call(this,a,b,"ns-resize")}r(yp,Fp);yp.prototype.G=function(){var a=this.options.wd.element.getBoundingClientRect();this.element.style.top=a.top+a.height-this.vc/2+"px";this.element.style.left=a.left+"px";this.element.style.width=a.width+"px"};yp.prototype.Fh=function(a,b){return Ac(a,b.y,this.options.minHeight,this.options.maxHeight())};function zp(a,b){Fp.call(this,a,b,"ew-resize")}r(zp,Fp);zp.prototype.G=function(){var a=this.options.wd.element.getBoundingClientRect();this.element.style.top=a.top+"px";this.element.style.left=a.left-this.vc/2+"px";this.element.style.height=a.bottom-a.top+"px"};zp.prototype.Fh=function(a,b){return Bc(a,b.x,this.options.minWidth)};function Ap(a,b){Fp.call(this,a,b,"ew-resize")}r(Ap,Fp);Ap.prototype.G=function(){var a=this.options.wd.element.getBoundingClientRect();this.element.style.top=a.top+"px";this.element.style.left=a.right-this.vc/2+"px";this.element.style.height=a.bottom-a.top+"px"};Ap.prototype.Fh=function(a,b){return Cc(a,b.x,this.options.minWidth,this.options.maxWidth())};function Bp(a,b){Fp.call(this,a,b,"nwse-resize")}r(Bp,Fp);Bp.prototype.G=function(){var a=this.options.wd.element.getBoundingClientRect();this.element.style.top=a.top-this.vc+this.vc/2+"px";this.element.style.left=a.left-this.vc+this.vc/2+"px"};Bp.prototype.Fh=function(a,b){var c=zc(a,b.y,this.options.minHeight);a=Bc(a,b.x,this.options.minWidth);return{top:c.top,height:c.height,left:a.left,width:a.width}};function Cp(a,b){Fp.call(this,a,b,"nesw-resize")}r(Cp,Fp);Cp.prototype.G=function(){var a=this.options.wd.element.getBoundingClientRect();this.element.style.top=a.top-this.vc+this.vc/2+"px";this.element.style.left=a.right-this.vc/2+"px"};Cp.prototype.Fh=function(a,b){var c=zc(a,b.y,this.options.minHeight);a=Cc(a,b.x,this.options.minWidth,this.options.maxWidth());return{top:c.top,height:c.height,left:a.left,width:a.width}};function Dp(a,b){Fp.call(this,a,b,"nesw-resize")}r(Dp,Fp);Dp.prototype.G=function(){var a=this.options.wd.element.getBoundingClientRect();this.element.style.top=a.bottom-this.vc/2+"px";this.element.style.left=a.left-this.vc+this.vc/2+"px"};Dp.prototype.Fh=function(a,b){var c=Ac(a,b.y,this.options.minHeight,this.options.maxHeight());a=Bc(a,b.x,this.options.minWidth);return{top:c.top,height:c.height,left:a.left,width:a.width}};function Ep(a,b){Fp.call(this,a,b,"nwse-resize")}r(Ep,Fp);Ep.prototype.G=function(){var a=this.options.wd.element.getBoundingClientRect();this.element.style.top=a.bottom-this.vc/2+"px";this.element.style.left=a.right-this.vc/2+"px"};Ep.prototype.Fh=function(a,b){var c=Ac(a,b.y,this.options.minHeight,this.options.maxHeight());a=Cc(a,b.x,this.options.minWidth,this.options.maxWidth());return{top:c.top,height:c.height,left:a.left,width:a.width}};function Gp(a,b,c){F.call(this);var d=this;this.Vd=a;this.content=b;this.config=c;this.$w=!1;this.Qv=new D("draggingOrResizingChanged");this.fc=!1;G(this.element,"draggableCanvasWindow");this.element.style.overflow="visible";this.Fc=document.createElement("div");G(this.Fc,"innerDiv");this.Fc.style.height="100%";this.Fc.style.width="100%";this.Fc.style.position="absolute";this.Fc.style.overflow="visible";this.Fc.style.boxSizing="border-box";this.Fc.style.borderWidth="2px";this.Fc.style.borderStyle="solid";this.tA=void 0!==c.title;var e=this.Qa=document.createElement("div");G(this.Qa,"closeButton");this.Qa.id=(this.config.Ne+"-close-btn").toLowerCase();this.Qa.style.position="absolute";this.Qa.style.right="3px";this.Qa.style.height="10px";this.Qa.style.width="10px";this.Qa.style.cursor="pointer";this.Qa.style.borderWidth="1px";this.Qa.style.borderStyle="solid";this.Qa.style.borderRadius="2px";v("mouseenter",this.Qa,function(){e.style.backgroundImage="url(https://static-assets.highwebmedia.com/tsdefaultassets/grey-close.svg)";e.style.backgroundSize="10px"});v("mouseleave",this.Qa,function(){e.style.backgroundImage=""});void 0!==c.title?(this.Od=document.createElement("div"),G(this.Od,"titleBar"),this.Od.style.position="relative",this.Od.style.fontSize="13px",this.Od.style.fontWeight="bold",this.Od.style.padding="3px 3px 3px 5px",this.Od.style.minHeight="10px",this.mg=document.createElement("div"),this.mg.style.height="100%",this.mg.style.whiteSpace="nowrap",this.mg.style.overflow="hidden",this.mg.style.textOverflow="ellipsis",this.Od.appendChild(this.mg),this.Tp=document.createElement("span"),this.Tp.innerText=c.title,this.mg.appendChild(this.Tp),this.gg=c.gg,this.Od.appendChild(this.Qa),this.Fc.appendChild(this.Od),v("click",this.Qa,function(f){f.stopPropagation();d.Vd.removeChild(d)})):(this.Qa.style.top="5px",this.Qa.style.zIndex="1",this.element.appendChild(this.Qa),v("click",this.Qa,function(f){f.stopPropagation();d.element.style.display="none";d.fc=!1}));this.H(this.content,this.Fc);this.jt=new up(this,this.config.Ne,this.config);this.ez=function(){d.jt.save();d.Y()};void 0===c.Mr&&(c.Mr=void 0!==this.mg?[this.mg]:[this.element]);Hp(this.element,{Ov:function(){Ip(d.Vd,d);Jp(d,!0)},Pv:function(){Jp(d,!1);d.ez();A("MoveDraggableWindow",{window:d.config.Ne,left:d.element.offsetLeft,top:d.element.offsetTop,windowWidth:window.innerWidth,windowHeight:window.innerHeight})},Yu:function(){return!d.$w}},c.Mr);!0===c.Ph&&Kp(this);this.element.appendChild(this.Fc)}r(Gp,F);k=Gp.prototype;k.Gm=function(a){void 0!==this.Tp&&(this.Tp.innerText=a)};function Kp(a){void 0===a.wy&&(a.wy=a.H(new wp({minWidth:a.config.minWidth,minHeight:a.config.minHeight,maxWidth:function(){return a.Vd.element.clientWidth},maxHeight:function(){return a.Vd.element.clientHeight},wd:a,Rx:function(){Ip(a.Vd,a);Jp(a,!0)},Sx:function(){Jp(a,!1);a.ez();A("ResizeDraggableWindow",{window:a.config.Ne,width:a.element.clientWidth,height:a.element.clientHeight,windowWidth:window.innerWidth,windowHeight:window.innerHeight})}})),a.wy.Y())}
k.resize=function(a,b){this.config.Ze=a;this.config.$e=b;this.G()};function Jp(a,b){a.$w=b;a.Qv.h(b)}
k.G=function(){this.content.element.style.height=void 0!==this.config.zn&&this.config.zn?"auto":this.element.clientHeight-vp(this)-4+"px";void 0!==this.Od&&(void 0===this.Qa?u("expected close button to be defined"):void 0===this.mg?u("expected title bar div inner to be defined"):(this.mg.style.maxWidth=this.Od.clientWidth-this.Qa.offsetWidth-5-6+"px",this.Qa.style.top=(this.Od.offsetHeight-this.Qa.offsetHeight)/2+"px"))};k.show=function(){this.element.style.opacity="1"};k.D=function(){this.element.style.opacity="0"};function vp(a){return void 0===a.Od?0:a.Od.offsetHeight}k.blur=function(){this.Vd.xd===this&&Ip(this.Vd,void 0)};function Lp(a,b){return void 0!==a.config.Ys?a.config.Ys(b):!1}
function Hp(a,b,c){c=q(c);for(var d=c.next();!d.done;d=c.next())d=d.value,d.style.cursor="move",sp(d,function(e,f,g){if(void 0!==b.Yu&&!1===b.Yu())return rp;var h=a.offsetLeft,m=a.offsetTop,n=a.offsetHeight,p=a.offsetWidth;if(null===a.parentElement)return u("draggable without parent element"),rp;var y=a.parentElement.clientHeight,C=a.parentElement.clientWidth,E=f,ja=g;void 0!==b.Ov&&b.Ov();return{enabled:!0,move:function(ba,ra){E=ba;ja=ra;ba=m+(ja-g);ra=h+(E-f);0>ba?ba=0:ba+n>y&&(ba=y-n);0>ra?ra=0:ra+p>C&&(ra=C-p);a.style.top=ba+"px";a.style.left=ra+"px"},end:function(){void 0!==b.Pv&&b.Pv()}}})};function Mp(a,b,c,d,e){e=void 0===e?!0:e;this.label=document.createElement("label");this.label.htmlFor=c;this.label.innerText=d;"textarea"===b?this.input=document.createElement("textarea"):(this.input=document.createElement("input"),this.input.type=b);this.input.name=c;e&&(this.input.required=e);this.error=document.createElement("p");a.appendChild(this.label);a.appendChild(this.input);a.appendChild(this.error)};function Np(a){switch(a){case "orga":return 0;case "orgb":return 1;case "org":return 2;case "none":return 3;default:return 1}}
function Op(a){switch(a){case "away":return"away";case "private":return"privatenotwatching";case "private_watching":return"privatewatching";case "private_spying":return"privatespying";case "private_requesting":return"privaterequesting";case "public":return"public";case "hidden":return"hidden";case "offline":return"offline";case "password protected":return"passwordprotected";default:return u("unknown room status -- "+a),"unknown"}}var Pp;function Qp(a){var b=[];if(""!==a)try{JSON.parse(a).forEach(function(c){b.push({uq:c[0],Hu:c[1]})})}catch(c){u("Error parsing apps "+c.toString())}return b}function Rp(a){var b=[];if(""!==a)try{b=JSON.parse(a).map(function(c){return{text:c.text,href:c.href}})}catch(c){u("Error parsing anchors "+c.toString())}return b}
function Sp(a){var b=jm(a,"chat_settings"),c=jm(a,"ads_zone_ids"),d=jm(a,"satisfaction_score"),e=T(a,"flash_host"),f=wb();void 0!==f.edge&&(e="edge"+f.edge+".stream.highwebmedia.com");f=T(a,"wschat_host");var g=T(a,"broadcaster_username"),h=T(a,"room_uid"),m=S(a,"viewer_uid"),n=T(a,"room_pass"),p=T(a,"chat_rules"),y=T(a,"room_title"),C=Op(T(a,"room_status")),E=V(a,"is_supporter"),ja=V(a,"needs_supporter_to_pm"),ba=T(a,"broadcaster_gender"),ra=T(a,"viewer_username"),Lb=T(a,"chat_username"),gf=encodeURI(T(a,"edge_auth")),hf=T(a,"chat_password"),wa=T(a,"viewer_gender"),Xg=T(a,"exploring_hashtag"),ND=vn(T(a,"source_name",!1)),OD=T(a,"hls_source"),PD=V(a,"is_widescreen"),QD=Qp(T(a,"apps_running")),RD=V(a,"allow_private_shows"),SD=W(a,"private_show_price"),TD=W(a,"private_min_minutes"),UD=V(a,"allow_show_recordings"),VD=V(a,"allow_anonymous_tipping"),WD=W(a,"spy_private_show_price"),XD=V(a,"low_satisfaction_score"),YD=V(a,"is_age_verified"),ZD=em(a,"age"),$D=T(a,"hidden_message"),aE=V(a,"following"),bE=T(a,"follow_notification_frequency",!1),cE=V(a,"is_moderator"),dE=T(a,"recommender_hmac"),eE=V(a,"broadcaster_on_new_chat"),fE=W(a,"token_balance"),gE=T(a,"server_name"),hE=W(a,"num_followed"),iE=W(a,"num_followed_online"),jE=V(a,"has_studio"),kE=V(a,"is_mobile"),lE=gm(a,"ignored_emoticons"),mE=V(a,"hide_satisfaction_score"),nE=W(a,"tips_in_past_24_hours"),oE=em(a,"last_vote_in_past_24_hours"),pE=V(a,"last_vote_in_past_90_days_down"),Fh=gm(a,"dismissible_messages"),Ur=[];Fh=q(Fh);for(var xd=Fh.next();!xd.done;xd=Fh.next())xd=xd.value,Ur.push({DF:xd.id,vG:xd.message_html});b={host:f,B:g,AC:h,aI:m,Cy:n,ev:p,Zb:y,ib:C,Si:E,To:ja,Ft:ba,userName:ra,kl:Lb,LA:gf,Dz:hf,$H:wa,Cb:Xg,lc:ND,MA:e,ro:OD,Hg:PD,vg:QD,te:RD,Fd:SD,Lh:TD,li:UD,Rz:VD,kg:WD,Nr:XD,hb:YD,Pc:ZD,ek:$D,jw:aE,hw:bE,ze:cE,fH:dE,jE:eE,ob:fE,qH:gE,EG:hE,FG:iE,yF:jE,Gc:kE,Zf:lE,AF:mE,Ym:nE,KF:oE,LF:pE,ZE:Ur,rH:V(a,"show_mobile_site_banner_link"),Kx:W(a,"num_viewers"),BB:V(a,"fan_club_is_member"),kB:V(a,"performer_has_fanclub"),MG:V(a,"fan_club_paid_with_tokens"),us:V(a,"is_testbed"),nH:{TH:W(d,"up_votes",!1),bF:W(d,"down_votes",!1),VG:W(d,"percent",!1)},MH:V(a,"tfa_enabled"),WD:{header:T(c,"468x60"),rightTop:T(c,"160x600,top"),rightMiddle:T(c,"160x600,middle"),rightBottom:T(c,"160x600,bottom"),footerLeft:T(c,"300x250,left"),footerMiddle:T(c,"300x250,centre"),footerRight:T(c,"300x250,right")},oa:{Er:T(b,"font_color"),fontFamily:T(b,"font_family"),fontSize:T(b,"font_size"),Kd:V(b,"show_emoticons"),Sj:T(b,"emoticon_autocomplete_delay"),Jw:T(b,"highest_token_color"),az:T(b,"sort_users_key"),AG:W(b,"mod_expire"),jj:Np(T(b,"room_entry_for")),lj:Np(T(b,"room_leave_for")),uH:T(b,"silence_broadcasters"),EF:T(b,"ignored_users"),YD:T(b,"allowed_chat"),Me:parseInt(T(b,"v_tip_vol")),kE:parseInt(T(b,"b_tip_vol"))},si:T(a,"browser_id")};c=S(a,"staff_links");void 0!==c&&(b.EH={FH:Rp(c),bE:V(a,"auto_load_admin_info"),bH:S(a,"previous_usernames"),WE:S(a,"deletion_admin_notice")});c=hm(a,"chat_push_groups_context",!0);void 0!==c&&(c=void 0!==c?{ye:V(c,"has_tokens"),Ec:V(c,"in_fanclub"),If:V(c,"tipped_recently"),OH:V(c,"tipped_alot_recently"),Jf:V(c,"tipped_tons_recently")}:void 0,b.qE=c);mm(a);return b}function Tp(a){return new Promise(function(b,c){var d=new Q(a);400<=W(d,"status",!1)?c("Bad response from server: "+a):b(Sp(d))})}
function Up(a){void 0!==Pp&&(Pp.abort(),Pp=void 0);return new Promise(function(b,c){var d=Hb("api/chatvideocontext/"+a+"/");Pp=d[0];d[1].then(function(e){b(Tp(e.responseText))}).catch(function(e){404===e.ud.status?(J("HTTP 404 - Page Not Found\n\nIt's probably just a broken link, or perhaps a cancelled broadcaster."),e.ud.abort()):c(e)})})}function Vp(a,b){var c=!0;"public"!==b.rd&&"privaterequesting"===a.A.status&&"privaterequesting"===b.La&&(c=!1);return c}
function Wp(a,b){return Up(a.A.B()).then(function(c){a.C=c;a.A.status=c.ib;b.La=c.ib})};function Xp(a){Dc.call(this);var b=this;this.ka=a;this.ej=new Map;this.Bm=void 0;this.element.style.visibility="hidden";this.element.style.width="auto";this.element.style.minWidth="100px";this.element.style.height="auto";this.element.style.position="absolute";this.element.style.borderRadius="2px";this.element.style.fontSize="14px";this.element.style.textAlign="center";this.element.style.backgroundColor="rgba(0, 0, 0, 0.3)";this.element.onclick=function(){b.D()};this.ka.De.j(function(d){b.ej.clear();b.clear();for(var e=!1,f=q(d),g=f.next();!g.done;g=f.next())g=g.value,g.label===b.Bm&&(e=!0),b.ej.set(g.label,g.value),b.element.appendChild(b.br(g));0===d.length?b.ka.sc.ua.style.display="none":(b.ka.sc.ua.style.display="",c&&e&&void 0!==b.Bm&&(c=!1,b.Ge(b.Bm)))});var c=!1;this.ka.Vu.j(function(){c=void 0!==b.Bm});this.hc.j(function(){b.D()});this.D()}r(Xp,Dc);k=Xp.prototype;k.G=function(){this.element.style.right="0px";this.element.style.bottom=this.ka.sc.Wb()+"px"};k.br=function(a){var b=this,c=document.createElement("div");c.innerText=a.label;c.style.color="#ffffff";c.style.padding="1px";c.style.width="100%";c.style.border="1px solid rgba(255, 255, 255, 0.5)";c.onmouseenter=function(){c.style.color="#fc760c";c.style.borderColor="#fc760c"};c.onmouseleave=function(){c.style.color="#FFFFFF";c.style.borderColor="rgba(255, 255, 255, 0.5)"};a.bi?c.style.backgroundColor="rgba(204, 204, 204, 0.6)":c.onclick=function(){A("clickMenuLink:QualitySelect-"+a.label);b.Ge(a.label)};return c};k.Ge=function(a){this.Bm=a;a=this.ej.get(a);void 0===a?u("Undefined quality level key",{},"VIDEO_"):this.ka.Ge(a)};k.clear=function(){for(;null!==this.element.firstChild;)this.element.removeChild(this.element.firstChild)};k.show=function(){this.Vg();this.element.style.visibility="";this.G()};k.D=function(){this.mb();this.element.style.visibility="hidden"};var Yp=new D("roomListRequest"),Zp=new D("playerForceMuted"),$p=new D("standardEmoticonRequest");new D("standardEmoticonRequest");var aq=new D("userMenuPmClicked"),bq=new D("mentionUser"),cq=new D("appDebuggingToggled"),dq=new D("getMoreHistoryMessages"),eq=new D("repositionChatTabContent"),fq=new D("userModeratorStatusChanged");function gq(a){F.call(this);var b=this;this.config=a;this.value=0;this.jn=new D("valueChanged");this.hn=new D("valueChangeStart");this.gn=new D("valueChangeEnd");this.element.style.position="relative";this.element.style.overflow="visible";this.element.style.cursor="pointer";this.element.style.width=void 0!==a.Te?a.Te+a.Mb+"px":"90%";this.element.style.height=a.Mb+"px";this.gh=void 0!==a.gh?a.gh:2*Math.round(.25*a.Mb/2);void 0!==a.zq?(this.Xd=document.createElement("img"),this.Xd.src=a.zq,this.Xd.style.width="100%",this.Xd.style.height="100%"):(this.Xd=document.createElement("div"),this.Xd.style.position="absolute",this.Xd.style.boxSizing="border-box",void 0!==a.Rv?this.Xd.style.backgroundColor=a.Rv:(this.Xd.style.backgroundColor="#333333",this.Xd.style.backgroundColor="rgba(255, 255, 255, 0.2)"),this.Xd.style.top=.5*(a.Mb-this.gh)+"px",this.Xd.style.height=this.gh+"px",this.Xd.style.width="100%");this.element.appendChild(this.Xd);void 0!==a.zq?(this.cf=document.createElement("div"),this.cf.style.visibility="none"):(this.cf=document.createElement("div"),this.cf.style.position="absolute",this.cf.style.boxSizing="border-box",this.cf.style.backgroundColor=void 0!==a.aw?a.aw:"#ffffff",this.cf.style.top=.5*(a.Mb-this.gh)+"px",this.cf.style.height=this.gh+"px",this.element.appendChild(this.cf));void 0!==a.ww?(this.P=document.createElement("img"),this.P.style.position="absolute",this.P.style.top="0",this.P.src=a.ww,this.P.style.height=a.Mb+"px",this.P.style.width=a.Mb+"px",this.P.style.cursor="grab",this.P.style.left="0px"):(this.P=document.createElement("div"),this.P.style.position="absolute",this.P.style.top="0",this.P.style.backgroundColor=void 0!==a.vw?a.vw:"#ffffff",this.P.style.borderRadius="50%",this.P.style.height=a.Mb+"px",this.P.style.height=a.Mb+"px",this.P.style.width=a.Mb+"px",this.P.style.cursor="grab");this.element.appendChild(this.P);this.HD=new uk(function(){b.jn.h(b.value)},{xc:100,md:2});hq(this,function(c){iq(b,c,c.clientX)},"mousedown","mousemove","mouseup");hq(this,function(c){if(1===c.touches.length){var d=c.touches.item(0);null!==d&&iq(b,c,d.clientX)}},"touchstart","touchmove","touchend");v("mousedown",this.element,function(c){iq(b,c,c.clientX);var d=b.P,e=d.dispatchEvent;var f=c.type;try{var g=new MouseEvent(f,c)}catch(h){g=document.createEvent("MouseEvent"),g.initMouseEvent(f,void 0!==c.bubbles?c.bubbles:!1,void 0!==c.cancelable?c.cancelable:!1,window,0,void 0!==c.screenX?c.screenX:0,void 0!==c.screenY?c.screenY:0,void 0!==c.clientX?c.clientX:0,void 0!==c.clientY?c.clientY:0,void 0!==c.ctrlKey?c.ctrlKey:!1,void 0!==c.altKey?c.altKey:!1,void 0!==c.shiftKey?c.shiftKey:!1,void 0!==c.metaKey?c.metaKey:!1,void 0!==c.button?c.button:0,void 0!==c.relatedTarget?c.relatedTarget:null)}e.call(d,g)})}r(gq,F);function hq(a,b,c,d,e){v(c,a.P,function(f){function g(h){a.gn.h(a.value);a.P.style.cursor="grab";document.body.style.cursor="";h.preventDefault();x(d,document,b,!0);x(e,document,g,!0)}a.hn.h(a.value);a.P.style.cursor="";document.body.style.cursor="grabbing";f.preventDefault();f.stopPropagation();v(d,document,b,!0);v(e,document,g,!0)})}
function iq(a,b,c){var d=a.element.getBoundingClientRect().left;void 0!==a.config.Te?a.Jd(100/a.config.Te*(Math.max(.5*a.config.Mb,Math.min(a.config.Te+.5*a.config.Mb,c-d))-.5*a.config.Mb)):a.Jd(100/a.element.offsetWidth*(Math.max(.5*a.config.Mb,Math.min(a.element.offsetWidth+.5*a.config.Mb,c-d))-.5*a.config.Mb));vk(a.HD);b.stopPropagation()}gq.prototype.xe=function(){return this.value};gq.prototype.Jd=function(a){void 0!==this.config.Te?(this.P.style.left=a*this.config.Te/100+"px",this.cf.style.width=a*this.config.Te/100+"px"):(this.P.style.left=a*(this.element.offsetWidth-this.config.Mb)/100+"px",this.cf.style.width=a*this.element.offsetWidth/100+"px");this.value=a};gq.prototype.jf=function(){void 0===this.config.Te&&(this.P.style.left=this.value*(this.element.offsetWidth-this.config.Mb)/100+"px",this.cf.style.width=this.value*this.element.offsetWidth/100+"px")};var jq;K.j(function(a){jq=a.A});function kq(){Fj.call(this);var a=this;this.element.id="RemoveIgnoredUsersModal";this.element.style.position="fixed";this.element.style.width="410px";this.element.style.height="127px";this.element.style.borderRadius="6px";this.element.style.padding="10px";this.element.style.fontSize="12px";G(this.V,"overlay");this.V.style.background="";this.V.style.opacity="0.4";var b=this.Kn("https://static-assets.highwebmedia.com/tsdefaultassets/close.svg");G(b,"lightCloseButton");b.style.opacity="0.5";this.element.appendChild(b);b=this.Kn("https://static-assets.highwebmedia.com/tsdefaultassets/close-gray.svg");G(b,"darkCloseButton");this.element.appendChild(b);b=document.createElement("div");G(b,"bluetxt");b.innerText=Af;b.style.fontSize="15px";b.style.fontFamily="UbuntuMedium, Helvetica, Arial, sans-serif";this.element.appendChild(b);this.dk=document.createElement("div");G(this.dk,"textColor");this.dk.innerText="";this.dk.style.margin="10px 0";this.element.appendChild(this.dk);this.element.appendChild(this.qv());this.element.appendChild(this.uv());b=document.createElement("div");b.style.textAlign="right";var c=document.createElement("span");G(c,"saveButton");c.innerText=Ne;c.style.display="inline-block";G(c,"gradient");c.style.fontFamily="UbuntuMedium, Helvetica, Arial, sans-serif";c.style.fontSize="14px";c.style.padding="5px 15px 5px 15px";c.style.marginTop="10px";c.style.borderRadius="4px";c.style.cursor="pointer";c.onclick=function(){a.Gy()};b.appendChild(c);this.element.appendChild(b);this.hc.j(function(){a.D()})}r(kq,Fj);kq.prototype.G=function(){this.element.style.left=Math.max(16,(document.documentElement.clientWidth-this.element.offsetWidth)/2)+"px";this.element.style.top=(document.documentElement.clientHeight-this.element.offsetHeight)/2+"px"};function lq(){var a=document.createElement("div");G(a,"bluetxt");a.innerText=Cf;a.style.fontFamily="UbuntuRegular, Helvetica, Arial, sans-serif";a.style.fontWeight="bold";return a}
function mq(){var a=document.createElement("select");G(a,"select");a.multiple=!0;return a}kq.prototype.Kn=function(a){var b=this,c=document.createElement("img");c.src=a;c.style.position="absolute";c.style.width="14px";c.style.height="14px";c.style.top="10px";c.style.right="10px";c.style.cursor="pointer";c.onclick=function(){b.D()};c.onmouseenter=function(){c.style.opacity="1"};c.onmouseleave=function(){c.style.opacity="0.5"};return c};function nq(){kq.call(this);this.element.style.height="307px";this.dk.innerText=Gf}r(nq,kq);nq.prototype.nf=function(){for(;null!==this.Dc.firstChild;)this.Dc.removeChild(this.Dc.firstChild);for(;null!==this.kb.firstChild;)this.kb.removeChild(this.kb.firstChild);for(var a=q(lo),b=a.next();!b.done;b=a.next()){b=b.value;var c=document.createElement("option");c.innerText=b;c.value=b;this.Dc.appendChild(c)}kq.prototype.show.call(this);this.Y()};nq.prototype.qv=function(){var a=this,b=document.createElement("div");b.style.display="inline-block";b.style.marginRight="10px";var c=lq();c.innerText=Ff;b.appendChild(c);this.Dc=mq();this.Dc.style.borderWidth="1px";this.Dc.style.borderStyle="solid";this.Dc.style.borderRadius="4px";this.Dc.style.marginTop="4px";this.Dc.style.width="200px";this.Dc.style.height="200px";this.Dc.style.padding="2px";this.Dc.style.overflow="auto";this.Dc.onchange=function(){for(var d=a.Dc.selectedOptions.length,e=[].concat(ha(a.Dc.selectedOptions)),f=0;f<d;f+=1){var g=e[f];g.selected=!1;a.kb.appendChild(g)}};b.appendChild(this.Dc);return b};nq.prototype.uv=function(){var a=this,b=document.createElement("div");b.style.display="inline-block";var c=lq();c.innerText=Cf;b.appendChild(c);this.kb=mq();this.kb.style.borderWidth="1px";this.kb.style.borderStyle="solid";this.kb.style.borderRadius="4px";this.kb.style.marginTop="4px";this.kb.style.width="200px";this.kb.style.height="200px";this.kb.style.padding="2px";this.kb.style.overflow="auto";this.kb.onchange=function(){for(var d=a.kb.selectedOptions.length,e=[].concat(ha(a.kb.selectedOptions)),f=0;f<d;f+=1){var g=e[f];g.selected=!1;a.Dc.appendChild(g)}};b.appendChild(this.kb);return b};nq.prototype.Gy=function(){for(var a=q(this.kb.options),b=a.next();!b.done;b=a.next())jq.nu(b.value.value);this.D()};function oq(){kq.call(this);kb()&&(this.element.style.height="307px");this.dk.innerText=Hf}r(oq,kq);oq.prototype.nf=function(){for(;null!==this.kb.firstChild;)this.kb.removeChild(this.kb.firstChild);for(var a=q(lo),b=a.next();!b.done;b=a.next()){b=b.value;var c=document.createElement("option");c.innerText=b;c.value=b;this.kb.appendChild(c)}kq.prototype.show.call(this);this.Y()};oq.prototype.qv=function(){return document.createElement("div")};oq.prototype.uv=function(){var a=document.createElement("div");a.style.display="inline-block";var b=lq();b.innerText=Cf;a.appendChild(b);this.kb=mq();this.kb.style.width="200px";kb()&&(this.kb.style.height="200px");a.appendChild(this.kb);return a};oq.prototype.Gy=function(){for(var a=q(this.kb.selectedOptions),b=a.next();!b.done;b=a.next())jq.nu(b.value.value);this.D()};function pq(a,b){a.style.webkitTransition=b;a.style.transition=b;void 0!==a.style.setProperty&&a.style.setProperty("moz-transition",b)}function qq(a,b){a.style.userSelect=b;a.style.webkitUserSelect=b;a.style.msUserSelect=b;void 0!==a.style.setProperty&&a.style.setProperty("moz-user-select",b)};var rq={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#ffa500",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"};function sq(a){var b=void 0===b?{red:200,green:200,blue:200}:b;var c=a.toLowerCase();if(/^[a-z]+$/.test(c)){var d=rq[c];void 0!==d&&(c=d)}if(/^#([a-fA-F0-9]{3}){1,2}$/.test(c))return b=c,4===b.length&&(b="#"+b[1]+b[1]+b[2]+b[2]+b[3]+b[3]),b=Number("0x"+b.substring(1)),{red:b>>16&255,green:b>>8&255,blue:b&255};if(0===c.indexOf("rgb")){a=a.match(/\d+(\.\d+)?%?/g);if(null===a||3>a.length||4<a.length)return b;a=[a[0],a[1],a[2]];b=[];for(c=0;3>c;c+=1)b[c]=-1!==a[c].indexOf("%")?Math.round(2.55*parseFloat(a[c])):Number(a[c]),0>b[c]?b[c]=0:255<b[c]&&(b[c]=255);return{red:b[0],green:b[1],blue:b[2]}}return b};function tq(a,b,c){Dc.call(this);var d=this;this.$o=b;this.jm=c;this.Nb=document.createElement("input");this.dy=!1;this.ey=new D("pickerImgLoaded");this.eu=a;this.element.style.visibility="hidden";this.element.style.width="auto";this.element.style.height="auto";this.element.style.opacity="0";pq(this.element,"opacity 250ms");v("keydown",this.element,function(e){27===e.keyCode&&d.D()});this.hc.j(function(){d.D()});uq(this);vq(this)}r(tq,Dc);function uq(a){var b=document.createElement("canvas");b.style.cursor="crosshair";b.style.border="1px solid #000001";a.element.appendChild(b);var c=document.createElement("img");"https://static-assets.highwebmedia.com/tsdefaultassets/colorPicker.png?v=1".startsWith("/")||c.setAttribute("crossorigin","anonymous");c.src="https://static-assets.highwebmedia.com/tsdefaultassets/colorPicker.png?v=1";c.onload=function(){b.width=c.width;b.height=c.height;b.onclick=function(){a.wo=a.Nb.value;a.$o(a.Nb.value);a.D()};b.onmousemove=function(e){var f=b.getContext("2d");if(null!==f&&0<e.offsetX&&0<e.offsetY&&e.offsetX<b.clientWidth&&e.offsetY<b.clientHeight){var g=f.getImageData(e.offsetX,e.offsetY,1,1).data;e=a.Nb;f=g[0];var h=g[1];g=g[2];(255<f||255<h||255<g||0>f||0>h||0>g)&&u("Invalid rgb color value: r: "+f+", g: "+h+", b: "+g);f=("000000"+(f<<16|h<<8|g).toString(16)).slice(-6);e.value="#"+f}else a.Nb.value=a.wo;a.jm(a.Nb.value)};b.onmouseleave=function(){a.Nb.value=a.wo;a.jm(a.Nb.value)};var d=b.getContext("2d");null!==d&&d.drawImage(c,0,0,c.width,c.height);a.Nb.style.width=b.width-8+"px";a.dy=!0;a.ey.h(void 0)}}function vq(a){a.Nb.type="text";a.Nb.style.display="block";a.Nb.style.border="1px solid #000000";a.Nb.style.padding="2px 4px";a.Nb.style.position="relative";a.Nb.style.top="-3px";a.Nb.style.fontSize="12px";a.Nb.oninput=function(){a.jm(a.Nb.value)};v("keydown",a.Nb,function(b){13===b.keyCode&&(a.$o(a.Nb.value),a.D())});a.element.appendChild(a.Nb)}
tq.prototype.G=function(){this.element.style.left=this.eu.offsetLeft+"px";this.element.style.top=this.eu.offsetTop+this.eu.offsetHeight+2+"px"};tq.prototype.show=function(a){this.wo=a;if(this.dy)this.fz();else this.ey.once(this.fz.bind(this))};tq.prototype.fz=function(){this.Nb.value=this.wo;this.element.style.opacity="1";this.element.style.visibility="";this.Vg();this.Y()};tq.prototype.D=function(){var a=this;this.mb();this.element.style.opacity="0";window.setTimeout(function(){a.element.style.visibility="hidden"},250)};var wq=new D("switchedToHLS"),xq=new D("openDefaultTipCalloutRequest"),yq=new D("loginOverlayRequest"),zq=new D("userChatSettingsUpdate",{Bd:50});new D("openPhotoVideoTabRequest");function Aq(a,b){F.call(this);var c=this;this.Da=document.createElement("input");this.onChange=function(){};this.disabled=!1;this.Da.type="checkbox";this.Da.style.position="absolute";this.Da.style.opacity="0";this.Da.style.margin="0";this.Da.style.padding="0";this.Da.style.width="0";this.Da.style.height="0";this.Da.style.border="none";this.Da.style.zIndex="-1";this.hz();void 0!==a&&Bq(this,a);void 0!==b&&(this.onChange=b);this.element.appendChild(this.Da);this.Bj();this.element.onclick=function(d){c.disabled||d.target===c.Da||(c.toggle(),c.Da.focus(),d.preventDefault())};this.Da.onchange=function(){Bq(c,c.Da.checked)}}r(Aq,F);k=Aq.prototype;k.toggle=function(){this.Da.checked=!this.Da.checked;this.onChange();this.Bj()};k.focus=function(){this.Da.focus()};k.blur=function(){this.Da.blur()};function Bq(a,b){a.Da.checked=b;a.Bj();a.onChange()}function Cq(a,b){a.Da.checked=b;a.Bj()}function Dq(a,b){a.onChange=b}k.disable=function(){this.disabled=!0;this.Bj()};k.enable=function(){this.disabled=!1;this.Bj()};function Eq(a,b,c){Aq.call(this,b,c);this.Tr=!1;this.element.style.height=a+"px";this.element.style.width=a+"px"}r(Eq,Aq);Eq.prototype.hz=function(){var a=this;G(this.element,"transparentCheckbox");this.element.style.display="inline-block";this.element.style.position="relative";this.element.style.borderWidth="1px";this.element.style.borderStyle="solid";this.element.style.borderRadius="2px";v("focus",this.Da,function(){a.Tr&&G(a.element,"focused")});v("blur",this.Da,function(){a.Tr&&H(a.element,"focused")})};Eq.prototype.Bj=function(){this.Da.checked?G(this.element,"checked"):H(this.element,"checked");this.disabled?G(this.element,"disabled"):H(this.element,"disabled")};Eq.prototype.Ir=function(){return this.Da.name};Eq.prototype.Gm=function(a){this.Da.title=a};function Fq(){Aq.apply(this,arguments)}r(Fq,Aq);Fq.prototype.hz=function(){this.element.style.transition="border 0.4s ease 0s, box-shadow 0.4s ease 0s, background-color 1.4s ease 0s";this.element.style.width="50px";this.element.style.height="30px";this.element.style.borderRadius="20px";this.element.style.lineHeight="30px";this.element.style.position="relative";this.element.style.userSelect="none";this.element.style["-webkit-tap-highlight-color"]="transparent";this.element.style.display="inline-block";this.element.style.verticalAlign="middle";this.element.style.cursor="pointer";this.element.style.boxSizing="content-box";this.button=document.createElement("div");this.button.style.backgroundColor="white";this.button.style.height="30px";this.button.style.width="30px";this.button.style.top="0";this.button.style.borderRadius="100%";this.button.style.display="block";this.button.style.background="white";this.button.style.boxShadow="0 1px 4px rgba(0, 0, 0, 0.6)";this.button.style.transition="left 0.2s";this.button.style.overflow="hidden";this.button.style.position="absolute";this.element.appendChild(this.button)};Fq.prototype.Bj=function(){this.Da.checked?(this.element.style.backgroundColor="rgb(246, 115, 0)",this.element.style.boxShadow="rgb(246, 115, 0) 0 0 0 16px inset",this.element.style.border="1px solid rgb(246, 115, 0)",this.button.style.left="20px"):(this.element.style.backgroundColor="rgb(233, 233, 233)",this.element.style.boxShadow="rgb(233, 233, 233) 0 0 0 16px inset",this.element.style.border="1px solid rgb(223, 223, 223)",this.button.style.left="0")};function Gq(){}function Hq(a,b){b.style.margin="4px 0 7px 4px"}function Iq(a,b,c){b.innerText=c;b.style.fontSize="12px";b.style.display="inline-block";b.style.marginBottom="5px"}function Jq(a,b){G(b,"chat-settings-input");b.style.display="block";b.style.fontSize="12px";b.style.marginTop="0";b.style.borderWidth="1px";b.style.borderStyle="solid";b instanceof HTMLSelectElement&&(G(b,"chat-settings-select"),b.style.height="24px",b.style.width="100%")};var Kq=!1,Lq=new Map;function Mq(){this.vf="10"}var Nq;function Oq(){void 0===Nq&&(Nq=new Mq);return Nq}function Pq(a,b){b=b.match(/\d/g);b=null===b||void 0===b?void 0:b.join("");void 0!==b&&a.vf!==b&&(a.vf=b,Qq(a))}
function Rq(a,b,c,d,e){b=void 0===b?!1:b;a=(void 0===e?0:e)||!(b||void 0!==d&&d)?"10":a.vf;c=void 0===c?!1:c;c=N("div",{style:{display:"inline-block"},colorClass:["noteIconSvg",void 0===b||b?"regMsg":"roomNoticeMsg",(void 0===c?0:c)?"fvm":"tm"]},N("svg",{height:"12",width:"12",viewBox:"0 0 12 12",xmlns:"https://www.w3.org/2000/svg"},N("path",{d:"M5.5 2.00002H2C1.73478 2.00002 1.48043 2.10537 1.29289 2.29291C1.10536 2.48044 1 2.7348 1 3.00002V10C1 10.2652 1.10536 10.5196 1.29289 10.7071C1.48043 10.8947 1.73478 11 2 11H9C9.26522 11 9.51957 10.8947 9.70711 10.7071C9.89464 10.5196 10 10.2652 10 10V6.50002","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),N("path",{d:"M9.25 1.24985C9.44891 1.05094 9.7187 0.939194 10 0.939194C10.2813 0.939194 10.5511 1.05094 10.75 1.24985C10.9489 1.44877 11.0607 1.71855 11.0607 1.99985C11.0607 2.28116 10.9489 2.55094 10.75 2.74985L6 7.49985L4 7.99985L4.5 5.99985L9.25 1.24985Z","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})));c.firstElementChild instanceof SVGElement&&(b=c.firstElementChild,b.style.height=a+"px",b.style.width=a+"px",b.style.display="inline-block",b.style.marginLeft="2px");return c}
function Qq(a){document.querySelectorAll(".notesIcon_msg").forEach(function(b){var c=b.querySelector("svg");b=b.querySelector("img");if(null!==c){b={height:a.vf,width:a.vf};var d=c.querySelector("use");if(null!==d)for(var e=q(Object.keys(b)),f=e.next();!f.done;f=e.next())f=f.value,d.setAttribute(f,b[f]);c.style.height=a.vf+"px";c.style.width=a.vf+"px"}else null!==b&&(b.height=parseInt(a.vf),b.width=parseInt(a.vf),b.style.height=a.vf+"px",b.style.width=a.vf+"px")})}
function Sq(a){var b=this;this.em=new Set;(Kq=void 0===a||a)||Tq().then(function(c){c.forEach(function(d){b.em.add(d)})}).catch(function(){u("Could not retrieve list of users for which currentUser has notes on")})}var Uq;function Vq(a){void 0===Uq&&(Uq=new Sq(a));return Uq}Sq.prototype.El=function(a){return this.em.has(a)};function Wq(a,b){a.em.add(b);Xq(b,!0)}Sq.prototype.remove=function(a){this.em.has(a)&&(this.em.delete(a),Xq(a,!1))};function Xq(a,b){document.body.querySelectorAll(".notesIcon_"+a).forEach(function(c){c.style.display=b?"inline-block":"none"})}function Yq(a){var b;a=new Q(a);var c=lm(a,"error",!1);if(void 0===c)return{success:V(a,"success")};a=new Q(c);c=null===(b=cm(a,"text"))||void 0===b?void 0:b.map(function(d){return{message:T(d,"message"),code:T(d,"code")}});b={text:void 0===c?[]:c};return{success:V(a,"success"),error:b}}
function Tq(){return Gb("api/notes/usernames/").then(function(a){a=new Q(a.responseText);return JSON.parse(km(a,"usernames"))})}function Zq(a){return Gb("api/notes/for_user/"+a+"/").then(function(b){return{text:S(new Q(b.responseText),"text")}})}function $q(a){return new Promise(function(b,c){z("api/notes/for_user/"+a.Ja+"/",{text:a.text}).then(function(d){d=Yq(d.responseText);b(d)}).catch(function(d){c(d.status)})})}
function ar(a,b,c,d){F.call(this);this.Sf=a;this.Pd=b;this.$s=c;this.Ox=d;this.No=!0;this.element.style.position="relative";this.element.appendChild(this.Ye());br(this)}r(ar,F);ar.prototype.Ye=function(){this.rq=function(){};return document.createElement("div")};function br(a){if(Kq)a.wg=a.sa.value,a.sa.placeholder=Ki,a.No=!1;else{var b=cr(a);Zq(a.Pd).then(function(c){c=void 0===c.text?"":c.text;void 0!==b&&c===b.wg?(a.sa.value=b.ph,a.ph=b.ph):(a.sa.value=c,a.ph=c);a.wg=c;a.sa.placeholder=Ki;a.No=!1;a.rq();a.sa.selectionStart=a.sa.selectionEnd=a.sa.value.length;a.sa.blur();a.sa.focus();a.sa.scrollTop=a.sa.scrollHeight}).catch(function(){u("Unable to get notes for user "+a.Pd)})}}function cr(a){return Lq.has(a.Pd)?Lq.get(a.Pd):void 0}
function dr(a){if(!Kq||!jl('You must be logged in to add a Note. Click "OK" to login.')){var b=a.sa.value.trim();a.wg!==b&&300>=b.length?$q({Ja:a.Pd,text:b}).then(function(c){if(c.success)a.wg=b,a.sa.blur(),Lq.has(a.Pd)&&Lq.delete(a.Pd),a.$s(),A("NoteSaved",{username:a.Sf,to_user:a.Pd}),""===a.wg?Vq(!1).remove(a.Pd):Wq(Vq(!1),a.Pd);else if(void 0!==c.error){var d="Following error(s) occurred:<br/>";c.error.text.forEach(function(e){d+="Note text: "+e.message+" <br/>"});J(d,void 0,!0)}}).catch(function(){u("Was not able to update notes for user "+
a.Pd)}):300<b.length?J("Note text must be shorter than 300 characters."):a.$s()}}function er(){ar.apply(this,arguments)}r(er,ar);er.prototype.Ye=function(){function a(){c.No||(c.ph=c.sa.value.trim(),Kq||Lq.set(c.Pd,{wg:c.wg,ph:c.ph}),c.sa.value!==c.wg?(void 0!==y&&(clearTimeout(y),y=void 0),void 0!==c.Ox&&c.Ox()):y=window.setTimeout(function(){p||(m.style.display="none",g.style.display="none");p=!1},500),c.rq())}function b(){dr(c);n.style.opacity="0.5";n.style.cursor="not-allowed"}var c=this,d=document.createElement("div");d.style.paddingTop="8px";G(d,"ucmNote");d.style.borderTopWidth="1px";d.style.borderTopStyle="solid";var e=document.createElement("div");G(e,"notesIcon");e.style.display="inline-block";e.style.width="12px";e.style.height="12px";e.style.marginRight="5px";e.style.marginLeft="1px";var f=document.createElement("span");f.textContent=Ii;f.style.display="inline-block";f.style.verticalAlign="top";f.style.fontFamily="Tahoma, Arial, Helvetica, sans-serif";f.style.fontSize="12px";f.style.lineHeight="12px";var g=document.createElement("span");g.textContent=Li;g.style.display="inline-block";g.style.verticalAlign="top";g.style.fontFamily="Tahoma, Arial, Helvetica, sans-serif";g.style.fontSize="12px";g.style.lineHeight="12px";g.style.marginLeft="2px";g.style.display="none";f.appendChild(g);var h=document.createElement("div");G(h,"ucmLinkColor");h.style.margin="0px 10px 8px 10px";h.style.height="15px";h.appendChild(e);h.appendChild(f);d.appendChild(h);this.sa=document.createElement("textarea");this.sa.style.width="calc(100% - 38px)";this.sa.style.height="56px";this.sa.style.lineHeight="14px";this.sa.style.borderWidth="1px";this.sa.style.borderStyle="solid";this.sa.style.borderRadius="4px";this.sa.style.resize="none";this.sa.style.display="block";this.sa.style.padding="7px 8px";this.sa.style.margin="0px auto";this.sa.style.overflow="auto";this.sa.placeholder=Ji;this.sa.style.fontFamily="Tahoma, Arial, Helvetica, sans-serif";this.sa.style.fontSize="100%";this.sa.tabIndex=1;d.appendChild(this.sa);var m=document.createElement("div");m.style.margin="10px 10px 0px 0px";m.style.textAlign="right";m.style.display="none";e=document.createElement("a");G(e,"cancelLink");e.innerText=Vf;e.style.display="inline-block";e.style.marginRight="8px";e.style.verticalAlign="middle";e.style.cursor="pointer";e.href="#";e.tabIndex=3;var n=document.createElement("input");n.type="submit";n.value=Oe;n.style.opacity="0.5";n.style.borderWidth="1px";n.style.borderStyle="solid";n.style.borderRadius="4px";n.style.boxSizing="border-box";n.style.cursor="pointer";n.style.height="27px";n.style.width="69px";n.style.font="16px UbuntuMedium,Helvetica,sans-serif";n.style.webkitAppearance="none";n.style.display="inline-block";n.style.textAlign="center";n.tabIndex=2;var p=!1,y;this.rq=function(){if(!c.No){var C=c.wg!==c.ph,E=300>=c.sa.value.length;n.style.opacity=C&&E?"1":"0.5";n.style.cursor=C&&E?"pointer":"not-allowed";g.style.display=C?"":"none";m.style.display=C?"":"none"}};jb()&&v("keyup",this.sa,function(C){8===C.keyCode&&a()});bb()&&v("keyup",this.sa,function(){""===c.ph&&(c.sa.placeholder=Ki)});v("input",this.sa,function(){a()});v("keydown",this.element,function(C){C.ctrlKey||C.metaKey||27===C.keyCode||(C.stopPropagation(),!eb()&&C.shiftKey&&13===C.keyCode&&(C.preventDefault(),p=!0,b()))});v("click",e,function(C){C.preventDefault();Lq.has(c.Pd)&&Lq.delete(c.Pd);c.$s()});v("click",n,function(C){C.preventDefault();p=!0;b()});m.appendChild(e);m.appendChild(n);d.appendChild(m);e=document.createElement("div");e.style.margin="4px 0px";e.style.height="2px";d.appendChild(e);return d};var fr=new D("getChatMode");function gr(){F.apply(this,arguments);this.Jq=new D("chatSettingsSavedRequest")}r(gr,F);k=gr.prototype;k.initData=function(){this.Si=this.ze=!1;this.Xw=!0;this.sk=document.createElement("div");this.fp=document.createElement("div");this.form=document.createElement("form");this.yu=document.createElement("div");this.jh=document.createElement("input");this.Of=document.createElement("span");this.Wj=document.createElement("select");this.Zn=document.createElement("select");this.Vn=document.createElement("select");this.Jm=new Fq(!1,this.Gb.bind(this));this.no=document.createElement("select");this.Uo=document.createElement("select");this.Vo=document.createElement("select");this.qz=document.createElement("label");this.ed=new gq({Mb:16,vw:"rgb(246, 115, 0)",Rv:"#cccccc",aw:"rgb(246, 115, 0)"});this.Vl=document.createElement("label")};k.ya=function(){var a=this;this.element.style.width="100%";this.element.style.overflow="auto";this.element.style.boxSizing="border-box";this.element.style.padding="11px";this.element.style.fontSize="12px";this.element.style.position="static";this.form.style.marginBottom="40px";this.form.style.maxWidth="400px";this.element.appendChild(this.form);var b=document.createElement("div"),c=document.createElement("div");this.form.appendChild(b);this.form.appendChild(c);this.form.appendChild(this.yu);this.form.appendChild(this.sk);this.form.appendChild(this.fp);hr(this);hr(this);hr(this);hr(this);hr(this);var d=this.xi(gi);d.style.marginTop="0";b.appendChild(d);b.appendChild(ir(this));b.appendChild(jr(this));b.appendChild(kr(this));c.appendChild(this.xi(hi));c.appendChild(lr(this));c.appendChild(mr(this,document.createElement("label"),hd,this.Vn,[{label:"Turn Off Autocomplete",value:"-1"},{label:"No Delay - 0s",value:"0"},{label:"Short - 0.5s",value:"500"},{label:"Medium - 1s",value:"1000"},{label:"Long - 1.5s",value:"1500"}]));this.yu.appendChild(this.xi(ii));this.yu.appendChild(mr(this,document.createElement("label"),id,this.no,[{label:"Dark Purple (Tipped 1000 recently)",value:"darkpurple"},{label:"Light Purple (Tipped 250 recently)",value:"lightpurple"},{label:"Dark Blue (Tipped 50 recently)",value:"darkblue"},{label:"Light Blue (Owns or purchased tokens)",value:"lightblue"}]));this.sk.appendChild(this.xi(ji));this.sk.appendChild(mr(this,document.createElement("label"),li,this.Uo,nr()));this.sk.appendChild(mr(this,document.createElement("label"),mi,this.Vo,nr()));this.fp.appendChild(this.xi(ki));this.fp.appendChild(or(this));this.fp.appendChild(pr(this));zq.j(function(e){a.cn(e);Pq(Oq(),e.fontSize)});K.j(function(e){a.kf(e);Pq(Oq(),e.C.oa.fontSize)})};function qr(a){void 0!==a.Jn&&a.Jn.D();void 0!==a.Ak&&a.Ak.D()}function rr(a,b){a.jh.value=b;a.Of.style.color=b;a.Of.style.backgroundColor=b}
k.Xx=function(a){if(!this.Db()){if(jl('You must be logged in to change chat color. Click "OK" to login.')){a.preventDefault();return}if(!this.Si){J("You must be a supporter to change chat color");a.preventDefault();return}}void 0===this.Jn&&(this.Jn=this.H(new tq(this.Of,this.$o.bind(this),this.jm.bind(this))));this.Jn.show(this.jh.value)};k.$o=function(a){rr(this,a);this.Gb()};k.jm=function(a){rr(this,a)};function mr(a,b,c,d,e){var f=document.createElement("div");Hq(hr(a),f);f.appendChild(b);f.appendChild(d);if(void 0!==e&&d instanceof HTMLSelectElement){e=q(e);for(var g=e.next();!g.done;g=e.next()){g=g.value;var h=document.createElement("option");h.innerText=g.label.toString();h.value=g.value.toString();d.appendChild(h)}}Iq(hr(a),b,c);Jq(hr(a),d);f.onclick=function(m){jl('You must be logged in to change chat settings. Click "OK" to login.')?m.preventDefault():m.target!==d&&d.focus()};d.onmousedown=function(m){jl('You must be logged in to change chat settings. Click "OK" to login.')&&m.preventDefault()};v("change",d,function(){a.Gb()});return f}function ir(a){var b=mr(a,document.createElement("label"),dd,a.Of);b.appendChild(a.jh);a.Of.style.width="20px";a.Of.style.height="20px";a.Of.style.border="1px solid "+Oc.rr;a.Of.style.cursor="pointer";a.Of.style.verticalAlign="middle";a.Of.onmousedown=a.Xx.bind(a);b.onclick=a.Xx.bind(a);a.jh.type="hidden";return b}
function jr(a){function b(d){a.Db()||(jl('You must be logged in to change font family. Click "OK" to login.')?d.preventDefault():a.Si||(d.preventDefault(),a.Wj.blur(),J("You must be a supporter to change font family")))}var c=mr(a,document.createElement("label"),ed,a.Wj,[{label:"Default",value:"default"},{label:"Arial",value:"Arial, Helvetica"},{label:"Bookman Old Style",value:"Bookman Old Style"},{label:"Comic Sans",value:'"Comic Sans MS", cursive'},{label:"Courier",value:'"Courier New"'},{label:"Lucida",value:"Lucida"},{label:"Palantino",value:"Palantino"},{label:"Tahoma",value:"Tahoma, Geneva"},{label:"Times New Roman",value:'"Times New Roman"'}]);a.Wj.onmousedown=b.bind(a);c.onclick=b.bind(a);return c}function kr(a){for(var b=[],c=9;20>=c;c+=1)b.push({label:c+"pt",value:c+"pt"});return mr(a,document.createElement("label"),fd,a.Zn,b)}function lr(a){var b=mr(a,document.createElement("label"),gd,a.Jm.element);a.Jm.element.style.display="block";return b}
function or(a){var b="";fr.j(function(d){b=d});var c=mr(a,a.qz,jd,a.ed.element);sr(a);a.Gl(a.ed.xe());a.ed.hn.j(function(d){a.Gl(d)});a.ed.jn.j(a.Gl.bind(a));a.ed.gn.j(function(d){a.Gl(d);A("TipVolumeChanged",{tipvol:d,chatmode:b});d=Math.round(a.ed.xe());a.Xw?(zb("tipvol",""+d,60),a.oa.Me=d,zq.h(a.oa)):a.Gb()});c.onclick=function(){};a.ed.element.onmousedown=function(){};return c}k.Gl=function(a){this.qz.innerText=jd+" ("+Math.round(a)+"%)"};function pr(a){var b=tr(a,a.Vl);a.Vl.onclick=function(){jl('You must be logged in to edit ignored users. Click "OK" to login.')||(void 0===a.Ak&&void 0===a.Ak&&(a.Ak=hb()?new oq:new nq),void 0!==a.Ak&&a.Ak.nf())};return b}
function tr(a,b){var c=document.createElement("div");Hq(hr(a),c);c.appendChild(a.Vl);G(b,"link");b.innerText=kd;b.style.marginTop="16px";b.style.cursor="pointer";b.onmouseenter=function(){b.style.textDecoration="underline"};b.onmouseleave=function(){b.style.textDecoration="none"};return c}k.xi=function(a){var b=document.createElement("div");hr(this);b.innerText=a;b.style.fontWeight="bold";b.style.fontSize="12px";b.style.margin="14px 0 8px";b.style.backgroundColor="";return b};k.Gb=function(){var a=this;jl('You must be logged in to change chat settings. Click "OK" to login.')?zq.h(this.oa):(z("choose_viewer_chat_color/",{color:this.jh.value}).catch(function(b){a.jh.value=a.oa.Er;u("Error saving user chat color: "+b)}),z("api/viewerchatsettings/"+this.Z+"/",ur(this)).then(function(){a.Jq.h(void 0);a.ze&&(a.oa.jj=Np(a.Uo.value),a.oa.lj=Np(a.Vo.value));a.oa.Er=a.jh.value;a.oa.fontFamily=decodeURIComponent(a.Wj.value);a.oa.fontSize=a.Zn.value;a.oa.Kd=a.Jm.Da.checked;a.oa.Sj=a.Vn.value;a.oa.Jw=a.no.value;a.oa.Me=Math.round(a.ed.xe());zq.h(a.oa)}).catch(function(b){u("Error saving user chat settings: "+b)}))};function ur(a){var b={color:a.jh.value};b.font_family=decodeURIComponent(a.Wj.value);b.font_size=a.Zn.value;b.show_emoticons=""+a.Jm.Da.checked;b.emoticon_autocomplete_delay=a.Vn.value;b.highest_token_color=a.no.value;b.viewer_tip_volume=""+Math.round(a.ed.xe());a.ze&&(b.enter_notify=a.Uo.value,b.leave_notify=a.Vo.value);return b}
function sr(a){a.ed.element.style.display="inline-block";a.ed.element.style.border="none";a.ed.element.style.verticalAlign="top";a.ed.element.style.height="16px";a.ed.element.style.width="100%"}k.G=function(){this.ed.jf()};function hr(a){void 0===a.fv&&(a.fv=new Gq);return a.fv}
k.cn=function(a){this.oa=a;rr(this,this.oa.Er);this.Wj.value=this.oa.fontFamily;this.Zn.value=this.oa.fontSize;Cq(this.Jm,this.oa.Kd);this.Vn.value=this.oa.Sj;this.no.value=this.oa.Jw;this.ed.Jd(this.oa.Me);this.Gl(this.oa.Me);Qb=this.oa.Me};k.Db=function(){return!1};k.kf=function(a){this.cn(a.C.oa);this.Z=a.C.B;this.ze=a.C.ze;this.Si=a.C.Si;this.Xw=a.A.Qe;this.ze?(this.sk.style.display="block",this.Uo.value=vr(this.oa.jj),this.Vo.value=vr(this.oa.lj)):this.sk.style.display="none"};function nr(){return[{label:"All Registered Users",value:"orga"},{label:"Mods, Fans, and Users With Tokens",value:"orgb"},{label:"Mods and Fans",value:"org"},{label:"No Users",value:"none"}]}function vr(a){switch(a){case 0:return"orga";case 1:return"orgb";case 2:return"org";case 3:return"none";default:return u("Invalid enter/leave setting: "+a),"orgb"}};function wr(a,b){function c(f){d.state.T&&!d.jd&&(d.jd=!0,A("UserUnmuted",{chatMode:d.We}));f!==d.state.volume&&d.fi(f)}F.call(this);var d=this;this.ka=a;this.state={volume:60,T:!0};this.jd=!1;this.nC=b;this.state.T=xr();this.state.volume=yr();this.element.style.bottom="0px";this.element.style.left="0px";this.element.style.height="32px";this.element.style.background="url(https://static-assets.highwebmedia.com/tsdefaultassets/ConfigBarNoEdge.png) repeat-x";this.Ma=this.H(new gq({Mb:11,Te:66,gh:4,ww:"https://static-assets.highwebmedia.com/tsdefaultassets/SliderKnob.png",zq:"https://static-assets.highwebmedia.com/tsdefaultassets/SliderBar.png"}));this.Ma.element.style.position="absolute";this.Ma.element.style.left="30px";this.Ma.element.style.bottom="10px";this.Ma.Jd(this.state.volume);this.Ma.hn.j(function(f){d.state.T&&!d.jd&&(d.jd=!0,A("UserUnmuted",{chatMode:d.We}));d.ka.Bf(!1);d.pe();c(f)});this.Ma.jn.j(c);this.Ma.gn.j(function(f){c(f);0===d.state.volume&&d.ka.Bf(!0);A("ChangeVolume",{volume:f})});b=document.createElement("div");b.style.width="115px";b.style.height="100%";b.style.cssFloat="left";this.element.appendChild(b);this.Jp=document.createElement("img");this.Jp.src="https://static-assets.highwebmedia.com/tsdefaultassets/ConfigBar.png";this.Jp.style.width="100%";this.Jp.style.height="100%";b.appendChild(this.Jp);this.Ba=document.createElement("img");this.Ba.src="https://static-assets.highwebmedia.com/tsdefaultassets/ButtonVolume0.png";this.Ba.style.position="absolute";this.Ba.style.bottom="6px";this.Ba.style.left="5px";this.Ba.onclick=function(){A("ToggleMute",{newState:!d.state.T});A("ChangeVolume",{volume:d.state.volume});d.state.T?(d.jd||(d.jd=!0,A("UserUnmuted",{chatMode:d.We})),d.pe()):d.Gh()};b.appendChild(this.Ba);var e=oc();document[qc()]=function(){I()||(e=!1,d.wa.style.display="none",J("Full screen is unavailable."))};this.wa=document.createElement("img");this.wa.src="https://static-assets.highwebmedia.com/tsdefaultassets/ButtonFullscreen.png";this.wa.style.position="relative";this.wa.style.top="1px";this.wa.style.cssFloat="right";oc()||(this.wa.style.display="none");this.wa.onclick=function(){e&&d.ka.Fi()};this.element.appendChild(this.wa);this.ua=document.createElement("img");this.ua.src="https://static-assets.highwebmedia.com/tsdefaultassets/ButtonQuality.png";this.ua.style.position="relative";this.ua.style.top="1px";this.ua.style.display="none";this.ua.style.cssFloat="right";this.ua.onclick=function(){d.nC.show()};this.element.appendChild(this.ua);this.Qh=document.createElement("img");this.Qh.src="https://static-assets.highwebmedia.com/tsdefaultassets/ButtonScale.png";this.Qh.style.position="relative";this.Qh.style.top="1px";this.Qh.style.cssFloat="right";this.Qh.style.display=I()?"":"none";this.Qh.onclick=function(){var f=d.ka;f.js=!f.js;zr(f)};this.element.appendChild(this.Qh);K.j(function(){d.qe();Ar(d)});Zp.j(function(){d.Gh()});a.De.j(function(f){if(0===f.length)d.ua.style.display="none";else{d.ua.style.display="";var g="https://static-assets.highwebmedia.com/tsdefaultassets/ButtonQuality.png";f=q(f);for(var h=f.next();!h.done;h=f.next())if(h=h.value,h.label.includes("4K")||h.label.includes("HD")){if(g="https://static-assets.highwebmedia.com/tsdefaultassets/ButtonQualityHDAvil.png",!0===h.bi){g="https://static-assets.highwebmedia.com/tsdefaultassets/ButtonQualityHDSel.png";break}}else h.label.includes("Auto")&&720<=parseInt(h.label.slice(6,-2))&&(g="https://static-assets.highwebmedia.com/tsdefaultassets/ButtonQualityHDSel.png");d.ua.src=g}});fr.j(function(f){d.We=f});Ar(this);this.D()}r(wr,F);k=wr.prototype;k.Gb=function(){t()&&!this.ka.Bh&&window.localStorage.setItem("videoControls",JSON.stringify({volume:this.state.volume,isMuted:this.state.T}))};function yr(){if(t()){var a=window.localStorage.getItem("videoControls");if(null!==a)return JSON.parse(a).volume}return 60}function xr(){if(t()){var a=window.localStorage.getItem("videoControls");if(null!==a)return JSON.parse(a).isMuted}return!1}k.show=function(){this.element.style.visibility=""};k.D=function(){this.element.style.visibility="hidden"};k.Gh=function(){!0!==this.state.T&&(this.state.T=!0,Ar(this))};k.pe=function(){!1!==this.state.T&&(this.state.T=!1,0===this.state.volume&&(this.state.volume=60),Ar(this))};k.G=function(){this.Qh.style.display=I()?"":"none"};function Ar(a){a.qe();a.ka.Hk(a.state.volume,a.state.T);a.Ma.Jd(a.state.volume);a.Gb();Pb=a.state.T?0:a.state.volume}
k.qe=function(){this.Ba.src=!0===this.state.T?"https://static-assets.highwebmedia.com/tsdefaultassets/ButtonVolume0.png":0===this.state.volume?"https://static-assets.highwebmedia.com/tsdefaultassets/ButtonVolume1.png":40>this.state.volume?"https://static-assets.highwebmedia.com/tsdefaultassets/ButtonVolume2.png":70>this.state.volume?"https://static-assets.highwebmedia.com/tsdefaultassets/ButtonVolume3.png":"https://static-assets.highwebmedia.com/tsdefaultassets/ButtonVolume4.png"};k.fi=function(a){this.state.volume!==a&&(this.state.volume=a,0!==a&&(this.state.T=!1),Ar(this))};k.Kf=function(a){this.jd||a||(this.jd=!0);this.state.T=a;Ar(this)};k.ru=function(a){this.fi(a);this.Gb()};k.qu=function(a){this.Kf(a);this.Gb()};k.Eg=function(){this.D()};k.Wb=function(){return"hidden"===this.element.style.visibility?0:32};k.Co=function(){return!1};var Br=window.Hls;function Cr(a){a=void 0===a?{}:a;var b=Dr().si;void 0!==b&&"a"===b.charAt(b.length-1)&&(a.tabHidden=document.hidden,a.videoSessionID=Dr().value,A("VideoMetric",a,!0))}function Er(){return Za()?window.performance.now():(new Date).getTime()}function Fr(){var a=window.browserId;void 0!==a?this.si=a:(a=window.initialRoomDossier,void 0!==a&&(this.si=Sp(new Q(a)).si))}var Gr;Fr.prototype.clear=function(){this.iq=void 0};function Dr(){void 0===Gr&&(Gr=new Fr);return Gr}
ea.Object.defineProperties(Fr.prototype,{value:{configurable:!0,enumerable:!0,get:function(){void 0===this.iq&&(this.iq=this.si+":"+(new Date).getTime());return this.iq}}});function Hr(){Za()&&(this.start=Er())}
Hr.prototype.send=function(a,b,c){if(Za()&&void 0!==this.start){var d=Er()-this.start-b,e=this.start=Er();a={eventName:"autoPlayDuration",autoPlayDuration:e/1E3,autoPlayDurationMS:e,autoPlayDurationNoDelay:d/1E3,autoPlayDurationNoDelayMS:d,autoPlayable:a};0!==b&&(a.autoPlayHiddenDelay=b/1E3,a.autoPlayHiddenDelayMS=b);void 0!==c&&null!==c&&(a.autoPlayError=c);Cr(a)}};function Ir(a){var b=this;this.Ht=this.Bu=!1;this.Tg=function(c){c=void 0===c?{}:c;var d={playerType:b.hC},e;for(e in c)d[e]=c[e];Cr(d)};this.KC=function(){var c={eventName:"playerCreated"},d=wb().player;void 0!==d&&(c.playerOverride=d);b.Tg(c);b.AA=Er()};this.Px=function(c){b.wp=Er();Dr().si=c.C.si};this.Qx=function(){b.Bu||(b.Bp(),Dr().clear())};this.mm=function(){b.Bu||(b.Bp(),b.Bu=!0,b.qp())};this.hC=a;this.KC()}
function Jr(a){a.qp();K.j(a.Px);vc.j(a.Qx);v("beforeunload",window,a.mm);v("unload",window,a.mm);a.Ht=!0}Ir.prototype.Bp=function(){if(void 0!==this.wp&&Za()){this.Jt=Er();var a=this.Jt-this.wp;this.Tg({eventName:"viewerDuration",viewerDuration:a/1E3,viewerDurationMS:a});return a}};Ir.prototype.qp=function(){this.Ht&&(x("beforeunload",window,this.mm),x("unload",window,this.mm),K.removeListener(this.Px),vc.removeListener(this.Qx),this.Ht=!1)};function Kr(a){Ir.call(this,a);var b=this;this.oo=this.Pw=this.Zr=this.so=!1;this.JC=function(){if(!b.Zr){var c={eventName:"videoPlaying",isAjax:!1,bitrate:b.fk},d=b.BA();void 0!==d&&b.Tg({eventName:"broadcastDelay",broadcastDelayMS:d,broadcastDelay:d/1E3});d=Er();if(void 0===b.Yr)w("Playing metric has triggered but htmlMediaLoadStartTime is undefined...skipping");else{var e=d-b.Yr;c.timeSinceMediaLoadStart=e/1E3;c.timeSinceMediaLoadStartMS=e}void 0!==b.Vr&&(e=d-b.Vr,c.timeSinceMediaAttaching=e/1E3,c.timeSinceMediaAttachingMS=e);if(b.Pw){if(void 0===b.wp){w("Playing metric is for AJAX reload but roomLoadedTime is undefined...skipping");return}e=d-b.wp;c.timeSinceLoadAjax=e/1E3;c.timeSinceLoadAjaxMS=e;c.isAjax=!0;void 0===b.Jt?w("Playing metric is for AJAX reload but roomUnloadedTime is undefined"):(e=d-b.Jt,c.timeSinceUnloadAjax=e/1E3,c.timeSinceUnloadAjaxMS=e)}else d-=b.AA,c.timeSincePlayerCreated=d/1E3,c.timeSincePlayerCreatedMS=d;b.Tg(c);b.Zr=!0;b.Pw=!0}};this.IC=function(){var c=b.Ia instanceof
HTMLMediaElement?b.Ia.error:b.Ia.error_;void 0!==c&&null!==c&&b.Tg({eventName:"playerError",errorCode:c.code,errorMessage:c.message,errorSource:"HTMLMediaElement",errorReadyState:b.Ia.readyState,errorNetworkState:b.Ia.networkState,bitrate:b.fk})};this.$c=function(c){b.so&&("playing"===c.type?b.JC():"loadstart"===c.type?b.Yr=Er():"error"===c.type?b.IC():"stalled"===c.type?(c=c.target,void 0!==c&&null!==c&&b.Tg({eventName:"playerStalled",stalledReadyState:c.readyState,stalledNetworkState:c.networkState,bitrate:b.fk})):w("Received unknown HTMLMediaElement event: ",c))};this.$z=function(c){b.sy();b.Fg=c;b.Fg.on(Br.Events.ERROR,b.Lg);b.Fg.on(Br.Events.FRAG_CHANGED,b.Lg);Za()&&(b.Fg.on(Br.Events.LEVEL_SWITCHING,b.Lg),b.Fg.on(Br.Events.LEVEL_SWITCHED,b.Lg),b.Fg.on(Br.Events.MEDIA_ATTACHING,b.Lg));b.oo=!0};this.Oz=function(c){var d=c.level;if(void 0===d)w("Received Hls.Events.LEVEL_SWITCHING without a level: ",c);else{for(var e=q(["bitrate","height","width"]),f=e.next();!f.done;f=e.next())if(f=f.value,isNaN(c[f])){w("Level "+f+" is not a number: "+c[f]+"...skipping");return}b.Lw[d]=c;b.Mw.unshift({level:d,ts:Er()})}};this.MC=function(c){var d=c.level;if(void 0===d)w("Received Hls.Events.LEVEL_SWITCHED without a level: ",c);else{var e=b.Lw[d];if(void 0===e)w("Received unknown Hls.Events.LEVEL_SWITCHED level: ",c);else{c=q(b.Mw);for(var f=c.next();!f.done;f=c.next())if(f=f.value,f.level===d){d=f.ts;d=Er()-d;b.po.push(d);break}if(void 0===b.Xf||e.bitrate>b.Xf.bitrate)b.Xf=e;b.fk=e.bitrate}}};this.BA=function(){if(void 0!==b.qo){var c=b.Ia.currentTime()-b.qo.start;if(!(0>c||(c=(new Date).getTime()-b.qo.programDateTime+1E3*c,0>c||3E5<c)))return c}};this.Lg=function(c,d){b.oo&&(c===Br.Events.LEVEL_SWITCHING?b.Oz(d):c===Br.Events.LEVEL_SWITCHED?b.MC(d):c===Br.Events.FRAG_CHANGED?b.qo=d.frag:c===Br.Events.MEDIA_ATTACHING?b.Vr=Er():c===Br.Events.ERROR?(c=b.Ia.tech().el(),b.Tg({eventName:"playerError",errorCode:d.type,errorMessage:d.details,errorSource:"hls.js",errorReadyState:c.readyState,errorNetworkState:c.networkState,bitrate:b.fk,quality:b.pB})):w("Received unknown Hls.Event: ",c))};this.sy=function(){b.oo&&(b.Fg.off(Br.Events.ERROR,b.Lg),b.Fg.off(Br.Events.FRAG_CHANGED,b.Lg),Za()&&(b.Fg.off(Br.Events.LEVEL_SWITCHING,b.Lg),b.Fg.off(Br.Events.LEVEL_SWITCHED,b.Lg)),b.oo=!1)};this.ty=function(){b.so&&(b.Ia instanceof HTMLMediaElement?(Za()&&(x("playing",b.Ia,b.$c),x("loadstart",b.Ia,b.$c)),x("error",b.Ia,b.$c),x("stalled",b.Ia,b.$c)):(Za()&&(b.Ia.off("playing",b.$c),b.Ia.off("loadstart",b.$c)),b.Ia.off("error",b.$c),b.Ia.off("stalled",b.$c)),b.so=!1)};this.reset=function(){b.Zr=!1;b.Lw=new Map;b.fk=void 0;b.Mw=[];b.po=[];b.Xf=void 0;b.qo=void 0;b.Yr=void 0;b.Vr=void 0};this.reset()}r(Kr,Ir);function Lr(a,b){a.ty();a.Ia=b;a.Ia instanceof HTMLMediaElement?(Za()&&(v("playing",a.Ia,a.$c),v("loadstart",a.Ia,a.$c)),v("error",a.Ia,a.$c),v("stalled",a.Ia,a.$c)):(Za()&&(a.Ia.on("playing",a.$c),a.Ia.on("loadstart",a.$c)),a.Ia.on("error",a.$c),a.Ia.on("stalled",a.$c));a.so=!0}Kr.prototype.Ge=function(a){this.pB=a};Kr.prototype.Bp=function(){var a=Ir.prototype.Bp.call(this);if(void 0!==a&&5E3<a){void 0!==this.Xf&&this.Tg({eventName:"levelMax",levelMaxName:this.Xf.name,levelMaxBitrate:this.Xf.bitrate,levelMaxAudioCodec:this.Xf.audioCodec,levelMaxVideoCodec:this.Xf.videoCodec,levelMaxHeight:this.Xf.height,levelMaxWidth:this.Xf.width,bitrate:this.fk});var b=this.po.reduce(function(c,d){return c+d},0)/this.po.length;isNaN(b)||this.Tg({eventName:"levelSwitchAvg",levelSwitchAvg:b/1E3,levelSwitchAvgMS:b,levelSwitchCount:this.po.length})}this.reset();return a};Kr.prototype.qp=function(){Ir.prototype.qp.call(this);this.sy();this.ty()};var Mr="1"===wb().signup_notice;function Nr(){F.call(this);var a=this;this.element.style.backgroundColor="#f7f6a8";this.element.style.fontSize="12px";this.element.style.padding="3px 10px";this.element.style.boxSizing="border-box";this.element.style.display="none";this.element.style.width="auto";this.element.style.height="auto";var b=document.createElement("a");b.innerText=Yd;b.onclick=function(){A("Subscribe")};this.element.appendChild(b);this.element.appendChild(document.createTextNode(" -- totally free, no email needed"));Mr&&K.j(function(c){window.self!==window.top&&(b.onclick=function(d){d.preventDefault();d="/accounts/register/?next="+encodeURIComponent(window.location.pathname)+"?b="+c.C.B;ij(d,void 0,void 0)});b.href="/accounts/register/?next="+encodeURIComponent(window.location.pathname)+"?b="+c.C.B;a.element.style.display=c.A.Qe?"block":"none"})}r(Nr,F);function Or(a,b){function c(e){return e instanceof d?e:new d(function(f){f(e)})}var d=void 0;return new(d||(d=Promise))(function(e,f){function g(n){try{m(b.next(n))}catch(p){f(p)}}function h(n){try{m(b["throw"](n))}catch(p){f(p)}}function m(n){n.done?e(n.value):c(n.value).then(g,h)}m((b=b.apply(a,[])).next())})};var Pr=new D("pictureInPictureChange");function Qr(a,b){F.call(this);var c=this;this.Fb=a;this.zt=new D("requestJPEG");this.yf=new D("requestControlVisibility");this.Dm=new D("setControlVolume");this.qj=new D("setControlIsMuted");this.Tm=this.Zh=!0;this.M=document.createElement("video");this.qf=!1;this.mh=document.createElement("div");this.Oq=[];this.De=new D("possibleQualityLevelsChanged");this.mc=new D("videoOfflineChange");this.xk=new D("playbackStart");this.Wy=!0;this.Xp=this.ks=this.re=!1;this.element.style.position="static";this.element.style.background="#333333 url(https://static-assets.highwebmedia.com/tsdefaultassets/cam_notice_background.jpg) center center / cover";this.element.className="videoPlayerDiv";this.M.setAttribute("webkit-playsinline","");this.M.setAttribute("playsinline","");this.M.setAttribute("autoplay","autoplay");this.M.style.margin="0";this.M.style.padding="0";this.M.style.width="100%";this.M.style.height="100%";this.M.style["object-fit"]="contain";this.M.style.backgroundColor="rgba(0, 0, 0, 0.0)";this.element.appendChild(this.M);window.videoElement=this.M;this.mh.style.backgroundColor="#000000";this.mh.style.opacity="0.6";this.mh.style.position="absolute";this.mh.style.width="inherit";this.mh.style.height="inherit";this.rg=new Kr(b);Jr(this.rg);Pr.j(function(d){c.ks=d.active})}r(Qr,F);function Rr(a,b){return Or(a,function d(){var e=this,f,g,h;return Aa(d,function(m){if(1==m.ma)return b.C.ro!==e.px&&""!==b.C.ro?(e.px=b.C.ro,f=b.A.status,e.re&&(f="offline"),m.return({url:Sr(b.C.ro),status:f})):sa(m,z("get_edge_hls_url_ajax/",{room_slug:b.C.B,bandwidth:"high",current_edge:""}),3);g=m.se;h=JSON.parse(g.responseText);if(h.success)return e.px=h.url,m.return({url:Sr(h.url),status:Op(h.room_status)});throw g.responseText;})})}
function Sr(a){var b=wb();return void 0!==b.edge?a.replace(/(^https:\/\/edge)\d*(.+)/,"$1"+b.edge+"$2"):a}
function Tr(a,b){a.stop();(function(){return Or(a,function d(){var e=this,f,g,h,m;return Aa(d,function(n){switch(n.ma){case 1:if(b.C.B!==e.B)return n.return();n.il=2;return sa(n,Rr(e,b),4);case 4:h=n.se;f=h.url;g=h.status;n.ma=3;n.il=0;break;case 2:return m=ta(n),u("Unable to refresh HLS stream",{error:m}),n.return();case 3:"offline"===e.ib&&g!==e.ib&&(e.qf=!0);e.re="offline"===g;e.mc.h(e.re);if("notconnected"!==e.ib&&"offline"===g)return Vr(e,b),n.return();e.sx(b,f);n.ma=0}})})})()}
function Wr(a){return Or(a,function c(){var d=this,e,f;return Aa(c,function(g){if(1==g.ma){e=d.ht.play();if(void 0===e)return g.return({vn:"old",success:!d.M.paused});g.il=3;return sa(g,e,5)}if(3!=g.ma)return g.return({vn:"new",success:!0});f=ta(g);return g.return({vn:"new",success:!1,error:f})})})}
function Xr(a){Or(a,function c(){var d=this,e,f;return Aa(c,function(g){if(1==g.ma)return sa(g,Wr(d),2);if(3!=g.ma){e=g.se;if(e.success)return d.xk.h(void 0),g.return();"old"===e.vn&&A("NoPromiseAutoplayPolicy");Zp.h(void 0);d.Bf(!0);return sa(g,Wr(d),3)}f=g.se;if(f.success)return d.xk.h(void 0),g.return();"new"===f.vn&&(d.qf||(w("Unable to play twice in a row",{err:f.error},"VIDEO_"),/SamsungBrowser/i.test(navigator.userAgent)&&(u("Attempting to fallback to JPEG player."),d.zt.h(d.context))),d.Jr());g.ma=0})})}k=Qr.prototype;k.play=function(){Xr(this)};k.stop=function(){void 0!==this.Fb.Wg.get(this.ib)&&(Yr(this),Zr(this));this.qf&&Zr(this);$r(this)};function Zr(a){for(var b=q(a.Oq),c=b.next();!c.done;c=b.next())clearTimeout(c.value);clearTimeout(a.Wo);a.Wo=void 0;clearTimeout(a.Zi);a.Zi=void 0}k.rj=function(a){this.M.volume=a/100};k.Mi=function(){return this.M.muted||!this.qf&&this.M.paused?0:100*this.M.volume};k.Ef=function(){this.yf.h(!1)};k.Yh=function(){this.yf.h(!0)};k.tb=function(){as()?this.Yh():this.Ef()};k.Hk=function(){};k.Fi=function(){};k.Wb=function(){return 0};k.Jr=function(){$r(this)};k.kf=function(a){var b=this;this.re=!1;this.Wy=!a.C.us;this.M.poster=a.C.us?"":Fm+"stream?room="+a.C.B+"&f="+Math.random();this.context=a;this.B=a.C.B;a.A.event.ac.j(function(c){b.ib=c.La;if(void 0!==b.Fb.Wg.get(c.La)||b.re)b.stop(),$r(b),b.re?Vr(b,a):bs(b,a);else switch(clearTimeout(b.Zi),b.Zi=void 0,c.rd){case "notconnected":case "privaterequesting":break;default:switch(c.La){case "notconnected":cs(b,a.C.B);window.setTimeout(function(){Tr(b,a)},0);break;default:b.Oq.push(window.setTimeout(function(){cs(b,a.C.B)},0)),b.Oq.push(window.setTimeout(function(){Tr(b,a)},3E3))}}})};function cs(a,b){a.element.style.background="#333333 url("+(a.Wy?Fm+"stream?room="+b+"&f="+Math.random():"")+") center center / cover";b=a.Fb;b.xa.innerText="Connecting";b.text.innerText="Please wait while we connect you to this webcam broadcast.";b.element.style.display="block";b.rf.style.display="none";b.rk.style.display="none";b.Ol=!0;a.element.insertBefore(a.mh,a.element.firstChild);a.qf=!0}
function Yr(a){a.qf=!1;var b=a.Fb;b.Ol&&(b.xa.innerText="",b.text.innerText="",b.element.style.display="none",b.Ol=!1);a.mh.parentElement===a.element&&a.element.removeChild(a.mh);a.element.style.background="#333333 url(https://static-assets.highwebmedia.com/tsdefaultassets/cam_notice_background.jpg) center center / cover"}
function bs(a,b){void 0===a.Zi&&(a.Zi=window.setTimeout(function(){return Or(a,function d(){var e=this,f;return Aa(d,function(g){if(1==g.ma)return sa(g,Rr(e,b),2);f=g.se.status;"offline"===f?(e.re=!0,e.Zi=void 0,Vr(e,b),e.mc.h(e.re)):(e.Zi=void 0,bs(e,b));g.ma=0})})},1E4))}function Vr(a,b){void 0===a.Wo&&(a.Wo=window.setTimeout(function(){a.Wo=void 0;Tr(a,b)},1E4))}
function ds(a,b,c){c=void 0===c?function(){}:c;$r(a);a.lu=window.setTimeout(function(){a.Xp?(Yr(a),u("Attempting to fallback to JPEG player."),a.zt.h(a.context)):!mj||a.ks?ds(a,b,c):(Em("Video seems to be stuck, refreshing"),a.Xp=!0,Tr(a,b),c())},1E4)}function $r(a){void 0!==a.lu&&(clearTimeout(a.lu),a.lu=void 0)};var es=new D("HlsNativePlayer:AirPlayChange");function fs(a){Qr.call(this,a,"HlsNativePlayer");var b=this;this.Ig=0;this.yz=this.jd=!1;this.ht=this.M;this.element.appendChild(this.M);Lr(this.rg,this.M);es.j(function(d){b.yz=d});hb()&&lj.j(function(d){b.yz||(d?Tr(b,b.context):b.M.pause())},!1);fr.j(function(d){b.We=d});this.M.onclick=function(){b.play()};this.M.onpause=function(){};this.M.onplay=function(){A("VideoOnloadMuteStatus",{muted:b.M.muted,chatMode:b.We});b.M.muted||(b.jd=!0)};this.M.oncanplay=function(){b.qf&&Yr(b)};this.M.oncanplaythrough=function(){b.play()};this.M.onseeking=function(){};this.M.onerror=function(d){u(d,{},"VIDEO_")};this.M.onvolumechange=function(){var d=b.M.volume,e=b.M.muted;0===d&&(e=!0);e||b.jd||0!==Pb||(b.jd=!0,A("UserUnmuted",{chatMode:b.We}));b.qj.h({T:e,save:!0});b.Dm.h({volume:100*d,save:!0});void 0===b.ub||e||(b.element.removeChild(b.ub),b.ub=void 0)};this.M.onstalled=function(){mj&&!b.ks&&(b.M.pause(),window.setTimeout(function(){b.play()},10))};v("enterpictureinpicture",this.M,function(){Pr.h({active:!0})});v("leavepictureinpicture",this.M,function(){Pr.h({active:!1,Bz:b.M.paused})});var c=this.M.webkitPresentationMode;v("webkitpresentationmodechanged",this.M,function(){var d=b.M.webkitPresentationMode;-1!==["inline","fullscreen"].indexOf(c)&&"picture-in-picture"===d?Pr.h({active:!0}):"picture-in-picture"===c&&-1!==["inline","fullscreen"].indexOf(d)&&Pr.h({active:!1,Bz:b.M.paused});c=d});10===gb()&&gs(this)}r(fs,Qr);k=fs.prototype;k.sx=function(a,b){var c=this;ds(this,a);null===this.M.onplaying&&(this.M.onplaying=function(){ds(c,a)});null===this.M.ontimeupdate&&(this.M.ontimeupdate=function(){var d=c.M.currentTime;5<d-c.Ig&&(c.Ig=d,ds(c,a,function(){c.Ig=0}),c.Xp=!1)});""!==b?this.M.src=b:this.M.removeAttribute("src");this.M.load();this.M.style.display="inline";"oncanplaythrough"in window||this.play();""===b&&(this.stop(),$r(this))};k.rj=function(a){this.M.volume=a/100};k.Mi=function(){return this.M.muted||!this.qf&&this.M.paused?0:100*this.M.volume};k.Bf=function(a){this.M.muted=a;this.qj.h({T:a,save:!0});a?this.M.setAttribute("muted",""):this.M.removeAttribute("muted")};k.stop=function(){this.Ig=0;this.M.style.display="none";this.M.pause();this.M.removeAttribute("src");this.M.load();Qr.prototype.stop.call(this)};k.Ef=function(){Qr.prototype.Ef.call(this);this.M.setAttribute("controls","");void 0!==this.ub&&(this.ub.style.display="block")};k.Yh=function(){Qr.prototype.Yh.call(this);this.M.removeAttribute("controls");void 0!==this.ub&&(this.ub.style.display="none")};k.Ge=function(){};k.Hk=function(a,b){this.M.volume=a/100;0===a||b?(this.M.muted=!0,this.M.setAttribute("muted","")):(this.M.muted=!1,this.M.removeAttribute("muted"))};k.Wb=function(){return 0};k.Fi=function(){mc(this.M);this.Ef()};k.Qk=function(){this.Fi()};function gs(a){a.ub=document.createElement("span");a.ub.style.position="absolute";a.ub.style.top="6px";a.ub.style.right="6px";a.ub.style.opacity="0.8";a.ub.style.fw="right";a.ub.style.backgroundColor="rgba(255, 255, 255, 0.8)";a.ub.style.borderRadius="6px";a.ub.style.height="36px";a.ub.style.padding="3px";a.ub.style.cursor="pointer";var b=document.createElement("span");b.textContent=Hi;b.style.color="#0c6a93";b.style.fontSize="14px";b.style.padding="6px";b.style.position="relative";b.style.top="2px";b.style.textShadow="0 0 1px #0c6a93";var c=document.createElement("img");c.src="https://static-assets.highwebmedia.com/images/volume-mute.svg";c.style.width="36px";c.style.height="36px";c.style.display="inline";c.style.verticalAlign="middle";a.ub.appendChild(b);a.ub.appendChild(c);a.element.appendChild(a.ub);a.ub.onclick=function(){a.Bf(!1);void 0!==a.ub&&(a.element.removeChild(a.ub),a.ub=void 0)};window.setTimeout(function(){b.style.display="none"},5E3)};function hs(a,b){b=void 0===b?!1:b;F.call(this);var c=this;this.Fb=a;this.Ri=b;this.yf=new D("requestControlVisibility");this.Zh=!0;this.Tm=!1;this.De=new D("possibleQualityLevelsChanged");this.mc=new D("videoOfflineChange");this.xk=new D("playbackStart");this.Eh=0;this.Mo=!1;this.stopped=this.muted=!0;this.url="";this.Jo=0;this.J=new Yb;this.rg=new Ir(this.Ri?"JpegToHlsPlayer":"JpegPushPlayer");Jr(this.rg);this.element.style.background="#333333 url(https://static-assets.highwebmedia.com/tsdefaultassets/cam_notice_background.jpg) center center / cover";this.element.className="videoPlayerDiv";this.element.style.position="static";this.Hc=document.createElement("img");this.Hc.style.width="100%";this.Hc.style.height="100%";this.Hc.style["object-fit"]="contain";this.Hc.style.backgroundColor="black";this.Hc.onload=function(){c.Hc.style.display="inline";c.Mo=!1};this.Hc.onerror=function(){c.Hc.style.display="none";c.Jo-=100;c.Mo=!1};this.element.appendChild(this.Hc);kb()||(this.requestAnimationFrame=Ta(),is(this,0))}r(hs,F);function js(a){a.Jo=Date.now();void 0!==a.Z&&z("get_edge_hls_url_ajax/",{room_slug:a.Z,jpeg:"1"}).then(function(b){var c=new Q(b.responseText),d=V(c,"success");"offline"===Op(T(c,"room_status"))?(a.mc.h(!0),a.stop()):(a.mc.h(!1),c.mf("url"),c.mf("hidden_message"),d?(a.url=T(c,"cbjpeg_url",!1),mm(c)):u("Unable to refresh JPEG stream",{error:b.responseText},"VIDEO_"))}).catch(function(b){u("Unable to refresh JPEG stream",{error:b},"VIDEO_")})}
function is(a,b){a.Ri||(5E3<Date.now()-a.Jo&&js(a),a.stopped||""===a.url||kb()?a.Hc.style.visibility="hidden":(0===a.Eh||140<b-a.Eh)&&!a.Mo&&(a.Mo=!0,a.Eh=b,a.Hc.src=a.url+"&f="+Math.random(),"visible"!==a.Hc.style.visibility&&(a.xk.h(void 0),a.Hc.style.visibility="visible")),a.requestAnimationFrame.call(window,function(c){is(a,c)}))}k=hs.prototype;k.kf=function(a){var b=this;this.stopped=!1;Zb(this.J);B(a.A.event.ac.j(function(c){void 0!==b.Fb.Wg.get(c.La)||b.re?b.stop():b.stopped=!1}),this.J);this.Z=a.C.B;this.url=a.C.us?"":Fm+"stream?room="+this.Z;this.yf.h(!0);this.Ri&&(this.Hc.src=this.url+"&f="+Math.random(),this.Hc.style.visibility="visible")};k.rj=function(a){this.volume=a};k.Mi=function(){return this.muted?0:this.volume};k.Bf=function(a){this.muted=a};k.stop=function(){this.Hc.style.visibility="hidden";this.stopped=!0};k.Ge=function(){};k.tb=function(){this.yf.h(!0)};k.Wb=function(){return 0};k.Fi=function(){mc(this.element)};k.Hk=function(){};k.Nf=function(){this.stop();Zb(this.J)};var ks=window.videojs;function ls(a){Qr.call(this,a,"VideoJsPlayer");var b=this;this.Ig=0;this.T=!0;this.jd=this.Ps=!1;this.kh=document.createElement("div");this.Wc=!1;this.M.className="video-js vjs-default-skin";ks.log.level("error");this.kh.style.position="absolute";this.kh.style.backgroundColor="#000000";this.kh.style.width="inherit";this.kh.style.height="inherit";var c=this;this.element.onclick=function(){b.Ps&&(as()?b.Yh():b.Ef(),b.Ps=!1)};var d=ks(this.M,{techOrder:["html5"],autoplay:!0,html5:{hlsjsConfig:{debug:!1,liveSyncDuration:3,liveSyncDurationCount:void 0,liveDurationInfinity:Infinity,liveMaxLatencyDuration:7,liveMaxLatencyDurationCount:void 0,liveBackBufferLength:30}},controlBar:{playToggle:!1,progressControl:!1,remainingTimeDisplay:!1,durationDisplay:!1,currentTimeDisplay:!1,timeDivider:!1}});this.R=d;if(void 0!==d){Lr(this.rg,d);void 0!==ks.Html5Hlsjs&&ks.Html5Hlsjs.addHook("beforeinitialize",function(f,g){f===d&&b.rg.$z(g)});this.ht=d;ms(this);d.on("volumechange",function(){c.rj(c.Mi(!1))});d.on("canplay",function(){c.play();c.qf&&Yr(c)});d.on("canplaythrough",function(){c.play()});var e=this.De;d.on("updateVideoControlQuality",function(f,g){f=[];g=q(g);for(var h=g.next();!h.done;h=g.next())h=h.value,f.push({label:h.label,bi:h.selected,value:h.id});e.h(f);ns(c,f)});d.on("enterpictureinpicture",function(){Pr.h({active:!0})});d.on("leavepictureinpicture",function(){window.setTimeout(function(){Pr.h({active:!1,Bz:d.paused()})},0)})}d.controls(as());window.videoJsPlayer=d;fr.j(function(f){b.We=f})}r(ls,Qr);function ms(a){var b=0,c=window.setInterval(function(){10<=b&&clearInterval(c);void 0!==a.R&&void 0!==a.R.chromecastSessionManager&&(a.R.chromecastSessionManager.getCastContext().addEventListener("sessionstatechanged",function(d){if(void 0!==d.sessionState)switch(d.sessionState){case "SESSION_STARTED":case "SESSION_RESUMED":os(a);a.Wc||void 0===a.R||(a.R.off("canplay"),a.R.off("canplaythrough"));a.stop();window.setTimeout(function(){a.Wc=!0;Tr(a,a.context);a.rj(a.Mi(!1));ps(a);void 0!==a.R&&(a.R.tech_._ui._findTitleEl().style.visibility="hidden")},1E3);a.Fb.D();qs(a);break;case "SESSION_ENDED":window.setTimeout(function(){if(void 0!==a.R){a.Wc=!1;var e=a.Mi(!1);a.R.muted(a.T);a.R.volume(e);Tr(a,a.context);rs(a);ss(a)}},2500),a.kh.parentElement===a.element&&a.element.removeChild(a.kh),a.Fb.show()}}),clearInterval(c));b+=1},1E3)}k=ls.prototype;k.sx=function(a,b){if(""===b)this.stop();else{var c=this;this.Wc?(qs(this),this.Fb.D(),$r(this)):(this.Fb.show(),ds(this,a));void 0!==this.R?(this.Wc?this.R.tech_.setSource({src:b,type:"application/x-mpegURL"}):this.Wc||(this.R.on("playing",function(){ds(c,a)}),this.R.on("waiting",function(){ds(c,a)}),this.R.on("timeupdate",function(){if(void 0!==c.R){var d=c.R.currentTime();5<d-c.Ig&&(c.Ig=d,ds(c,a,function(){c.Ig=0}),c.Xp=!1)}}),this.R.off("error"),this.R.on("error",function(d){if(void 0!==c.R){var e=c.R.error();null===e||2!==e.code&&4!==e.code||(c.qf||Tr(c,a),u(e.message,d,"VIDEO_"))}else u("Videojs error type undefined",d,"VIDEO_")}),this.R.src({src:b,type:"application/x-mpegURL"}),this.R.qualityPickerPlugin(),this.R.show(),this.R.muted(this.T),this.M.style.display="inline"),this.ht=this.R,rs(this)):J("something went wrong")}};function ps(a){if(a.Wc&&void 0!==a.R&&void 0!==a.R.chromecastSessionManager){var b=a.R.chromecastSessionManager.getCastContext().getCurrentSession();if(void 0!==b){var c=0;b.addMessageListener("urn:x-cast:com.highwebmedia.cast.media",function(d,e){a.Wc&&e.includes("PAUSED")?(clearTimeout(c),c=window.setTimeout(function(){Tr(a,a.context)},2500)):a.Wc&&e.includes("BUFFERING")?(clearTimeout(c),c=window.setTimeout(function(){Tr(a,a.context)},7500)):!a.Wc||e.includes("PLAYING")?clearTimeout(c):a.Wc&&e.includes("MEDIA_ERROR")&&Tr(a,a.context)})}}}k.rj=function(a){if(void 0!==this.R){var b=this.T;this.T=0===a||this.R.muted();!b||this.T||this.jd||(this.jd=!0,A("UserUnmuted",{chatMode:this.We}));this.Dm.h({volume:a,save:!0});this.qj.h({T:this.T,save:!0})}};k.Bf=function(a){this.T=a;this.qj.h({T:a,save:!0});void 0!==this.R&&this.R.muted(a)};k.Hk=function(a,b){this.T=b;void 0!==this.R&&(this.R.volume(a/100),this.R.muted(b))};k.Mi=function(a){return void 0!==this.R?(void 0===a||a)&&this.R.muted()?0:100*this.R.volume():0};k.stop=function(){this.Ig=0;if(!this.Wc&&void 0!==this.R)this.R.off("timeupdate"),this.R.off("waiting"),this.R.off("playing"),this.R.pause(),os(this),this.R.src(),this.R.hide(),this.R.muted(this.T);else if(this.Wc&&void 0!==this.R){this.R.pause();this.R.src();this.R.hide();return}Qr.prototype.stop.call(this)};function qs(a){a.kh!==a.element.firstChild&&a.element.insertBefore(a.kh,a.element.firstChild)}
function rs(a){a.Wc||void 0!==a.$h||void 0===a.R||(a.$h=a.R.tech(),a.$h.on("loadedqualitydataTS",function(b,c){A("VideoOnloadMuteStatus",{muted:a.T,chatMode:a.We});a.T||(a.jd=!0);b=[];c=q(c.qualityData.video);for(var d=c.next();!d.done;d=c.next())d=d.value,b.push({label:d.label,bi:d.selected,value:d.id});a.De.h(b);ns(a,b)}))}function ss(a){a.Wc||void 0===a.R||(a.R.on("canplay",function(){a.play();a.qf&&Yr(a)}),a.R.on("canplaythrough",function(){a.play()}))}
function os(a){a.Wc||void 0===a.$h||(a.$h.off("loadedqualitydataTS"),void 0!==a.$h.hlsProvider&&a.$h.hlsProvider.dispose(),a.$h.reset(),a.$h=void 0)}k.Ge=function(a){void 0!==this.R&&this.R.selectQualityButton(a)};k.Jr=function(){Qr.prototype.Jr.call(this);this.yf.h(!0);this.Ps=!0};k.Ef=function(){Qr.prototype.Ef.call(this);void 0!==this.R&&this.R.controls(!0)};k.Yh=function(){Qr.prototype.Yh.call(this);void 0!==this.R&&this.R.controls(!1)};k.Fi=function(){void 0!==this.R&&(this.R.requestFullscreen(),this.Ef())};k.Wb=function(){return 0};function ns(a,b){b=q(b);for(var c=b.next();!c.done;c=b.next())c=c.value,c.bi&&a.rg.Ge(c.label)};var ts=new Tb(["IconVideoControls","TextVideoControls"],"vidctrls");function as(){if(!0===Ja.current.Gc)return!0;var a=O();return("split"!==a||ts.active)&&"videoonly"!==a&&"noninteractive-fullscreen"!==a}
function us(a,b,c){F.call(this);var d=this;this.Fb=b;this.mc=new D("videoOfflineChange");a=vs(this,a);this.Nn(a,c);this.Ab=document.createElement("img");this.Ab.src=hp();this.Ab.className="cbLogo";this.Ab.style.position="fixed";this.Ab.style.width="90px";this.Ab.style.height="27px";this.Ab.style.top="8px";this.Ab.style.right="8px";this.Ab.style.userSelect="none";this.Ab.style.msUserSelect="none";this.Ab.style.msUserSelect="none";this.Ab.style.pointerEvents="none";this.Ab.setAttribute("draggable","false");this.element.appendChild(this.Ab);Oc.Vt&&(this.Ab.style.visibility="hidden");Yj.Td.j(function(){d.N.tb()})}r(us,F);k=us.prototype;k.Cq=function(){var a=this,b;null===(b=this.N.zt)||void 0===b?void 0:b.j(function(c){a.Fr(c)});this.N.mc.j(function(c){a.mc.h(c);a.Fb.St(c)})};k.gz=function(){};function ws(){return(void 0===navigator.userAgent?0:/android/i.test(navigator.userAgent))||!Sa()?"videojs":"hlsnative"}k.hv=function(){return"jpegToHls"};function vs(a,b){var c=wb().player;if(void 0!==c)return"hls"===c&&(c=ws()),c;if(!Sa()&&!Ka.isSupported()){if(a=Mr)a:{a=navigator.userAgent.match(/Firefox\/([0-9]+)/);if(null!==a&&2===a.length&&(a=parseInt(a[1]),!isNaN(a)&&55<=a)){a=!0;break a}a=!1}if(!(a||0>=swfobject.getFlashPlayerVersion().major))return"flash";Cr({eventName:"jpegFallback",hlsNativeSupported:Sa(),hlsJsSupported:Br.isSupported()});return"jpeg"}return b?ws():a.hv()}
k.Nn=function(a,b){var c;switch(a){case "flash":a=new xs;break;case "videojs":a=new ls(this.Fb);break;case "hlsnative":a=new fs(this.Fb);break;case "jpeg":a=new hs(this.Fb);break;case "jpegToHls":a=new hs(this.Fb,!0);break;default:u("received unexpected player name: "+a);J("unknown player: "+a);return}b=!(null!==(c=null===b||void 0===b?void 0:b.VB)&&void 0!==c&&c);this.N=ac(this,a);b&&this.$k()};k.$k=function(){Nb=this.N instanceof xs?"flash":this.N instanceof ls?"videojs":this.N instanceof fs?"hlsnative":this.N instanceof hs?this.N.Ri?"jpegToHls":"jpeg":"unknown player type";this.Fb.hg=this.N.Zh;this.Cq();this.gz()};function ys(a){a.N.stop();a.N.rg.mm();a.removeChild(a.N)}function zs(a,b,c){c=void 0===c?!0:c;ys(a);var d="hlsnative"===ws()?new fs(a.Fb):new ls(a.Fb);v("loadeddata",d.M,function(){d.Bf(!c)});d.kf(b);Tr(d,b);c?(d.rj(100),d.Bf(!1)):d.Bf(!0);a.N=ac(a,d);a.$k();a.G()}
k.Fr=function(a){ys(this);this.Nn("jpeg");this.N.kf(a)};function xs(){F.call(this);var a=this;this.yf=new D("requestControlVisibility");this.Dm=new D("setControlVolume");this.qj=new D("setControlIsMuted");this.Tm=this.Zh=!0;this.iz="10.2.0";this.fg="xmovie";this.Ax="xmovieContainer";this.Fq=!1;this.Vu=new D("callbacksRegistered");this.De=new D("possibleQualityLevelsChanged");this.mc=new D("videoOfflineChange");this.xk=new D("playbackStart");this.volume=0;this.muted=!0;this.js=this.Bh=!1;this.mA="https://static-assets.highwebmedia.com/tsdefaultassets/CBV_TS_v1.0.swf";this.params={allowScriptAccess:"always",allowFullScreen:"true",quality:"high",wmode:"opaque",id:this.fg,scale:"noborder"};this.attributes={id:"xmovie",name:this.fg,align:"middle"};this.rg=new Ir("FlashPlayer");Jr(this.rg);this.vs=!1;if(t()){var b=window.localStorage.getItem("isTheaterMode");null!==b&&JSON.parse(b).vs&&(this.vs=!0)}this.ws=!0;this.SA=this.H(new Xp(this));this.sc=this.H(new wr(this,this.SA));this.vs?this.sc.D():this.sc.show();this.element.style.backgroundColor="#000";As(this);this.element.className="videoPlayerDiv";window.updateQualityLevels=function(c){a.De.h(c)};window.showQualitySelect=function(){a.De.h(Bs(a))};window.hideQualitySelect=function(){a.De.h([])};window.statusUpdate=function(c){"offline"===Op(c)?a.mc.h(!0):(a.mc.h(!1),a.xk.h(void 0))};window.callbacksRegistered=function(){a.Fq=!0;a.Vu.h(void 0)};window.setFVMFlashMaxQ=function(c){zb("cbv_maxq",c,365)};window.getFVMFlashMaxQ=function(){return yb("cbv_maxq")};fr.j(function(c){a.We=c})}r(xs,F);function As(a){null===document.getElementById(a.Ax)&&(a.Pa=document.createElement("div"),a.Pa.id=a.Ax,a.Pa.style.height="calc(100% - "+a.sc.Wb()+"px)",a.Pa.style.width="100%",a.Pa.style.position="relative",a.Pa.style.top="0px",a.Pa.style.left="0px",a.element.appendChild(a.Pa));a.Wi=document.createElement("div");a.Wi.id=a.fg;a.Wi.style.margin="0";a.Wi.style.padding="0";a.Wi.style.width="100%";a.Wi.style.height="100%";a.Wi.style["object-fit"]="cover";a.Pa.appendChild(a.Wi);a.element.style.position="static"}k=xs.prototype;k.kf=function(a){this.context=a;var b="anonymous";this.context.A.Qe||(b=a.C.Dz);this.params.FlashVars="pid="+a.C.B+"&address="+a.C.MA+"&uid="+a.C.userName+"&pw="+encodeURIComponent(b)+"&rpw="+encodeURIComponent(a.C.Cy)+"&auth="+a.C.LA+"&flash_debug="+("1"===wb().flash_debug?"1":"0");a=document.getElementById(this.fg);if(null===a)u("id "+this.fg+" for div not found for flash player in "+this.constructor.name,{},"VIDEO_");else{b=a.appendChild;var c=document.createElement("div");c.id="messageDiv";c.style.textAlign="center";c.style.marginTop="50px";c.style.zIndex="999";c.style.position="relative";var d=document.createElement("a");d.href="https://www.adobe.com/go/getflashplayer";d.target="_blank";d.style.border="0";c.appendChild(d);var e=document.createElement("img");e.alt="Get Adobe Flash player";e.src="https://static-assets.highwebmedia.com/tsdefaultassets/160x41_Get_Flash_Player.jpg";d.appendChild(e);d=document.createElement("p");d.appendChild(document.createTextNode("We've detected that you are missing the latest version of Flash Player."));d.style.margin="0";c.appendChild(d);d=document.createElement("p");d.appendChild(document.createTextNode("This version of the Chaturbate Viewer requires Flash Player "+this.iz+" or later."));d.style.margin="0";c.appendChild(d);d=document.createElement("a");d.href="https://www.adobe.com/go/getflashplayer";d.innerText="Click here to update your Flash Player for free";c.appendChild(d);b.call(a,c);swfobject.embedSWF(this.mA.toString(),this.fg,"100%","100%",this.iz,void 0,void 0,this.params,this.attributes);this.De.h(Bs(this));Cs(this)}};function Cs(a){var b=a.muted?0:a.volume,c=window[a.fg];void 0!==c&&(void 0===c.SetCamVol?(window.setTimeout(function(){Cs(a)},100),null===document.getElementById("messageDiv")&&"1"!==a.Pa.style.zIndex&&(a.Pa.style.zIndex="1")):(a.sc.fi(a.volume),a.sc.Kf(a.muted),a.Dm.h({volume:a.volume,save:!1}),a.qj.h({T:a.muted,save:!1}),c.SetCamVol(b),I()||0!==a.sc.Wb()||"1"!==a.Pa.style.zIndex||(a.Pa.style.height="100%"),a.Pa.style.zIndex="0",A("VideoOnloadMuteStatus",{muted:a.muted,chatMode:a.We})))}
k.rj=function(a){this.volume!==a&&(this.volume=a,this.muted||Cs(this))};k.Mi=function(){return this.muted?0:this.volume};k.Bf=function(a){this.muted!==a&&(this.muted=a,Cs(this))};k.Hk=function(a,b){if(this.volume!==a||this.muted!==b)this.volume=a,this.muted=b,Cs(this)};k.Ge=function(a){var b=window[this.fg];void 0===b?u("Cannot find movie to set quality level.",{},"VIDEO_"):void 0===b.SetQualityLevel?u("SetQualityLevel is not available on this player.",{},"VIDEO_"):(b.SetQualityLevel(a),this.De.h(Bs(this)))};function Bs(a){var b=window[a.fg];if(!a.Fq)return[];if(void 0===b)return u("Cannot find movie to get quality level.",{},"VIDEO_"),[];if(void 0===b.GetQualityLevels)return u("GetQualityLevel is not available on this player.",{},"VIDEO_"),[];var c=[];b.GetQualityLevels().forEach(function(d){c.push({label:d.label,bi:d.toggled,value:d.value})});return c}k.stop=function(){swfobject.removeSWF(this.fg);this.Fq=!1;As(this)};k.paused=function(){return!1};k.Ef=function(){this.yf.h(!1);this.sc.show();zr(this)};k.Yh=function(){this.yf.h(!0);this.sc.D();zr(this)};k.tb=function(){as()?this.Yh():this.Ef()};k.Eg=function(){this.yf.h(!1);this.sc.D();zr(this)};function zr(a){if(I()&&I()===a.element)if(a.js)a.Pa.style.height="calc(100% - "+a.sc.Wb()+"px)",a.Pa.style.width="100%",a.Pa.style.left="0px",a.Pa.style.top="0px";else{var b=window.innerWidth;var c=window.innerHeight-a.Wb(),d=c/(a.ws?.5625:.75);b<d&&(d=b,c=d*(a.ws?.5625:.75));b=[d,c];a.Pa.style.width=b[0]+"px";a.Pa.style.left=(window.innerWidth-b[0])/2+"px";a.Pa.style.height=b[1]+"px";a.Pa.style.top=(window.innerHeight-(b[1]+a.sc.Wb()))/2+"px"}else a.Pa.style.height="calc(100% - "+a.sc.Wb()+"px)",a.Pa.style.width="100%",a.Pa.style.left="0px",a.Pa.style.top="0px",0===a.sc.Wb()&&"1"===a.Pa.style.zIndex&&(a.Pa.style.height="calc(100% - 32px)")}k.G=function(){zr(this)};k.Fi=function(){var a=this;this.Qk();window.setTimeout(function(){zr(a);a.Y()},500)};k.Wb=function(){return this.sc.Wb()};k.Qk=function(){!0!==!!I()?(mc(this.element),this.Ef(),null===this.Pa.style.width&&(this.Pa.style.left="0px")):(nc(),this.Pa.style.height="calc(100% - "+this.sc.Wb()+"px)",this.Pa.style.width="100%",this.Y())};var Ds=new D("followingEvent");function Es(a,b){if(void 0!==b&&!b||!jl('You must be logged in to follow a broadcaster. Click "OK" to login.'))return z("follow/follow/"+a+"/",{}).then(function(c){var d=new Q(c.responseText);c=Ds.h;a:switch(T(d,"notification_frequency")){case "all":d="all";break a;case "none":d="none";break a;default:d="smart"}c.call(Ds,{Z:a,jw:!0,hw:d});void 0!==window._followedTabUpdate&&window._followedTabUpdate(a);return!0}).catch(function(c){u("Unable to follow "+a+": "+c);return!1})}
function Fs(a,b){if(void 0!==b&&!b||!jl('You must be logged in to follow a broadcaster. Click "OK" to login.'))return z("follow/unfollow/"+a+"/",{}).then(function(){Ds.h({Z:a,jw:!1,hw:"none"});void 0!==window._followedTabUpdate&&window._followedTabUpdate(a);return!0}).catch(function(c){u("Unable to unfollow "+a+": "+c);return!1})}
function Gs(){return new Promise(function(a){Gb("follow/online_following").then(function(b){b=new Q(b.responseText);var c=R(b,"following");mm(b);a(c)}).catch(function(b){401!==b.ud.status&&u("getOnlineFollowedRooms failed ("+b+")");a([])})})};new D("floatingPlayerShow");new D("floatingPlayerHide");new D("floatingPlayerShowLoginOverlay");function Hs(){var a=void 0!==screen.orientation?screen.orientation.type:void 0;if(void 0!==a){if(a.startsWith("portrait"))return!0;if(a.startsWith("landscape"))return!1}}function Is(){if(!Ra)return!0;var a=Hs();if(void 0!==a)return a;switch(window.orientation){case 0:case 180:case-180:return!0;case 90:case-90:case 270:return!1}return window.innerWidth===Math.min(screen.width,screen.height)?!0:window.innerWidth<=window.innerHeight}
function Js(a){if(!Ra)return!0;if(!cb()){var b=Hs();if(void 0!==b)return!b}switch(window.orientation){case 0:case 180:case 270:case-180:return!1;case 90:if(void 0===a||"user"===a)return!cb();break;case-90:if("environment"===a)return!cb()}return!0};function Ks(a){switch(a){case "0":return"smileyInTrouble";case "1":return"smileyUnhappy";case "2":return"smileyIndifferent";case "3":return"smileySmirk";case "4":return"smileyInLove"}};function Ls(a){27!==a.keyCode&&a.stopImmediatePropagation()}function Ms(a){32===a.keyCode&&a.target===document.body&&a.preventDefault()}var Ns=new D("canvasOpen"),Os=new D("canvasClose"),Ps=new D("openFeedbackForm");function Qs(a){var b=document.createElement("div");b.style.display="block";void 0!==a&&a.appendChild(b);return b}function Rs(){F.apply(this,arguments)}r(Rs,F);Rs.prototype.initData=function(){this.element=Qs();this.control=document.createElement("button");this.control.type="button";this.control.tabIndex=0;this.element.appendChild(this.control)};Rs.prototype.ya=function(){this.element.style.position="absolute";this.element.style.top="0";this.element.style.right="0";this.element.style.margin="12px 12px 0 0";G(this.control,"closeControl");this.control.style.padding="4px";this.control.style.cursor="pointer";this.control.style.width="12px";this.control.style.height="12px";this.control.style.border="none";this.control.style.boxSizing="content-box"};function Ss(){F.apply(this,arguments)}r(Ss,F);Ss.prototype.initData=function(){this.element=Qs();G(this.element,"header");this.xa=document.createElement("h2");this.xa.textContent=Gd;this.element.appendChild(this.xa)};Ss.prototype.ya=function(){P(this.xa,{fontSize:"14px",lineHeight:"18px",fontFamily:"UbuntuRegular, Helvetica, Arial, sans-serif",margin:"0 0 8px"})};function Ts(){F.apply(this,arguments)}r(Ts,F);Ts.prototype.initData=function(){this.element=Qs();G(this.element,"submitRow");this.submit=document.createElement("button");this.submit.type="submit";this.submit.textContent=Rh;this.submit.disabled=!0;this.element.appendChild(this.submit)};Ts.prototype.ya=function(){this.element.style.textAlign="right";P(this.submit,{fontFamily:"UbuntuRegular, Helvetica, Arial, sans-serif",marginTop:"16px",border:"1px solid #CD5D26",borderRadius:"4px",boxSizing:"border-box",opacity:"0.5",padding:"7px"})};Ts.prototype.disable=function(){this.submit.disabled=!0;this.submit.style.opacity="0.5";this.submit.style.cursor="default"};Ts.prototype.enable=function(){this.submit.disabled=!1;this.submit.style.opacity="1";this.submit.style.cursor="pointer"};function Us(a){F.call(this);this.Yv=a;this.Tw=new D("inputChange");this.element=Qs();P(this.element,{height:"auto",width:"224px",margin:"12px auto 16px",position:"relative"});a=this.Yv.form;var b=Oc.Ip;b=M(L("Overall, how was your %(siteName)s experience today?"),{siteName:b},!0);this.lw=new Mp(a,"hidden","sentiment",b,!1);this.Yv.form.appendChild(this.element);this.element.appendChild(Vs(this,"0"));this.element.appendChild(Vs(this,"1"));this.element.appendChild(Vs(this,"2"));this.element.appendChild(Vs(this,"3"));this.element.appendChild(Vs(this,"4",!0))}r(Us,F);function Vs(a,b,c){c=void 0===c?!1:c;var d=document.createElement("button");d.type="button";G(d,"sentimentOption");G(d,Ks(b));P(d,{height:"24px",width:"24px",padding:"4px",boxSizing:"content-box",backgroundPosition:"center center",backgroundRepeat:"no-repeat",display:"inline-block",backgroundColor:"transparent",border:"none",cursor:"pointer",marginRight:c?"0":"16px",verticalAlign:"middle"});a.Tw.j(function(e){e===b?G(d,"selected"):H(d,"selected")});d.onclick=function(){a.Jd(b)};return d}
Us.prototype.Jd=function(a){this.lw.input.value=a;this.Tw.h(a)};Us.prototype.ui=function(){this.Jd("")};function Ws(a,b){F.call(this,"div",{control:a});this.canvas=b}r(Ws,F);Ws.prototype.initData=function(a){var b=this;this.element=document.createElement("div");G(this.element,"screenshot");this.nd=document.createElement("button");this.nd.type="button";G(this.nd,"editToggle");this.Un=new Image;this.Un.src="https://static-assets.highwebmedia.com/images/feedback/select.svg";this.nd.appendChild(this.Un);this.wr=document.createElement("div");this.wr.textContent=Vh;this.nd.appendChild(this.wr);v("click",this.nd,function(){b.canvas.show()});v("mouseenter",this.nd,function(){b.Un.src="https://static-assets.highwebmedia.com/images/feedback/select_active.svg"});v("mouseleave",this.nd,function(){b.Un.src="https://static-assets.highwebmedia.com/images/feedback/select.svg"});this.element.appendChild(this.nd);this.Qa=document.createElement("button");this.Qa.type="button";this.Qa.onclick=function(){Xs(a.control)};this.element.appendChild(this.Qa)};Ws.prototype.ya=function(){this.element.style.width="100%";this.element.style.minHeight="140px";this.element.style.maxHeight="340px";this.element.style.position="relative";this.element.style.backgroundSize="contain";this.element.style.backgroundRepeat="no-repeat";this.element.style.backgroundPosition="center";this.element.style.justifyContent="center";this.element.style.alignItems="center";this.element.style.display="none";this.nd.style.width="75%";this.nd.style.height="100px";this.nd.style.boxShadow="0px 4px 16px rgba(0, 0, 0, 0.3)";this.nd.style.borderRadius="4px";this.nd.style.textAlign="center";this.nd.style.cursor="pointer";this.nd.style.fontFamily="UbuntuMedium, Helvetica, Arial, sans-serif";this.wr.style.width="100%";P(this.Qa,{position:"absolute",right:"10px",top:"10px",height:"24px",width:"24px",padding:"4px",background:"transparent url(https://static-assets.highwebmedia.com/tsdefaultassets/feedback/remove-screenshot.svg) no-repeat center center",border:"none",cursor:"pointer"})};function Ys(a,b){F.call(this,"div",{canvas:b});this.Ms=a;this.canvas=b;this.gs=!1}r(Ys,F);Ys.prototype.initData=function(a){var b=this;this.element=Qs();this.button=document.createElement("button");this.button.type="button";this.button.textContent=Sh;v("click",this.button,function(c){c.preventDefault();Zs(b)});this.element.appendChild(this.button);this.fa=new Ws(this,a.canvas);this.H(this.fa,this.element);this.info=document.createElement("div");this.info.style.display="none";this.element.appendChild(this.info);this.error=document.createElement("span");this.element.appendChild(this.error)};Ys.prototype.ya=function(){this.element.style.width="306px";this.element.style.textAlign="center";this.element.style.marginBottom="8px";G(this.element,"screenShotControl");G(this.button,"sscButton");P(this.button,{fontFamily:"UbuntuRegular, Arial, Helvetica, sans-serif",border:"none",boxSizing:"border-box",display:"block",cursor:"pointer",textDecoration:"underline",padding:"0",marginBottom:"16px"});G(this.error,"error");G(this.info,"info");this.info.style.margin="8px 0 10px"};function Zs(a){if($s(a.canvas)&&(Xs(a),at(a.canvas),a.error.textContent="",void 0!==a.canvas.fa)){var b=a.canvas.fa.getContext("2d");if(null!==b){a.gs=!0;a.Ms.D();var c=!1,d=document.createElement("video");d.style.display="none";a.canvas.element.appendChild(d);a.canvas.getDisplayMedia().then(function(e){d.srcObject=e;a.LD=e;d.play();v("canplay",d,function(){c||(c=!0,window.setTimeout(function(){var f=window.innerWidth,g=window.innerHeight,h=d.videoWidth/d.videoHeight;g*h<f?f=g*h:g=f/h;bt(a.canvas,f,g);b.drawImage(d,0,0,f,g);a.fa.element.style.backgroundImage='url("'+b.canvas.toDataURL("image/png")+'")';a.fa.element.style.height=g/f*306+"px";a.fa.element.style.display="flex";a.info.style.display="block";a.button.style.display="none";d.pause();a.LD.getTracks().forEach(function(m){m.stop()});a.canvas.element.removeChild(d);a.Ms.show();window.setTimeout(function(){a.gs=!1},1E3)},250))},!1)}).catch(function(e){a.Ms.show();a.error.textContent="NotAllowedError"===e.name?Zh:$h;a.canvas.element.removeChild(d);Xs(a)})}}}function Xs(a){$s(a.canvas)&&(a.fa.element.style.backgroundImage="",a.fa.element.style.display="none",a.button.textContent=Sh,a.info.style.display="none",a.button.style.display="block",ct(a.canvas),a.canvas.D())}
function dt(a,b){F.call(this);this.canvas=b;this.Xn=[];$s(this.canvas)&&(this.fa=new Ys(a,this.canvas),et(this),this.Xn.push(this.fa.error));this.Xn.push(this.ck);this.Xn.push(this.Bb.error);this.Ld=new Ts;this.element.appendChild(this.form);this.form.appendChild(this.ck);$s(this.canvas)&&this.H(this.fa,this.form);this.form.appendChild(this.fm);this.form.appendChild(this.pl);this.form.appendChild(this.url);this.form.appendChild(this.source);this.H(this.Ld,this.form)}r(dt,F);dt.prototype.initData=function(){function a(){window.setTimeout(function(){""===b.Bb.input.value.trim()?b.Ld.disable():b.Ld.enable()},200)}var b=this;this.element=Qs();this.form=document.createElement("form");this.form.action="/feedback/submit/";this.form.method="POST";this.ck=document.createElement("p");this.Cm=new Us(this);this.Bb=new Mp(this.form,"textarea","comments",Ph);G(this.Bb.input,"feedbackComment");this.Bb.input.maxLength=5E3;v("keyup",this.Bb.input,a);v("touchend",this.Bb.input,a);v("paste",this.Bb.input,a);v("cut",this.Bb.input,a);this.fm=document.createElement("p");this.fm.textContent=Qh.replace("%SITE_NAME%",Oc.Ip);this.pl=document.createElement("input");this.pl.type="hidden";this.pl.name="csrfmiddlewaretoken";this.pl.value=yb("csrftoken");this.url=document.createElement("input");this.url.type="hidden";this.url.name="url";this.url.value=document.location.href.substr(0,255);this.source=document.createElement("input");this.source.type="hidden";this.source.name="source";this.source.value=""};dt.prototype.ya=function(){var a=this;this.ck.style.color="red";P(this.Bb.input,{width:"306px",resize:"none",minHeight:"72px",boxSizing:"border-box",marginBottom:"8px"});G(this.Bb.error,"error");this.Bb.error.style.marginBottom="20px";G(this.fm,"notice");this.fm.style.fontSize="10.5px";this.fm.style.lineHeight="14px";v("submit",this.form,function(b){b.preventDefault();a.Bb.input.blur();ft(a);var c=new FormData;c.append("sentiment",a.Cm.lw.input.value);c.append("comments",a.Bb.input.value);c.append("url",document.location.href.substr(0,255));c.append("source",a.source.value);c.append("csrfmiddlewaretoken",yb("csrftoken"));void 0!==a.canvas.fa?a.canvas.fa.toBlob(function(d){null!==d&&c.append("screenshot",d,"screenshot.png");gt(a,c)}):gt(a,c)})};function ht(a){return $s(a.canvas)&&"none"!==a.fa.button.style.display}function et(a){ht(a)&&(a.fa.info.textContent="footer"===a.source.value?Uh:Th)}function ft(a){a.Xn.forEach(function(b){b.textContent=""})}
function it(a){for(;null!==a.element.firstChild;)a.element.removeChild(a.element.firstChild);a.element.appendChild(a.form);a.Bb.input.focus()}
function gt(a,b){a.Ld.disable();z(a.form.action,b).then(function(c){c=c.getResponseHeader("content-type");null!==c&&c.includes("text/html")?(a.ck.textContent=ei,a.Ld.enable()):(it(a),ft(a),a.Bb.input.value="",a.Cm.ui(),a.Ld.disable(),a.form.reset(),$s(a.canvas)&&Xs(a.fa),a.element.removeChild(a.form),c=document.createElement("p"),c.textContent=bi,a.element.appendChild(c))}).catch(function(c){if(429===c.ud.status)a.ck.textContent=di,a.Ld.enable();else try{var d=JSON.parse(c.ud.response);void 0!==d.uA&&(a.Bb.error.textContent=d.uA);a.Ld.enable()}catch(e){a.ck.textContent=ci,a.Ld.enable()}})}function jt(a){F.call(this,"div",{canvas:a});this.canvas=a;G(this.element,"drawControls")}r(jt,F);jt.prototype.initData=function(a){var b=this;this.element=Qs();this.element.tabIndex=-1;this.Tn=document.createElement("div");this.Tn.style.background="url(https://static-assets.highwebmedia.com/images/feedback/drag.svg) no-repeat center";this.element.appendChild(this.Tn);this.lf=document.createElement("button");this.lf.type="button";G(this.lf,"highlight");this.Sr=new Image;this.Sr.src="https://static-assets.highwebmedia.com/images/feedback/highlight_issue.svg";this.lf.appendChild(this.Sr);this.Ur=document.createElement("span");this.Ur.textContent=Xh;this.lf.appendChild(this.Ur);v("click",this.lf,function(){kt(b.canvas)});this.element.appendChild(this.lf);this.D=document.createElement("button");this.D.type="button";this.Qr=document.createElement("div");this.D.appendChild(this.Qr);this.Rr=document.createElement("span");this.Rr.textContent=Yh;this.D.appendChild(this.Rr);G(this.D,"highlight");v("click",this.D,function(){var c=b.canvas;lt(c);mt(c);if(void 0!==c.Ra){var d=c.Ra.getContext("2d");null!==d&&(G(c.controls.D,"active"),d.globalAlpha=1,d.strokeStyle="rgb(0, 0, 0)",d.lineWidth=5,c.fillRect=!0,nt(c))}});this.element.appendChild(this.D);this.qB=document.createElement("hr");this.element.appendChild(this.qB);this.done=document.createElement("a");G(this.done,"done");this.done.style.textDecoration="none";v("click",this.done,function(c){c.preventDefault();ot(b);b.canvas.D()});this.element.appendChild(this.done);Hp(this.element,{},[this.Tn]);v("keydown",a.canvas.element,function(c){c.stopPropagation();27===c.keyCode&&"block"===b.element.style.display&&(c.stopImmediatePropagation(),ot(b),b.canvas.D())})};function ot(a){void 0!==a.canvas.fa&&void 0!==a.fa&&(a.fa.element.style.backgroundImage='url("'+a.canvas.fa.toDataURL("image/png")+'")')}
jt.prototype.ya=function(){P(this.element,{borderRadius:"4px",padding:"10px 15px 5px 15px",position:"fixed",zIndex:2010,textAlign:"right",width:"115px",height:"101px",fontFamily:"UbuntuMedium, Helvetica, Arial, sans-serif",userSelect:"none",boxShadow:"10px 10px 25px -5px rgba(0,0,0,0.75)"});P(this.Tn,{width:"20px",height:"10px",position:"absolute",right:"0",top:"5px"});G(this.lf,"highlight");P(this.lf,{border:"0",display:"inline-block",padding:"5px",position:"relative",margin:"7px 0 0 0",left:"-15px",width:"145px",textAlign:"left",cursor:"pointer",fontFamily:"UbuntuMedium, Helvetica, Arial, sans-serif"});P(this.Sr,{width:"23px",verticalAlign:"middle",marginRight:"10px"});this.Ur.style.verticalAlign="middle";G(this.D,"highlight");P(this.D,{border:"0",display:"inline-block",padding:"5px",position:"relative",margin:"0",left:"-15px",width:"145px",textAlign:"left",cursor:"pointer",fontFamily:"UbuntuMedium, Helvetica, Arial, sans-serif"});G(this.Qr,"hideImage");P(this.Qr,{width:"20px",verticalAlign:"middle",marginRight:"10px",height:"20px",display:"inline-block"});this.Rr.style.verticalAlign="middle";P(this.done,{padding:"4px",cursor:"pointer",textAlign:"right"});this.done.textContent=fi};function pt(){F.call(this);this.fillRect=!1;this.pk=navigator.mediaDevices;if(void 0===this.pk||void 0===this.pk.getDisplayMedia)this.pk=void 0;void 0===document.createElement("canvas").toBlob&&(this.pk=void 0);this.controls=new jt(this);this.H(this.controls,this.element)}r(pt,F);k=pt.prototype;k.initData=function(){var a=this;this.element=Qs();this.hk=Qs(this.element);this.hk.innerHTML=Wh+' (<a href="#" onclick="this.parentNode.style.display=\'none\';">'+rf+"</a>)";v("click",this.hk,function(){var b;null===(b=a.Ra)||void 0===b?void 0:b.focus()});this.hk.style.userSelect="none"};k.ya=function(){G(this.element,"canvas");P(this.element,{display:"none",position:"absolute",height:"100%",width:"100%"});G(this.hk,"infoToolTip");P(this.hk,{position:"fixed",backgroundColor:"#FFFFD3",borderWidth:"1px",borderStyle:"solid",boxSizing:"border-box",zIndex:2020,top:"100px",left:"0",right:"0",margin:"0 auto",padding:"12px",fontWeight:"bold",width:"500px",textAlign:"center",fontFamily:"UbuntuMedium, Helvetica, Arial, sans-serif",fontSize:"1.3em"})};function $s(a){return void 0!==a.pk&&!hb()}k.getDisplayMedia=function(){if(!$s(this))throw new ReferenceError("Display media not supported by browser");return this.pk.getDisplayMedia({video:{$E:"browser",cursor:!1},audio:!1})};function at(a){ct(a);a.fa=document.createElement("canvas");P(a.fa,{zIndex:2E3,top:"50%",left:"50%",transform:"translate(-50%, -50%)",margin:"0px auto",position:"fixed"});a.D();a.element.appendChild(a.fa)}
function ct(a){qt(a);void 0!==a.fa&&(a.element.removeChild(a.fa),a.fa=void 0)}function bt(a,b,c){void 0!==a.fa&&(a.fa.width=b,a.fa.height=c,a.fa.style.width=b+"px",a.fa.style.height=c+"px")}function mt(a){void 0!==a.fa&&(void 0!==a.Ra&&(a.element.removeChild(a.Ra),a.Ra=void 0),a.Ra=a.fa.cloneNode(),a.Ra.style.zIndex="2001",a.Ra.tabIndex=0,a.element.appendChild(a.Ra),rt(a))}function qt(a){void 0!==a.Ra&&(a.element.removeChild(a.Ra),a.Ra=void 0)}
k.D=function(){this.element.style.display="none";qt(this);lt(this);window.top!==window&&(window.top.document.body.style.display="");document.body.style.overflow="";Os.h(void 0)};k.show=function(){this.element.style.display="block";this.controls.element.style.left="75px";this.controls.element.style.bottom="30px";this.hk.style.display="block";window.top!==window&&(window.top.document.body.style.display="none");document.body.style.overflow="hidden";mt(this);kt(this);void 0!==this.Ra&&this.Ra.focus();Ns.h(void 0)};function rt(a){if(void 0!==a.Ra){var b=a.Ra.getContext("2d");if(null!==b){var c=a.fa,d=a.Ra;if(void 0!==c&&void 0!==d){var e=d.getContext("2d");if(null!==e){var f=e.globalAlpha;e.globalAlpha=1;e.clearRect(0,0,d.width,d.height);e.drawImage(c,0,0);e.globalAlpha=f}}c=b.globalAlpha;d=b.strokeStyle;b.globalAlpha=.1;b.strokeStyle="rgb(0, 0, 0)";b.fillRect(0,0,a.Ra.width,a.Ra.height);b.globalAlpha=c;b.strokeStyle=d}}}
function lt(a){a.controls.D.style.backgroundColor="transparent";a.controls.D.classList.toggle("active",!1);a.controls.lf.style.backgroundColor="transparent";a.controls.lf.classList.toggle("active",!1);void 0!==a.Ra&&(void 0!==a.ih&&(x("mousedown",a.Ra,a.ih.ur),x("mouseup",window,a.ih.pu),x("mousemove",window,a.ih.move),a.ih=void 0),a.Ra.style.cursor="default")}
function kt(a){lt(a);mt(a);if(void 0!==a.Ra){var b=a.Ra.getContext("2d");null!==b&&(G(a.controls.lf,"active"),b.globalAlpha=.8,b.strokeStyle="rgb(249, 185, 144)",b.lineWidth=5,a.fillRect=!1,nt(a))}}
function nt(a){if(void 0!==a.Ra){a.Ra.style.cursor="crosshair";var b=a.Ra.getContext("2d");if(null!==b){var c=0,d=0,e=0,f=0,g=0,h=0,m=!1,n=function(){h=g=d=c=0;m=!1};a.ih={ur:function(p){m&&(st(a,c,d,g,h,b),n());var y=a.Ra.getBoundingClientRect();c=p.clientX-y.left;d=p.clientY-y.top;m=!0;b.canvas.style.cursor="crosshair"},pu:function(){m&&(st(a,c,d,g,h,b),n())},move:function(p){if(m){var y=a.Ra.getBoundingClientRect();e=p.clientX-y.left;f=p.clientY-y.top;rt(a);g=e-c;h=f-d;p=c;y=d;var C=g,E=h;b.beginPath();b.rect(p,y,C,E);a.fillRect?b.fill():b.stroke()}}};v("mousedown",a.Ra,a.ih.ur);v("mouseup",window,a.ih.pu);v("mousemove",window,a.ih.move)}}}function st(a,b,c,d,e,f){if(void 0!==a.fa){a.fa.style.cursor="crosshair";var g=a.fa.getContext("2d");null!==g&&(g.globalAlpha=f.globalAlpha,g.strokeStyle=f.strokeStyle,g.lineWidth=f.lineWidth,g.beginPath(),g.rect(b,c,d,e),a.fillRect?g.fill():g.stroke())}}
function tt(){Fj.call(this,{vk:function(){a.vk()},tk:function(){a.tk()},ul:!0});var a=this;this.isVisible=!1;this.mp=this.bt=!0;this.element.classList.add("block_CB1_chat_focus");G(this.V,"overlayOpacity");G(this.element,"userFeedbackForm");G(this.element,"defaultColor");Ns.j(function(){a.element.style.display="none"});Os.j(function(){a.element.style.display="block"})}r(tt,Fj);tt.prototype.initData=function(){function a(){return c.form.Ld.submit.disabled?c.close.control:c.form.Ld.submit}function b(d,e){return function(f){"Tab"===f.key&&(f.preventDefault(),f.shiftKey?(e instanceof HTMLElement?e:e()).focus():(d instanceof HTMLElement?d:d()).focus())}}var c=this;this.canvas=new pt;$s(this.canvas)&&document.body.appendChild(this.canvas.element);this.cs=Qs(this.element);this.close=new Rs;v("click",this.close.control,function(){c.D()});this.H(this.close,this.cs);this.xa=new Ss;this.H(this.xa,this.cs);this.form=new dt(this,this.canvas);$s(this.canvas)&&(this.canvas.controls.fa=this.form.fa.fa);this.H(this.form,this.cs);this.element.querySelectorAll(".sentimentOption").forEach(function(d){v("keydown",d,b(c.form.Bb.input,c.close.control))});v("keydown",this.form.Bb.input,b(function(){return ht(c.form)?c.form.fa.button:a()},this.close.control));ht(this.form)&&v("keydown",this.form.fa.button,b(a,this.form.Bb.input));v("keydown",this.form.Ld.submit,b(this.close.control,this.form.Bb.input));v("keydown",this.close.control,b(this.form.Bb.input,function(){return c.form.Ld.submit.disabled?c.form.Bb.input:c.form.Ld.submit}))};tt.prototype.ya=function(){var a=this;P(this.element,{position:"fixed",top:"150px",fontSize:"12px",left:"50%",marginLeft:"-157px",width:"310px",height:"auto",border:"4px",borderRadius:"4px",padding:"15px",fontFamily:"UbuntuRegular, Helvetica, Arial, sans-serif"});$s(this.canvas)&&v("resize",window,function(){a.form.fa.gs||void 0===a.canvas.fa||(Xs(a.form.fa),a.form.fa.error.textContent=ai)})};tt.prototype.vk=function(){this.form.pl.value=yb("csrftoken");this.form.url.value=document.location.href.substr(0,255);this.element.style.display="";this.G();this.isVisible=!0;v("keydown",this.element,Ls);v("keydown",document.body,Ms);it(this.form)};tt.prototype.tk=function(){var a=this.isVisible;this.element.style.display="none";this.isVisible=!1;a&&(x("keydown",this.element,Ls),x("keydown",document.body,Ms));try{window.dispatchEvent(new Event("resize"))}catch(b){-1!==navigator.userAgent.indexOf("MSIE")||0<navigator.appVersion.indexOf("Trident/")?(a=document.createEvent("UIEvents"),a.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(a)):u("Could not fire resize event")}this.canvas.D()};function ut(){Hl.call(this);this.Oi=!1;this.Ho=0;this.element.id="UserUpdatesPanel";G(this.element,"userUpdatesPanel");this.Rb.element.style.borderBottom="none";this.Rb.element.style.padding="4px 0 0 6px";this.Rb.element.style.marginBottom="4px";this.Rb.element.style.boxSizing="border-box";this.window.style.position="static";this.ke=Object.assign(Object.assign({},this.ke),{fontSize:"12px",padding:"5px 10px"});Il(this,this.aq);Ml(this,this.aq);this.Fu()}r(ut,Hl);k=ut.prototype;k.Fu=function(){var a=vt(!1);this.element.appendChild(a)};k.G=function(){};k.rw=function(a){return this.KA=new wt(this,a)};k.ya=function(){this.element.style.overflow="";this.element.style.position="static";this.element.style.borderWidth="1px";this.element.style.borderStyle="solid";this.element.style.borderTop="none";this.element.style.borderRadius="0 0 4px 4px"};k.initData=function(){this.aq=new bp};function xt(){ut.call(this);for(var a=1;a<this.element.children.length-1;a+=1)this.element.children[a].style.height="calc(100% - 60px)"}r(xt,ut);xt.prototype.Fu=function(){var a=vt(!0);this.element.appendChild(a)};xt.prototype.rw=function(a){return new yt(this,a)};xt.prototype.ya=function(){ut.prototype.ya.call(this);this.element.style.borderRight="0"};xt.prototype.initData=function(){this.aq=new gp};function vt(a){var b=document.createElement("A");G(b,"feedbackLink");b.innerText=Mg;b.style.fontSize="11px";b.style.textAlign="center";b.style.width="100%";b.style.display="block";b.style.padding="5px 0";b.style.marginBottom="7px";a?(b.href=ip.wu,b.target="_blank"):(b.href="#",b.onclick=function(){Ps.h({source:"site_updates"})});return b}
function zt(a,b){var c;Bm.j(function(e){a.Ho<e.timestamp&&(b.classList.add("has_unseen"),bm.h(!0))});yo.j(function(e){a.Ho<e.timestamp&&(a.Ho=e.timestamp,am.h(void 0))});if(!0!==Ja.current.fs){var d=null===(c=Ja.current.xb)||void 0===c?void 0:c.username;ao.j(function(e){0===e.XB&&e.Zm===d&&(b.classList.add("has_unseen"),e=a.aq,e.removeChild(e.Ye),e.Ye=new Xl,e.H(e.Ye),e.ls=!1,e.Oi&&cp(e))})}}
function wt(a,b){kl.call(this,b);var c=this;this.aj=a;this.element.appendChild(this.aj.element);this.ah.j(function(d){c.aj.Oi!==d.Xc&&(c.aj.Oi=d.Xc,$l.h(d.Xc),b.classList.toggle("active",d.Xc))});am.j(function(){b.className=b.className.replace("has_unseen","");bm.h(!1)});zt(a,b)}r(wt,kl);wt.prototype.ya=function(){kl.prototype.ya.call(this);this.element.style.maxHeight="368px";this.element.style.height="";this.element.style.width="100%";this.element.style.zIndex="1001";this.element.style.backgroundColor="transparent";this.element.style.fontFamily="UbuntuBold, Helvetica, Arial, sans-serif";this.element.style.left="-1px";this.element.style.top="24px"};function yt(a,b){kl.call(this,b);var c=this;this.aj=a;this.element.appendChild(this.aj.element);this.ah.j(function(d){c.aj.Oi!==d.Xc&&(c.aj.Oi=d.Xc,$l.h(d.Xc),b.classList.toggle("active",d.Xc))});am.j(function(){b.className=b.className.replace("has_unseen","");bm.h(!1)});zt(a,b)}r(yt,ol);yt.prototype.ya=function(){ol.prototype.ya.call(this);this.element.style.maxHeight="";this.element.style.width="100%";this.element.style.zIndex="1001";this.element.style.backgroundColor="#FFFFFF";this.element.style.fontFamily="UbuntuBold, Helvetica, Arial, sans-serif";this.element.style.left="-1px";this.element.style.top="0";this.element.style.height="calc(100% - 46px)";this.element.style.top="46px"};function At(a,b,c){kl.call(this,a);var d=this;this.username=b;this.Oj=c;this.element.id="UserMenuDropDown";G(this.element,"userMenuDropDown");G(this.element,"userInfoDropdownBgColor");this.element.style.display="none";this.element.style.width="100%";this.element.style.height="auto";this.element.style.left="-1px";this.element.style.top="24px";this.element.style.zIndex="1001";this.element.style.borderRadius="0 0 5px 5px";this.element.style.borderStyle="solid";this.element.style.borderWidth="1px";this.element.style.borderTop="none";this.element.style.fontFamily="UbuntuBold, Helvetica, Arial, sans-serif";this.element.style.padding="5px 0";this.element.style.position="absolute";Oc.Sl||Bt(this);if(""!==b){this.nt=Ct(this,Ed);this.element.appendChild(this.nt);this.Bx=Ct(this,md);this.Bx.href="/my_collection/";this.element.appendChild(this.Bx);var e=document.createElement("form");e.method="post";e.action="/auth/logout/";e.target="_top";e.style.display="none";var f=document.createElement("input");f.type="hidden";f.name="csrfmiddlewaretoken";f.value=yb("csrftoken");e.appendChild(f);this.element.appendChild(e);a=Ct(this,Gd);a.style.cursor="pointer";a.onclick=function(g){g.preventDefault();d.Oa();Ps.h({source:"user_menu"})};this.element.appendChild(a);a=Ct(this,Fd);a.href="/auth/logout/";a.onclick=function(g){g.preventDefault();d.Oa();uc("Are you sure you want to log out?",function(){f.value=yb("csrftoken");e.submit()})};this.element.appendChild(a);void 0!==b&&void 0!==this.nt&&(this.nt.href="/p/"+b+"/?tab=bio")}else b=Ct(this,nd),b.classList.add("login-link"),b.href="/auth/login",this.element.appendChild(b),b=Ct(this,od),b.href="/accounts/register/?src=header",this.element.appendChild(b),b=Ct(this,Gd),b.style.cursor="pointer",b.href="#",b.onclick=function(g){g.preventDefault();d.Oa();Ps.h({source:"user_menu"})},this.element.appendChild(b)}r(At,kl);function Bt(a){if(void 0!==a.Oj){a.Ni=document.body.classList.contains("darkmode");var b=Dt(a);a.element.insertBefore(b,a.element.firstChild);!document.body.classList.contains("isIpad")&&eb()&&document.body.classList.add("isIpad")}}
function Dt(a){var b=document.createElement("div"),c=document.createElement("span");a.Ai=document.createElement("span");b.innerText=Gi;c.appendChild(a.Ai);b.appendChild(c);G(a.Ai,"dmSwitchCircle");P(a.Ai,{borderRadius:"50%",display:"inline-block",height:"16px",width:"16px",position:"relative",top:"2px",left:"3px"});P(c,{borderRadius:"25px",display:"inline-block",height:"20px",marginLeft:"10px",position:"relative",verticalAlign:"bottom",width:"44px"});G(c,"dmSwitch");qq(b,"none");pq(a.Ai,"left 100ms");G(b,"userInfoDropdownTextColor");G(b,"userInfoDropdownHighlightColor");b.style.fontFamily="UbuntuMedium, Arial, Helvetica, sans-serif";b.style.fontSize="14px";b.style.fontWeight="normal";b.style.padding="5px 0 5px 10px";b.onclick=function(){Et(a);void 0!==document.changeColorMode&&document.changeColorMode()};yj.j(function(){Et(a)});a.Ni&&(a.Ai.style.left="25px");return b}
function Et(a){Oc.Sl||(a.Ni?(a.Ai.style.left="3px",a.Ni=!1,H(document.body,"darkmode"),G(document.body,"lightmode"),zb("theme_name","lightmode",60)):(a.Ai.style.left="25px",a.Ni=!0,H(document.body,"lightmode"),G(document.body,"darkmode"),zb("theme_name","darkmode",60)),Oc.Sl&&(a.element.style.backgroundColor=Oc.xz,a.element.style.border="1px solid "+Oc.Np),A("colorModeChanged",{username:void 0===a.username?"__anon__":a.username,color_mode:a.Ni?"darkmode":"lightmode"}),xj.h(a.Ni?"darkmode":"lightmode"),hl()||z("api/ts/accounts/userpreferredtheme/",{theme:a.Ni?"darkmode":"lightmode"}))}function Ct(a,b){var c=document.createElement("a");c.style.textDecoration="none";c.innerText=b;c.style.display="block";c.style.fontSize="14px";c.style.padding="5px 0 5px 10px";G(c,"userInfoDropdownTextColor");G(c,"userInfoDropdownHighlightColor");c.onclick=function(){a.Oa()};return c}At.prototype.Za=function(){return kl.prototype.Za.call(this)};At.prototype.Oa=function(){return kl.prototype.Oa.call(this)};function Ft(a,b,c){var d=document.querySelector("#userInfoPanelMenuDropdownRoot"),e=document.querySelector("#user_information_profile_container"),f=document.querySelector("#userUpdatesBellRoot"),g=document.querySelector("#userUpdatesMenuDropdownRoot"),h=document.querySelector("#mmnav");b=void 0===b?!1:b;null!==d&&null!==e&&(a=new At(e,a,c),d.appendChild(a.element),a.Y());if(!Oc.Sl&&null!==f&&null!==g){0<=f.className.indexOf("has_unseen")&&bm.h(!0);if(b){var m=new xt;void 0!==h&&null!==h&&(yo.j(function(n){m.Ho<n.timestamp&&0>h.className.indexOf("has_unseen")&&(h.className=[h.className,"has_unseen"].join(" "))}),am.j(function(){h.className=h.className.replace("has_unseen","")}))}else m=new ut;b=m.rw(f);g.appendChild(b.element)}};var Gt=new D("showJoinOverlay");function Ht(){Fj.call(this);var a=this;this.element.style.display="none";this.element.style.position="absolute";this.element.style.width="560px";this.element.style.height="auto";this.element.style.backgroundColor="#ffffff";this.element.style.border="2px solid #cccccc";this.element.style.borderRadius="20px";this.element.style.padding="10px";this.element.style.top="190px";this.element.style.fontSize="12px";this.element.style.fontFamily="UbuntuRegular', Arial, Helvetica, sans-serif";this.V.style.backgroundColor="#000000";this.element.appendChild(this.Yq());this.Yf=document.createElement("iframe");this.Yf.frameBorder="0";this.Yf.marginWidth="0";this.Yf.scrolling="no";this.Yf.marginHeight="0";this.Yf.style.width="560px";this.Yf.style.height="650px";this.Yf.src="/accounts/register_iframe/";this.element.appendChild(this.Yf);var b=document.createElement("hr");b.style.margin="15px 0 10px 0";b.style.border="0";b.style.color="#e4e4e4";b.style.backgroundColor="#e4e4e4";b.style.height="1px";this.element.appendChild(b);b=document.createElement("span");var c=document.createElement("img");c.src="https://static-assets.highwebmedia.com/tsdefaultassets/arrow_back.gif";c.style.marginRight="4px";c.style.verticalAlign="bottom";b.appendChild(c);this.Ee=document.createElement("a");this.Ee.innerText=sf;this.Ee.style.color="#0a5a83";this.Ee.style.position="relative";this.Ee.style.top="-1px";this.Ee.onmouseenter=function(){a.Ee.style.textDecoration="underline"};this.Ee.onmouseleave=function(){a.Ee.style.textDecoration="none"};b.appendChild(this.Ee);this.element.appendChild(b);b=document.createElement("span");b.style.cssFloat="right";c=document.createElement("img");c.src="https://static-assets.highwebmedia.com/tsdefaultassets/key.gif";c.style.marginRight="4px";c.style.verticalAlign="bottom";b.appendChild(c);c=document.createElement("span");c.innerText=tf;c.style.color="#7f7f7f";c.style.position="relative";c.style.top="-1px";c.style.marginRight="2px";b.appendChild(c);var d=document.createElement("a");d.href="/auth/login/";d.innerText=uf;d.style.color="#0a5a83";d.style.position="relative";d.style.top="-1px";d.onmouseenter=function(){d.style.textDecoration="underline"};d.onmouseleave=function(){d.style.textDecoration="none"};b.appendChild(d);this.element.appendChild(b);this.hc.j(function(){a.D()})}r(Ht,Fj);Ht.prototype.nf=function(a){var b=this;this.Ee.href=a.anchor.href;this.Ee.onclick=a.xo;v("click",this.Ee,function(){b.D()});Fj.prototype.show.call(this);this.element.style.display="block";this.G();this.Yf.onload=function(){var c=b.Yf.contentDocument;if(null!==c){var d=c.getElementById("husername");null!==d&&d.focus();c=c.querySelector("a.next");c.href=a.anchor.href;c.onclick=a.xo;v("click",c,function(){b.D()})}};A("RegisterIframe_Shown")};Ht.prototype.Yq=function(){var a=document.createElement("div");a.style.animationName="spin";a.style.position="absolute";a.style.top="50%";a.style.left="50%";a.style.width="30px";a.style.height="31px";a.style.margin="-15px 0 0 -15px";a.style.background='url("https://static-assets.highwebmedia.com/tsdefaultassets/images/loading_spinner.svg")';a.style.backgroundSize="cover";a.style.animationName="spin";a.style.webkitAnimationName="spin";a.style.animationDuration="2s";a.style.webkitAnimationDuration="2s";a.style.animationTimingFunction="linear";a.style.webkitAnimationTimingFunction="linear";a.style.animationIterationCount="infinite";a.style.webkitAnimationIterationCount="infinite";a.style.zIndex="-1";return a};Ht.prototype.G=function(){this.element.style.left=(document.documentElement.clientWidth-this.element.offsetWidth)/2+"px"};var It=new D("commandeerJoinOverlayAnchors",{Bd:700,fe:1}),Jt=new D("restoreJoinOverlayAnchors",{Bd:700,fe:1}),Kt=!1;function Lt(a){var b=this;this.anchor=a=void 0===a?document.createElement("a"):a;if(void 0!==wb().join_overlay){var c=function(){Kt=!0;Mt(b)};Kt?window.setTimeout(function(){Mt(b)},0):It.j(c);var d=function(){Kt=!1;b.restore();It.removeListener(c);window.setTimeout(function(){Jt.removeListener(d)},0)};Jt.j(d)}}function Mt(a){a.xo=a.anchor.onclick;a.uB=a.anchor.href;a.anchor.href="/accounts/register/";a.anchor.onclick=function(b){b.preventDefault();Gt.h(a);Jt.h(void 0)}}
Lt.prototype.restore=function(){this.anchor.onclick=this.xo;this.anchor.href=this.uB;this.xo=null};function Nt(a){a=q(a.querySelectorAll("a:not(.nooverlay):not([href='#'])"));for(var b=a.next();!b.done;b=a.next())new Lt(b.value)}
function Ot(){var a=document.getElementById("header");null!==a&&Nt(a);a=document.getElementById("footer-holder");null!==a&&Nt(a);a=document.getElementById("room_list");null!==a&&Nt(a);a=document.getElementById("hashtag_ticker");null!==a&&Nt(a);a=document.getElementsByClassName("sub-nav");0!==a.length&&Nt(a[0])};function Pt(a){this.dA=new Set(a.Tu);this.yv=new Set(a.xv)}var Qt=new Pt({Tu:["connecting","closing"],xv:["failed","unknown"],hD:["suspended","disconnected"]}),Rt=new Pt({Tu:["subscribing","unsubscribing"],xv:["failed","unknown"],hD:["suspended"]});var St=0;function Tt(a,b,c){this.token=a;this.expires=b;this.clientId=c;this.id=St+=1}function Ut(a){var b=a.join(",");return new Promise(function(c,d){z("push_service/auth/",{topics:b,client:"ably"}).then(function(e){try{var f=new Q(e.responseText);c(f)}catch(g){d(g)}}).catch(function(e){u("(Push Service[ably) error on auth",e);d(e)})})};function Z(a,b){this.prefix=a;this.Z=b;if(0===a.length)throw Error("prefix cannot be empty");if(0===b.length)throw Error("roomname cannot be empty");}r(Z,pm);Z.prototype.Bc=function(){return this.prefix+":"+this.Z};Z.prototype.uh=function(){return this.prefix};Z.prototype.Hl=function(){};function Vt(a,b,c){this.prefix=a;this.Z=b;this.username=c;if(0===a.length)throw Error("prefix cannot be empty");if(0===b.length)throw Error("roomname cannot be empty");if(0===c.length)throw Error("username cannot be empty");}r(Vt,pm);Vt.prototype.Bc=function(){return this.prefix+":"+this.Z+":"+this.username};Vt.prototype.uh=function(){return this.prefix};Vt.prototype.Hl=function(){};function Wt(a){Z.call(this,Xt,a)}r(Wt,Z);Wt.prototype.Ha=function(a){return{count:W(a,"count"),aa:W(a,"tid")}};Wt.prototype.listener=function(a){Yt.h(a)};var Xt="room:count",Yt=new D(Xt);function Zt(a){Z.call(this,$t,a)}r(Zt,Z);Zt.prototype.Ha=function(a){return{title:T(a,"title"),aa:-2}};Zt.prototype.listener=function(a){au.h(a)};var $t="room:title_change",au=new D($t);function bu(a){Z.call(this,cu,a)}r(bu,Z);bu.prototype.Ha=function(a){return{O:Un(a),message:T(a,"message"),amount:W(a,"amount"),zo:V(a,"is_anonymous_tip"),Db:V(a,"is_broadcaster"),history:V(a,"history"),Zm:T(a,"to_username"),aa:W(a,"tid")}};bu.prototype.listener=function(a){du.h(a)};var cu="room:tip_alert",du=new D(cu);function eu(a){Z.call(this,fu,a)}r(eu,Z);eu.prototype.Ha=function(a){return{status:T(a,"status"),aa:-4}};eu.prototype.listener=function(a){gu.h(a)};var fu="room:status",gu=new D(fu);function hu(a){Z.call(this,iu,a)}r(hu,Z);hu.prototype.Ha=function(a){return{O:Un(fm(a,"from_user")),message:T(a,"message"),font:S(a,"font_family",!1),Ie:S(a,"font_color",!1),Zc:S(a,"id",!1),backgroundColor:S(a,"background",!1),aa:W(a,"tid",!1)}};hu.prototype.listener=function(a){ju.h(a)};var iu="room:message",ju=new D(iu);function ku(a){Z.call(this,lu,a)}r(ku,Z);ku.prototype.Ha=function(a){return{username:T(a,"username"),O:T(a,"from_username"),aa:-5}};ku.prototype.listener=function(a){mu.h(a)};var lu="room:silence",mu=new D(lu);function nu(a){Z.call(this,ou,a)}r(nu,Z);nu.prototype.Ha=function(a){return{username:T(a,"username"),O:"Unknown",aa:-6}};nu.prototype.listener=function(a){pu.h(a)};var ou="room:kick",pu=new D(ou);function qu(a){Z.call(this,ru,a)}r(qu,Z);qu.prototype.Ha=function(a){return{username:T(a,"username"),O:T(a,"from_username"),aa:-7}};qu.prototype.listener=function(a){su.h(a)};var ru="room:mod_promoted",su=new D(ru);function tu(a){Z.call(this,uu,a)}r(tu,Z);tu.prototype.Ha=function(a){return{username:T(a,"username"),O:T(a,"from_username"),aa:-8}};tu.prototype.listener=function(a){vu.h(a)};var uu="room:mod_revoked",vu=new D(uu);function wu(a){Z.call(this,xu,a)}r(wu,Z);wu.prototype.Ha=function(a){return Object.assign({sd:void 0,ng:void 0},Zn(a))};wu.prototype.listener=function(a){yu.h(a)};var xu="room:appnotice",yu=new D(xu);function zu(a,b){Vt.call(this,Au,a,b)}r(zu,Vt);zu.prototype.Ha=function(a){return Object.assign({sd:void 0,ng:this.username},Zn(a))};zu.prototype.listener=function(a){Bu.h(a)};var Au="room_user:appnotice",Bu=new D(Au);function Cu(a){Z.call(this,Du,a)}r(Cu,Z);Cu.prototype.Ha=function(a){var b=T(a,"type");if("log"===b)var c=T(a,"message");else if("apperrorlog"===b){var d=R(a,"message");c=[];c.push([X("Error: ")]);if("string"===typeof d)c.push([X(d)]);else if(d instanceof Array){d=q(d);for(var e=d.next();!e.done;e=d.next())c.push([X(e.value)])}else u("parseAppLog error: Invalid message type "+(void 0===d?"undefined":d.toString()))}else u("parseAppLog error: Unknown app log type: "+b),c="";return{message:c,type:b,aa:W(a,"tid")}};Cu.prototype.listener=function(a){Eu.h(a)};var Du="room:app_log",Eu=new D(Du);function Fu(a){Z.call(this,Gu,a)}r(Fu,Z);Fu.prototype.Ha=function(a){return{O:Vn(fm(a,"user")),content:T(a,"message"),aa:W(a,"tid")}};Fu.prototype.listener=function(a){Hu.h(a)};var Gu="room:purchase",Hu=new D(Gu);function Iu(a){Z.call(this,Ju,a)}r(Iu,Z);Iu.prototype.Ha=function(a){return{te:V(a,"allow_private_shows"),Fd:W(a,"private_show_tokens_per_minute"),kg:W(a,"spy_on_private_show_tokens_per_minute"),Lh:W(a,"private_min_minutes"),li:V(a,"allow_show_recordings"),aa:W(a,"tid")}};Iu.prototype.listener=function(a){Ku.h(a)};var Ju="room:settings",Ku=new D(Ju);function Lu(a){Z.call(this,Mu,a)}r(Lu,Z);Lu.prototype.Ha=function(a){return{Ja:Vn(fm(a,"user")),action:T(a,"action"),aa:-3}};Lu.prototype.listener=function(a){Nu.h(a)};var Mu="room:enter_leave",Nu=new D(Mu);function Ou(a){Z.call(this,Pu,a)}r(Ou,Z);Ou.prototype.Ha=function(a){return{Ja:Vn(fm(a,"user")),lc:S(a,"source"),RA:S(a,"exploring_hash"),aa:-9}};Ou.prototype.listener=function(a){Qu.h(a)};var Pu="room_privileged:enter",Qu=new D(Pu);function Ru(a){Z.call(this,Su,a)}r(Ru,Z);Ru.prototype.Ha=function(a){return{Ja:Vn(fm(a,"user")),aa:-10}};Ru.prototype.listener=function(a){Tu.h(a)};var Su="room_privileged:leave",Tu=new D(Su);function Uu(a){Z.call(this,Vu,a)}r(Uu,Z);Uu.prototype.Ha=function(a){return Object.assign({sd:"red",ng:void 0},Zn(a))};Uu.prototype.listener=function(a){Wu.h(a)};var Vu="mod:appnotice",Wu=new D(Vu);function Xu(a){Z.call(this,Yu,a)}r(Xu,Z);Xu.prototype.Ha=function(a){return Object.assign({sd:"green",ng:void 0},Zn(a))};Xu.prototype.listener=function(a){Zu.h(a)};var Yu="fanclub:appnotice",Zu=new D(Yu);new D("fanclub2:appnotice");function $u(a){Z.call(this,av,a)}r($u,Z);$u.prototype.Ha=function(a){return Object.assign({sd:"lightpurple",ng:void 0},Zn(a))};$u.prototype.listener=function(a){bv.h(a)};var av="lightpurple:appnotice",bv=new D(av);function cv(a){Z.call(this,dv,a)}r(cv,Z);cv.prototype.Ha=function(a){return Object.assign({sd:"darkpurple",ng:void 0},Zn(a))};cv.prototype.listener=function(a){ev.h(a)};var dv="darkpurple:appnotice",ev=new D(dv);function fv(a){Z.call(this,gv,a)}r(fv,Z);fv.prototype.Ha=function(a){return Object.assign({sd:"darkblue",ng:void 0},Zn(a))};fv.prototype.listener=function(a){hv.h(a)};var gv="darkblue:appnotice",hv=new D(gv);function iv(a){Z.call(this,jv,a)}r(iv,Z);iv.prototype.Ha=function(a){return Object.assign({sd:"lightblue",ng:void 0},Zn(a))};iv.prototype.listener=function(a){kv.h(a)};var jv="lightblue:appnotice",kv=new D(jv);function lv(a){var b=a.split(":"),c=b[2],d=b[3];b=mv.get(b.slice(0,2).join(":"));if(void 0!==b)return new b(c,d);u("Topic could not be mapped properly",a)}function nv(a,b){return[new Wt(a),new Zt(a),new bu(a),new eu(a),new hu(a),new ku(a),new nu(a),new qu(a),new tu(a),new wu(a),new zu(a,b),new Cu(a),new Fu(a),new Iu(a),new Lu(a),new Ou(a),new Ru(a),new Uu(a),new Xu(a),new iv(a),new fv(a),new $u(a),new cv(a)]}
var mv=new Map([[Am,zm],[xo,wo],[Eo,Do],[No,Mo],[Ao,zo],[Ho,Go],[Ko,Jo],[Vo,Uo],[Yo,Xo],[ap,$o],[Xt,Wt],[$t,Zt],[cu,bu],[fu,eu],[iu,hu],[lu,ku],[ou,nu],[ru,qu],[uu,tu],[xu,wu],[Au,zu],[Du,Cu],[Gu,Fu],[Ju,Iu],[Mu,Lu],[Pu,Ou],[Su,Ru],[Vu,Uu],[Yu,Xu],[jv,iv],[gv,fv],[av,$u],[dv,cv]]);function ov(a,b,c){c=void 0===c?[]:c;if(isNaN(a)&&isNaN(b)&&"number"===typeof a&&"number"===typeof b||a===b)return!0;if(a instanceof Function)return a===b;if("function"===typeof a&&"function"===typeof b||a instanceof Date&&b instanceof Date||a instanceof RegExp&&b instanceof RegExp||a instanceof String&&b instanceof String||a instanceof Number&&b instanceof Number)return a.toString()===b.toString();if(!(a instanceof Object&&b instanceof Object)||a.isPrototypeOf(b)||b.isPrototypeOf(a)||a.constructor!==b.constructor||a.prototype!==b.prototype)return!1;for(var d in b)if(!(0<=c.indexOf(d)||b.hasOwnProperty(d)===a.hasOwnProperty(d)&&typeof b[d]===typeof a[d]))return!1;for(var e in a)if(!(0<=c.indexOf(e))){if(b.hasOwnProperty(e)!==a.hasOwnProperty(e)||typeof b[e]!==typeof a[e])return!1;switch(typeof a[e]){case "object":case "function":if(!ov(a[e],b[e],c))return!1;break;default:if(a[e]!==b[e])return!1}}return!0};function pv(a,b,c,d){this.value=a;this.rh=b;this.lC=c;this.SD=d;this.$n=!1;this.Pj=new Date;this.Xv=!1}function qv(a,b,c){var d={},e;for(e in a)if(!0!==c[e]&&"function"!==typeof a[e]&&!(a[e]instanceof Object&&b[e]instanceof Object&&ov(a[e],b[e],Object.keys(c)))&&a[e]!==b[e]){var f={};d[e]=(f.wowza=a[e],f.push=b[e],f)}return d}
function rv(a,b,c,d){var e=this;d=void 0===d?{}:d;this.A=a;this.name=b;this.cz=void 0===c?0:c;this.Om=d;this.kq=!0;this.gt=this.ft=0;this.bufferSize=100;this.timeout=2500;this.ex=!1;this.gu=new Set;this.yn=new sv(this.bufferSize);this.lp=new sv(this.bufferSize);this.mC=tv.j(function(f){e.ex=f})}rv.prototype.verify=function(a,b,c){uv(this,a)||vv(this,a,b,c)};function wv(a,b,c){c=void 0===c?a.timeout:c;var d=window.setTimeout(function(){b();a.gu.delete(d)},c);a.gu.add(d)}
function uv(a,b){var c;if(c=a.ex&&xv())if(c=!a.kq){if(void 0===b.aa)a=0;else a:switch(a=a.A.status,a){case "privatewatching":case "privatespying":case "notconnected":a=!1;break a;case "passwordprotected":case "privaterequesting":case "privatenotwatching":case "away":case "offline":case "hidden":case "public":a=!0;break a;default:w("unexpected status: "+a),a=!1}c=a}return c&&void 0!==b.aa?!1:!0}
function vv(a,b,c,d){if(!uv(a,b)&&void 0!==b.aa){var e=new pv(b,c,xv(),"open"===a.A.Oe.readyState()),f=function(h){return void 0!==h.value.aa&&0>h.value.aa?ov(h.value,e.value,Object.keys(a.Om)):h.rh!==c&&h.value.aa===b.aa},g=a.yn.values.find(f);void 0!==g?yv(a,g,e):(f=a.lp.values.find(f),void 0!==f?zv(a,f,e):(a.yn.push(e),wv(a,function(){uv(a,b)||e.$n||(Av(a.yn,e),0<a.cz&&e.Pj.valueOf()-a.A.nk.valueOf()<a.cz||(a.lp.push(e),wv(a,function(){if(!uv(a,b)&&!e.$n){Av(a.lp,e);e.Xv=!0;var h="never arrived";d||(h+=", topic was not subscribed");Bv(a,e,h)}},1E4)))})))}}function yv(a,b,c){b.$n=!0;ov(b.value,c.value,Object.keys(a.Om))||(c=qv("wowza"===b.rh?b.value:c.value,"push"===b.rh?b.value:c.value,a.Om),Bv(a,b,"differs",c),b.Xv=!0);Av(a.yn,b)}
function zv(a,b,c){b.$n=!0;b.Nw=(new Date).valueOf()-b.Pj.valueOf();ov(b.value,c.value,Object.keys(a.Om))?(Av(a.lp,b),Bv(a,b,"arrived "+b.Nw+"ms late")):(c=qv("wowza"===b.rh?b.value:c.value,"push"===b.rh?b.value:c.value,a.Om),Bv(a,b,b.Nw+"ms late and differs",c))}rv.prototype.stop=function(){for(var a,b=q(this.gu.keys()),c=b.next();!c.done;c=b.next())clearTimeout(c.value);null===(a=this.mC)||void 0===a?void 0:a.removeListener();this.kq=!0};rv.prototype.start=function(){this.kq=!1};function Bv(a,b,c,d){if(void 0!==b.value.aa){var e={};e.trace_id=b.value.aa;e.running_apps=a.A.vg();e.viewer_ignored=oo(a.A.username());e.received_from=b.rh;e.original=b.value;e.push_connected=b.lC;e.wowza_connected=b.SD;e.message_created=b.Pj;e.message_age=b.Pj.valueOf()-a.A.nk.valueOf();e.verifier=a.name;e.timeout=a.timeout;e.viewer=a.A.username();e.room=a.A.B();e.room_status=a.A.status;e.prev_room_status=a.A.rd;e.last_connection_time=a.A.nk;e.created=a.A.Pj;"wowza"===b.rh?a.ft+=1:"push"===b.rh&&(a.gt+=1);e.total_failures_push=a.ft;e.total_failures_wowza=a.gt;e.diff=d;void 0!==d&&(e.diff_fields=Object.keys(d));e.failure_reason=c;void 0!==Kb&&A("PushServiceVerifier",e)}}function sv(a){this.size=a;this.values=[]}function Av(a,b){a.values=a.values.filter(function(c){return c!==b})}sv.prototype.push=function(a){this.size<this.values.length&&this.values.shift();this.values.unshift(a)};function Cv(a){var b={onRoomCountUpdate:-1,onTitleChange:-2,onPromotion:-7,onRevoke:-8,onSilence:-5,onKick:-6};return void 0===b[a]?-999999:b[a]}var Dv=0;function Ev(a){this.A=a;this.zu=[];this.ly=new Yb;this.Hz=new Yb}
function Fv(){var a=Gv,b=a.A.username(),c=a.A.B(),d=[{name:"roomTitleChange",Yb:new Zt(c),jc:au,nc:a.A.event.Ck,Ub:[-2,16],yh:{aa:!0},lh:function(e){return{title:e.I[0],aa:"0"===e.I[1]?-999999:Cv(e.method)}}},{name:"roomTipAlert",Yb:new bu(c),jc:du,nc:a.A.event.Op,Ub:[4],yh:{Db:!0,history:!0,O:!0},lh:function(e){return Object.assign(Object.assign({},e),{Db:!1,history:!1})},delay:6E3},{name:"roomMessage",Yb:new hu(c),jc:ju,nc:a.A.event.It,Ub:[0,1,2],yh:{Ie:!0,backgroundColor:!0,O:!0,rs:!0,Zc:!0},lh:function(e){return Object.assign(Object.assign({},e),{message:e.message.trim()})},delay:6E3},{name:"roomSilence",Yb:new ku(c),jc:mu,nc:a.A.event.Ck,Ub:[-5],yh:{aa:!0},lh:function(e){return{username:e.I[0],O:e.I[1],aa:Cv(e.method)}}},{name:"roomKick",Yb:new nu(c),jc:pu,nc:a.A.event.Ck,Ub:[-6],yh:{aa:!0,O:!0},lh:function(e){return{username:e.I[0],O:"Unknown",aa:Cv(e.method)}}},{name:"roomModPromoted",Yb:new qu(c),jc:su,nc:a.A.event.Ck,Ub:[-7],yh:{aa:!0},lh:function(e){return{username:e.I[0],O:e.I[1],aa:Cv(e.method)}}},{name:"roomModRevoked",Yb:new tu(c),jc:vu,nc:a.A.event.Ck,Ub:[-8],yh:{aa:!0},lh:function(e){return{username:e.I[0],O:e.I[1],aa:Cv(e.method)}}},{name:"roomAppNotice",Yb:new wu(c),jc:yu,nc:a.A.event.Rg,Ub:[5]},{name:"roomAppLog",Yb:new Cu(c),jc:Eu,nc:a.A.event.Et,Ub:[3]},{name:"roomPurchase",Yb:new Fu(c),jc:Hu,nc:a.A.event.Dy,Ub:[],delay:6E3},{name:"roomSettings",Yb:new Iu(c),jc:Ku,nc:a.A.event.Xh,Ub:[]},{name:"roomModGroup",Yb:new Uu(c),jc:Wu,nc:a.A.event.Rg,Ub:[6]},{name:"fanclubGroupNotice",Yb:new Xu(c),jc:Zu,nc:a.A.event.Rg,Ub:[7]},{name:"lightBlueGroupNotice",Yb:new iv(c),jc:kv,nc:a.A.event.Rg,Ub:[8]},{name:"darkBlueGroupNotice",Yb:new fv(c),jc:hv,nc:a.A.event.Rg,Ub:[9]},{name:"lightPurpleGroupNotice",Yb:new $u(c),jc:bv,nc:a.A.event.Rg,Ub:[10]},{name:"darkPurpleGroupNotice",Yb:new cv(c),jc:ev,nc:a.A.event.Rg,Ub:[11]}];""!==b&&(d.push({name:"userTipAlert",Yb:new Jo(b),jc:Lo,nc:a.A.event.Op,Ub:[3,15],yh:{Db:!0,history:!0,O:!0}}),d.push({name:"userAppAlert",Yb:new zu(c,b),jc:Bu,nc:a.A.event.Rg,Ub:[12]}));d.forEach(function(e){var f=Hv(a,e.name,e.delay,e.yh,e.YH);a.Hz.add(e.nc.j(function(g){g=void 0!==e.lh?e.lh(g):g;Iv(a,e.Ub,g)&&f.verify(g,"wowza",Jv(e.Yb))},!1));a.ly.add(e.jc.j(function(g){Iv(a,e.Ub,g)&&f.verify(g,"push",Jv(e.Yb))}))});150>Dv&&Kv(a)}
function Iv(a,b,c){var d=void 0===d?!1:d;if(Lv.has(a.A.status))return!1;b=q(b);for(var e=b.next();!e.done;e=b.next())if(e=e.value,0===e){if(oo(c.O.username))return!1}else if(1===e){if(void 0===c.aa)return!1}else if(2===e){if(!0===c.rs)return!1}else if(3===e){if(!a.A.Eb)return!1}else if(4===e){if(a.A.Eb)return!1}else if(13===e){if(!a.A.Eb&&!a.A.ze)return!1}else if(14===e){if(c.Ja.username===a.A.username())return!1}else if(15===e){if(c.O.username===a.A.username())return!1}else if(16===e){if(""===c.title)return!1}else if(!d)if(5===e){if(e=c,void 0!==e.sd||void 0!==e.ng)return!1}else if(6===e){if("red"!==c.sd)return!1}else if(7===e){if("green"!==c.sd)return!1}else if(8===e){if("lightblue"!==c.sd)return!1}else if(9===e){if("darkblue"!==c.sd)return!1}else if(10===e){if("lightpurple"!==c.sd)return!1}else if(11===e){if("darkpurple"!==c.sd)return!1}else if(12===e){if(void 0===c.ng)return!1}else if(0>e&&(-999999===c.aa||c.aa!==e))return!1;return!0}
function Hv(a,b,c,d,e){d=void 0===d?{}:d;e=void 0===e?rv:e;b=new e(a.A,b,void 0===c?0:c,d);a.zu.push(b);return b}Ev.prototype.fu=function(){for(var a=q(this.zu),b=a.next();!b.done;b=a.next())b.value.stop(),--Dv;Zb(this.ly);Zb(this.Hz)};function Kv(a){a=q(a.zu);for(var b=a.next();!b.done;b=a.next())b.value.start(),Dv+=1}var Lv=new Set(["privatewatching","unknown","notconnected","offline"]);var Mv=[];K.j(function(a){Mv=a.C.Zf});var Nv=new D("openEmoticonPreview"),Ov=new D("closeEmoticonPreview"),Pv=new D("emoticonPreviewClosed");function Qv(){Fj.call(this);var a=this;G(this.element,"emoticonPreviewModal");this.element.style.position="fixed";this.element.style.width="auto";this.element.style.height="auto";this.element.style.borderRadius="6px";this.element.style.padding="10px";this.element.style.fontSize="12px";this.element.style.fontFamily="UbuntuRegular, Helvetica, Arial, sans-serif";this.element.style.zIndex="1003";this.element.style.textAlign="center";this.element.style.boxShadow="0 0 18px rgba(0, 0, 0, 0.4)";this.V.style.backgroundColor="#000000";this.V.style.opacity="0.4";this.V.style.zIndex="1003";var b=document.createElement("div");G(b,"closeButton");b.style.display="inline-block";b.style.position="absolute";b.style.width="10px";b.style.height="10px";b.style.top="9px";b.style.right="9px";b.style.cursor="pointer";b.style.opacity="1";b.onclick=function(){a.D()};b.onmouseenter=function(){b.style.opacity="1"};b.onmouseleave=function(){b.style.opacity="0.5"};this.element.appendChild(b);this.Dd=document.createElement("img");this.Dd.style.verticalAlign="middle";this.Dd.style.padding="10px";v("load",this.Dd,function(){a.G()});this.element.appendChild(this.Dd);this.Gd=document.createElement("div");G(this.Gd,"hrefColor");this.Gd.innerText="REPORT EMOTICON";this.Gd.style.cursor="pointer";this.Gd.onclick=function(){a.Gd.style.display="none";a.Og.style.display="block";a.G()};this.Gd.onmouseenter=function(){a.Gd.style.textDecoration="underline"};this.Gd.onmouseleave=function(){a.Gd.style.textDecoration="none"};this.element.appendChild(this.Gd);this.Og=document.createElement("div");this.Og.style.display="none";this.element.appendChild(this.Og);var c=document.createElement("span");c.innerText="Choose a category:";c.style.marginRight="6px";this.Og.appendChild(c);var d=document.createElement("select");G(d,"categorySelect");d.style.marginBottom="3px";c=q(Rv);for(var e=c.next();!e.done;e=c.next()){e=e.value;var f=document.createElement("option");f.innerText=e.label;f.value=e.value;d.appendChild(f)}this.Og.appendChild(d);c=document.createElement("span");c.style.display="inline-block";e=document.createElement("span");G(e,"cancelButton");e.innerText="CANCEL";e.style.fontFamily="UbuntuMedium, Helvetica, Arial, sans-serif";e.style.fontSize="12px";e.style.textShadow="#585858 1px 1px 0";e.style.padding="2px 6px";e.style.background="linear-gradient(180deg, #7b7b7b 0%, #898989 50%, #585858 60%, #616161 100%)";e.style.borderRadius="4px";e.style.boxSizing="border-box";e.style.cursor="pointer";e.style.display="inline-block";e.style.marginLeft="6px";e.onclick=function(){a.Gd.style.display="block";a.Og.style.display="none";a.G()};c.appendChild(e);e=document.createElement("span");G(e,"reportButton");e.innerText="REPORT";e.style.fontFamily="UbuntuMedium, Helvetica, Arial, sans-serif";e.style.fontSize="12px";e.style.textShadow="#bc2b1d 1px 1px 0";e.style.padding="2px 6px";e.style.background="linear-gradient(180deg, #ff4d30 0%, #ef6352 50%, #f2240f 60%, #e63125 100%)";e.style.borderRadius="4px";e.style.boxSizing="border-box";e.style.cursor="pointer";e.style.display="inline-block";e.style.marginLeft="6px";e.onclick=function(){z("emoticon_report_abuse/"+a.wl.Lc+"/",{category:d.value}).then(function(){Mv.push(a.wl.Lc);a.Og.style.display="none";a.di.style.display="block";a.G()}).catch(function(h){u("Error reporting emoticon: "+h)})};c.appendChild(e);this.Og.appendChild(c);this.di=document.createElement("div");this.di.style.display="none";this.element.appendChild(this.di);c=document.createElement("span");c.innerText="EMOTICON REPORTED - ";this.di.appendChild(c);var g=document.createElement("span");G(g,"hrefColor");g.innerText="UNDO";g.style.cursor="pointer";g.onclick=function(){z("emoticon_report_abuse/"+a.wl.Lc+"/",{category:d.value}).then(function(){var h=Mv.indexOf(a.wl.Lc,0);0<=h&&Mv.splice(h,1);a.di.style.display="none";a.Gd.style.display="block";a.G()}).catch(function(h){u("Error reporting emoticon: "+h)})};g.onmouseenter=function(){g.style.textDecoration="underline"};g.onmouseleave=function(){g.style.textDecoration="none"};this.di.appendChild(g);this.hc.j(function(){a.D()});Ov.j(function(){a.D()})}r(Qv,Fj);Qv.prototype.nf=function(a){this.wl=a;this.Dd.src=this.wl.url;this.Gd.style.display="none";this.Og.style.display="none";this.di.style.display="none";0<=Mv.indexOf(a.Lc)?this.di.style.display="block":this.Gd.style.display="block";Fj.prototype.show.call(this);this.G()};Qv.prototype.G=function(){this.element.style.left=(document.documentElement.clientWidth-this.element.offsetWidth)/2+"px";this.element.style.top=(document.documentElement.clientHeight-this.element.offsetHeight)/2+"px"};Qv.prototype.D=function(){Fj.prototype.D.call(this);Pv.h(void 0)};Qv.prototype.show=function(){Fj.prototype.show.call(this);this.element.style.visibility="";this.G()};var Rv=[{label:"Just ignore this emoticon",value:"ignore"},{label:"Offensive",value:"offensive"},{label:"Disgusting",value:"disgusting"},{label:"Fake Tip",value:"fake_tip"},{label:"Advertising",value:"advertising"}];var Sv={ic:1,height:0,name:"",$f:"",width:0,Yk:""};function Tv(a){this.Lp="%%%[";this.yl="]%%%";this.wx=/((^|\s)@\w+)/;this.Kd=a.Kd;this.Zf=a.Zf;this.Gc=a.Gc}function Uv(a,b){var c=document.createElement("span");c.className="emoticonImage";Vv(a,b).forEach(function(d){switch(d.ic){case 0:d=d.Jc;""!==d&&c.appendChild(Wv(a,d));break;case 1:""!==d.name?c.appendChild(Xv(a,d)):c.appendChild(Wv(a,""))}});return c}
function Vv(a,b){var c=[],d=[];if(0>b.indexOf(a.Lp))return[{ic:0,Jc:b}];for(var e=0;e<b.length;e+=1)if("%"===b[e])if(b.slice(e,e+a.Lp.length)===a.Lp){var f=e+b.slice(e,b.length).indexOf(a.yl);if(b.slice(f,f+a.yl.length)===a.yl){c!==[]&&d.push({ic:0,Jc:c.join("")});c=[];e=b.slice(e,f+a.yl.length);if(e.slice(a.Lp.length).startsWith("emoticon")){b:{e=e.replace("%%%[emoticon ","").replace("]%%%","");e=e.split(/\|/);if(6===e.length){if(e={ic:1,name:e[0],Nk:e[1],width:Yv(e[2])?Number(e[2]):80,height:Yv(e[3])?Number(e[3]):80,$f:e[4],Yk:e[5]},void 0!==e.Nk&&Zv(e.Nk))break b}else if(5===e.length&&(e={ic:1,name:e[0],$f:e[1],width:Yv(e[2])?Number(e[2]):80,height:Yv(e[3])?Number(e[3]):80,Yk:e[4]},Zv(e.$f)))break b;e=void 0}void 0===e&&(u("Cannot parse emoticon: "+e),e=Sv)}else e={ic:0,Jc:e};d.push(e);e=f+a.yl.length-1}}else c.push(b[e]);else c.push(b[e]);c!==[]&&d.push({ic:0,Jc:c.join("")});return d}
function Xv(a,b){if(a.Kd&&-1===a.Zf.indexOf(b.name)){var c=document.createElement("img"),d=b.Nk;c.src=void 0!==d?d:b.$f;a.Gc?(b.width*=.5,b.height*=.5):(c.title=":"+b.name,c.style.cursor="pointer",c.onclick=function(){Nv.h({Lc:b.name,url:b.$f})});c.name=b.name;c.height=b.height;c.width=b.width;c.style.verticalAlign="top";return c}c=document.createElement("span");c.style.color="lightskyblue";c.innerText=(a.Gc?"":":")+b.name;a.Gc||(c.style.cursor="pointer",c.onclick=function(){Nv.h({Lc:b.name,url:b.$f})});return c}function Wv(a,b){var c=document.createElement("span");a.wx.test(b)?b.split(a.wx).forEach(function(d){var e=/^\s/.test(d);if("@"===d.trim().charAt(0)){var f=document.createElement("span");f.innerText=d.trimStart();f.className="username-mention";e&&c.appendChild(document.createTextNode(" "));c.appendChild(f)}else 0<d.trim().length&&c.appendChild(document.createTextNode(d))}):c.innerText=b;return c}
function Zv(a){return null===a.match(/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/g)?(u("Invalid emoticon URL"),!1):!0}function Yv(a){return isNaN(parseInt(a,10))?(u("Invalid dimension argument"),!1):!0};var $v,Gv,aw,bw,cw,tv=new D("PushServiceTopicsSetup",{fe:1}),dw=0;function ew(a,b){if(void 0!==cw)cw.then(function(){ew(a,b)}).catch();else{$v=b.event.It.j(function(d){if(!(1E3>(new Date).valueOf()-b.nk.valueOf())){var e=d.O.username===b.username();d.rs||!e||Lv.has(b.status)||void 0===d.aa||(e=Vv(new Tv({Kd:!0,Zf:[],Gc:!1}),d.message).map(function(f){switch(f.ic){case 0:return f.Jc;case 1:return":"+f.name}}).join(""),d=JSON.stringify({m:e,f:"",c:"",tid:d.aa}),z("push_service/publish_chat_message/",{room:a.B,message:d}).catch(function(f){403===f.ud.status||u("(Push Service) calling publish_chat_message returned an error",f)}))}},!1);Gv=new Ev(b);Fv();var c=dw+=1;fw(a.B).then(function(d){cw=void 0;c===dw&&(gw().Id=a,hw(d))}).catch(function(d){u(d);cw=void 0})}}var iw;K.j(function(a){ew(a.C,a.A);aw=a.C.B;bw=a.C.userName;iw=window.setTimeout(function(){var b="open"===a.A.Oe.readyState(),c=xv();(b||c)&&A("PushServiceConnectionStatus",{wowza_connected:b,push_connected:c,push_connection_type:jw()&&void 0!==kw?kw.qw():""})},1E4)});vc.j(function(){window.clearTimeout(lw);window.clearTimeout(iw);tv.h(!1);mw(aw,bw)});function mw(a,b){if(void 0!==cw)cw.then(function(){mw(a,b)}).catch();else{$v.removeListener();Gv.fu();var c=nv(a,b);c=nw(c);cw=Promise.all(ow(c)).then(function(){cw=void 0}).catch(function(d){u(d);cw=void 0})}}Io.j(function(a){fl(a.gd)});var pw=new D("pushReconnectEvent"),lw,qw=1E4;function hw(a){a=Object.keys(a);var b=[];a=q(a);for(var c=a.next();!c.done;c=a.next())c=lv(c.value),void 0===c||Jv(c)||b.push(c);if(0!==b.length){a=rw(b);var d=(new Date).getTime(),e=!1,f=sw.j(function(){e=!0});Promise.all(ow(a)).then(function(g){f.removeListener();var h=g.filter(function(p){return"fulfilled"===p.status}).length,m=b.filter(function(p){return!Jv(p)}).map(function(p){return p.uh()}).sort(),n=(new Date).getTime();A("PushServiceTopicSetup",{topics_requested_count:g.length,successful_topic_count:h,failed_topic_list:m,is_push_connected:xv(),elapsed_time:n-d});0<m.length&&!e&&(lw=window.setTimeout(function(){pw.h(void 0);qw*=2},qw));tv.h(0===m.length&&0<h)}).catch()}}function tw(a){var b=new uk(function(){uw(a.auth).then(function(){var c=a.auth.getCapabilities();hw(c)}).catch()},{xc:1E3,md:2});pw.j(function(){vk(b)});Fo.j(function(c){"authentication"===c.target&&vk(b)})}
function ow(a){return a.map(function(b){return Promise.resolve(b).then(function(c){return{status:"fulfilled",value:c}}).catch(function(c){return{status:"rejected",reason:c}})})};function vw(){var a=2;try{var b=!1;var c=!0}catch(d){c=b=!1}b?a=0:c&&(a=1);return{level:a}}
function ww(a){this.clientId=T(a,"client_id");this.Vp=gm(a,"token_request");this.Tj=new Map;var b=fm(a,"settings");this.Wh={Ku:T(b,"backend"),restHost:S(b,"rest_host"),realtimeHost:S(b,"realtime_host"),fallbackHosts:dm(b,"fallback_hosts"),flags:new Map};var c=this.Wh.flags;b=im(b,"flags");if(void 0!==b){var d=Object.keys(b);d=q(d);for(var e=d.next();!e.done;e=d.next())e=e.value,c.set(e,b[e])}c=this.Tj;b=im(a,"failures");if(void 0!==b)for(d=Object.keys(b),d=q(d),e=d.next();!e.done;e=d.next())e=e.value,c.set(e,b[e]);mm(a)}ww.prototype.Ae=function(){return void 0!==this.Vp};ww.prototype.Vh=function(){return JSON.stringify(this.Vp)};function xw(a){var b={},c=JSON.parse(a),d=Object.keys(c);d=q(d);for(var e=d.next();!e.done;e=d.next()){e=e.value;var f=c[e];f instanceof Array?b[e]=f.map(function(g){return g}):u("Invalid capability type for topic: "+e,{capability:a})}return b}function yw(a){Tt.call(this,a.token,a.expires,a.clientId);this.tokenDetails=a;this.capability=xw(a.capability)}r(yw,Tt);yw.prototype.Vh=function(){return JSON.stringify(this.tokenDetails)};function zw(a){this.zf=["global:news"];this.My="";this.ie=a}function Aw(a,b){a.My=void 0===b?"":b.Vh()}zw.prototype.Vh=function(){return this.My};zw.prototype.getCapabilities=function(){var a=this.Jj;return void 0===a?{}:a.capability};function Bw(a){return new Promise(function(b,c){return Ut(a.zf).then(function(d){var e=im(d,"failures");"object"===typeof e&&0!==Object.keys(e).length&&A("PushServiceClient",{action:"token_request_failed_topics",topics:e,client:"ably"});d=new ww(d);if(d.Ae()){Aw(a,d);if(void 0===d.Vp)throw Error("Access to AblyContext.tokenRequest on an invalid context!");b(d.Vp)}else Aw(a,void 0),c("Invalid token request")})})}
function Cw(a,b){a:{if(void 0!==a.Jj)if((new Date).getTime()>=a.Jj.expires)a.Jj=void 0;else{a=a.Jj;break a}a=void 0}return void 0!==a&&a.capability.hasOwnProperty(b.Bc())}function vm(a,b){return Cw(a,b)?a.Jj:void 0}function Dw(a,b){if(a.zf.includes("room:"+b))return!1;a.zf=a.zf.filter(function(c){return!c.startsWith("room:")});a.zf.push("room:"+b);return!0}
function uw(a){if(void 0!==a.bn)return a.bn.then(function(){return uw(a)});a.bn=new Promise(function(b,c){a.ie.auth.authorize().then(function(d){a.bn=void 0;d=new yw(d);a.Jj=d;b()}).catch(function(d){a.bn=void 0;c(Ew("auth",d))})});return a.bn}function Fw(a,b){a.zf=a.zf.filter(function(c){return!c.startsWith(b.uh())});a.zf.push(b.Bc())}function Gw(a,b){a.zf=a.zf.filter(function(c){return!c.startsWith(b.uh())})}
function Hw(a){qm.call(this);var b=this;this.sA="ably";this.ci=new Map;this.disabled=new D("critical",{fe:1});this.nl=new D("connectionStateChange",{fe:1});if(!a.sm.Ae())throw u("Invalid PushServiceContext made it to AblyClientImpl",a),Error("Invalid context");this.Ry=void 0===a.fs?!0:!a.fs;this.context=a.sm;this.ie=new Ably.Realtime.Promise(Iw(this));this.auth=new zw(this.ie);Aw(this.auth,this.context);this.ie.connection.on(function(c){c.previous!==c.current&&b.nl.h({HH:b,previous:sm(c.previous),current:sm(c.current),reason:Jw("connect",c.reason)})})}r(Hw,qm);function Iw(a){var b={autoConnect:!1,closeOnUnload:a.Ry,log:vw(),authCallback:function(c,d){Bw(a.auth).then(function(e){var f=xw(e.capability);f=Kw(f);return Promise.all(ow(f)).then(function(){d(void 0,e)})}).catch(function(e){u("Error creating TokenRequest",e)})},restHost:a.context.Wh.restHost,realtimeHost:a.context.Wh.realtimeHost};0<a.context.Wh.fallbackHosts.length&&(b.fallbackHosts=a.context.Wh.fallbackHosts);return b}k=Hw.prototype;k.connect=function(){var a=this;if(this.isConnected())return Promise.resolve();if(Qt.dA.has(sm(this.ie.connection.state))&&void 0===this.ml)return Promise.reject("Connection is currently busy!");void 0===this.ml&&(this.ml=new Promise(function(b,c){function d(e){"connected"===e.current?(a.ml=void 0,a.nl.removeListener(d),b()):"connecting"===e.previous&&(a.ml=void 0,a.nl.removeListener(d),c(e.reason))}a.nl.j(d);a.ie.connect()}));return this.ml};k.close=function(){this.isConnected()&&this.ie.close()};k.qw=function(){var a,b,c,d,e;return null!==(e=null===(d=null===(c=null===(b=null===(a=this.ie.connection)||void 0===a?void 0:a.connectionManager)||void 0===b?void 0:b.activeProtocol)||void 0===c?void 0:c.transport)||void 0===d?void 0:d.shortName)&&void 0!==e?e:""};k.isConnected=function(){return"connected"===sm(this.ie.connection.state)};k.bs=function(){var a=this;this.Ry||v(lb(),window,function(){a.close()});return qm.prototype.bs.call(this)};k.subscribe=function(a,b){var c=this,d=this.ci.get(a.Bc());if(void 0!==d)return d.then(function(){return c.subscribe(a,b)});var e=a.Bc(),f=this.ie.channels.get(e);d=Lw(f.state);if("subscribed"===d)return wm(this,a),Promise.resolve();if("subscribing"===d)return Promise.reject(Ew("subscribe","Channel was already subscribing"));if(Rt.yv.has(d))return Promise.reject(Ew("subscribe",f.errorReason));var g=!1,h=sw.j(function(){g=!0});d=new Promise(function(m,n){um(c,a).then(function(){return f.setOptions({sE:void 0,params:{},modes:["SUBSCRIBE","PRESENCE"]})}).then(function(){return f.subscribe(function(p){p=new Q(p.data);p=a.Ha(p);a.listener(p)})}).then(function(){var p=c.auth.getCapabilities()[e];if(Array.isArray(p)&&-1!==p.indexOf("presence")){p=f.presence;var y=p.enter;switch(a.uh()){case iu:if(void 0!==c.Id){var C="";""!==c.Id.Cb&&(C=T(new Q(c.Id.Cb),"hashtag"));C={exploring_hash:C,source_name:vn(c.Id.lc)}}break;default:C=void 0}p=y.call(p,C)}else p=Promise.resolve();return p}).catch(function(p){return"suspended"===f.state?f.detach():Promise.reject(p)}).then(function(){h.removeListener();wm(c,a);c.ci.delete(e);m()}).catch(function(p){h.removeListener();c.ci.delete(e);xm(c,a);g&&m();n(Ew("subscribe",p))})});this.ci.set(e,d);return d};k.unsubscribe=function(a){var b=this,c=this.ci.get(a.Bc());if(void 0!==c)return c.then(function(){return b.unsubscribe(a)});var d=a.Bc(),e=this.ie.channels.get(d);c=Lw(e.state);if("unsubscribed"===c||"initialized"===c)return xm(this,a),Promise.resolve();if(Rt.yv.has(c))return Promise.reject(Ew("unsubscribe",e.errorReason));c=new Promise(function(f,g){e.unsubscribe();xm(b,a);return e.detach().then(function(){b.ci.delete(d);f()}).catch(function(h){b.ci.delete(d);g("Failed to detach from topic "+d+" - "+
h)})});this.ci.set(d,c);return c};k.ss=function(a){return"subscribed"===Lw(this.ie.channels.get(a.Bc()).state)};function Jw(a,b){a={code:a,message:"Unknown failure"};void 0!==b&&(a.message=b.message);return a}function Ew(a,b){return void 0===b?{code:a,message:"Unknown"}:"string"===typeof b?{code:"auth",message:b}:"statusCode"in b?Jw(a,b):b}
function sm(a){switch(a){case "initialized":return"initialized";case "connecting":return"connecting";case "connected":return"connected";case "closing":return"closing";case "closed":return"closed";case "disconnected":return"disconnected";case "failed":return"failed";case "suspended":return"suspended";default:return"unknown"}}
function Lw(a){switch(a){case "initialized":return"initialized";case "attaching":return"subscribing";case "attached":return"subscribed";case "detaching":return"unsubscribing";case "detached":return"unsubscribed";case "failed":return"failed";case "suspended":return"suspended";default:return"unknown"}};var kw,Mw;function Nw(a){a=new Q(a);var b={clientId:S(a,"client_id"),Wh:{Ku:"undefined",flags:new Map},Ae:function(){return!1}},c=hm(a,"settings");if(void 0===c)return w("PushService parseContext failed: settings key does not exist",a),b;c=S(c,"backend");switch(c){case "ably":return new ww(a)}w("PushService parseContext failed: unrecognized backend or critical error in parse",[c,a]);return b}function jw(){return void 0!==kw&&kw.isEnabled()}function xv(){return void 0!==kw&&kw.isConnected()}
function Ow(a){if(void 0!==Mw)return Mw;if(void 0!==kw)return Promise.resolve(kw);if(!a.sm.Ae())return w("Push service context not valid:",a),Promise.reject("Invalid push service context");var b=a.sm.Wh.Ku;try{switch(b){case "ably":kw=new Hw(a)}}catch(d){w("An exception was thrown during client construction:",d)}if(void 0===kw)return Promise.reject("Failed to create a client for backend: "+b);var c=kw;return Mw=new Promise(function(d,e){c.bs().then(function(){Mw=void 0;d(c)}).catch(function(f){Mw=void 0;e(f)})})}function gw(){if(void 0===kw)throw Error("PushServiceClient accessed before it's been created");return kw}function fw(a){if(!jw())throw Error("PushServiceClient accessed before it's ready");var b=gw();return Dw(b.auth,a)?new Promise(function(c){uw(b.auth).then(function(){c(b.auth.getCapabilities())}).catch()}):Promise.resolve(b.auth.getCapabilities())}
function rw(a){if(!jw())return[];var b=gw(),c=[];a=q(a);for(var d=a.next();!d.done;d=a.next())d=d.value,Cw(b.auth,d)?c.push(Pw(d)):w("Push Attempting to subscribe to topic",d);return c}
function Pw(a){var b=void 0===b?function(){}:b;var c=void 0===c?!1:c;if(jw()){var d=gw();return(new Promise(function(e,f){c?(Fw(d.auth,a),uw(d.auth).then(e).catch(f)):e()})).then(function(){return d.ss(a)?Promise.resolve():d.subscribe(a)}).catch(function(e){rm(d,"subscribe_failure",{topic:a.Bc(),auth:d.auth.Vh(),message:e.message});b(e)})}}
function Qw(a){var b=void 0===b?!1:b;var c=gw();return c.unsubscribe(a).then(function(){return b?(Gw(c.auth,a),uw(c.auth)):Promise.resolve()}).catch(function(d){rm(c,"unsubscribe_failure",{topic:a.Bc(),auth:c.auth.Vh(),message:d.message})})}function nw(a){if(!jw())return[];var b=[];a=q(a);for(var c=a.next();!c.done;c=a.next())b.push(Qw(c.value));return b}function Jv(a){return jw()?gw().ss(a):!1}
function Kw(a){if(!jw()||void 0===kw)return[];var b=kw.Zk,c=new Set(Object.keys(a)),d=[];b.forEach(function(e){c.has(e.Bc())||d.push(Qw(e))});return d}try{var Rw=new Uint8Array(1);pb(Rw)}catch(a){}new D("ready",{fe:1});var sw=new D("PushServiceClosed",{fe:1});function Sw(a,b,c){var d=this;this.wc=a;this.wk=!1;this.oC=this.wc.querySelector(".followed_counts");G(this.wc,"gender-tab");G(this.wc,"tabAnchor");G(this.wc,"tabBorder");G(this.wc,"tabInactiveColor");G(this.wc,"tabInactiveBgColor");this.wc.style.borderBottomStyle="solid";this.wc.style.borderBottomWidth="1px";P(a,{whiteSpace:"nowrap",display:"inline-block",cursor:"pointer",boxSizing:"border-box",WebkitTextSizeAdjust:"none"});this.ef=pn;this.ef.wf=cn(this.wc.innerText);Tw(this);a={username:c,wb:b,Yp:function(e){Tw(d);0===e.Fy.length&&(d.wk=!1,Uw(d))},Sk:function(e,f){Tw(d);d.wk=0<e.ou.length;Uw(d);e.Hi&&!f&&d.Hi()},VA:function(){Tw(d);clearInterval(d.Ii);d.Ii=void 0;d.wk=!1;Uw(d)},Uc:new sn(this.wc,b),WA:this};this.Uc=a.Uc;this.Uc.ah.j(function(e){if(e.Xc){clearInterval(d.Ii);d.Ii=void 0;d.wk=!1;Uw(d);A("FollowedDropdownOpened",{onlineBroadcasters:d.ef.wf.Ih});if(t()&&(e=window.localStorage.getItem("onlineFollowedTab"),null!==e)){e=JSON.parse(e);for(var f=q(e.unseenRooms),g=f.next();!g.done;g=f.next())e.seenRooms[g.value.room]=!0;e.timestamp=Date.now();e.flash=!1;e.unseenRooms=[];window.localStorage.setItem("onlineFollowedTab",JSON.stringify(e))}t()&&window.localStorage.setItem("followedDropdownClicked",JSON.stringify({timestamp:Date.now()}))}});this.ef.$d(a)}Sw.prototype.Hi=function(){var a=this;if(void 0===this.Ii){var b=3,c=!0;this.Ii=window.setInterval(function(){if(c){if(G(a.wc,"orange"),--b,0===b){clearInterval(a.Ii);a.Ii=void 0;return}}else H(a.wc,"orange");c=!c},500)}};function Tw(a){var b=a.ef.wf;a.wc.style.width="auto";a.oC.textContent="("+b.Ih+"/"+b.total+")";null!==a.wc.offsetParent&&window.setTimeout(function(){a.wc.style.width=a.wc.offsetWidth+1+"px";a.Uc.nb()&&a.Uc.Mh()})}function Uw(a){a.wk&&!a.Uc.nb()?G(a.wc,"orange"):H(a.wc,"orange")};function Vw(a){F.call(this,a);a=a.querySelector(".nav");null!==a&&a instanceof HTMLElement&&Ak(a,["padding-left","padding-right"],10,65,800);a=document.querySelector(".footer-holder .langs");null!==a&&a instanceof HTMLElement&&Ak(a,["padding-left","padding-right"],10,65,800);var b=document.querySelector(".footer-holder .footer-cb-address");null!==b&&b instanceof HTMLElement&&Ak(b,"margin-left",-55,0,589,function(c){0===c&&(b.style.marginLeft="")})}r(Vw,F);function Ww(a){F.call(this,a);Xw();Yw();Zw();a=document.querySelector("#user_information");null!==a&&a instanceof HTMLElement&&Ak(a,"margin-right",4,12,600)}r(Ww,F);function Zw(){var a=document.getElementById("nav");if(null!==a){var b=new F(a);Array.from(a.children).forEach(function(g){if(g instanceof HTMLLIElement){var h=new Gl(g);$b(b,h);h.element.style.display="block";g=h.element.firstChild;if(null!==g&&g instanceof HTMLAnchorElement){var m=getComputedStyle(g);g.style.color=m.color;g.style.font=m.font;g.style.fontFamily=m.fontFamily;g.style.fontWeight=m.fontWeight;g.style.fontSize=m.fontSize}h.Zo.j(function(n){h.element.style.padding=n?"8px 4px":""})}});var c=new xl("li",!0);b.H(c);lk(c.element);P(c,{border:"1px solid transparent",borderRadius:"4px 4px 0 0",height:"30px",top:"6px",width:"39px",paddingTop:"3px",color:Oc.Cx});c.Wd.ah.j(function(g){c.element.style.border=g.Xc?"1px solid "+Oc.Np:"1px solid transparent"});P(c.Wd,{borderColor:""+Oc.Np,padding:"8px 20px 8px 8px"});if(null!==a.parentElement){for(var d=0,e=q(a.parentElement.children),f=e.next();!f.done;f=e.next())f=f.value,f!==a&&f instanceof HTMLElement&&(d+=f.offsetWidth);c.Yg.element.style.width=d+"px"}}}function Yw(){var a=document.querySelector("#header .ad");if(null!==a&&a instanceof HTMLElement){var b=document.querySelector(".right_section"),c=nk(null!==a.firstElementChild&&a.firstElementChild instanceof HTMLElement?a.firstElementChild:a).right;yk.j(function(){a.style.display=(null===b?document.body.offsetWidth:b.offsetLeft)-25<c?"none":"block"})}}
function Xw(){var a=document.querySelector(".logo-zone");if(null!==a&&a instanceof HTMLElement){var b=document.querySelector(".logo-zone svg"),c=document.querySelector(".logo-zone strong:last-child");Ak(a,"padding-left",8,15,600);Ak(a,"padding-top",12,6,600);null!==b&&b instanceof HTMLElement&&(Ak(b,"width",145,198,600),Ak(b,"height",45,61,600));null!==c&&c instanceof HTMLElement&&(Ak(c,"font-size",8,10,600),Ak(c,"padding-left",13,17,600));var d=document.querySelector(".logo-zone .logo");if(null!==d&&d instanceof HTMLElement){var e=d.clientWidth;e>500-sk()&&yk.j(function(){d.style.maxWidth=e+d.offsetLeft>ck()?ck()-d.offsetLeft-1+"px":""})}}};function $w(a,b,c){this.wb=a;this.wC=b;this.Gc=c;ax(this)}function ax(a){a.Bn();Bn(Cn(),function(){a.Bn()})}$w.prototype.Bn=function(){var a=this,b=document.getElementById(this.wC);if(null!==b){var c={};b=q(b.querySelectorAll("div.icon_following, div.icon_not_following"));for(var d=b.next();!d.done;c={mn:c.mn},d=b.next())c.mn=d.value,c.mn.onclick=function(e){return function(){bx(a,e.mn)}}(c)}};function cx(a){a.classList.remove("icon_update_following");a.classList.add("icon_following");a.classList.add("no_hover");window.setTimeout(function(){a.classList.remove("no_hover")},3E3);a.title=Ge}function dx(a,b){b.classList.remove("icon_not_following");b.classList.add("icon_update_following");var c=b.getAttribute("data-slug");null!==c&&(c=Es(c,a.wb),void 0!==c&&c.then(function(d){d?cx(b):ex(a,b)}).catch())}
function fx(a){a.classList.remove("icon_update_following");a.classList.add("icon_not_following");a.classList.add("no_hover");window.setTimeout(function(){a.classList.remove("no_hover")},3E3);a.title=He}function ex(a,b){b.classList.remove("icon_following");b.classList.add("icon_update_following");var c=b.getAttribute("data-slug");null!==c&&(void 0!==Fs(c,a.wb)?fx(b):(b.classList.remove("icon_update_following"),b.classList.add("icon_following")))}
function bx(a,b){b.classList.contains("icon_following")?ex(a,b):b.classList.contains("icon_not_following")&&(a.wb?a.Gc?uc("To follow this broadcaster, please create an account or login now.",function(){window.location.href="/accounts/auth/login/?next="+window.location.pathname}):Qm(!0):dx(a,b))};function gx(a,b){v("mouseover",a,function(){var c,d=0,e=a.getBoundingClientRect(),f=a.getBoundingClientRect(),g=Math.round(e.top+window.pageYOffset);e=Math.round(e.left+window.pageXOffset);300>window.innerHeight-g+window.pageYOffset&&(d=258);var h=null===(c=a.nextElementSibling)||void 0===c?void 0:c.cloneNode(!0);void 0!==h&&(h.style.display="",c=b.firstChild,null!==c?b.replaceChild(h,c):b.appendChild(h),b.style.display="");c=b.getBoundingClientRect();b.style.left=e+f.width/2-c.width/2+"px";b.style.top=g+f.height+8-d+"px"});v("mouseleave",a,function(){b.style.display="none"})};function hx(){window.setTimeout(function(){mj||location.reload();lj.j(function(){location.reload()})},1728E5)};function ix(){[].concat(ha(document.querySelectorAll(".list-view"))).forEach(function(a){var b=a.querySelector(".list-view-user-info");if(null!==b){var c=a.querySelector(".list-view-broadcaster-cell");if(null!==c){var d=a.offsetWidth*(1-b.offsetWidth/a.offsetWidth);c.style.width=d+"px";d*=101/180;c.style.height=d+"px";b.style.height=d+"px"}b=a.querySelector(".subject");if(null!==b){var e=a.querySelector(".additional-info");d=a.querySelector(".clear-list");var f=a.querySelector(".user-info-top");c=parseInt(getComputedStyle(b).lineHeight);var g=0;if(null!==e){var h=getComputedStyle(e);g=e.offsetHeight+parseInt(h.bottom);h=e.clientWidth-parseInt(h.paddingLeft)-parseInt(h.paddingRight);e=e.querySelector(".location");if(null!==e){var m=e.querySelector(".icon-location"),n=e.querySelector(".location-inner");m=null!==m?m.clientWidth:0;null!==n&&(n.style.maxWidth=.5*h-(m+parseInt(getComputedStyle(n).paddingLeft))+"px");e.style.maxWidth=.5*h+"px"}}a=a.clientHeight;h=c;0!==a&&(h=a-g-(null===f?0:f.offsetHeight)-
(null===d?0:d.offsetHeight));a=Math.floor(h/c);b.style.webkitLineClamp=a.toString();b.style.height=a*c+"px"}}})};function jx(a){var b=new URLSearchParams(window.location.search);a.forEach(function(c,d){""===c?b.delete(d):b.set(d,c)});a=b.toString().replace(/%2C/g,",");a=""===a?"":"?"+a;a!==document.location.search&&"replaceState"in window.history&&window.history.replaceState("","",Fc(a,location.pathname))};function kx(a){a=void 0===a?!1:a;F.call(this,tk());var b=this;this.Gc=a;this.Jk=this.ik=!1;this.Ch=(new Sb("hpfilter1")).active||(new Sb("hpfilter2")).active||(new Sb("hpfilter3")).active;this.uz=function(){var c=document.querySelector("#id_show_location"),d=null!==c?c.checked:!1;c=document.querySelectorAll(".subject");var e=document.querySelectorAll(".location"),f=new Sb("MblRmImgVar3");if(d){if(d=document.querySelector(".followed_online_offline"),null===d||"offline"!==d.getAttribute("data-status"))c.forEach(function(g){f.active||(g.style.height=(b.Gc?15:16)+"px")}),e.forEach(function(g){g.style.display=""})}else c.forEach(function(g){f.active||(g.style.height=(b.Gc?30:32)+"px")}),e.forEach(function(g){g.style.display="none"});f.active&&ix();lx(b)};this.open=function(){b.Za();A("RoomsFilterOpened")};this.close=function(){b.Oa();A("RoomsFilterClosed")};this.toggle=function(){b.nb()?b.Oa():b.Za();A("AdvancedSearchOptionsClicked")};this.Bq=function(){var c=document.querySelectorAll(".advanced_search_region"),d=document.querySelector("#main");null!==d&&c.forEach(function(e){e.onclick=function(){b.Za();Ya().scrollTop>d.offsetTop&&(window.location.href="#main")}})};this.Ny=function(){b.Jk=null!==b.mi?b.mi.checked:!1};this.Hs=document.querySelector("#main .content");mx(this);nx(this);this.Ch&&ox(this);px(this);qx(this);this.Bq();rx(this);sx();tx(this);ux();vx();this.uz();Bn(Cn(),this.uz);Bn(Cn(),this.Bq);this.ik&&On(this.Jk);wx(this)}r(kx,F);function xx(a,b,c,d){d.style.cursor="default";d.style.opacity="0.5";c.style.cursor="default";var e=N("a",{href:"/supporter/upgrade/",onClick:function(){A("SupporterPageOpened",{source:"AnimateRoomImagesTooltip"})}},Dd),f=Ek({content:oi+" ",hasHTML:!1,width:"295",divotPosition:"0",divotLeftOrTop:"40px"});f.appendChild(e);f.id="disabled_tooltip";f.style.marginTop="5px";f.style.marginLeft="42px";f.onmouseover=function(){f.style.display="block"};f.onmouseout=function(){window.setTimeout(function(){f.matches(":hover")||d.matches(":hover")||(f.style.display="none")},500)};a.Ch&&(f.style.left="-28px",f.style.width="171px");d.onmouseover=function(){f.style.display="block"};d.onmouseout=function(){window.setTimeout(function(){f.matches(":hover")||d.matches(":hover")||(f.style.display="none")},500)};c.readOnly=!0;c.onclick=function(){};b.appendChild(f)}
function ox(a){var b=document.querySelector("#filter_gender_form");null!==b&&(b.onchange=function(){yx(a,b)},b.querySelectorAll("input[type=checkbox]").forEach(function(c){v("change",c,function(){A("RoomsFilterGenderClicked",{gender:c.value,checked:c.checked})})}))}
function px(a){var b=document.querySelector("#filter_location_form");null!==b&&(b.onchange=function(){yx(a,b)},b.querySelectorAll("input[type=checkbox]").forEach(function(c){v("change",c,function(){A("RoomsFilterRegionClicked",{region:c.value,checked:c.checked})})}))}
function qx(a){var b=document.querySelector("#filter_options_form");null!==b&&(b.onchange=function(){yx(a,b)},b.querySelectorAll("input[type=checkbox]").forEach(function(c){v("change",c,function(){for(var d=c.name.toLowerCase().split("_"),e=0;e<d.length;e+=1)d[e]=d[e].charAt(0).toUpperCase()+d[e].slice(1);A(d.join("")+"Clicked",{checked:c.checked})})}))}
function mx(a){var b=document.querySelector("#animate_thumbnails_form");a.mi=document.querySelector("#id_animate_thumbnails");if(null!==b){if(null!==a.mi){var c=a.mi;c.disabled||(a.ik=!0);a.Jk=a.mi.checked;c.onchange=function(){a.ik&&(yx(a,b),void 0!==document.setAnimateFollowedTab&&document.setAnimateFollowedTab(a.Jk))}}var d=b.querySelector("label[for='id_animate_thumbnails']");null!==d&&(d.onclick=function(){var e=d.querySelector("input");null!==e&&e instanceof HTMLInputElement&&A("AnimateRoomImagesClicked",{checked:e.checked})});a.ik||null!==a.mi&&null!==d&&xx(a,b,a.mi,d)}}function lx(a){if(a.Ch){var b=document.querySelector(".collapse-filters");document.querySelector(".expand-filters").onclick=a.open;b.onclick=a.close}else b=document.querySelector(".advanced_search_button"),null!==b&&(b.onclick=a.toggle)}
function zx(a){a.Za();var b=document.querySelector("label[for='id_enable_floatingplayer']");if(null!==b){var c=b.style.color;b.style.color="#ff6b00";a.Ch&&window.setTimeout(function(){jx(new Map([["advanced_options",""]]));b.scrollIntoView({behavior:"auto",block:"center",inline:"center"})},500);a.Sv.onclick=function(){b.style.color=c}}}
function nx(a){var b=document.querySelector("#floatingplayer_options_form");if(null!==b){a.Sv=b;window.location.search.includes("advanced_options")&&zx(a);var c=document.querySelector("#id_enable_floatingplayer");null!==c&&(c.onchange=function(){z(b.action,new FormData(a.Sv)).then(function(){var d=c.checked;A("EnableFloatingPlayerOption",{isEnabled:d});d?void 0!==document.enableFloatingPlayer&&document.enableFloatingPlayer():void 0!==document.disableFloatingPlayer&&document.disableFloatingPlayer()}).catch()})}}
function yx(a,b){clearTimeout(a.Yx);a.Ny();var c=document.querySelectorAll(".searching-overlay");c.forEach(function(d){Ax(d);d.style.display="block"});z(b.action,new FormData(b)).then(function(){a.ik&&On(a.Jk);a.Bq();wx(a);Fn(Cn(),function(){c.forEach(function(d){Ax(d)});clearTimeout(a.Yx);a.Yx=window.setTimeout(function(){c.forEach(function(d){d.style.display="none"})},300)})}).catch()}
function Ax(a){var b=a.nextElementSibling;if(null!==b){if("discover_root"!==b.id){var c=b.querySelector(".list");null===c&&(c=b.lastElementChild);b=null===c?void 0:c}}else b=void 0;c=b;if(void 0!==c){var d=c.getBoundingClientRect().width;b=c.getBoundingClientRect().height;a.style.height=b+"px";a.style.left=c.offsetLeft+"px";a.style.top=c.offsetTop+"px";a.style.right=document.documentElement.clientWidth-c.offsetLeft-d+"px";a.style.lineHeight=b+"px";a=a.querySelector(".searching-overlay-spinner");null!==a&&(50>b?(a.classList.add("searching-overlay-spinner-very-small"),a.classList.remove("searching-overlay-spinner-small"),a.classList.remove("searching-overlay-spinner-medium")):50<=b&&200>b?(a.classList.remove("searching-overlay-spinner-very-small"),a.classList.add("searching-overlay-spinner-small"),a.classList.remove("searching-overlay-spinner-medium")):200<=b&&550>b?(a.classList.remove("searching-overlay-spinner-very-small"),a.classList.remove("searching-overlay-spinner-small"),a.classList.add("searching-overlay-spinner-medium")):(a.classList.remove("searching-overlay-spinner-very-small"),a.classList.remove("searching-overlay-spinner-small"),a.classList.remove("searching-overlay-spinner-medium")))}}function sx(){var a=document.querySelector("#id_enable_recommendations");null!==a&&(a.onchange=function(){A("EnableRecommendationsOptionClicked",{isEnabled:a.checked})})}
function rx(a){var b=document.querySelector("#refresh_cams_form");null!==b&&(b.onchange=function(){var c=b.querySelector("#id_refresh_frequency");if(null!==c){var d=parseInt(c.value);a.Ny();z(b.action,new FormData(b)).then(function(){A("RefreshFrequencyChanged",{seconds:d});a.ik&&On(a.Jk);Fn(Cn(),function(){clearTimeout(zn);0!==d&&En(1E3*d)})}).catch()}})}
kx.prototype.Za=function(){this.nb()||(this.Ch?(this.Hs.classList.remove("collapsed"),t()&&localStorage.setItem("homepageFiltersCollapsed","false")):this.element.classList.remove("collapsed"))};kx.prototype.Oa=function(){this.nb()&&(this.Ch?(this.Hs.classList.add("collapsed"),t()&&localStorage.setItem("homepageFiltersCollapsed","true")):this.element.classList.add("collapsed"))};kx.prototype.nb=function(){return this.Ch?!this.Hs.classList.contains("collapsed"):!this.element.classList.contains("collapsed")};function wx(a){if(a.Ch){a=Bx("#filter_gender_form input[type=checkbox]:checked");var b=Bx("#filter_gender_form input[type=checkbox]"),c=Bx("#filter_location_form input[type=checkbox]:checked"),d=Bx("#filter_location_form input[type=checkbox]");jx(new Map([["g",a===b?"":a.replace("s","t")],["r",c===d?"":c]]))}}
function tx(a){var b=a.element.querySelector(".show-type");null!==b&&v("change",b,function(){A("RoomsFilterShowTypeChanged",{showType:b.options[b.selectedIndex].text.toLowerCase().split(" ")[0]});window.location.href=b.value})}function ux(){document.querySelectorAll("#hashtag_ticker a").forEach(function(a){v("click",a,function(){A("RoomsFilterTagsClicked",{tagName:a.textContent})})})}
function vx(){var a=document.querySelector(".search_input"),b=document.querySelector("#search_icon"),c=document.querySelector(".suggestionsDiv");if(null!==a&&null!==b&&null!==c){var d=function(){A("RoomsFilterSearchClicked",{keyword:a.value})};[b,c].forEach(function(e){v("click",e,function(){d()},!0)});[a,b,c].forEach(function(e){v("keydown",e,function(f){"Enter"!==f.key&&13!==f.keyCode||d()},!0)})}}
function Bx(a){return Array.from(document.querySelectorAll(a)).filter(function(b){return null!==b.parentElement&&-1===b.parentElement.className.indexOf("transparentCheckbox")}).map(function(b){return b.value}).join(",")};function Cx(a){this.yy=1;this.et(a);Ja.current=this.context;this.$d();window.matchMedia("(prefers-color-scheme: dark)").matches&&""===yb("theme_name")&&new Sb("DrkSysStngs",!0)}k=Cx.prototype;k.et=function(a){var b=a.logged_in_user;b=null!==b?{username:b.username,Ki:b.gender,Si:b.is_supporter,CB:b.is_staff,ob:b.token_balance,XH:b.user_uid,tH:b.signed_username,Tz:b.animate_thumbnails,hb:b.is_age_verified,Eb:b.is_broadcasting,RH:b.total_followed,wf:b.online_followed}:void 0;this.context={CA:a.current_logo,WB:a.no_ads,Gc:a.is_mobile,xb:b,sm:Nw(a.push_service),Oj:a.dark_mode_enabled,lG:a.chat_settings.max_pm_age,lx:a.JPEG_STREAM_URL,kx:a.JPEG_ROOM_IMAGE_URL,mv:a.entrypoint_context_id,cx:void 0,fE:a.bio_quarantine_phase,eE:a.bio_is_custom};t()&&(a=window.localStorage.getItem("contextID"),window.localStorage.setItem("contextID",this.context.mv),this.context.cx=a===this.context.mv)};k.$d=function(){if(this.context.Gc){var a,b;hx();Fm=null!==(a=this.context.lx)&&void 0!==a?a:"https://cbjpeg.stream.highwebmedia.com/";Gm=null!==(b=this.context.kx)&&void 0!==b?b:"https://roomimg.stream.highwebmedia.com/";Dx(this,!0);this.roomReload=Gn();Ex(this);new kx(!0);Fx()}else Gx(this)};function Gx(a){var b,c;hx();Fm=null!==(b=a.context.lx)&&void 0!==b?b:"https://cbjpeg.stream.highwebmedia.com/";Gm=null!==(c=a.context.kx)&&void 0!==c?c:"https://roomimg.stream.highwebmedia.com/";Dx(a,!1);Hx(a);Ix(a);a.Bn();Jx();Kx();Lx();Ex(a);Mx();Nx();void 0===a.context.xb&&("/auth/login/"!==window.location.pathname&&Ox(),void 0!==wb().join_overlay&&"/accounts/register/"!==window.location.pathname&&a.Tt());Px();a.context.WB||Qx();Rx();Sx();Vq(void 0===a.context.xb);a.roomReload=Gn();a.displayLoginOverlay=Qm;a.openFeedbackForm=function(d){Ps.h({source:d})};a.showModal=Qn}function Ex(a){function b(){Ow(c).then(function(e){a.oq(e,c);return uw(e.auth).then(function(){hw(e.auth.getCapabilities());tw(e)})}).catch(function(e){u("Push service failed to initialize - disabling:",e);--a.yy;0<=a.yy&&window.setTimeout(function(){Ex(a)},3E4)})}var c=a.context;if(mj)b();else{var d=function(e){e&&(b(),lj.removeListener(d))};lj.j(d)}}k.oq=function(a,b){void 0!==b.xb&&a.auth.zf.push("user:"+b.xb.username)};k.Tt=function(){Ot();It.h(void 0);var a;Gt.j(function(b){void 0===a&&(a=new Ht);window.scrollTo(0,0);a.nf(b)})};function Px(){var a=new tt;Ps.j(function(b){var c=a.form;c.source.value=b.source;et(c);void 0!==b.Cm&&a.form.Cm.Jd(b.Cm);a.show()})}function Ox(){for(var a=q(document.querySelectorAll("a.login-link")),b=a.next();!b.done;b=a.next())b.value.onclick=function(c){c.preventDefault();Wm()}}function Kx(){v("popstate",window,function(a){void 0!==a.state&&null!==a.state&&location.reload()})}
function Dx(a,b){Ft(void 0!==a.context.xb?a.context.xb.username:"",void 0===b?!1:b,a.context.Oj)}function Hx(a){for(var b=q(document.querySelectorAll(".purchase_tokens a, a.purchase_tokens")),c=b.next();!c.done;c=b.next())c=c.value,void 0!==a.context.xb?gl(c):c.onclick=function(d){Qm();d.preventDefault()}}function Qx(){for(var a=q(document.querySelectorAll(".remove_ads a")),b=a.next();!b.done;b=a.next())b.value.onclick=function(){A("HideAds_Click")}}
function Rx(){if(window.hasOwnProperty("ReportingObserver")){var a=function(c){c=q(c);for(var d=c.next();!d.done;d=c.next())d=d.value,"intervention"===d.type&&A("AdIntervention",{report:JSON.stringify(d.body)})},b=new window.ReportingObserver(function(c){a(c)},{buffered:!0});b.observe();v("beforeunload",window,function(){var c=b.takeRecords();a(c)})}}
function Ix(a){var b=document.getElementById("followed_anchor");if(null!==b&&b instanceof HTMLAnchorElement){b.href="#";var c=document.getElementById("followed_tab");b=null!==c&&((new Sb("hpfilter1")).active||(new Sb("hpfilter2")).active)?c:b;new Sw(b,void 0===a.context.xb,void 0!==a.context.xb?a.context.xb.username:"")}}
function Mx(){var a=document.querySelector("#header");null!==a&&a instanceof HTMLElement&&new Ww(a);a=document.querySelector(".footer-holder");null!==a&&a instanceof HTMLElement&&new Vw(a)}
function Nx(){function a(b){var c={};b=q(document.querySelectorAll(b+" input[type='checkbox']"));for(var d=b.next();!d.done;c={Mf:c.Mf,ii:c.ii},d=b.next())d=d.value,c.Mf=d,c.ii=new Eq(16,c.Mf.checked),c.ii.element.style.top="4px",Dq(c.ii,function(e){return function(){e.Mf.click()}}(c)),d=d.parentNode,null!==d&&(d.insertBefore(c.ii.element,c.Mf),c.Mf.style.display="none",c.Mf.disabled&&c.ii.disable(),v("change",c.Mf,function(e){return function(){e.Mf.disabled||Cq(e.ii,e.Mf.checked)}}(c)))}a("#filter_gender_form");a("#filter_location_form");a("#filter_options_form");a("#animate_thumbnails_form");a("#floatingplayer_options_form")}function Lx(){var a;Nv.j(function(b){void 0===a&&(a=new Qv);a.nf(b)})}k.Bn=function(){var a,b=(a=void 0===a?!1:a)?"broadcasters":"room_list",c=document.querySelector("div.icon_not_following"),d=document.querySelector("div.icon_following");null===document.querySelector("#"+b)||null===c&&null===d||new $w(void 0===this.context.xb,b,a)};function Jx(){var a=document.querySelector("#tag_tip"),b=document.querySelectorAll(".room_link[data-roomlink='true']");if(null!==a){b=q(b);for(var c=b.next();!c.done;c=b.next())gx(c.value,a)}}function Sx(){t()&&Object.keys(localStorage).forEach(function(a){a.startsWith("renderedPms_")&&delete localStorage[a]})}function Fx(){(new Sb("MblRmImgVar3")).active&&v("orientationchange",window,function(){function a(){ix();x("resize",window,a)}v("resize",window,a)})}window.TS=Cx;var Tx=window.canAutoplay;function Ux(){var a=new Hr;return new Promise(function(b){function c(f){var g=0;!0===f&&lj.removeListener(d);Za()&&0!==e&&(g=window.performance.now()-e);f=gb();void 0!==f&&10>f&&(a.send(!1,g),b(!1));if(void 0===Tx)w("canAutoplay library is undefined. Resolving autoplay to true"),a.send(!0,g,Error("canAutoplay library is undefined. Resolving autoplay to true")),b(!0);else Tx.video({inline:!0,muted:!0,timeout:1E3,baseUrl:"https://static-assets.highwebmedia.com/"}).then(function(h){a.send(h.result,g,h.error);b(h.result)})["catch"](function(h){a.send(!1,g,h);b(!1)})}function d(f){f&&c(!0)}var e=0;mj?c():(Za()&&(e=window.performance.now()),lj.j(d))})};var Vx=new D("privateJoinInitiated");function Wx(a){var b="tipping/private_show_tokens_per_minute/"+a+"/";return new Promise(function(c,d){Gb(b).then(function(e){e=new Q(e.responseText);c({yx:U(e,"private_show_minimum_minutes"),iy:W(e,"price"),qy:V(e,"recordings_allowed"),Sz:V(e,"allowed",!0,!1)});mm(e)}).catch(function(e){d(e)})})}
function Xx(a){Vx.h(void 0);jl(Hg)||(A("RequestPrivateShow"),Wx(a.B()).then(function(b){if(b.Sz){var c=Kc(a.B(),b.iy,b.yx,b.qy);uc(c,function(){Yx(a,b.iy,b.yx,b.qy).then(function(d){""!==d&&J(d)}).catch(function(d){"privatewatching"!==a.status&&(J(wg),u("Error entering private show: "+d))});A("StartPrivateShow")})}else J(Gg)}).catch())}
function Zx(a){Vx.h(void 0);if(!jl(Ig)){A("RequestSpyShow");var b="tipping/spy_on_private_show_tokens_per_minute/"+a.B()+"/";Gb(b).then(function(c){var d=Number(c.responseText);isNaN(d)?u("isNaN on "+c.responseText):0===d?J(Jg):uc(M(L("Spy on private show for (%(price)s tokens per minute)"),{price:d},!0),function(){$x(a).then(function(e){""!==e&&J(e)}).catch(function(e){"privatespying"!==a.status&&(J(xg),u("Error entering spy show: "+e))});A("StartSpyShow")})}).catch()}}
function ay(a,b){uc(zg,function(){A("LeavePrivateOrSpyShow");by(a).then(function(c){void 0!==b&&b();""!==c&&J(c)}).catch()},function(){void 0!==b&&b()})}function cy(){z("tipping/private_show_approve/",{foo:"bar"}).then(function(){}).catch()}function dy(){z("tipping/private_show_decline/",{foo:"bar"}).then(function(){}).catch()}function ey(){z("tipping/return_from_away/",{foo:"bar"}).then(function(){}).catch()};var fy=new D("switchedToHLS");new D("openTipCalloutRequest");new D("loadRoomRequest");new D("userPanelRequest");new D("sendMessageInputFocus");new D("sendMessageInputBlur");new D("userMenuPmClicked");new D("siteHeaderMenuOpened");function gy(a,b){var c=document.createElement("div");c.innerText=a;c.style.color="#72C0FF";c.style.cursor="pointer";c.style.paddingTop="5px";c.onmouseenter=function(){c.style.textDecoration="underline"};c.onmouseleave=function(){c.style.textDecoration="none"};c.style.pointerEvents="auto";c.onclick=function(d){b(d)};return c}
function hy(a){a=void 0===a?!0:a;F.call(this);var b=this;this.fy=a;this.rk=gy("More Rooms",function(d){Yp.h(void 0);d.stopPropagation()});this.Wg=new Map;this.rf=gy("",function(){});this.WC=!0;this.ek="";this.Ol=!1;this.element.style.display="none";this.element.style.position=this.fy?"fixed":"absolute";this.element.style.height="auto";this.element.style.width="auto";this.element.style.boxSizing="border-box";this.element.style.padding="0 50px";this.element.style.left="0";this.element.style.textAlign="center";this.element.style.pointerEvents="none";this.element.style.zIndex="1";this.xa=document.createElement("div");this.xa.style.fontSize="32px";this.xa.style.lineHeight="32px";this.xa.style.color="#72c0ff";this.xa.style.marginBottom="20px";this.element.appendChild(this.xa);this.body=document.createElement("div");this.body.style.fontSize="16px";this.body.style.color="#ffffff";this.text=document.createElement("span");this.body.appendChild(this.text);this.rk.style.display="none";this.body.appendChild(this.rk);this.rf.style.display="none";this.body.appendChild(this.rf);this.element.appendChild(this.body);var c=new Yb;K.j(function(d){b.mr=d.A;B(d.A.event.ac.j(function(e){iy(b,d.A,e.La)}),c);B(d.A.event.Gw.j(function(e){b.ek=e}),c);B(fy.j(function(){b.hg=!0;iy(b,d.A,d.C.ib)}),c);b.ek=d.C.ek;iy(b,d.A,d.C.ib)});vc.j(function(){Zb(c);b.ek="";b.re=!1});this.Wg.set("away",function(){b.xa.innerText="Performer Is Away";b.text.innerText="You may continue chatting while you wait for the broadcaster to return.";b.rf.style.display="none";jy(b,!0);b.element.style.display="block"});this.Wg.set("privatenotwatching",function(d){b.xa.innerText="Private Show In Progress";b.text.innerText="You may continue chatting while you wait for the broadcaster to return from the private show. If a goal had been set when the broadcaster returns it will continue where it left off.";void 0===b.hg?u("unexpected"):!0===b.hg&&(b.rf.innerText="SPY ON THIS PRIVATE SHOW",b.rf.style.display="block",b.rf.onclick=function(){Zx(d)},b.rf.style.display="block");jy(b,!0);b.element.style.display="block"});this.Wg.set("hidden",function(){b.xa.innerText="Cam is Hidden";b.text.innerText=b.ek;b.rf.style.display="none";jy(b,!1);b.element.style.display="block"});this.Wg.set("offline",function(){b.xa.innerText="Offline";b.text.innerText="The member you are trying to view is currently offline. Please wait or choose another member to view.";b.rf.style.display="none";b.element.style.display="block";jy(b,!0)});this.Wg.set("passwordprotected",function(){b.xa.innerText="Password Required";b.text.innerText="The broadcaster has set a password which is required for viewing. If you know the password, refresh this page to enter it.";b.rf.style.display="none";jy(b,!0);b.element.style.display="block";I()&&nc()})}r(hy,F);hy.prototype.D=function(){this.element.style.visibility="hidden"};hy.prototype.show=function(){this.element.style.visibility=""};hy.prototype.St=function(a){this.re=a;void 0!==this.mr&&iy(this,this.mr,this.mr.status)};hy.prototype.G=function(){if(void 0!==this.parent){var a=this.parent.element.getBoundingClientRect(),b=document.documentElement.clientWidth,c=document.documentElement.clientHeight;a.width<=b?(this.element.style.width=a.width+"px",this.fy&&(this.element.style.left=a.left+"px")):(this.element.style.width=b+"px",this.element.style.left="0");this.element.style.top=a.height<=c?"fixed"===this.parent.element.style.position?a.top+.5*a.height-.5*this.element.offsetHeight+"px":.5*a.height-.5*this.element.offsetHeight+
"px":.5*c-.5*this.element.offsetHeight+"px";this.element.style.maxHeight=a.height+"px"}};function iy(a,b,c){a.re&&(c="offline");var d=a.Wg.get(c);if(void 0!==d)d(b),a.Y();else switch(a.Ol||(a.rk.style.display="none",a.element.style.display="none"),c){case "public":case "privaterequesting":case "privatewatching":case "privatespying":case "notconnected":break;default:w("unexpected status: "+c)}}function jy(a,b){var c=a.Ol&&!a.re;a.rk.style.display=void 0!==b&&!b||c||!a.WC?"none":"block"};function ky(){return new Promise(function(a,b){Gb("api/broadcastvideocontext/").then(function(c){a(ly(c.responseText))}).catch(b)})}function ly(a){return new Promise(function(b,c){var d=new Q(a);400<=W(d,"status",!1)?c("Bad response from server: "+a):(c={B:T(d,"room"),at:T(d,"originHost"),bC:T(d,"originPassword"),cC:T(d,"originWSEndpoint")},b(c))})};var my=new D("tryFullScreen");var ny;ny=[];for(var oy=0;256>oy;++oy)ny[oy]=(oy+256).toString(16).substr(1);var py=[[640,360],[960,540],[1280,720]];function qy(a,b){void 0===b&&(b=200);a.forEach(function(c){c.stop()});return new Promise(function(c){window.setTimeout(function(){c()},b)})}var ry=new D("FirefoxPermanentPermissionError");function sy(){return new Promise(function(a,b){navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(function(c){qy(c.getTracks(),void 0).then(function(){navigator.mediaDevices.enumerateDevices().then(function(d){d=Promise.all(d.map(function(f){if("videoinput"===f.kind){var g=new Map;py.forEach(function(h){var m=h[0];h=h[1];if(cb()&&bb()&&960===m&&540===h)m=void 0;else{var n=m/h;m={id:m+"x"+h,Mj:f.deviceId,label:m+" x "+h,width:m,height:h,ratio:n,Hg:1.4<n,AB:720<=h}}void 0!==m&&g.set(m.id,m)});return Promise.resolve({device:f,resolutions:g})}return Promise.resolve({device:f})}));var e={Ls:new Map,gl:new Map};d.then(function(f){var g=!0;f.forEach(function(h){var m=h.device;""!==m.label&&(g=!1);"audioinput"===m.kind?e.Ls.set(m.deviceId,{id:m.deviceId,label:m.label}):"videoinput"===m.kind&&void 0!==h.resolutions&&0<h.resolutions.size&&e.gl.set(m.deviceId,{id:m.deviceId,label:m.label,xy:h.resolutions})});g?(ry.h(void 0),b(Error("We need PERMANENT permission to use your camera and microphone in order to proceed."))):a(e)}).catch(function(f){b(f)})}).catch()}).catch()}).catch(function(c){b(c)})})};var ty;ty={v:[{name:"version",U:/^(\d*)$/,S:"%s"}],o:[{name:"origin",U:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,S:"%s %s %d %s IP%d %s",names:"username sessionId sessionVersion netType ipVer address".split(" ")}],s:[{name:"name",U:/(.*)/,S:"%s"}],i:[{name:"description",U:/(.*)/,S:"%s"}],u:[{name:"uri",U:/(.*)/,S:"%s"}],e:[{name:"email",U:/(.*)/,S:"%s"}],p:[{name:"phone",U:/(.*)/,S:"%s"}],z:[{name:"timezones",U:/(.*)/,S:"%s"}],r:[{name:"repeats",U:/(.*)/,S:"%s"}],t:[{name:"timing",U:/^(\d*) (\d*)/,S:"%d %d",names:["start","stop"]}],c:[{name:"connection",U:/^IN IP(\d) (\S*)/,S:"IN IP%d %s",names:["version","ip"]}],b:[{push:"bandwidth",U:/^(TIAS|AS|CT|RR|RS):(\d*)/,S:"%s:%s",names:["type","limit"]}],m:[{U:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,S:"%s %d %s %s",names:["type","port","protocol","payloads"]}],a:[{push:"rtp",U:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],S:function(a){return void 0!==a.encoding?"rtpmap:%d %s/%s/%s":void 0!==a.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",U:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],S:"fmtp:%d %s"},{name:"control",U:/^control:(.*)/,S:"control:%s"},{name:"rtcp",U:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],S:function(a){return void 0!==a.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",U:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],S:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",U:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],S:function(a){return void 0!==a.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",U:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],S:function(a){return"extmap:%d"+(void 0!==a.direction?"/%s":"%v")+(void 0!==a["encrypt-uri"]?" %s":"%v")+" %s"+(void 0!==a.config?" %s":"")}},{name:"extmapAllowMixed",U:/^(extmap-allow-mixed)/,S:"%s"},{push:"crypto",U:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],S:function(a){return void 0!==a.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",U:/^setup:(\w*)/,S:"setup:%s"},{name:"connectionType",U:/^connection:(new|existing)/,S:"connection:%s"},{name:"mid",U:/^mid:([^\s]*)/,S:"mid:%s"},{name:"msid",U:/^msid:(.*)/,S:"msid:%s"},{name:"ptime",U:/^ptime:(\d*)/,S:"ptime:%d"},{name:"maxptime",U:/^maxptime:(\d*)/,S:"maxptime:%d"},{name:"direction",U:/^(sendrecv|recvonly|sendonly|inactive)/,S:"%s"},{name:"icelite",U:/^(ice-lite)/,S:"%s"},{name:"iceUfrag",U:/^ice-ufrag:(\S*)/,S:"ice-ufrag:%s"},{name:"icePwd",U:/^ice-pwd:(\S*)/,S:"ice-pwd:%s"},{name:"fingerprint",U:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],S:"fingerprint:%s %s"},{push:"candidates",U:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:"foundation component transport priority ip port type raddr rport tcptype generation network-id network-cost".split(" "),S:function(a){var b="candidate:%s %d %s %d %s %d typ %s"+(void 0!==a.raddr?" raddr %s rport %d":"%v%v");b+=void 0!==a.tcptype?" tcptype %s":"%v";void 0!==a.generation&&(b+=" generation %d");b+=void 0!==a["network-id"]?" network-id %d":"%v";return b+=void 0!==a["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",U:/^(end-of-candidates)/,S:"%s"},{name:"remoteCandidates",U:/^remote-candidates:(.*)/,S:"remote-candidates:%s"},{name:"iceOptions",U:/^ice-options:(\S*)/,S:"ice-options:%s"},{push:"ssrcs",U:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],S:function(a){var b="ssrc:%d";void 0!==a.attribute&&(b+=" %s",void 0!==a.value&&(b+=":%s"));return b}},{push:"ssrcGroups",U:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],S:"ssrc-group:%s %s"},{name:"msidSemantic",U:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],S:"msid-semantic: %s %s"},{push:"groups",U:/^group:(\w*) (.*)/,names:["type","mids"],S:"group:%s %s"},{name:"rtcpMux",U:/^(rtcp-mux)/,S:"%s"},{name:"rtcpRsize",U:/^(rtcp-rsize)/,S:"%s"},{name:"sctpmap",U:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],S:function(a){return void 0!==a.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",U:/^x-google-flag:([^\s]*)/,S:"x-google-flag:%s"},{push:"rids",U:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],S:function(a){return void 0!==a.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",U:/^imageattr:(\d+|\*)[\s\t]+(send|recv)[\s\t]+(\*|\[\S+\](?:[\s\t]+\[\S+\])*)(?:[\s\t]+(recv|send)[\s\t]+(\*|\[\S+\](?:[\s\t]+\[\S+\])*))?/,names:["pt","dir1","attrs1","dir2","attrs2"],S:function(a){return"imageattr:%s %s %s"+(a.dir2?" %s %s":"")}},{name:"simulcast",U:/^simulcast:(send|recv) ([a-zA-Z0-9\-_~,]+)(?:\s?(send|recv) ([a-zA-Z0-9\-_~,]+))?$/,names:["dir1","list1","dir2","list2"],S:function(a){return"simulcast:%s %s"+(a.dir2?" %s %s":"")}},{name:"simulcast_03",U:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],S:"simulcast: %s"},{name:"framerate",U:/^framerate:(\d+(?:$|\.\d+))/,S:"framerate:%s"},{name:"sourceFilter",U:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],S:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",U:/^(bundle-only)/,S:"%s"},{name:"label",U:/^label:(.+)/,S:"label:%s"},{name:"sctpPort",U:/^sctp-port:(\d+)$/,S:"sctp-port:%s"},{name:"maxMessageSize",U:/^max-message-size:(\d+)$/,S:"max-message-size:%s"},{name:"keywords",U:/^keywds:(.+)$/,S:"keywds:%s"},{name:"content",U:/^content:(.+)/,S:"content:%s"},{name:"bfcpFloorCtrl",U:/^floorctrl:(c-only|s-only|c-s)/,S:"floorctrl:%s"},{name:"bfcpConfId",U:/^confid:(\d+)/,S:"confid:%s"},{name:"bfcpUserId",U:/^userid:(\d+)/,S:"userid:%s"},{name:"bfcpFloorId",U:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],S:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"],U:/(.*)/,S:"%s"}]};var uy=/(\r\n|\r|\n)/,vy=/%[sdv%]/g,wy=RegExp.prototype.test.bind(/^([a-z])=(.*)/);function xy(a){var b=1,c=arguments,d=c.length;return a.replace(vy,function(e){if(b>=d)return e;var f=c[b];b+=1;switch(e){case "%%":return"%";case "%s":return String(f);case "%d":return String(Number(f))}return""})}
function yy(a,b,c){var d=b.S;"function"===typeof b.S&&(d=c,void 0===b.push&&void 0!==b.name&&(d=c[b.name]),d=b.S(d));a=[a+"="+d];if(void 0!==b.names)for(d=0;d<b.names.length;d+=1){var e=b.names[d];void 0!==b.name?a.push(c[b.name][e]):a.push(c[b.names[d]])}else void 0!==b.name&&a.push(c[b.name]);return xy.apply(void 0,a)}function zy(a){return String(Number(a))===a?Number(a):a}var Ay="vosiuepcbtrza".split(""),By=["i","c","b","a"];function Cy(a){var b;void 0===b&&(b={dC:Ay,wB:By});void 0===a.version&&(a.version=0);void 0===a.name&&(a.name=" ");a.media.forEach(function(d){void 0===d.fC&&(d.fC="")});var c=[];b.dC.forEach(function(d){ty[d].forEach(function(e){void 0!==e.name&&e.name in a&&void 0!==a[e.name]?c.push(yy(d,e,a)):void 0!==e.push&&e.push in a&&void 0!==a[e.push]&&a[e.push].forEach(function(f){c.push(yy(d,e,f))})})});a.media.forEach(function(d){c.push(yy("m",ty.m[0],d));void 0!==b&&b.wB.forEach(function(e){ty[e].forEach(function(f){void 0!==f.name&&f.name in d&&void 0!==d[f.name]?c.push(yy(e,f,d)):void 0!==f.push&&f.push in d&&void 0!==d[f.push]&&d[f.push].forEach(function(g){c.push(yy(e,f,g))})})})});return c.join("\r\n")+"\r\n"}
function Dy(a){var b={};var c=[];var d=b;a.split(uy).filter(wy).forEach(function(e){var f=e[0],g=e.slice(2);"m"===f&&(c.push({jH:[],iF:[]}),d=c[c.length-1]);void 0!==ty[f]&&ty[f].some(function(h){if(h.U.test(g)){var m=d;void 0!==h.push&&void 0===m[h.push]?m[h.push]=[]:void 0!==h.name&&void 0!==h.names&&void 0===m[h.name]&&(m[h.name]={});var n={};void 0===h.push&&(n=void 0!==h.name&&void 0!==h.names?m[h.name]:m);var p=g.match(h.U),y=n,C=h.names,E=h.name;if(null!==p)if(void 0!==E&&void 0===C)y[E]=zy(p[1]);else if(void 0!==C)for(E=0;E<C.length;E+=1)E+1<p.length&&(y[C[E]]=zy(p[E+1]));void 0!==h.push&&m[h.push].push(n);return!0}return!1})});b.media=c;return b};var Ey=["H264","VP8","VP9"];function Fy(a){this.sdp=Dy(a);a=wb()["video-bitrate"];void 0!==a&&(Gy(this,parseInt(a)),this.ID=!0);a=wb()["video-codecs"];if(void 0!==a){a=a.split(",");var b,c=wb()["video-profiles"];0<a.length&&void 0!==c&&(b=c.split(","));Hy(this,a,b);this.JD=!0}}Fy.prototype.write=function(){return Cy(this.sdp)};function Gy(a,b){if(!a.ID){var c=Iy(b);a.sdp.media.forEach(function(d){"video"===d.type&&Jy(c,d)});return c}}
function Hy(a,b,c){a.JD||a.sdp.media.forEach(function(d){"video"===d.type&&Ky(a,b,d,c)})}function Iy(a){var b=1500;void 0!==a&&(360>=a?b=800:540<a&&(b=3E3));return b}function Jy(a,b){var c=Ly(Ey,b);var d=[];c.forEach(function(e){d.push({payload:e,config:"x-google-min-bitrate="+a});d.push({payload:e,config:"x-google-max-bitrate="+a})});b.fmtp=b.fmtp.concat(d)}
function Ky(a,b,c,d){var e=Ly(Ey,c),f=Ly(b,c,d);c.rtp.filter(function(g){return e.some(function(h){return h===g.payload})&&!f.some(function(h){return h===g.payload})}).map(function(g){return g.payload}).forEach(function(g){My(a,g,c)})}
function Ly(a,b,c){var d,e=b.rtp.filter(function(g){var h=a.some(function(m){return m.toUpperCase()===g.codec.toUpperCase()});h&&"VP8"===g.codec.toUpperCase()&&(d=g.payload);return h}).map(function(g){return g.payload});if(void 0!==c){var f=["profile-level-id=","profile-id="];b=b.fmtp.filter(function(g){if(e.some(function(m){return m===g.payload})){var h=!1;g.config.split(";").forEach(function(m){f.forEach(function(n){if(m.startsWith(n)){var p=m.split(n)[1].toUpperCase();c.some(function(y){return y.toUpperCase()===p})&&(h=!0)}})});return h}return!1}).map(function(g){return g.payload});void 0!==d&&e.some(function(g){return g===d})&&b.unshift(d);e=b}return e}
function My(a,b,c){var d=c.payloads.split(" ");d=d.filter(function(e){return parseInt(e)!==b});c.payloads=d.join(" ");c.rtp=c.rtp.filter(function(e){return e.payload!==b});d=c.rtcpFb;void 0!==d&&(c.rtcpFb=d.filter(function(e){return e.payload!==b}));c.fmtp=c.fmtp.filter(function(e){return e.payload!==b});c.fmtp.filter(function(e){e=e.config;return e.startsWith("apt=")&&parseInt(e.split("apt=")[1])===b?!0:!1}).map(function(e){return e.payload}).forEach(function(e){My(a,e,c)})};function Ny(a){var b=void 0;void 0===a||"number"===typeof a?b=a:void 0!==a.exact?b=a.exact:void 0!==a.ideal&&(b=a.ideal);return b}function Oy(a){a=Error.call(this,a);this.message=a.message;"stack"in a&&(this.stack=a.stack);this.fatal=!0}r(Oy,Error);function Py(a,b){this.Io=this.ys=0;this.Ou=!1;this.eD={applicationName:"live-origin",streamName:"stream",sessionId:"[empty]"};this.C=a;this.video=b;this.source="desktop";a=new Uint8Array(16);window.crypto.getRandomValues(a);a[6]=a[6]&15|64;a[8]=a[8]&63|128;b=0;this.Ke=[ny[a[b++]],ny[a[b++]],ny[a[b++]],ny[a[b++]],"-",ny[a[b++]],ny[a[b++]],"-",ny[a[b++]],ny[a[b++]],"-",ny[a[b++]],ny[a[b++]],"-",ny[a[b++]],ny[a[b++]],ny[a[b++]],ny[a[b++]],ny[a[b++]],ny[a[b++]]].join("");this.Io=Date.now();this.Ff=!1}
k=Py.prototype;k.Im=function(a){var b=this;this.fb=a;return new Promise(function(c,d){"object"!==typeof navigator||"object"!==typeof navigator.mediaDevices||"function"!==typeof navigator.mediaDevices.getUserMedia?d(Error("Your browser doesn't support broadcasting. Recent versions of Safari, Firefox, or Chrome are recommended.")):navigator.mediaDevices.getUserMedia(a).then(function(e){b.stream=e;var f=e.getVideoTracks();if(0===f.length||void 0===f[0])d(Error("We can't find any cameras, please ensure you have given permission to use your camera."));else{b.Zg=f[0].getSettings();if(void 0!==b.Zg.width&&void 0!==b.Zg.height){var g=b.Zg.width;f=b.Zg.height;if(void 0!==a.video){var h=void 0;var m=void 0;var n=a.video;void 0!==n&&(h=Ny(n.width),m=Ny(n.height));n=m;if(void 0!==h&&h!==g||void 0!==n&&n!==f)m={WebRTCHandlerError:"Stream resolution different from constraint resolution"},void 0!==h&&(h=a.video.width,"object"===typeof h&&(h=JSON.stringify(h)),m.WebRTCHandlerConstraintWidth=h,m.WebRTCHandlerStreamWidth=g),void 0!==n&&(g=a.video.height,"object"===typeof g&&(g=JSON.stringify(g)),m.WebRTCHandlerConstraintHeight=g,m.WebRTCHandlerStreamHeight=f),A("WebRTCHandlerSetup",m)}}JSON.stringify(a);b.video.srcObject=e;c(e)}}).catch(function(e){var f=e.message;if("ConstraintNotSatisfiedError"===e.name)f="The resolution is not supported by your device.";else if("OverconstrainedError"===e.name)f="Your device does not support the minimum resolution.";else if("PermissionDeniedError"===e.name||"NotAllowedError"===e.name)f="We need permission to use your camera and microphone in order to proceed.";else if(""===f||null===f)f="An unknown error has occurred. We cannot enable your camera or microphone.";f=Error(f);f.name=e.name;d(f)})})};k.start=function(){var a=this;return new Promise(function(b,c){a.Ff=!0;var d=!1;if(void 0===a.stream)a.close(),c(new Oy("Unable to get video from camera. Try refreshing the page and make sure you allow video/audio if any prompts come up."));else try{void 0===a.Zp&&(a.closed=!1,a.Zp=window.setInterval(function(){Qy(a)},1E3)),Ry(a),void 0===a.sb?c(Error("Unable to connect to peer")):(a.sb.oniceconnectionstatechange=function(){if(void 0!==a.sb&&!d){if("connected"===a.sb.iceConnectionState||"completed"===a.sb.iceConnectionState)d=!0,A("WebRTCHandlerConnected",{WebRTCHandlerSource:a.source}),Sy.h(a.Ke),b();"failed"===a.sb.iceConnectionState&&(d=!0,c(Error("WebRTC failed")))}},Ty(a,a.C,c))}catch(e){c(e)}})};k.stop=function(a){var b=this,c=!0===a;return new Promise(function(d){function e(){c||(b.Ff=!1,Uy.h(b.Ke));d(b.Ke)}c||b.close();if(void 0!==b.Nc){if(b.Nc.readyState!==WebSocket.CLOSING&&b.Nc.readyState!==WebSocket.CLOSED)try{b.Nc.close()}catch(f){u("could not close websocket connection "+f)}b.Nc=void 0}if(void 0!==b.sb){try{b.sb.close()}catch(f){u("could not close peer connection "+f)}b.sb=void 0}b.ys=Date.now();c||void 0===b.stream?e():qy(b.stream.getTracks()).then(function(){b.stream=void 0;e()}).catch()})};k.Fm=function(a){void 0===this.stream?u("no stream"):0<this.stream.getAudioTracks().length&&(this.stream.getAudioTracks()[0].enabled=!a)};k.reset=function(){var a=this;return new Promise(function(b,c){var d=a.Ff;a.stop().then(function(){void 0!==a.fb?a.Im(a.fb).then(function(){d?a.start().then(function(){b()}).catch(function(e){c(e)}):b()}).catch(function(e){c(e)}):b()}).catch(function(e){c(e)})})};k.close=function(){this.closed=!0;void 0!==this.Zp&&(clearInterval(this.Zp),this.Zp=void 0)};function Qy(a){if(!0===a.closed)a.stop();else{var b=Date.now();if(a.Io<b-1E4){a.Io=b;if(void 0!==Vy){a.stop();return}A("WebRTCHandlerRestart");a.stop(!0).then(function(){Gb("api/switch_origin/?current_origin="+a.C.at).then(function(c){a.C.at=c.responseText;a.start().catch(function(d){u("Could not restart stream: "+d.message)})}).catch(function(c){u("Could not get new origin: "+c.message)})}).catch()}b=a.dD;void 0===a.Nc&&(b={status:"connecting"});void 0!==b&&Wy.h({Ke:a.Ke,data:b})}}
function Ry(a){void 0===a.stream?u("no stream"):(void 0!==a.sb&&(u("peerConnection already open"),a.sb.close(),a.sb=void 0),a.sb=new RTCPeerConnection({iceServers:[]}),a.sb.onicecandidate=function(){},0<a.stream.getAudioTracks().length&&a.sb.addTrack(a.stream.getAudioTracks()[0],a.stream),a.sb.addTrack(a.stream.getVideoTracks()[0],a.stream),a.sb.createOffer().then(function(b){Xy(a,b.sdp)}).catch())}
function Ty(a,b,c){void 0!==a.Nc&&(u("WebSocket already open"),a.Nc.close(),a.Nc=void 0);var d=new WebSocket("wss://"+b.at+b.cC);d.binaryType="arraybuffer";d.onopen=function(){a.Nc=d;d.send(JSON.stringify({method:"connect",username:b.B,password:b.bC}))};d.onerror=function(e){u("webrtc websocket error",{error:e});c(Error("WebSocket error: "+JSON.stringify(e)))};d.onclose=function(){a.Nc=void 0};d.onmessage=function(e){try{var f=JSON.parse(e.data)}catch(g){return}switch(f.method){case "auth_valid":a.createOffer(c);break;case "stream_info":a.dD=f;a.Io=Date.now();break;case "already_publishing":a.ys=Date.now();J("You have started publishing from a new location, shutting down stream",function(){my.h("")});a.stop();break;case "shutdown":a.ys<Date.now()-1E3&&J("Error Publishing Stream",function(){my.h("")});a.stop();break;case "origin_info":break;default:switch(f.command){case "sendOffer":Yy(a,f,c);break;default:w("Unhandled",f)}}}}
k.createOffer=function(a){var b=this;void 0===this.Nc?a(Error("ws undefined")):void 0===this.stream?a(Error("stream undefined")):(this.Nc.send(JSON.stringify({method:"publish",width:this.Zg.width,height:this.Zg.height,frameRate:this.Zg.frameRate,source:this.source})),void 0===this.sb?u("peerConnection not open"):this.sb.createOffer().then(function(c){void 0===b.sb?u("peerConnection not open"):(c.sdp=Xy(b,c.sdp),Zy("gotDescription: "+JSON.stringify({sdp:c})+" "+b.sb),b.sb.setLocalDescription(c).then(function(){void 0===b.Nc?a(Error("ws undefined")):b.Nc.send(JSON.stringify({direction:"publish",command:"sendOffer",streamInfo:b.eD,sdp:c}))}).catch(function(d){a(d)}))}).catch(function(c){a(c)}))};function Yy(a,b,c){if(void 0===a.sb)u("peerConnection not open");else{var d=b.sdp;void 0!==d&&null!==d&&a.sb.setRemoteDescription(d).catch(function(e){c(e)});b=b.iceCandidates;if(void 0!==b)for(b=q(b),d=b.next();!d.done;d=b.next())a.sb.addIceCandidate(new RTCIceCandidate(d.value)).catch(function(e){c(e)})}}
function Xy(a,b){if(void 0===b)return u("sdpStr undefined"),"";b=new Fy(b);cb()?Hy(b,["H264"],["42e01f"]):Hy(b,["H264","VP8"],["42e01f"]);var c=Gy(b,a.Zg.height);void 0===c||a.Ou||(A("WebRTCHandlerSDPUpdate",{WebRTCHandlerVideoBitrate:c}),a.Ou=!0);return b=b.write()}var Wy=new D("streamStatusUpdate"),Sy=new D("streamStart"),Uy=new D("streamStop");function $y(a,b,c){a=void 0===a?!0:a;b=void 0===b?function(){}:b;c=void 0===c?function(){}:c;Fj.call(this);P(this.element,{position:"fixed",overflow:"hidden",height:"auto",maxWidth:"1000px",minWidth:"450px",width:"90%",top:"50%",transform:"translateY(-50%)",left:"0px",right:"0px",margin:"auto",padding:"20px",borderWidth:"2px",borderStyle:"solid",borderRadius:"20px"});G(this.element,"broadcastTermsModal");this.V.style.background="";a?(G(this.V,"blackOverlay"),this.bt=!0):(G(this.V,"transparentOverlay"),this.hc.j(c));this.element.appendChild(this.xi());this.element.appendChild(az(this));this.element.appendChild(this.Rq(b))}r($y,Fj);$y.prototype.xi=function(){return N("div",{colorClass:"header"},N("h3",{style:{textAlign:"center"}},"WARNING:  THIS SITE HAS A ZERO TOLERANCE POLICY ON UNDERAGE BROADCASTING."))};function az(a){var b={textDecoration:"underline",fontWeight:"bold"};a.body=N("div",{style:{height:"200px",overflow:"auto",padding:"0 15px 0 10px",borderWidth:"1px",borderStyle:"solid",margin:"0 auto",textAlign:"left"},colorClass:"body"},N("p",null,"The Chaturbate service is for use by adults only.  By clicking the link below, you are affirming your representation and warranty to us that:"),N("ol",null,N("li",null,'You are at least 18 years old or the age of majority in your jurisdiction, whichever is older (the "Age of Majority");'),N("li",null,"Anyone appearing on camera with you has also reached the Age of Majority;"),N("li",null,"At no time will anyone who has not reached the Age of Majority be present while you are using the Chaturbate service;"),N("li",null,"You will not permit anyone who has not reached the Age of Majority to use the Chaturbate service; and"),N("li",null,"You will immediately report by email to ",N("a",{href:"mailto:support@chaturbate.com"},"support@chaturbate.com")," any and all instances you become aware of wherein an individual has used the Chaturbate service without first reaching the Age of Majority.")),N("p",null,"If we suspect, in our sole discretion, that you are using the Chaturbate service without having complied in every respect with the foregoing statements, your account ",N("span",{style:b},"will")," be terminated immediately, and we ",N("span",{style:b},"will")," report your conduct to law enforcement."));return a.body}
$y.prototype.Rq=function(a){var b=this;return N("div",{style:{textAlign:"center",color:"#222"}},N("a",{style:{width:"200px",height:"30px",lineHeight:"30px",fontWeight:"bold",margin:"10px 5px 0px 5px",borderWidth:"1px",borderStyle:"solid",display:"inline-block",textAlign:"center",cursor:"pointer"},colorClass:"acceptLink",ref:function(c){b.UD=c},onClick:function(c){c.stopPropagation();b.D();zb("broadcast_terms","1",7);a()}},"I AGREE"))};function bz(){this.algorithm=2;this.level=0}function cz(a,b){var c=b.reduce(function(d,e){return d+e*e});a.level=Math.sqrt(c/b.length)}function dz(a,b){var c=Number.MIN_SAFE_INTEGER;b.map(function(d){d>c&&(c=d);return d});0===b.length||0>c?c=0:1<c?c=1:a.level=c}
bz.prototype.connect=function(a){var b=this;this.level=0;Oa()&&(this.context="webkitAudioContext"in window?new webkitAudioContext:new AudioContext,this.yp=this.context.createScriptProcessor(2048,1,1),this.xx=this.context.createMediaStreamSource(a),this.xx.connect(this.yp),this.yp.connect(this.context.destination),this.yp.onaudioprocess=function(c){c=c.inputBuffer.getChannelData(0);1===b.algorithm?cz(b,c):2===b.algorithm?dz(b,c):u("invalid algorithm choice",b.algorithm)})};bz.prototype.stop=function(){return Oa()?(this.xx.disconnect(),this.yp.disconnect(),this.context.close()):Promise.resolve()};var ez=new D("anyRTCBroadcastStartStop"),fz=new D("webRTCBroadcastStartStop"),gz=new D("flashBroadcastStartStop"),hz=new D("OBSBroadcastStartStop");function iz(a){ez.h(a)}fz.j(iz);gz.j(iz);hz.j(iz);var jz=["public","private","hidden","away","connecting"];function kz(a){var b=document.createElement("div");b.style.paddingLeft="10px";b.style.paddingTop="3px";b.style.fontSize="20px";b.textContent=a;return b}function lz(a){a=kz(a);a.style.paddingTop="10px";a.style.fontFamily="UbuntuRegular";a.style.fontSize="15px";return a}
function mz(){var a=document.createElement("select");G(a,"select");a.style.width="177px";a.style.height="20px";a.style.marginLeft="10px";a.style.marginTop="10px";a.style.fontFamily="UbuntuRegular";a.style.fontSize="12px";a.style.borderWidth="1px";a.style.borderStyle="solid";a.style.borderRadius="4px";a.style.overflow="hidden";return a}
function nz(){var a=document.createElement("video");a.autoplay=!0;a.muted=!0;a.setAttribute("playsinline","");a.oncontextmenu=function(b){b.preventDefault()};return a}function oz(){this.Dn=!1;this.cu=void 0}
oz.prototype.Im=function(a,b,c){var d=this,e={video:{deviceId:{exact:c.Mj},width:{ideal:c.width}},frameRate:{min:24,max:30}};hb()?e.aspectRatio=1.777777778:e.video.height={ideal:c.height};"we-only-need-a-silent-mic"!==c.Yl&&(e.audio={deviceId:{exact:c.Yl}},e.audio.advanced=[{autoGainControl:!0},{noiseSuppression:!0}],$a()&&(e.audio.advanced.push({sF:!0}),e.audio.advanced.push({tF:!0}),e.audio.advanced.push({uF:!0})));this.yd=new Py(b,a);this.Ke=this.yd.Ke;return new Promise(function(f,g){void 0!==d.yd&&d.yd.Im(e).then(function(h){d.stream=h;void 0!==d.yd&&d.yd.Fm(c.muted);f()}).catch(function(h){g(h)})})};oz.prototype.stop=function(){var a=this;void 0===this.cu&&(this.cu=new Promise(function(b){function c(){a.yd=void 0;a.stream=void 0;a.Dn=!1;b()}void 0!==a.yd?a.yd.stop().then(function(d){a.Ke===d&&c()}).catch():c()}));return this.cu};oz.prototype.start=function(){var a=this;this.Dn=!1;if(void 0!==this.yd){if(Ra&&!Js(this.yd.Zg.facingMode)){var b=bh;Is()&&(b=ch);return Promise.reject(Error(b))}return new Promise(function(c,d){if(void 0!==a.yd){var e=!1,f=function(h){void 0!==h&&h!==a.Ke||!1!==e||(e=a.Dn=!0,Sy.removeListener(g),c())},g=function(h){f(h)};Sy.j(g);a.yd.start().then(function(){f()}).catch(function(h){!0===h.fatal&&(Sy.removeListener(g),d(h))})}})}return Promise.resolve()};oz.prototype.Fm=function(a){return void 0!==this.yd&&void 0!==this.stream?(this.yd.Fm(a),!0):!1};function pz(a,b,c){F.call(this);this.videoWidth=268;this.C=a;this.config=c;this.fb=b;this.sv();this.Fw=qz(this)}r(pz,F);k=pz.prototype;k.start=function(){function a(){void 0!==b.Ta&&(to(function(){b.Qm.disabled=!1}),b.video.style.height=Math.floor(b.videoWidth/b.Cz)+"px",rz(b))}var b=this;this.stop().then(function(){b.Ta=new oz;b.Ta.Im(b.video,b.C,b.fb).then(a).catch(function(c){$a()&&db()&&"Could not start video source"===c.message?a():J(rh+":\n"+c.message)})}).catch()};k.stop=function(){var a=this;this.Qm.disabled=!0;return sz(this).then(function(){return void 0!==a.Ta?a.Ta.stop():Promise.resolve()})};function sz(a){return new Promise(function(b){void 0!==a.bq&&(a.bq.style.width="0%");void 0!==a.Uk?a.Uk.stop().then(function(){clearInterval(a.OD);a.Uk=void 0;b()}).catch():b()})}function rz(a){sz(a).then(function(){Oa()&&void 0!==a.Ta&&void 0!==a.Ta.stream&&0<a.Ta.stream.getAudioTracks().length&&(a.Uk=new bz,a.Uk.connect(a.Ta.stream),a.OD=window.setInterval(function(){void 0!==a.Uk&&void 0!==a.bq&&(a.bq.style.width=100*a.Uk.level+"%")}))}).catch()}
function tz(a,b){var c=a.Jv.gl.get(a.fb.Mj);void 0!==c&&(b=c.xy.get(b.value),void 0!==b&&(a.fb.width=b.width,a.fb.height=b.height,a.Cz=b.ratio,void 0!==a.Ew&&(a.Ew.style.visibility=b.AB?"visible":"hidden"),a.start()))}
function uz(a){var b=a.Jv.gl.get(a.fb.Mj);if(void 0!==b){for(var c=a.Pg.options.length-1;0<=c;--c)a.Pg.removeChild(a.Pg.options[c]);var d=xb("selected_res"),e=0,f=-1;b.xy.forEach(function(g){var h=document.createElement("option");h.label=g.label;h.text=g.label;h.value=g.id;a.Pg.add(h);h.value===d&&(f=e);e+=1});-1===f&&(f=Math.floor(a.Pg.options.length/2));b=a.Pg.options[f];b.selected=!0;tz(a,b)}}
function vz(a){var b=a.fl.selectedIndex;0<=b&&(b=a.fl.options[b],a.fb.Mj=b.value,zb("selected_cam",b.value,60),zb("selected_res","",0),uz(a))}function wz(a){var b=a.Pg.selectedIndex;0<=b&&(b=a.Pg.options[b],zb("selected_res",b.value,60),tz(a,b))}k.sv=function(){G(this.element,"previewPanel");this.element.style.height="370px";this.element.style.width="488px";this.element.style.transform="translate(5px, 18.5px)";this.element.appendChild(this.ol());this.element.appendChild(this.Mn());this.element.appendChild(this.ir())};k.ol=function(){var a=document.createElement("div");G(a,"welcomeTitle");a.style.width="100%";a.style.height="32px";var b=document.createElement("span");b.style.paddingLeft="10px";b.style.verticalAlign="sub";b.style.lineHeight="32px";b.textContent=qh+", "+this.C.B;a.appendChild(b);return a};k.Mn=function(){var a=document.createElement("div");a.style.width="198px";a.style.cssFloat="left";a.style.height="318px";a.style.padding="10px 0 10px 0";a.appendChild(this.pv());a.appendChild(this.rv());this.getUserMedia();return a};k.getUserMedia=function(){var a=this;sy().then(function(b){a.Fw.style.display="none";a.Jv=b;if(0<b.Ls.size&&void 0!==a.Zl){var c=document.createElement("option");c.label=ih;c.text=c.label;c.value="we-only-need-a-silent-mic";a.Zl.add(c);var d=xb("selected_mic"),e=1,f=1;c.value===d&&(f=0);b.Ls.forEach(function(n){var p=document.createElement("option");p.label=n.label;p.text=n.label;p.value=n.id;void 0!==a.Zl&&a.Zl.add(p);p.value===d&&(f=e);e+=1});c=a.Zl.options[f];c.selected=!0;a.fb.Yl=c.value}if(0<b.gl.size){var g=xb("selected_cam"),h=0,m=0;b.gl.forEach(function(n){var p=document.createElement("option");p.label=n.label;p.text=n.label;p.value=n.id;a.fl.add(p);p.value===g&&(m=h);h+=1});b=a.fl.options[m];b.selected=!0;a.fb.Mj=b.value;uz(a)}}).catch(function(b){var c="",d="";null!==b.message&&void 0!==b.message?c="OverconstrainedError"===b.name||"NotFoundError"===b.name||"DevicesNotFoundError"===b.name?""+Qg:"PermissionDeniedError"===b.name||"NotAllowedError"===b.name?Rg+"<br/><br/>"+Tg:"NotReadableError"===b.name?b.message+". "+Vg:b.message:null!==b.name&&void 0!==b.name&&(c=b.name);""!==c&&(d=". ");J(""+ah+d+c,function(){a.Fw.style.display=""},!0)})};function qz(a){var b=document.createElement("div");G(b,"helpOverlay");b.style.fontSize="14px";b.style.fontFamily="UbuntuRegular";b.style.display="none";b.style.width="280px";b.style.fontWeight="bold";b.style.borderRadius="6px";b.style.textAlign="center";b.style.padding="8px";b.style.position="absolute";b.style.top="25%";b.style.left="50%";b.style.transform="translateX(-50%)";b.style.border="2px solid #444";b.style.boxShadow="rgba(0, 0, 0, 0.25) 0px 14px 28px, rgba(0, 0, 0, 0.22) 0px 10px 10px";b.innerHTML=Sg+"<br/><br/>"+Tg;var c=document.createElement("button");c.style.display="none";c.style.margin="10px auto 0";c.style.cursor="pointer";c.innerText=Ug;c.onclick=function(){a.getUserMedia()};b.appendChild(c);ry.j(function(){c.style.display="block"});a.element.appendChild(b);return b}
k.pv=function(){var a=this,b=document.createElement("div");G(b,"settingsPanel");b.style.width="100%";b.style.height="158px";b.style.marginBottom="5px";b.style.borderWidth="1px";b.style.borderStyle="solid";b.style.boxSizing="border-box";var c=kz(dh);c.style.lineHeight="28px";c.style.paddingTop="8px";b.appendChild(c);c=mz();c.style.marginTop="8px";c.style.height="32px";b.appendChild(c);var d=lz(eh);d.style.marginTop="16px";d.style.fontSize="12px";d.style.paddingTop="0";b.appendChild(d);d=mz();d.style.marginTop="5px";d.style.height="32px";b.appendChild(d);c.onchange=function(){vz(a)};d.onchange=function(){wz(a)};this.fl=c;this.Pg=d;return b};k.rv=function(){function a(p){if(void 0!==b.Ta){if(!b.Ta.Fm(p))return!1}else return!1;p?Cq(m,!0):Cq(m,!1);zb("broadcast_muted",String(p),60);return!0}var b=this,c=document.createElement("div");G(c,"settingsPanel");c.style.width="100%";c.style.height="162px";c.style.paddingTop="8px";c.style.borderWidth="1px";c.style.borderStyle="solid";c.style.boxSizing="border-box";var d=kz(fh);d.style.lineHeight="28px";c.appendChild(d);var e=mz();c.appendChild(e);e.style.marginTop="8px";e.style.height="32px";e.onchange=function(){var p=e.selectedIndex;0<=p&&(p=e.options[p],b.fb.Yl=p.value,zb("selected_mic",p.value,60),b.start())};if(d=Oa()){var f=document.createElement("div"),g=lz(gh+":");g.style.fontSize="16px";g.style.paddingTop="16px";g.style.paddingLeft="8px";g.style.display="inline-block";f.appendChild(g);g=document.createElement("div");G(g,"inputLevelBar");g.style.width="82px";g.style.margin="23px 8px 0 10px";g.style.borderWidth="1px";g.style.borderStyle="solid";g.style.display="inline-block";g.style.height="7px";var h=document.createElement("div");h.style.width="78px";h.style.height="7px";h.style.width="0%";h.style.backgroundColor="lightgreen";this.bq=h;g.appendChild(h);f.appendChild(g);c.appendChild(f)}f=document.createElement("div");var m=new Eq(16,!1,function(){var p=!b.fb.muted;a(p)&&(b.fb.muted=p)});m.Da.value="Mute";m.element.id="mutebox";m.element.style.marginTop="8px";m.element.style.marginLeft="8px";m.disable();var n=window.setInterval(function(){a(b.fb.muted)&&(m.enable(),clearInterval(n))},200);f.appendChild(m.element);g=document.createElement("label");g.textContent=hh;g.htmlFor="mutebox";g.style.paddingLeft="5px";g.style.transform="translateY(-4px)";g.style.fontFamily="UbuntuRegular";g.style.fontSize="14px";g.style.display="inline-block";g.style.lineHeight="22px";f.appendChild(g);d||(m.element.style.marginTop="100px",g.style.marginTop="70px");c.appendChild(f);this.Zl=e;return c};k.ir=function(){var a=document.createElement("div");a.style.width="289px";a.style.cssFloat="left";a.style.height="318px";a.style.padding="10px 0 10px 0";var b=nz();b.style.width=this.videoWidth+"px";b.style.height="150px";b.style.marginLeft="10px";b.style.marginRight="10px";b.style.backgroundColor="black";a.appendChild(b);this.video=b;b=document.createElement("div");G(b,"hdLabel");b.style.fontSize="24px";b.style.fontFamily="UbuntuBold";b.style.marginLeft="10px";b.style.marginTop="10px";b.textContent="HD";b.style.visibility="hidden";this.Ew=b;a.appendChild(b);a.appendChild(this.fr());b=lz(mh+":");b.style.fontSize="11px";b.style.paddingLeft="0";b.style.paddingTop="5px";b.style.textAlign="center";a.appendChild(b);b=document.createElement("div");b.style.textAlign="center";var c=document.createElement("a");G(c,"hrefColor");c.style.fontSize="12px";c.text=nh;c.style.cursor="pointer";b.appendChild(c);a.appendChild(b);c.onclick=function(){};return a};k.fr=function(){var a=this,b=document.createElement("div");b.style.textAlign="center";var c=document.createElement("button");G(c,"button");c.style.marginTop="75px";c.style.width="268px";c.style.height="32px";c.style.borderStyle="solid";c.style.borderWidth="1px";c.style.borderRadius="4px";c.style.fontWeight="normal";c.style.fontSize="14px";c.textContent=jh;c.style.fontFamily="UbuntuBold";c.style.cursor="pointer";b.appendChild(c);c.disabled=!0;c.onclick=function(){a.Kp()};this.Qm=c;return b};k.Kp=function(){var a=this;so().then(function(b){""!==b?(J(bd(b)),a.Qm.disabled=!0,to(function(){a.Qm.disabled=!1})):a.stop().then(function(){a.config.cp()}).catch()}).catch()};function xz(a,b,c){pz.call(this,a,b,c)}r(xz,pz);k=xz.prototype;k.stop=function(){return pz.prototype.stop.call(this)};k.start=function(){pz.prototype.start.call(this)};k.sv=function(){this.element.style.width="402px";this.element.style.backgroundColor="transparent";this.element.style.position="relative";this.element.appendChild(this.ol());var a=this.element,b=a.appendChild,c=document.createElement("div");c.style.display="inline-block";c.style.position="relative";c.style.right="-1px";c.style.width=c.style.height="17px";c.style.cssFloat="right";c.style.cursor="pointer";c.onclick=this.config.gg;var d=document.createElement("img");d.src="https://static-assets.highwebmedia.com/tsdefaultassets/close-gray.svg";d.style.width=d.style.height="100%";c.appendChild(d);b.call(a,c);this.element.appendChild(this.ir());a=this.element;b=a.appendChild;c=document.createElement("div");c.style.backgroundColor="#FFFFD8";c.style.marginTop="6px";c.style.padding="6px 5px 9px 4px";c.style.border="1px solid #CCCCCC";c.style.boxSizing="border-box";var e;d=q(this.config.tB);for(e=d.next();!e.done;e=d.next()){e=e.value;var f=document.createElement("div");f.style.fontFamily="UbuntuRegular";f.style.fontStyle="normal";f.style.fontWeight="bold";f.style.fontSize="12px";f.style.lineHeight="14px";f.style.textAlign="center";f.style.color="#494949";f.textContent=e;c.appendChild(f)}b.call(a,c);this.element.appendChild(this.Mn());this.element.appendChild(this.fr())};k.ol=function(){var a=document.createElement("div");a.style.width="200px";a.style.height="26px";a.style.display="inline-block";var b=document.createElement("div");G(b,"title");b.style.fontFamily="UbuntuBold";b.style.fontSize="18px";b.textContent=this.config.title;a.appendChild(b);return a};k.ir=function(){this.videoWidth=400;var a=document.createElement("div");a.style.textAlign="center";var b=nz();b.style.width=this.videoWidth+"px";b.style.height=this.videoWidth/this.Cz+"px";b.style.backgroundColor="#000";a.appendChild(b);this.video=b;return a};k.Mn=function(){var a=pz.prototype.Mn.call(this);a.style.width="100%";a.style.height="auto";a.style.padding="9px 0px 0px 0px";a.style.cssFloat="";return a};k.pv=function(){var a=this,b=document.createElement("div");b.style.width="100%";b.style.height="68px";b.style.paddingTop="5px";b.style.border="2px solid #BFBFBF";b.style.boxSizing="border-box";var c=document.createElement("div");c.style.display="inline-block";var d=yz(dh),e=mz();e.style.marginLeft="8px";e.style.marginTop="8px";e.style.borderColor="#BCBCBC";c.appendChild(d);c.appendChild(e);d=document.createElement("div");d.style.display="inline-block";d.style.paddingLeft="16px";var f=yz(eh);f.style.paddingLeft="10px";var g=mz();g.style.marginTop="8px";g.style.borderColor="#BCBCBC";d.appendChild(f);d.appendChild(g);b.appendChild(c);b.appendChild(d);e.onchange=function(){vz(a)};g.onchange=function(){wz(a)};this.fl=e;this.Pg=g;return b};k.rv=function(){this.fb.Yl="we-only-need-a-silent-mic";var a=document.createElement("div");a.style.display="none";return a};k.fr=function(){var a=this,b=document.createElement("div");b.style.textAlign="center";b.style.paddingTop="10px";var c=document.createElement("button");G(c,"startButton");c.style.width="305px";c.style.height="27px";c.style.backgroundColor="linear-gradient(180deg, #E4E4E4 0%, #F6F6F6 100%)";c.style.borderWidth="1px";c.style.borderStyle="solid";c.style.borderRadius="4px";c.style.backgroundColor="#F47321";c.style.borderColor="#CD5D26";c.style.color="#FFFFFF";c.textContent=this.config.bD;c.style.fontFamily="UbuntuBold";c.style.fontSize="16px";c.style.cursor="pointer";c.style.whiteSpace="nowrap";c.style.overflow="hidden";c.style.textOverflow="ellipsis";b.appendChild(c);c.disabled=!0;c.onclick=function(){c.disabled=!0;a.Kp()};this.Qm=c;return b};function yz(a){var b=document.createElement("div");b.style.paddingLeft="8px";b.style.paddingTop="3px";b.style.fontSize="16px";b.style.fontFamily="UbuntuBold";b.textContent=a;return b}
function zz(a,b,c){function d(){var p=performance.now(),y=window.setInterval(function(){if(n){var C=performance.now(),E=Math.floor((C-p)/1E3);1>E||(10<=E&&(p=C),void 0!==f.Bl&&(f.Bl.textContent=""),void 0!==f.status&&(f.status.textContent=oh+" "+(10-E+1)+"..."))}else clearInterval(y)},200)}function e(p,y){void 0!==f.status&&void 0!==f.cq&&(!0!==y||h?!0!==y&&h&&(f.status.style.color="black",f.status.style.fontFamily="UbuntuRegular",f.status.style.width="",f.status.style.paddingLeft="0px",f.status.style.cssFloat="none",f.status.title="",f.cq.style.display="none",h=!1):(h=!0,f.status.style.color="#D80000",f.status.style.fontFamily="UbuntuBold",f.status.style.width="28%",f.status.style.paddingLeft="18%",f.status.style.cssFloat="left",f.status.title=f.cq.title=Pg,f.cq.style.display=""),f.status.textContent=p)}F.call(this);var f=this;this.du=!1;this.nz=0;this.C=a;this.config=c;this.fb=b;this.ov();var g=!1,h=!1,m=!1,n=!0;d();this.Tx=function(p){if(void 0!==f.Ta&&f.Ta.Ke===p.Ke){p=p.data;if(void 0!==p.fps){var y=p.fps,C=20,E=15;hb()&&(C=12,E=9);var ja=!0;y=Math.round(y);y>=C?C="green":y>=E?C="black":(C="#B62519",ja=!1);void 0!==f.Bl&&(f.Bl.textContent=y+" FPS",f.Bl.style.color=C);g=ja?!1:!0}void 0!==p.status&&(p=p.status,"connecting"!==p&&(n=!1),Az(p)?e("(Offline)"):"away"!==p||m?"away"!==p&&m?(void 0!==f.An&&(f.An.style.display="none"),f.Ga.style.display="",m=!1):(y=p.charAt(0).toUpperCase()+p.slice(1),"connecting"===p?n||(n=!0,d()):g&&0<f.nz&&5E3<performance.now()-f.nz?e(Wg,!0):e("("+y+" Broadcasting)")):(f.Ga.style.display="none",void 0!==f.An&&(f.An.style.display=""),m=!0))}};this.Ux=function(p){void 0===f.Ta||f.Ta.Ke!==p||f.du||f.stop(!0)};Wy.j(this.Tx);Uy.j(this.Ux);this.start()}r(zz,F);k=zz.prototype;k.ov=function(){var a=this.Zq();a.appendChild(this.On());a.appendChild(this.Tq());var b=document.createElement("div");b.style.height="370px";b.style.backgroundColor="lightgrey";b.style.width="100%";b.style.backgroundColor="black";b.style.display="none";b.appendChild(this.ol());var c=b.appendChild,d=document.createElement("div");d.style.textAlign="center";d.style.paddingLeft="16%";d.style.paddingRight="16%";d.style.paddingTop="50px";var e=document.createElement("span");G(e,"inBrowserAwayMessage");e.style.fontFamily="UbuntuRegular";e.style.fontSize="14px";e.textContent=Zg;d.appendChild(e);c.call(b,d);b.appendChild(this.Qf());this.element.appendChild(a);this.element.appendChild(b);this.Ga=a;this.An=b};k.Eb=function(){return void 0!==this.Ta?this.Ta.Dn:!1};k.start=function(){var a=this;this.stop().then(function(){function b(d,e){a.Ta=new oz;a.Ta.Im(a.video,a.C,a.fb).then(function(){void 0!==a.Ta&&a.Ta.start().then(function(){a.Yo=function(f){f.preventDefault();f.returnValue=!1;return Yg};v("beforeunload",window,a.Yo);a.ep=function(){a.stop(!0)};v(lb(),window,a.ep);fz.h(!0);d()}).catch(function(f){e(ph+": "+f.message)})}).catch(function(f){if(eb()&&"Invalid constraint"===f.message){c+=1;if(5>=c){a.stop().then(function(){window.setTimeout(function(){b(d,e)},500)}).catch();return}e(Og)}e(sh+": "+f.message)})}var c=0;(new Promise(b)).catch(function(d){J(d);a.stop(!0)})}).catch()};k.stop=function(a){var b=this;this.du=!0;void 0!==this.Yo&&(x("beforeunload",window,this.Yo),this.Yo=void 0);void 0!==this.ep&&(x(lb(),window,this.ep),this.ep=void 0);var c=Promise.resolve();void 0!==this.Ta&&(c=this.Ta.stop());!0===a&&zb("last_broadcast_dt",Date.now().toString(10),1);return new Promise(function(d,e){c.then(function(){b.du=!1;!0===a&&(Wy.removeListener(b.Tx),Uy.removeListener(b.Ux),b.config.Yi(),fz.h(!1));d()}).catch(e)})};k.Zq=function(){var a=document.createElement("div");a.style.height="370px";a.style.backgroundColor="lightgrey";a.style.width="100%";a.style.overflow="unset";return a};k.On=function(){var a=nz();a.style.width="100%";a.style.height="370px";a.style.backgroundColor="black";return this.video=a};k.Tq=function(){function a(p){if(void 0!==b.Ta){if(!b.Ta.Fm(p))return!1}else return!1;e.src=p?"https://static-assets.highwebmedia.com/broadcastassets/mic-muted.svg":"https://static-assets.highwebmedia.com/broadcastassets/mic2.svg";zb("broadcast_muted",String(p),60);return!0}var b=this,c=document.createElement("div");c.style.width="100%";c.style.height="35px";c.style.backgroundColor="lightgrey";var d=document.createElement("button");d.style.backgroundColor="lightgrey";d.style.border="0px";var e=document.createElement("input");e.type="image";e.src="https://static-assets.highwebmedia.com/broadcastassets/mic2.svg";e.style.height="30px";e.textContent="";e.style.height="20px";e.style.border="0px";e.style.backgroundColor="lightgrey";e.style.paddingTop="7px";bb()&&!hb()&&(e.style.paddingTop="2px");e.style.outline="none";d.appendChild(e);var f=document.createElement("div");f.style.cssFloat="left";f.style.textAlign="center";f.style.height="34px";f.style.borderRight="1px solid black";f.style.width="10%";cb()&&bb()&&(f.style.width="12%");f.appendChild(d);c.appendChild(f);d.onclick=function(){var p=!b.fb.muted;a(p)&&(b.fb.muted=p)};d.disabled=!0;var g=window.setInterval(function(){a(b.fb.muted)&&(d.disabled=!1,clearInterval(g))},200);f=document.createElement("div");G(f,"inBrowserStatus");f.style.cssFloat="left";f.style.textAlign="center";f.style.height="34px";f.style.width="51%";cb()&&bb()&&(f.style.width="44%");f.style.borderRight="1px solid black";f.style.padding="0px";f.style.fontFamily="UbuntuRegular";var h=kz("");h.style.cssFloat="left";h.style.paddingLeft="5px";h.style.paddingTop="10px";var m=lz("");m.style.paddingLeft="0px";var n=document.createElement("img");n.src="https://static-assets.highwebmedia.com/broadcastassets/warning.png";n.style.height="16px";n.style.paddingTop="9px";n.style.paddingLeft="5px";n.style.display="none";n.style.cssFloat="left";f.appendChild(h);f.appendChild(m);f.appendChild(n);this.Bl=h;this.status=m;this.cq=n;c.appendChild(f);f=document.createElement("button");h=document.createElement("input");h.type="image";h.src="https://static-assets.highwebmedia.com/broadcastassets/stop.svg";h.style.verticalAlign="middle";h.style.height="16px";h.style.paddingTop="1px";f.appendChild(h);h=document.createElement("span");h.style.fontFamily="UbuntuRegular";h.style.fontSize="18px";h.textContent=h.innerText=kh;h.style.paddingLeft="7px";h.style.verticalAlign="middle";f.appendChild(h);f.style.backgroundColor="lightgrey";f.style.paddingTop="5px";f.style.cssFloat="right";f.style.border="0";h=document.createElement("div");h.style.cssFloat="left";h.style.textAlign="center";h.style.height="34px";h.appendChild(f);c.appendChild(h);f.onclick=function(){b.stop(!0)};return c};k.ol=function(){var a=document.createElement("div");a.style.textAlign="center";a.style.paddingTop="90px";var b=document.createElement("span");G(b,"awayTitle");b.textContent=lh;b.style.fontFamily="UbuntuRegular";b.style.fontSize="40px";a.appendChild(b);return a};k.Qf=function(){var a=document.createElement("div");a.style.textAlign="center";a.style.paddingTop="35px";var b=document.createElement("a");G(b,"awayLink");b.text=$g;b.style.fontFamily="UbuntuRegular";b.style.fontSize="20px";b.style.cursor="pointer";b.style.textDecoration="underline";a.appendChild(b);b.onclick=function(){ey()};return a};function Az(a){return!jz.some(function(b){return b===a})};var Bz={username:"",Db:!0,Ec:!1,ye:!1,Ob:!1,If:!1,lg:!1,Jf:!1,Cb:"",lc:"df"},Vy,Cz;v("pageshow",window,function(a){a.persisted&&void 0!==Cz&&Dz(Cz)});[].push(function(){return new Promise(function(a,b){void 0!==Cz&&Cz.Eb()?uc(Mh,function(){void 0!==Cz?a(Dz(Cz)):a()},b):a()})});var Ez=new D("showMyCamDidNotStart");function Fz(a,b,c){if(!mb()||kb()||ab())return!1;var d;K.j(function(e){void 0!==Cz&&e.A.B()!==Cz.Qg.B()&&(Gz(),Cz=void 0);if(e.A.Qe)b.h(function(){yq.h(!1)});else{void 0===Cz&&(Cz=new Hz(e.A,a));var f=function(){c.h("starting");b.h(function(){});void 0!==d&&d.removeListener();d=Ez.j(function(){c.h("stopped");b.h(f)},!1);Gb("api/ts/chat/can-share-cam/"+e.C.B+"/").then(function(g){g=new Q(g.responseText);V(g,"can_share")&&0===dm(g,"shared_cam").length?void 0!==Cz&&Iz():(V(g,"is_grey")?uc(Dh,function(){A("SharedCamPurchaseTokensClicked");ij("/tipping/purchase_tokens/","_blank","height=615, width=850, scrollbars=1")}):V(g,"is_private")?J(Ch):0<dm(g,"shared_cam").length?(J(wh),A("SharedCamAlreadySharing")):J(T(g,"message")),Ez.h(void 0))}).catch()};Cz.cp.push(function(){c.h("started");b.h(function(){A("SharedCamBroadcastStopClicked");void 0!==Cz&&Dz(Cz,!0)})});Cz.Yi.push(function(){c.h("inactiveStopped");b.h(function(){var g=M(L("Please allow up to %(sec)s seconds before sharing your cam again."),{sec:5},!0);J(g)});window.setTimeout(function(){c.h("stopped");b.h(function(){f()})},5E3)});b.h(function(){f()})}});return!0}
function Jz(a,b){var c=new D("requestChangeClickListener"),d=new D("showMyCamStateChanged");c.j(function(e){a.onclick=e});d.j(function(e){switch(e){case "starting":a.textContent=uh;a.style.opacity="0.5";a.style.cursor="default";break;case "started":a.textContent=vh;a.style.opacity="1";a.style.cursor="pointer";break;case "inactiveStopped":a.textContent=uh;a.style.opacity="0.5";a.style.cursor="default";break;case "stopped":a.textContent=uh,a.style.opacity="1",a.style.cursor="pointer"}});return Fz(b,c,d)}
function Hz(a,b){var c=this;this.cp=[];this.Yi=[];this.J=new Yb;this.Kp=function(){void 0!==c.qm&&c.qm.D();A("SharedCamBroadcastStartClicked");if(c.xp||c.Fn)J(Bh),Ez.h(void 0);else{var d=c.Yi;c.Yi=[];Dz(c).then(function(){c.Yi=d;var e=!1,f=window.setTimeout(function(){void 0!==c.Ve&&Kz(c.Ve);A("SharedCamBroadcastStartTimedOut");J(Ah);u("smcViewer - timeout starting cam");e=!0},2E4);z("api/ts/chat/share-my-cam/",{username:c.Qg.B()}).then(function(){if(!e){c.Ve=new Lz(c.Wu,c.fb,c.cA,c.Qg,f);c.Ve.Xt();v(pc(),document,c.Ve.Xt);for(var g=q(c.cp),h=g.next();!h.done;h=g.next())h=h.value,h()}}).catch(function(){e||(J(zh),Ez.h(void 0))})}).catch()}};this.cA=function(){void 0!==c.Ve&&(x(pc(),document,c.Ve.Xt),c.Ve.rl&&c.Qg.event.Aa.h({ja:[[Rn(Object.assign(Bz,{username:c.Qg.B()})),X(Gh)]],na:!0}));c.Ve=void 0;for(var d=q(c.Yi),e=d.next();!e.done;e=d.next())e=e.value,e()};this.Qg=a;this.fb={Yl:"",Mj:"",width:0,height:0,muted:!0};this.xp=!0;B(b.j(function(d){(c.xp=d)&&Dz(c)},!1),this.J);this.Fn=!0;B(a.event.ac.j(function(d){c.Fn="notconnected"===d.La;switch(d.La){case "privatenotwatching":case "privatespying":case "passwordprotected":case "notconnected":Dz(c)}}),this.J)}function Iz(){var a=Cz;A("SharedCamStartClicked");a.xp||a.Fn?(J(Bh),Ez.h(void 0)):ro(a.Qg.username()).then(function(b){b?(J(wh),Ez.h(void 0)):"1"===yb("broadcast_terms")?Mz(a):(new $y(!1,function(){Mz(a)},function(){Ez.h(void 0)})).show()}).catch()}function Dz(a,b){return void 0!==a.Ve?Kz(a.Ve,void 0===b?!1:b):Promise.resolve()}
function Gz(){var a=Cz;Dz(a);Zb(a.J)}function Mz(a){a.xp||a.Fn?(J(Bh),Ez.h(void 0)):ky().then(function(b){a.Wu=b;void 0!==a.qm&&a.qm.D();a.qm=new Nz(a.Wu,a.fb,a.Kp,a.Qg.B());a.qm.show()}).catch()}Hz.prototype.Eb=function(){return void 0!==this.Ve};function Nz(a,b,c,d){Fj.call(this);var e=this;this.paused=!1;this.mp=!0;this.V.style.backgroundColor="rgba(0, 0, 0, 0.4)";G(this.element,"smc-preview-modal");this.element.style.boxShadow="0px 0px 10px rgba(0, 0, 0, 0.3)";this.element.style.position="fixed";this.element.style.overflow="hidden";this.element.style.height="auto";this.element.style.width="422px";this.element.style.top="50%";this.element.style.left="50%";this.element.style.transform="translate(-50%, -56%)";this.element.style.borderRadius="6px";this.kt=new xz(a,b,{JG:function(){},cp:c,title:th,tB:[xh,yh],bD:ad(d),gg:function(){Ez.h(void 0);e.D()}});this.element.style.padding="8px 10px";this.element.style.boxSizing="border-box";this.hc.j(function(){Ez.h(void 0);e.D()});this.H(this.kt)}r(Nz,Fj);Nz.prototype.show=function(){this.paused&&this.kt.start();Fj.prototype.show.call(this);A("SharedCamPreviewDisplayed")};Nz.prototype.D=function(){Fj.prototype.D.call(this);this.kt.stop();this.paused=!0};function Lz(a,b,c,d,e){zz.call(this,a,b,{Yi:function(){Jb("api/ts/chat/share-my-cam/?",{username:f.xm});null!==f.element.parentElement&&f.element.parentElement.removeChild(f.element);Zb(f.J);Vy=void 0;c()}});var f=this;this.Qg=d;this.rl=!1;this.J=new Yb;this.right=this.bottom=16;this.Zj=32;this.$j=0;this.Rn=new Map;this.Xt=function(){var h=I();I()&&void 0!==h?(h.appendChild(f.element),f.Ga.style.bottom=f.Zj+"px",f.Ga.style.right=f.$j+"px"):(document.body.appendChild(f.element),f.Ga.style.bottom=f.bottom+
"px",f.Ga.style.right=f.right+"px")};this.xm=d.B();Oz(this);this.element.style.height="auto";this.element.style.width="auto";this.Ga=this.Zq();this.Ga.appendChild(Pz(this));this.Ga.appendChild(this.On());this.Ga.appendChild(this.Tq());this.element.appendChild(this.Ga);Qz(this);yk.j(function(){I()?(f.Ga.style.bottom=Rz(f,f.Zj)+"px",f.Ga.style.right=Sz(f,f.$j)+"px"):(f.Ga.style.bottom=Rz(f,f.bottom)+"px",f.Ga.style.right=Sz(f,f.right)+"px")});var g=!0;B(Wy.j(function(h){h=h.data.status;"connecting"!==h&&g&&"hidden"===h?(clearTimeout(e),g=!1,Tz(f)):!g&&Az(h)&&(Kz(f),J(zh),u("smcViewer - cam went offline"))},!1),this.J)}r(Lz,zz);function Tz(a){A("SharedCamBroadcastStarted");Vy=a.xm;B(Ro.j(function(b){Uz(a,!0,b)},!1),a.J);B(So.j(function(b){Uz(a,!1,b)},!1),a.J)}function Kz(a,b){b=void 0===b?!1:b;v("mouseenter",a.element,function(c){c.stopPropagation()},!0);v("mouseleave",a.element,function(c){c.stopPropagation()},!0);b&&A("SharedCamBroadcastStopClicked",{HF:a.rl});return a.stop(!0)}
function Uz(a,b,c){a.rl=b;if(b){if(!a.Rn.has(c.username)){a.uj.src="https://static-assets.highwebmedia.com/broadcastassets/active-cam-overlaying-video.svg";a.dz.textContent=a.xm+" "+Hh;a.Rn.set(c.username,c);var d=Eh}}else a.Rn.has(c.username)&&(a.uj.src="https://static-assets.highwebmedia.com/broadcastassets/inactive-cam-overlaying-video.svg",a.dz.textContent=a.xm+" "+Ih,a.Rn.delete(c.username),d=Gh);void 0!==d&&a.Qg.event.Aa.h({ja:[[Rn(Object.assign(Bz,{username:c.username})),X(d)]],na:!0})}
Lz.prototype.ov=function(){};Lz.prototype.Zq=function(){var a=document.createElement("div");a.style.height="117px";a.style.width=117*this.fb.width/this.fb.height+"px";a.style.backgroundColor="#000";a.style.position="fixed";a.style.zIndex="1002";a.style.border="1px solid #FFF";return a};function Pz(a){var b=document.createElement("div");b.style.position="absolute";b.style.right="5px";b.style.top="5px";b.style.width=b.style.height="15px";b.style.zIndex="1004";var c=document.createElement("img");c.src="https://static-assets.highwebmedia.com/broadcastassets/inactive-cam-overlaying-video.svg";var d=document.createElement("div");d.style.position="absolute";d.style.backgroundColor="#303030";d.style.border="1px solid #222222";d.style.color="#EEE";d.style.width="175px";d.style.padding="9px";d.style.borderRadius="4px";d.style.fontSize="12px";d.style.display="none";d.style.zIndex="5";d.style.bottom="25px";d.style.left="-168px";var e=document.createElement("span");e.textContent=a.xm+" "+Ih;d.appendChild(e);d.appendChild(Kj("#222222","#303030","168px",2));b.appendChild(c);b.appendChild(d);a.uj=c;a.Mp=d;a.dz=e;return b}Lz.prototype.On=function(){var a=zz.prototype.On.call(this);a.style.height="100%";return a};Lz.prototype.Tq=function(){var a=this,b=po(),c=document.createElement("div");c.style.width="100%";c.style.height="26px";c.style.backgroundColor="rgba(0, 0, 0, 0.4)";c.style.cursor="move";Vz(this,c);var d=document.createElement("div");d.style.paddingLeft="10px";d.style.position="relative";d.style.top="50%";d.style.transform="translateY(-50%)";d.style.color="#FFF";d.style.cursor="default";d.textContent=Lh;d.style.cursor="move";Vz(this,d);c.appendChild(d);b.appendChild(c);c=qo({Rw:"broadcastassets/volume-mute-grey.svg",td:Jh,$r:31,bv:"60%"});c.style.left="50%";c.style.transform="translateX(calc(-50% - 30px))";b.appendChild(c);c=qo({Rw:"broadcastassets/close.svg",td:Kh,$r:23,bv:"60%",onClick:function(){Kz(a,!0)}});c.style.left="50%";c.style.transform="translateX(calc(-50% + 30px))";b.appendChild(c);return this.controls=b};function Qz(a){function b(){a.controls.style.display="none";a.uj.src=a.rl?"https://static-assets.highwebmedia.com/broadcastassets/active-cam-overlaying-video.svg":"https://static-assets.highwebmedia.com/broadcastassets/inactive-cam-overlaying-video.svg"}function c(){a.controls.style.display="block";a.uj.src=a.rl?"https://static-assets.highwebmedia.com/broadcastassets/active-cam.svg":"https://static-assets.highwebmedia.com/broadcastassets/inactive-cam.svg"}v("mouseenter",a.Ga,c);v("mouseleave",a.Ga,b);var d=0;v("touchstart",a.Ga,function(){"none"===a.controls.style.display?(c(),d=1):d+=1});v("touchend",a.Ga,function(){1<d&&b()});v("touchstart",document,function(e){a.element.contains(e.target)||b()});v("mouseenter",a.uj,function(){a.Mp.style.display="block"});v("mouseleave",a.uj,function(){a.Mp.style.display="none"});v("touchstart",a.uj,function(){a.Mp.style.display="block"});v("touchstart",document,function(){a.Mp.style.display="none"},!0)}
function Vz(a,b){sp(b,function(c,d,e){var f=Sz(a,I()?a.$j:a.right),g=Rz(a,I()?a.Zj:a.bottom),h=f,m=g;return{enabled:!0,move:function(n,p){n-=d;m=Rz(a,g-(p-e));h=Sz(a,f-n);a.Ga.style.bottom=m+"px";a.Ga.style.right=h+"px"},end:function(){I()?(a.$j=h,a.Zj=m):(a.right=h,a.bottom=m);t()&&window.localStorage.setItem("smcBroadcastSettings",JSON.stringify({bottom:a.bottom,right:a.right,fullscreenBottom:a.Zj,fullscreenRight:a.$j}))}}})}
function Rz(a,b){return Math.max(0,Math.min(window.innerHeight-a.Ga.offsetHeight,b))}function Sz(a,b){return Math.max(0,Math.min(window.innerWidth-a.Ga.offsetWidth,b))}function Oz(a){if(t()){var b=window.localStorage.getItem("smcBroadcastSettings");null!==b&&(b=JSON.parse(b),a.bottom=b.bottom,a.right=b.right,a.Zj=b.fullscreenBottom,a.$j=b.fullscreenRight)}};function Wz(a){var b,c;F.call(this,"span");var d=this;this.Xe=new D("iconClicked",{fe:0});this.Oj="light";this.Xq();this.wq();Xz(this,null===a||void 0===a?void 0:a.vl);Yz(this);Zz(this,null!==(b=null===a||void 0===a?void 0:a.os)&&void 0!==b?b:!1);$z(this,null!==(c=null===a||void 0===a?void 0:a.os)&&void 0!==c?c:!1);this.element.onmouseenter=function(){d.Jb.style.visibility="visible";d.Sb.style.visibility="visible";d.Tb.style.visibility="visible";d.image.style.backgroundColor="rgba(203, 203, 203, 0.24)"};this.element.onmouseleave=function(){d.Jb.style.visibility="hidden";d.Sb.style.visibility="hidden";d.Tb.style.visibility="hidden";d.image.style.backgroundColor="rgba(0, 0, 0, 0)"};a=xb("theme_name");void 0===a||"lightmode"===a?aA(this,"light"):"darkmode"===a?aA(this,"dark"):(w("Unknown color mode, defaulting to light:",a),aA(this,"light"));xj.j(function(e){switch(e){case "lightmode":aA(d,"light");break;case "darkmode":aA(d,"dark");break;default:w("Unknown color mode, defaulting to light:",e),aA(d,"light")}})}r(Wz,F);Wz.prototype.Xq=function(){this.image=document.createElement("img");this.Jb=document.createElement("div");this.Sb=document.createElement("div");this.Tb=document.createElement("div")};Wz.prototype.wq=function(){this.element.appendChild(this.Jb);this.element.appendChild(this.Sb);this.element.appendChild(this.Tb);this.element.appendChild(this.image)};function Xz(a,b){void 0!==b&&(a.element.id=b);a.element.style.display="inline-block";a.element.style.position="relative";a.element.style.overflow="visible";a.element.style.height="24px";a.element.style.width="24px";a.element.style.cursor="pointer";a.element.style.margin="0 4px";a.element.style.padding="0";a.element.classList.add("player-controls-icon")}
function Yz(a){a.image.style.display="inline-block";a.image.style.boxShadow="border-box";a.image.style.height="16px";a.image.style.width="16px";a.image.style.padding="4px";a.image.style.margin="0";a.image.style.cursor="pointer";a.image.style.borderRadius="2px";a.image.style.backgroundColor="rgba(0, 0, 0, 0)";a.image.onclick=function(){a.Xe.h(void 0)}}
function Zz(a,b){a.Jb.style.position="absolute";a.Jb.style.bottom="calc(100% + 4px)";a.Jb.style.borderRadius="6px";a.Jb.style.paddingTop="6px";a.Jb.style.paddingBottom="6px";a.Jb.style.paddingLeft="8px";a.Jb.style.paddingRight="8px";a.Jb.style.visibility="hidden";b?a.Jb.style.right="0":a.Jb.style.left="0";a.Jb.classList.add("player-controls-icon-tooltip")}
function $z(a,b){a.Sb.style.position="absolute";a.Sb.style.bottom="100%";a.Sb.style.width="0px";a.Sb.style.height="0px";a.Sb.style.visibility="hidden";a.Sb.style.border="2px solid";a.Sb.style.borderLeftColor="transparent";a.Sb.style.borderBottomColor="transparent";a.Tb.style.position="absolute";a.Tb.style.bottom="100%";a.Tb.style.width="0px";a.Tb.style.height="0px";a.Tb.style.visibility="hidden";a.Tb.style.border="2px solid";a.Tb.style.borderRightColor="transparent";a.Tb.style.borderBottomColor="transparent";b?(a.Tb.style.right="8px",a.Sb.style.right="12px"):(a.Sb.style.left="8px",a.Tb.style.left="12px");a.Sb.classList.add("player-controls-icon-tooltip-decoration");a.Tb.classList.add("player-controls-icon-tooltip-decoration")}
function aA(a,b){a.Oj=b;"light"===a.Oj?(a.Jb.style.backgroundColor="white",a.Jb.style.color="rgb(73, 73, 79)",a.Sb.style.borderRightColor="white",a.Sb.style.borderTopColor="white",a.Tb.style.borderLeftColor="white",a.Tb.style.borderTopColor="white"):(a.Jb.style.backgroundColor="black",a.Jb.style.color="white",a.Sb.style.borderRightColor="black",a.Sb.style.borderTopColor="black",a.Tb.style.borderLeftColor="black",a.Tb.style.borderTopColor="black")}function bA(a,b){b?a.enable():a.disable()}
Wz.prototype.enable=function(){this.element.style.display="inline-block"};Wz.prototype.disable=function(){this.element.style.display="none"};function cA(a,b){a.image.src=null!==b&&void 0!==b?b:""}function dA(a,b){a.element.id=null!==b&&void 0!==b?b:""}function eA(a){Wz.call(this,a);this.zj.style.whiteSpace="nowrap";this.zj.style.fontSize="14px";this.zj.style.lineHeight="16px";this.zj.classList.add("player-controls-icon-text");fA(this,null===a||void 0===a?void 0:a.td)}r(eA,Wz);eA.prototype.Xq=function(){Wz.prototype.Xq.call(this);this.zj=document.createElement("span")};eA.prototype.wq=function(){Wz.prototype.wq.call(this);this.Jb.appendChild(this.zj)};function fA(a,b){a.td=b;void 0===a.td?(a.zj.innerText="",a.Jb.style.display="none",a.Sb.style.display="none",a.Tb.style.display="none"):(a.zj.innerText=a.td,a.Jb.style.display="",a.Sb.style.display="",a.Tb.style.display="")}function gA(a){eA.call(this,Object.assign(Object.assign({},a),{os:!1}))}r(gA,eA);function hA(a){eA.call(this,Object.assign(Object.assign({},a),{os:!0}))}r(hA,eA);function iA(a){hA.call(this,a);var b=this;this.mc=new D("videoOfflineChange");this.Eu=new Yb;fA(this,uh);cA(this,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/c2c_inactive.svg");a=new D("requestChangeClickListener");var c=new D("showMyCamStateChanged");a.j(function(d){Zb(b.Eu);B(b.Xe.j(function(){d()}),b.Eu)});c.j(function(d){switch(d){case "started":fA(b,vh);cA(b,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/c2c_active.svg");break;case "inactiveStopped":fA(b,uh);cA(b,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/c2c_inactive.svg");break;case "stopped":fA(b,uh),cA(b,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/c2c_inactive.svg")}});this.Xu=Fz(this.mc,a,c);bA(this,this.Xu)}r(iA,hA);iA.prototype.enable=function(){this.Xu?hA.prototype.enable.call(this):hA.prototype.disable.call(this)};iA.prototype.St=function(a){this.mc.h(a)};function jA(a){gA.call(this,a);var b=this;this.Fx=new D("notifyMouseEnter");this.Gx=new D("notifyMouseExit");this.element.onmouseenter=function(){b.Fx.h(void 0)};this.element.onmouseleave=function(c){b.Gx.h(c)}}r(jA,gA);function kA(a,b){F.call(this);var c=this;this.qh=new D("forceHlsPlayerEvent");this.Gk=new D("setPlayerComponentMutedEvents");this.Rt=new D("setPlayerComponentVolumeMutedEvents");this.ip=new D("playerComponentEnterFullScreenModeEvent");this.jp=new D("playerComponentReadjustForceHlsOverlayOrderEvent");this.kp=new D("playerComponentReadjustPlayButtonContainerEvent");this.Fp=new D("showJpegPlayerComponentImage");this.Nh=new D("requestVideoQualityButtonVisibilityChange");this.state={volume:60,T:!0};this.Ng=this.Cc=this.zl=this.Al=this.visible=this.Jl=this.be=this.hb=!1;this.tu(a);a=wb().disable_sound;void 0!==a&&"true"===a.toLowerCase()||"1"===a?(this.state.volume=0,this.state.T=!0):t()&&(a=window.localStorage.getItem("videoControls"),null!==a?(a=JSON.parse(a),this.state={volume:a.volume,T:this.cj?a.isMuted:!0}):this.state.T=!this.cj);Pb=this.state.T?0:this.state.volume;this.dl=window.navigator.userAgent;this.element.style.overflow="";this.element.style.bottom="0";this.element.style.left="0";this.element.style.height="50px";this.element.style.background="linear-gradient(180deg, rgba(50, 50, 50, 0) 0%, rgba(50, 50, 50, 0.4) 66%, rgba(50, 50, 50, 0.7) 100%)";this.Hd=document.createElement("div");this.Hd.style.position="absolute";this.Hd.style.right="0";this.Hd.style.bottom="0";this.Hd.style.paddingRight="8px";this.Hd.style.paddingBottom="12px";this.cg=document.createElement("div");this.cg.style.position="absolute";this.cg.style.left="0";this.cg.style.bottom="0";this.cg.style.paddingLeft="8px";this.cg.style.paddingBottom="12px";this.kr();this.lr();this.jr(b);this.ar();this.Kc=new iA({td:uh});this.er();this.Sq();this.hr();this.$q();this.gr();this.Vq();this.H(this.Ba,this.cg);this.H(this.Ma,this.cg);this.H(this.ua,this.cg);this.H(this.bd,this.Hd);this.H(this.Kc,this.Hd);this.H(this.X,this.Hd);this.H(this.Rc,this.Hd);this.H(this.hd,this.Hd);this.H(this.ge,this.Hd);this.H(this.Ib,this.Hd);this.H(this.wa,this.Hd);this.element.appendChild(this.cg);this.element.appendChild(this.Hd);K.j(function(d){var e,f;d.C.hb?(c.Ng=d.C.te,c.Df(d.A.status),d.A.event.ac.j(function(g){var h;c.su(g.La);c.Df(g.La);"privatespying"===g.La&&vj.h(void 0);c.Km(g.La);null===(h=c.$a)||void 0===h?void 0:Gk(h)}),d.A.event.Xh.j(function(g){c.Ng=g.te&&d.C.hb;c.Df(d.A.status)})):(c.Ng=!1,c.Df(d.A.status));null===(e=c.$a)||void 0===e?void 0:e.show();mb()&&!kb()&&!ab()&&uo&&void 0===c.$a&&(c.$a=Mk(c.Kc.element,{width:250,content:gj,Il:!1,Ud:0,bf:"135px",Wf:function(){return 0},qg:function(){return 15},Ep:["fullvideo","fullscreen","theater"]},null!==(f=c.Ia.parentElement)&&void 0!==f?f:void 0),c.he&&void 0!==c.$a&&(c.$a.element.style.zIndex="100"),c.Kc.Xe.j(function(){var g;null===(g=c.$a)||void 0===g?void 0:Jk(g)}));c.zc=d;c.bj&&!c.zl&&(c.zl=!0,c.Uq(),c.Km(d.C.ib));c.hb=d.C.hb;c.ms="offline"===d.C.ib;c.qe();c.he||lA(c);c.pg();c.tb()});Yj.Td.j(function(d){var e,f;"fullscreen"===d.nh?null===(e=c.$a)||void 0===e?void 0:Kk(e,1):null===(f=c.$a)||void 0===f?void 0:Kk(f,0);c.pg()});yk.j(function(d){c.visible&&d||c.tb()});Zp.j(function(){c.Gh()});yq.j(function(){I()&&mA(c)});Vx.j(function(){c.pd()},!1);v(pc(),document,function(){I()&&I()===c.Gr&&Xj("fullscreen")});this.element.onmousemove=function(){c.tb()};v("click",this.element,function(d){d.stopPropagation()});this.D()}r(kA,F);k=kA.prototype;k.tu=function(a){this.Ia=a.element;this.cj=a.N.Tm;a.N instanceof hs?(this.he=!0,this.bj=a.N.Ri):this.bj=this.he=!1;this.hg=a.N.Zh;this.it=a.Bh;this.Pi=a.Pi()};k.jr=function(a){function b(d){d=d.target;c.ua.element.contains(d)||a.element.contains(d)||(c.Nh.h(!1),x("touchend",document,b))}var c=this;this.ua=new jA({});cA(this.ua,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/quality-gear-sd.svg");fA(this.ua,void 0);this.ua.disable();this.ua.Fx.j(function(){c.Nh.h(!0);v("touchend",document,b)});this.ua.Gx.j(function(d){null!==d.relatedTarget&&(d=d.relatedTarget.parentNode,null===d||d.isEqualNode(a.element)||c.Nh.h(!1))})};k.lr=function(){function a(c){c!==b.state.volume&&(b.state.volume=c,b.state.T=0===b.state.volume,nA(b),b.qe(),b.Gb())}var b=this;this.Ma=new gq({Mb:15,Te:50,gh:1});this.Ma.element.style.display="inline-block";this.Ma.element.style.marginBottom="7px";this.Ma.element.style.verticalAlign="bottom";this.Ma.hn.j(function(c){b.Cc&&void 0!==b.zc&&(b.pd(!1),A("ForceHLS"),b.qh.h({Bk:b.zc}),b.pe(),wq.h(void 0));b.Gk.h(!1);a(c)});this.Ma.jn.j(a);this.Ma.gn.j(function(c){a(c);0===b.state.volume&&b.Gk.h(!0);A("ChangeVolume",{volume:c});b.Gb()})};k.kr=function(){var a=this;this.Ba=new gA({td:Zi});cA(this.Ba,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/volume-control-off.svg");this.Ba.Xe.j(function(){!a.he||-1<a.dl.indexOf("MSIE 10.0")||-1<a.dl.indexOf("MSIE 9.0")?(A("ToggleMute",{newState:!a.state.T}),A("ChangeVolume",{volume:a.state.volume}),a.state.T?a.pe():a.Gh(),a.tb()):void 0===a.zc?u("unexpected switch to hls",{},"VIDEO_"):(a.Cc&&a.pd(!1),A("ForceHLS"),a.qh.h({Bk:a.zc}),a.pe(),wq.h(void 0))})};k.ar=function(){this.bd=new hA({td:Kd});cA(this.bd,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/private_show.svg");this.bd.Xe.j(function(){vj.h(void 0)})};k.er=function(){this.X=new hA({td:qd+" (ctrl+s)",vl:"send-tip"});cA(this.X,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/tip-new.svg");this.X.Xe.j(function(){sj.h({})})};k.Sq=function(){this.Rc=new hA({td:Yi,vl:"chat-btn"});this.Rc.disable();cA(this.Rc,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/chat-closed.svg");this.Rc.Xe.j(function(){wj.h(void 0)})};k.hr=function(){this.hd=new hA({td:ze,vl:"user-list"});cA(this.hd,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/users.svg");this.hd.Xe.j(function(){rj.h(void 0)})};k.$q=function(){this.ge=new hA({td:Ee,vl:"more-rooms"});cA(this.ge,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/users-search.svg");this.ge.Xe.j(function(){Yp.h(void 0)})};k.gr=function(){var a=this;this.Ib=new hA({td:Mf});cA(this.Ib,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/mode-theater.svg");this.Ib.Xe.j(function(){var b="split";"split"===O()&&(b="theater");A("ChangeVideoMode",{videoMode:b});Xj(b);Zj();a.pg()})};k.Vq=function(){var a=this;this.be=oc();document[qc()]=function(){I()||(a.be=!1,a.wa.disable(),J("Full screen is unavailable."))};this.wa=new hA({td:Nf,vl:"full-screen"});cA(this.wa,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/fullscreen-expand.svg");oc()||this.wa.disable();this.wa.Xe.j(function(){a.Qk()})};k.Df=function(a){var b=["privaterequesting","privatespying","privatewatching"];if(!this.Ng&&-1===b.indexOf(a)||!this.hg)this.bd.disable();else{switch(a){case "unknown":case "offline":case "notconnected":case "away":case "hidden":case "passwordprotected":case "privatenotwatching":this.bd.disable();break;default:bA(this.bd,"split"!==O())}this.Y()}};k.pg=function(){bA(this.X,this.hb);this.ge.disable();this.hd.enable();fA(this.Ib,Mf);cA(this.Ib,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/mode-theater.svg");this.Ib.enable();fA(this.wa,Nf);cA(this.wa,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/fullscreen-expand.svg");this.Rc.enable();this.Kc.enable();void 0!==this.zc&&this.Df(this.zc.A.status);this.be&&this.wa.enable();switch(O()){case "split":this.X.disable();this.hd.disable();this.Rc.disable();this.bd.disable();this.Kc.disable();this.Pi&&this.Ib.disable();break;case "videoonly":this.X.disable();this.hd.disable();this.Rc.disable();this.bd.disable();this.Kc.disable();this.Ib.disable();this.wa.disable();break;case "theater":fA(this.Ib,Pf);cA(this.Ib,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/mode-split.svg");dA(this.Ib,"default-view");this.ge.enable();break;case "fullscreen":this.ge.enable();this.Ib.disable();fA(this.wa,Of+" (esc)");cA(this.wa,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/fullscreen-shrink.svg");break;case "noninteractive-fullscreen":break;default:u("Unexpected VideoMode: "+O(),{},"VIDEO_")}this.ms&&(this.Kc.element.style.display="none",this.X.disable(),this.hd.disable(),this.Rc.disable());this.tb()};k.qe=function(){var a=this.Ma.xe();0===a||this.state.T?(cA(this.Ba,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/volume-control-off.svg"),dA(this.Ba,"volume-mute"),fA(this.Ba,Zi)):(50>a?(cA(this.Ba,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/volume-control-low.svg"),dA(this.Ba,"volume-medium")):(cA(this.Ba,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/volume-control-full.svg"),dA(this.Ba,"volume-high")),fA(this.Ba,hh))};function nA(a){a.Rt.h(Object.assign({},a.state))}k.Gb=function(){t()&&!this.it&&window.localStorage.setItem("videoControls",JSON.stringify({volume:this.state.volume,isMuted:this.state.T}));Pb=this.state.T?0:this.state.volume};k.update=function(){lA(this);this.Gb()};function lA(a){a.Ma.Jd(a.state.T?0:a.state.volume);nA(a);a.qe()}k.Gh=function(){this.Kf(!0);this.update()};k.pe=function(){this.Kf(!1);0===this.state.volume&&(this.state.volume=60);this.update()};k.toggle=function(){this.visible?this.Eg():this.tb()};k.tb=function(){var a=this,b;null===(b=this.$a)||void 0===b?void 0:b.show();this.visible=!0;pq(this.element,"100ms");this.element.style.opacity="1";void 0!==this.Jh&&(clearTimeout(this.Jh),this.Jh=void 0);this.Jh=window.setTimeout(function(){a.Jh=void 0;a.Eg()},this.Jl?2E3:5E3)};k.Eg=function(){var a;this.Cc||(this.visible=!1,this.Jl=!0,pq(this.element,"500ms"),null===(a=this.$a)||void 0===a?void 0:a.D(),this.element.style.opacity="0")};k.show=function(){this.element.style.visibility="";this.tb();this.element.style.zIndex=this.Cc?"100":"3"};k.D=function(){this.element.style.visibility="hidden"};k.fi=function(a){this.state.volume=a;this.Ma.Jd(this.state.T?0:this.state.volume);this.qe()};k.Kf=function(a){this.state.T=a;this.Ma.Jd(this.state.T?0:this.state.volume);this.qe()};k.ru=function(a){this.fi(a);this.Gb()};k.qu=function(a){this.Kf(a);this.Gb()};k.Wb=function(){return 0};k.Co=function(){return!1};k.Qk=function(){this.Cc&&this.pd();I()?nc():this.be&&this.ip.h(void 0);this.pg()};function mA(a){"fullscreen"===O()?nc():mc(a.Gr)}
k.su=function(a){switch(a){case "unknown":case "offline":case "notconnected":case "away":case "privatenotwatching":case "hidden":case "passwordprotected":if("fullscreen"===O()){bA(this.wa,this.be);break}I()&&nc();this.wa.disable();break;case "public":case "privatespying":case "privatewatching":case "privaterequesting":bA(this.wa,this.be);break;default:u("unexpected room status",a,"")}};k.pd=function(a){a=void 0===a?!0:a;this.Cc&&void 0!==this.zc&&(void 0!==this.Fa&&null!==this.Fa.parentElement&&(this.Fa.parentElement.removeChild(this.Fa),this.Fa=void 0),void 0!==this.la&&null!==this.la.parentElement&&(this.la.parentElement.removeChild(this.la),this.la=void 0),this.Cc=!1,this.Eg(),this.D(),this.ua.disable(),!this.Al&&a&&(this.Al=!0,A("ForceHLS"),this.qh.h({Bk:this.zc,pe:!1}),wq.h(void 0)),this.element.style.zIndex="3")};k.Wq=function(){var a=this;this.Fa=document.createElement("div");this.Fa.style.width="100%";this.Fa.style.height="100%";this.Fa.style.position="absolute";this.Fa.style.top="0";this.Fa.style.left="0";this.Fa.style.cursor="pointer";v("click",this.Fa,function(){a.pd()});v("click",this.element,function(){a.pd()});this.jp.h(this.Fa)};k.Km=function(a){void 0!==this.la&&void 0!==this.Fa&&("public"===a?(this.la.style.display="",this.Fa.style.display=""):(this.la.style.display="none",this.Fa.style.display="none"));this.Y()};k.Uq=function(){var a=this;if(this.he){this.Cc=!0;this.la=document.createElement("div");var b=this.Ia.getBoundingClientRect(),c=document.createElement("img");c.src="https://static-assets.highwebmedia.com/tsdefaultassets/play-inactive.svg";c.style.width="60px";c.style.height="60px";c.style.position="relative";c.style.top="40px";c.style.left="45px";c.style.cursor="pointer";v("click",c,function(){a.pd()});this.la.style.position="absolute";this.la.style.top=b.height/2-70+"px";this.la.style.left=b.width/2-70+"px";this.la.style.cursor="pointer";this.la.style.width="140px";this.la.style.height="140px";this.la.style.borderRadius="50%";this.la.style.backgroundColor="rgba(0,0,0,0.25)";this.la.appendChild(c);this.kp.h(this.la);this.Fp.h(void 0);this.Wq();this.G()}};k.G=function(){if(void 0!==this.la){var a=this.Ia.getBoundingClientRect();this.la.style.top=a.height/2-70+"px";this.la.style.left=a.width/2-70+"px"}};k.Hx=function(a){this.cj=a};k.Ix=function(a){this.hg=a};k.Ts=function(a){this.he=a};k.Ss=function(a){this.bj=a};k.Jx=function(a){this.Kc.St(a)};k.Xi=function(){};k.Py=function(a){bA(this.ua,a)};k.Oy=function(a){this.ua.element.style.paddingTop=(a?14:0)+"px"};k.tw=function(){return this.cg.offsetLeft+this.ua.element.offsetLeft};function oA(a,b,c){this.red=a;this.green=b;this.blue=c;this.Cn=this.fo=this.pp=10}function pA(a,b){var c=void 0===c?!1:c;for(b=Math.min(255,b);b>a.brightness()&&(!c||255!==a.red&&255!==a.green&&255!==a.blue);)a.red=Math.min(a.red+Math.max(1,.05*a.red),255),a.green=Math.min(a.green+Math.max(1,.05*a.green),255),a.blue=Math.min(a.blue+Math.max(1,.05*a.blue),255);a.red=Math.round(a.red);a.green=Math.round(a.green);a.blue=Math.round(a.blue)}
oA.prototype.brightness=function(){return Math.round(this.pp/(this.pp+this.fo+this.Cn)*this.red+this.fo/(this.pp+this.fo+this.Cn)*this.green+this.Cn/(this.pp+this.fo+this.Cn)*this.blue)};function qA(){var a=document.createElement("div");a.style.width="100%";a.style.display="inline-block";a.style.padding="2px";return a}
function rA(){var a=void 0===a?"":a;var b=document.createElement("div");b.style.fontFamily="Tahoma,Arial,Helvetica,sans-serif";b.style.boxSizing="border-box";b.style.width="100%";b.style.paddingTop="3px";b.style.paddingBottom="3px";b.style.paddingLeft="5px";b.style.paddingRight="5px";b.style.fontSize="12px";b.style.overflowX="hidden";0<a.length&&b.setAttribute("data-nick",a);return b}function sA(a,b){return b.username===a?"Broadcaster ":b.Ob?"Moderator ":b.Ec?"Fan club member ":""}
function tA(a){a=sq(a);a=new oA(a.red,a.green,a.blue);var b=a.brightness();pA(a,255-b/3);return"rgb("+a.red+", "+a.green+", "+a.blue+")"};var uA={o:"room-owner",m:"moderator",f:"fanclub-user",tr:"tipped-recently-user",g:"standard-user",t:"tipped-user",p:"tipped-lots-user",l:"tipped-tons-user"};function vA(a){this.Hj=this.an=0;this.Je=[];var b=a.split(",");a=~~b[0];b=b.slice(1);var c=[];b=q(b);for(var d=b.next();!d.done;d=b.next()){var e=q(d.value.split("|"));d=e.next().value;var f=e.next().value;e=e.next().value;f=uA[f];d={username:d,Db:!1,Ec:!1,ye:!1,Ob:!1,If:!1,lg:!1,Jf:!1,Cb:"",Ki:e,lc:"un"};"room-owner"===f?d.Db=!0:"fanclub-user"===f?d.Ec=!0:"tipped-user"===f?d.ye=!0:"moderator"===f?d.Ob=!0:"tipped-recently-user"===f?d.If=!0:"tipped-lots-user"===f?d.lg=!0:"tipped-tons-user"===f&&(d.Jf=!0);c.push(d)}this.an=a+c.length;this.Hj=a;this.Je=c};var wA=new D("tipsInPast24HoursUpdate"),xA=new D("tokenBalanceUpdate");function yA(a){return new Promise(function(b,c){Gb("tipping/current_tokens/?room="+a).then(function(d){d=new Q(d.responseText);var e={ob:W(d,"token_balance")},f=S(d,"tip_options");if(void 0!==f){f=new Q(f);f=lm(f,"tip_options");if(void 0!==f){f=new Q(f);var g=f.getAsString("label"),h=km(f,"options"),m=[];h=q(JSON.parse(h));for(var n=h.next();!n.done;n=h.next())n=new Q(JSON.stringify(n.value)),m.push({label:n.getAsString("label")}),mm(n);g={label:g,options:m};mm(f);f=g}else f=void 0;e.Ok=f}mm(d);xA.h({gd:e.ob});b(e)}).catch(function(d){c(d.status)})})}var zA=!1;function AA(a){return new Promise(function(b,c){zA||(zA=!0,z("tipping/send_tip/"+a.Z+"/",{tip_amount:a.oz,message:a.message,source:a.source,tip_room_type:a.pz,tip_type:a.xj,video_mode:a.Qd}).then(function(d){zA=!1;d=new Q(d.responseText);var e={success:V(d,"success")},f=S(d,"error",!1);void 0!==f?e.error=f:(e.ob=W(d,"token_balance"),e.Ym=W(d,"tipped_performer_last_24hrs"));mm(d);void 0!==e.ob&&xA.h({gd:e.ob});b(e)}).catch(function(d){zA=!1;c(d.status)}))})};function BA(){this.Tj=0}function CA(a){a.Tj+=1;return Math.min(1E4,500*a.Tj)}BA.prototype.reset=function(){this.Tj=0};function DA(a){this.Gf=[];this.Or=[];var b=a.match(/#[a-z0-9\-_]{2,50}/g);if(null!==b){b=q(b);for(var c=b.next();!c.done;c=b.next())this.Or.push(c.value.substr(1))}this.Gf=a.split(/#[a-z0-9\-_]{2,50}/g)};function EA(a){return 0===a.length?Promise.resolve([]):Gb("tags/approved_from_title/?title="+encodeURIComponent(a)).then(function(b){return b.responseText.split(",")})};var FA=new D("gameSelectionChanged");function GA(a){this.ca=a}window.debugAllMessages=function(){};var YA={onAuthResponse:HA,onRoomCountUpdate:IA,onRoomMsg:JA,onNotify:KA,onTitleChange:LA,onPrivateMsg:MA,onPromotion:NA,onRevoke:OA,onPersonallyKicked:PA,onSilence:QA,onKick:RA,onNotifyPrivateShowRequest:SA,onNotifyPrivateShowApprove:TA,onNotifyPrivateShowCancel:UA,onNotifyLeavePrivateRoom:VA,onNotifyTokenBalanceUpdate:WA,onNotifyAwayModeCancel:XA};function IA(a,b){1>b.I.length?u("Invalid onRoomCountUpdate args: "+b.I):""!==b.I[0]&&a.event.zy.h(parseInt(b.I[0]))}
function HA(a,b){if(1<=b.I.length&&"1"===b.I[0]){b=a.cD;"notconnected"!==a.status&&(b=a.status);switch(b){case "offline":case "away":case "privaterequesting":case "privatenotwatching":case "privatespying":case "hidden":case "public":ZA(a);$A(a,b);break;case "privatewatching":"notconnected"===a.status?(aB(a),$A(a,b)):Up(a.B()).then(function(c){"privatewatching"===c.ib?aB(a):ZA(a);$A(a,c.ib)}).catch(function(c){u("Error getting room dossier on reconnect: "+c,{room:a.B()})});break;default:w("unexpected status: "+
b)}bB(a.Oe)}else 0<b.I.length&&"0"===b.I[0]||u("Error connecting!",{message:b})}function LA(a,b,c){1>b.I.length?u("Invalid onTitleChange args: "+b.I):1<b.I.length&&"0"===b.I[1]||cB(a,b.I[0],c)}function cB(a,b,c){if(""!==b){var d=[],e=Jc(b),f=new DA(e),g=function(h){for(var m=0;m<f.Gf.length;m+=1){var n=X(f.Gf[m]);n.ay=!1;d.push(n);m<f.Or.length&&d.push(Sn(f.Or[m],h))}a.event.Aa.h({ja:[d],Na:"#DC5500",weight:"bold",na:!1});a.event.hu.h(b)};void 0!==c?g(c):EA(b).then(g).catch(function(){g([])})}}
function MA(a,b){if(""===b.I[0])1<b.I.length?a.event.Aa.h({ja:[[X(b.I[1])]],na:!0}):u("handlePrivateMessage args: "+b.I);else{a=b.I;b=new Q(a[1]);!0!==R(b,"X-Successful")&&u("X-Successful not true?");var c=Wn(a[0],b);mm(b);c.Ya=""!==a[2]?a[2]:a[0];oo(c.O.username)||$n.h(c)}}
function NA(a,b){if(2!==b.I.length)u("Invalid onPromotion args: "+b.I);else{b.I[0]===a.username()&&a.event.zx.h(!0);var c=b.I[1];var d=b.I[0];c=M(L("%(from)s has granted moderator privileges to %(to)s."),{from:c,to:d},!0);a.event.Aa.h({ja:[[X(c)]],na:0<=b.I.indexOf(a.username())});fq.h({Ob:!0,username:b.I[0]})}}
function OA(a,b){if(2!==b.I.length)u("Invalid onRevoke args: "+b.I);else{b.I[0]===a.username()&&a.event.zx.h(!1);var c=b.I[1];var d=b.I[0];c=M(L("%(from)s has revoked moderator privileges from %(to)s."),{from:c,to:d},!0);a.event.Aa.h({ja:[[X(c)]],na:0<=b.I.indexOf(a.username())});fq.h({Ob:!1,username:b.I[0]})}}
function PA(a,b){1!==b.I.length?u("Invalid onPersonallyKicked args: "+b.I):(b=b.I[0],"rejoined"===b?b=Vd:"kicked"===b?b=Wd:(w("createPersonallyKickedMessage called with unknown argument "+b),b=Xd),a.event.Aa.h({ja:[[X(b)]],na:!0}),$A(a,"notconnected"))}
function QA(a,b){if(2!==b.I.length)u("Invalid onSilence args: "+b.I);else{a.event.sp.h({username:b.I[0]});var c=a.event.Aa,d=c.h;var e=b.I[0];var f=b.I[1];e=M(L("User %(username)s was silenced by %(silencer)s and their messages have been removed"),{username:e,silencer:f},!0);d.call(c,{ja:[[X(e)]],na:0<=b.I.indexOf(a.username())});a.event.Xo.h({Xg:b.I[0],Kk:b.I[1],Ah:!1})}}
function RA(a,b){if(1!==b.I.length)u("Invalid onKick args: "+b.I);else{a.event.sp.h({username:b.I[0]});var c=a.event.Aa,d=c.h;var e=b.I[0];e=M(L("User %(username)s was kicked out of the room and their messages have been removed"),{username:e},!0);d.call(c,{ja:[[X(e)]],na:b.I[0]===a.username()});a.event.Xo.h({Xg:b.I[0],Kk:a.B(),Ah:!0})}}
function JA(a,b){if(""===b.I[0])1<b.I.length?"Chat disconnected. The broadcaster has set a new password on this room."===b.I[1]?($A(a,"passwordprotected"),a.event.Aa.h({ja:[[X(Jd)]],na:!0})):a.event.Aa.h({ja:[[X(b.I[1])]],na:!0}):u("roomMessage invalid args: "+b.I);else{var c=new Q(b.I[1]);!0!==R(c,"X-Successful")&&u("X-Successful not true?");b=Wn(b.I[0],c);oo(b.O.username)||(a.event.It.h(Object.assign(Object.assign({},b),{rs:!0===R(c,"X-Spam")})),a.event.Ek.h(b))}}
function SA(a,b){if(2>b.I.length)u("PrivateShowRequest invalid args: "+b.I);else{var c=b.I[0];a.ky=c;a.event.jC.h({WH:c,PH:parseInt(b.I[1])});if(a.Eb){switch(a.status){case "public":case "away":break;default:w("unexpected status: "+a.status)}$A(a,"privaterequesting");a.Eb&&a.event.hp.h("show")}}}
function TA(a,b){if(1!==b.I.length)u("Invalid privateShowApprove args: "+b.I);else{switch(a.status){case "public":$A(a,"privatenotwatching");break;case "privaterequesting":dB(a.Oe,"leaveRoom",{room:a.B()});aB(a);$A(a,"privatewatching");break;default:w("private show approve unexpected status: "+a.status)}b=X(Nd);"privatewatching"===a.status?(a.event.Aa.h({ja:[[b]],Na:"#222",background:"#ff8b45",weight:"bold",na:!0}),a.Eb&&!Ja.current.Gc&&a.event.Aa.h({ja:[[X(hj)]],na:!0})):a.event.Aa.h({ja:[[b,X(" ("),{ic:3},X(")")]],Na:"#222",background:"#ff8b45",weight:"bold",na:!0})}}
function UA(a,b){function c(){$A(a,"away");a.event.Aa.h({ja:[[X(Od)]],Na:"#222",background:"#ff8b45",weight:"bold",na:!0})}0!==b.I.length&&u("Invalid privateShowCancel args: "+b.I);switch(a.status){case "privaterequesting":$A(a,"public");a.event.Aa.h({ja:[[X(Pd)]],Na:"#222",background:"#ff8b45",weight:"bold",na:!0});break;case "away":case "hidden":case "public":break;case "privatewatching":dB(a.Oe,"leavePrivateRoom",{room:a.B()});ZA(a);c();break;case "privatespying":case "privatenotwatching":c();break;default:w("privateShowCancel wrong room status: "+a.status)}}function VA(){}function WA(a,b){2!==b.I.length?u("Invalid tokenBalanceUpdate args: "+b.I):a.event.ju.h({gd:Number(b.I[1])})}function XA(a,b){0!==b.I.length&&w("Invalid awayModeCancel args: "+b.I);switch(a.status){case "away":case "public":case "privaterequesting":a.event.Aa.h({ja:[[X(Ud)]],Na:"#222",background:"#ff8b45",weight:"bold",na:!0});$A(a,"public");break;default:u("unexpected state: "+a.status)}}
function KA(a,b){var c=new Q(b.I[0]),d=T(c,"type");c.mf("send_to");c.mf("to_user");if("function"!==typeof eB[d])u("Unhandled onNotify type "+d,{message:b});else(0,eB[d])({ca:a,p:c,Yj:1<b.I.length&&"true"===b.I[1]})}
var eB={tip_alert:fB,log:gB,refresh_panel:hB,app_tab_refresh:iB,appnotice:jB,apperrorlog:kB,clear_app:lB,room_entry:mB,room_leave:nB,spy_room_leave:oB,purchase_notification:pB,settingsupdate:qB,hidden_show_status_change:rB,hidden_show_approve:sB,hidden_show_deny:tB,is_restricted_hls_allowed:uB,compliance_image_required:vB,game_selection:wB};function fB(a){var b=Yn(a.p);void 0!==a.Yj&&a.Yj||a.ca.event.hp.h(xB(b.amount));a.ca.event.Op.h(b);var c=[""===b.O.username?X(Be):Rn(b.O),X(" tipped "+b.amount+" "+(1<b.amount?"tokens":"token"))];b.zo&&c.push(X(" anonymously"));a.ca.Eb&&(""!==b.message&&c.push(X(" -- "+b.message)),Gb("tipping/get_token_balance/").then(function(d){d=new Q(d.responseText);V(d,"success")&&a.ca.event.ju.h({gd:W(d,"token_balance")})}).catch());a.ca.event.Aa.h({ja:[c],background:"#ff3",Na:"#000",weight:"bold",na:b.O.username===a.ca.username()||a.ca.Eb,qr:b.O.username})}function gB(a){var b=S(a.p,"msg");void 0===b?u("handleLog with an empty msg"):(a.ca.event.Et.h({message:b,type:T(a.p,"type"),aa:W(a.p,"tid")}),a.ca.event.sq.h(b))}function iB(a){a.ca.event.Uz.h({})}function hB(a){a.ca.event.ut.h({})}
function jB(a){var b=R(a.p,"msg"),c=[];if("string"===typeof b)c.push([X("Notice: "+b)]);else if(b instanceof Array){b=q(b);for(var d=b.next();!d.done;d=b.next())c.push([X("Notice: "+d.value)])}else{u("handleAppNotice error: Invalid message type "+(void 0===b?"undefined":b.toString()));return}c={ja:c,sd:S(a.p,"to_group"),ng:S(a.p,"to_user"),background:S(a.p,"background",!1),Na:S(a.p,"foreground",!1),weight:S(a.p,"weight",!1),na:!1,aa:W(a.p,"tid")};void 0!==a.Yj&&!1!==a.Yj||a.ca.event.Rg.h(c);a.ca.event.Aa.h(c)}
function kB(a){if(a.ca.Eb){var b=R(a.p,"msg"),c=[];c.push([X("Error: ")]);if("string"===typeof b)c.push([X(b)]);else if(b instanceof Array){b=q(b);for(var d=b.next();!d.done;d=b.next())c.push([X(d.value)])}else{u("handleAppErrorLog error: Invalid message type "+(void 0===b?"undefined":b.toString()));return}c={ja:c,na:!1};void 0!==a.Yj&&!1!==a.Yj||a.ca.event.Et.h({message:c.ja,type:T(a.p,"type"),aa:W(a.p,"tid")});a.ca.event.Aa.h(c)}}function lB(a){a.ca.event.ut.h({})}
function mB(a){var b=a.ca;a=Vn(a.p);switch(a.Cb){case "promotion":a.Cb="";a.lc="pr";break;case "onlineannouncement":a.Cb="",a.lc="fn"}if(yB(b,b.jj,a)){var c=b.Eb?a.Cb:"",d=[X(sA(b.B(),a)),Rn(a),X(" has joined the room")];""!==c?(d.push(X(" (from ")),d.push(Sn(c,[c])),d.push(X(")"))):b.Eb&&"pr"===a.lc?d.push(X(" via promotion")):b.Eb&&"fn"===a.lc&&d.push(X(" via online announcement"));d.push(X("."));b.event.Aa.h({ja:[d],na:a.username===b.username(),qr:a.username})}(a.Db||a.Ob||a.Ec)&&b.event.Ay.h({Ja:Object.assign(Object.assign({},a),{Cb:""}),action:"enter"});b.event.xC.h({Ja:Object.assign(Object.assign({},a),{Cb:""}),lc:a.lc,RA:a.Cb})}function nB(a){var b=a.ca;a=Vn(a.p);if(yB(b,b.lj,a)){var c=" "+Nh;a.Db&&!zB.has(b.status)&&(c+=" "+Oh);b.event.Aa.h({ja:[[X(sA(b.B(),a)),Rn(a),X(c)]],na:a.username===b.username(),qr:a.username})}(a.Db||a.Ob||a.Ec)&&b.event.Ay.h({Ja:Object.assign(Object.assign({},a),{Cb:""}),action:"leave"});b.event.yC.h({Ja:Object.assign(Object.assign({},a),{Cb:""})})}
function oB(a){"privatespying"===a.ca.status&&$A(a.ca,"privatenotwatching")}
function pB(a){var b=Vn(a.p);!0!==V(a.p,"history")&&w("purchase history is not true?");for(var c=[],d=q(T(a.p,"message").split(new RegExp("\\b"+b.username+"\\b","gi"))),e=d.next();!e.done;e=d.next())e=e.value,""!==e&&c.push(X(e)),c.push(Rn(b));c.pop();b.username===a.ca.username()&&Gb("tipping/get_token_balance/").then(function(f){f=new Q(f.responseText);V(f,"success")&&a.ca.event.ju.h({gd:W(f,"token_balance")})}).catch();a.ca.event.Dy.h({O:b,content:T(a.p,"message"),aa:W(a.p,"tid")});a.ca.event.Aa.h({ja:[c],background:"#33ff33",Na:"#000",weight:"bold",na:b.username===a.ca.username()})}
function qB(a){var b=a.p,c={te:V(b,"allow_privates"),Fd:W(b,"private_price"),kg:W(b,"spy_price"),Lh:W(b,"private_min_minutes"),li:V(b,"allow_show_recordings"),aa:W(b,"tid")};mm(b);a.ca.event.Xh.h(c);if(a.ca.Fd!==c.Fd){a.ca.Fd=c.Fd;b=a.ca.B();var d=c.Fd;b=M(L("%(username)s changed Private Show price to %(price)s tokens per minute"),{username:b,price:d},!0);a.ca.event.Aa.h({ja:[[X(b)]],na:!0})}a.ca.kg!==c.kg&&0!==c.kg&&(a.ca.kg=c.kg,b=a.ca.B(),c=c.kg,c=M(L("%(username)s changed Spy on Private Show price to %(price)s tokens per minute"),{username:b,price:c},!0),a.ca.event.Aa.h({ja:[[X(c)]],na:!0}))}function rB(a){if(!a.ca.Eb){var b=V(a.p,"is_starting")?"hidden":"public",c=T(a.p,"hidden_message");mm(a.p);a.ca.event.Gw.h(c);switch(a.ca.status){case "privaterequesting":by(a.ca);break;case "public":case "hidden":break;default:u("handleHiddenShowStatusChange unexpected status: "+a.ca.status)}"public"===b?window.setTimeout(function(){$A(a.ca,"public")},3E3):$A(a.ca,b)}}
function sB(a){V(a.p,"initial_hide_cam")?window.setTimeout(function(){$A(a.ca,"public")},2E3):"public"!==a.ca.status&&$A(a.ca,"public")}function tB(a){"public"===a.ca.status&&$A(a.ca,"hidden")}function uB(){}function xB(a){return 1E3<=a?"huge":500<=a?"large":100<=a?"medium":15<=a?"small":"tiny"}var AB=!1;function vB(a){if(!AB){AB=!0;var b="Compliance Image Required!\nPlease visit "+window.location.host+"/verify on your mobile\n     device to verify your identity.\n\nThis is required for broadcasters not showing their face.";a=em(a.p,"time");J(void 0!==a&&0<a?b+("\n\nYou have "+a+" minute"+(1===a?"":"s")+" to complete."):b+"\n\nYou must complete this to continue broadcasting, failure to do so may result in broadcasting restrictions.",function(){AB=!1})}}
function wB(a){var b=FA.h;a:{a=lm(a.p,"game");if(void 0!==a&&(a=JSON.parse(a),null!==a)){a={description:a.description,eB:a.game_url,image:a.image_64x64,name:a.name,uid:a.uid,MD:a.viewers};break a}a=void 0}b.call(FA,a)};function BB(a,b,c){this.Id=a;this.event=b;this.Sc=c;this.ji=void 0;this.Wt=!0;this.LB=new GA(this.Sc);this.st=new BA;CB(this)}
function CB(a){var b;if(0<a.Id.host.length){var c="http"===a.Id.host.substring(0,4)?new SockJS(a.Id.host):new WebSocket(a.Id.host);a.ji=c;c.onclose=function(d){Zy("Connection closed:"+JSON.stringify(d));void 0!==b?a.event.Aa.h({ja:[[X("Trying to reconnect")]],na:!0}):(a.event.Aa.h({ja:[[X("Chat disconnected")]],na:!0}),a.event.wA.h(void 0),a.Wt&&(b=window.setTimeout(function(){a.event.Aa.h({ja:[[X("Trying to reconnect")]],na:!0});CB(a)},CA(a.st))))};c.onerror=function(d){Zy("Connection error:"+JSON.stringify(d));void 0===b&&a.Wt&&(b=window.setTimeout(function(){CB(a)},CA(a.st)))};c.onmessage=function(d){var e=a.LB;d=d.data;var f=JSON.parse(d);f={method:f.method,callback:f.callback,I:f.args};0<=Object.keys(YA).indexOf(f.method)?(e.ca.event.Ck.h(f),YA[f.method](e.ca,f)):u("Unknown message method: "+f.method+" args: "+d)};c.onopen=function(){a.Sc.nk=new Date;dB(a,"connect",{user:a.Id.kl,password:a.Id.Dz,room:a.Id.B,room_password:a.Id.Cy})}}}
BB.prototype.readyState=function(){if(void 0!==this.ji)switch(this.ji.readyState){case WebSocket.CLOSED:return"closed";case WebSocket.OPEN:return"open";case WebSocket.CLOSING:return"closing";case WebSocket.CONNECTING:return"connecting";default:return"unknown"}else return"websocket undefined"};BB.prototype.Nc=function(){return this.ji};function bB(a){a.st.reset();cB(a.Sc,a.Id.Zb)}BB.prototype.disconnect=function(){this.Wt=!1;void 0!==this.ji&&(this.ji.close(),this.ji=void 0)};function dB(a,b,c){c=void 0===c?{}:c;a.Nc().readyState===WebSocket.OPEN&&(b=JSON.stringify({method:b,data:c}),a.Nc().send(b))};var DB;K.j(function(a){DB=a});function EB(){var a,b,c=Ja.current;return!0===(null===(a=c.sm)||void 0===a?void 0:a.Wh.flags.get("offline_room_chat_pm_enabled"))||!0===(null===(b=c.xb)||void 0===b?void 0:b.CB)}
du.j(function(a){if(EB()&&"offline"===(null===DB||void 0===DB?void 0:DB.C.ib)&&!0!==Ja.current.fs){var b=[""===a.O.username?X(Be):Rn(a.O),X(" tipped "+a.amount+" "+(1<a.amount?"tokens":"token"))];""!==a.message&&b.push(X(" -- "+a.message));a.zo&&b.push(X(" anonymously"));ao.h({ja:[b],background:"#ff3",Na:"#000",weight:"bold",na:!1,XB:0,lF:a.O.username,Zm:a.Zm})}});ju.j(function(a){void 0!==DB&&FB(DB.A)&&(oo(a.O.username)||DB.A.event.Ek.h(a))});function GB(a){var b=this;this.d=a;this.Pj=new Date;this.nk=new Date;this.status=this.rd="offline";this.al=this.ze=!1;this.ky="";this.Eb=!1;this.Cb="";this.lc="un";this.event={Po:new D("messageSent"),Ek:new D("roomMessage"),Aa:new D("roomNotice"),Rg:new D("roomNoticeWowza"),Et:new D("roomAppErrorWowza"),It:new D("roomMessageWowza"),Ck:new D("roomControlWowza"),Dy:new D("roomPurchaseWowza"),Ay:new D("roomEnterLeave"),xC:new D("roomPrivilegedEnter"),yC:new D("roomPrivilegedLeave"),jy:new D("privateMessage"),ac:new D("statusChange",{Bd:15}),Gw:new D("hiddenMessageChange"),ut:new D("refreshPanel"),hu:new D("titleChange"),pA:new D("clearApp"),sp:new D("removeMessages"),Xh:new D("settingsUpdate"),zy:new D("roomCountUpdate"),zx:new D("modStatusChange"),ju:xA,jC:new D("privateShowRequest"),hp:new D("playSound"),Uz:new D("appTabRefresh"),sq:new D("appDebugLog"),Op:new D("tipAlert"),QF:new D("leftRoom"),wA:new D("connectionLost"),Xo:new D("onBanSilence")};this.mf=function(c){b.d.B===b.d.userName?(u("Error: cannot ignore users in this room"),new Promise(function(){return!1})):(b.event.Aa.h({ja:[[X("Ignoring "+c)]],na:!0}),z("api/ts/chat/ignored-users/",{username:c}).then(function(d){if("max"===d.responseText)return b.event.Aa.h({ja:[[X("Please signup/login to enable this feature.")]],na:!0}),!1;lo.add(c);mo();return!0}).catch(function(d){u("Error posting ignore user: "+d);return!1}))};this.nu=function(c){b.event.Aa.h({ja:[[X("No longer ignoring "+c)]],na:!0});Jb("api/ts/chat/ignored-users/",{username:c}).then(function(){lo.delete(c);mo();return!0}).catch(function(d){u("Error posting unignore user: "+d);return!1})};this.Eb=this.username()===this.B();this.Qe=0===a.kl.indexOf("__anonymous__");!1===this.Qe&&no();this.ze=a.ze;this.jj=a.oa.jj;this.lj=a.oa.lj;this.cD=this.Eb?"public":a.ib;this.Fd=a.Fd;this.kg=a.kg;this.Cb=this.d.Cb;this.lc=this.d.lc;this.Oe=new BB(this.d,this.event,this);$A(this,"notconnected")}k=GB.prototype;k.vg=function(){return this.d.vg};function FB(a){return EB()&&"offline"===a.d.ib}k.disconnect=function(){this.Oe.disconnect()};function $A(a,b){b!==a.status&&(a.rd=a.status,a.status=b,a.Eb&&"notconnected"===a.rd&&"public"===a.status&&dy(),a.nk=new Date,a.event.ac.h({rd:a.rd,La:a.status}))}function HB(a){a.al=!a.al;cq.h(a.al)}function IB(a){switch(a.status){case "privatewatching":return!0;case "privaterequesting":case "privatenotwatching":case "passwordprotected":case "public":case "away":case "hidden":case "offline":case "privatespying":case "notconnected":return!1;default:return w("unexpected status: "+a.status),!1}}
function JB(a,b,c){b=void 0===b?"a":b;c=void 0===c?!0:c;if("offline"===a.status||"notconnected"===a.status||"unknown"===a.status)return new Promise(function(e){e({an:0,Hj:0,Je:[]})});if(void 0!==a.ym)return a.ym;var d={roomname:a.B(),"private":IB(a),sort_by:b,exclude_staff:c};a.ym=new Promise(function(e,f){Gb("api/getchatuserlist/?"+vb(d)).then(function(g){g=new vA(g.responseText);e(g);a.ym=void 0}).catch(function(g){f(g);a.ym=void 0})});return a.ym}
function KB(a,b){new Promise(function(c,d){z("push_service/publish_chat_message/",{room:a.d.B,message:b}).catch(function(e){403===e.ud.status||u("(Push Service) calling publish_chat_message returned an error",e);d("Message failed to send")}).then(function(e){var f="ok"===e.responseText;A("SendRoomMessage",{username:a.d.B,source:"offline",success:f});f||bo.h({message:e.responseText});c()}).catch(d)})}
function LB(a,b){a.event.Po.h(void 0);A("SendRoomMessage");var c=pb(new Uint32Array(1))[0];b=JSON.stringify({m:b,f:"",c:"",tid:c});FB(a)?KB(a,b):dB(a.Oe,IB(a)?"messagePrivateRoom":"messageRoom",{room:a.d.B,msg:b})}function MB(a){dB(a.Oe,"updateRoomCount",{room_uid:a.d.AC,model_name:a.B(),private_room:"privatewatching"===a.status})}function NB(a,b){var c=OB;c.event.Po.h(void 0);dB(c.Oe,IB(c)?"addPrivateUserMsgToUser":"addUserMsgToUser",{msg:JSON.stringify({m:a,f:"",c:""}),room:c.B(),to_user:b})}
function PB(a,b){dB(a.Oe,"kickUser",{user:b,room:a.B()})}
function Yx(a,b,c,d){return new Promise(function(e,f){"public"!==a.status?f("unexpected status: "+a.status):z("tipping/private_show_request/"+a.B()+"/",{chat_username:a.username(),price:""+b,private_show_minimum_minutes:""+c,recordings_allowed:""+d}).then(function(g){g=new Q(g.responseText);var h=T(g,"message",!1);V(g,"success")?(mm(g),$A(a,"privaterequesting"),a.event.Aa.h({ja:[[X(Td)]],Na:"#222",background:"#ff8b45",weight:"bold",na:!0}),e("")):(""===h&&(u("unknown cannot start private show reason"),h="Cannot start private show."),e(h))}).catch(function(g){f(g)})})}
function $x(a){return new Promise(function(b,c){"privatenotwatching"!==a.status?c("unexpected status: "+a.status):z("tipping/spy_on_private_show_request/"+a.B()+"/",{chat_username:a.username()}).then(function(d){d=new Q(d.responseText);var e=V(d,"success"),f=T(d,"message",!1);mm(d);e?($A(a,"privatespying"),a.event.Aa.h({ja:[[X("You are spying on the private show")]],Na:"#222",background:"#ff8b45",weight:"bold",na:!0}),b("")):(""===f&&(f="Error joining spy show"),b(f))}).catch(function(d){c(d)})})}
function by(a){return new Promise(function(b,c){var d="tipping/private_show_cancel/"+a.B()+"/",e=a.status;z(d,{}).then(function(f){f=new Q(f.responseText);var g=V(f,"success"),h=W(f,"remaining_seconds"),m=U(f,"private_show_minimum_minutes");mm(f);switch(e){case "privatewatching":if(!g){0===h?b(Rd):(f="You have started a private show with a "+m+" minute minimum. You cannot cancel your private show yet. It still has "+(h+" seconds remaining."),b(f));break}b("");break;case "privatespying":if(!g){b("Unable to cancel spy show");break}$A(a,"privatenotwatching");b("");break;case "privaterequesting":if(!g){b("Unable to cancel private request");break}b("");break;default:w("leave private show from status: "+e),g?b(""):b("Unable to leave private show from status: "+e)}}).catch(c)})}function ZA(a){dB(a.Oe,"joinRoom",{room:a.B(),exploringHashTag:a.Cb,source_name:a.lc});a.Cb="";a.lc="df"}function aB(a){window.setTimeout(function(){dB(a.Oe,"joinPrivateRoom",{room:a.B()})},500)}k.B=function(){return this.d.B};k.Pc=function(){return this.d.Pc};k.username=function(){return this.d.kl};function QB(a){var b=lo;return void 0===b?(u("ignoreSet should not be undefined"),!1):b.has(a)}function yB(a,b,c){if(c.username===a.username())return!1;if(c.username===Vy)return!0;if(3!==b)if(2===b){if(c.username===a.B()||c.Ob||c.Ec)return!0}else if(1===b){if(c.username===a.B()||c.Ob||c.Ec||c.ye&&(a.Eb||a.ze))return!0}else if(0===b&&(c.username===a.B()||c.Ob||c.Ec||a.Eb||a.ze))return!0;return!1}var zB=new Set(["privatewatching","privatenotwatching","privatespying"]);function RB(a,b,c,d){d=void 0===d?!1:d;F.call(this);var e=this;this.username=a;this.Zc=b;this.A=c;this.Xj=[];this.Ei=[];this.ns=!1;this.Hn=new D("closeChatReportRequest");this.qC=new D("reportSent");this.sB=new D("ignoreReportedUser");this.zD=function(m){m.stopPropagation();27===m.keyCode?e.Hn.h(!1):9===m.keyCode&&(m.preventDefault(),e.ns?SB(e,e.Ei,m.shiftKey):SB(e,e.Xj,m.shiftKey))};G(this.element,"chatReport");this.element.style.position="static";this.element.style.fontFamily="UbuntuBold, Arial, Helvetica, sans-serif";this.element.style.fontSize="11px";this.form=document.createElement("form");b=document.createElement("div");a=document.createElement("div");this.Tc=document.createElement("textarea");this.form.appendChild(b);this.form.style.width="100%";G(b,"headerDiv");b.style.margin="6px";b.style.fontSize="13px";b.innerText=sg+" "+this.username;b="message"===(void 0===this.Zc?"user":"message")?{inappropriate:kg,rude:lg,spam:mg,other:ng}:{inappropriate:og,rude:pg,spam:qg,other:rg};c={};for(var f in b){var g=document.createElement("label");c.Pe=document.createElement("input");var h=document.createElement("span");g.style.display="block";g.style.margin="6px 8px";c.Pe.type="radio";c.Pe.style.margin="0 4px 0 2px";c.Pe.name="chatReport";c.Pe.value=f;h.innerText=b[f];d&&"rude"===f&&(c.Pe.style.display="inline-block",c.Pe.style.marginBottom="5px",h.style.display="inline-block",h.style.width="135px",h.style.verticalAlign="bottom");g.appendChild(c.Pe);g.appendChild(h);this.form.appendChild(g);g.onclick=function(m){return function(){e.tn=m.Pe}}(c);this.Xj.push(c.Pe);c={Pe:c.Pe}}a.style.margin="6px 8px";this.Tc.draggable=!1;this.Tc.style.resize="none";this.Tc.style.boxSizing="border-box";this.Tc.style.height="40px";this.Tc.style.width="100%";this.Tc.style.border="1px solid #b1b1b1";this.Tc.maxLength=255;this.Tc.oninput=function(){e.Tc.value=e.Tc.value.slice(0,255)};a.appendChild(this.Tc);this.form.appendChild(a);this.Xj.push(this.Tc);this.Kj=document.createElement("div");this.Kj.style.margin="0 0 8px";this.Kj.style.cssFloat="right";this.Kj.style.fontFamily="UbuntuMedium, Arial, Helvetica, sans-serif";d=document.createElement("button");G(d,"submitButton");d.type="submit";d.innerText=tg;d.style.fontSize="11px";d.style.padding="4px 6px 4px 6px";d.style.marginRight="8px";d.style.background="linear-gradient(#f66d51, #eb3404)";d.style.border="none";d.style.borderRadius="4px";d.style.boxSizing="border-box";d.style.cursor="pointer";d.style.display="inline-block";f=document.createElement("button");G(f,"cancelButton");f.type="button";f.innerText=Wf;f.style.fontSize="11px";f.style.padding="4px 6px 4px 6px";f.style.marginRight="8px";f.style.background="linear-gradient(#8b8b8b, #686868)";f.style.border="none";f.style.borderRadius="4px";f.style.boxSizing="border-box";f.style.cursor="pointer";f.style.display="inline-block";this.Kj.appendChild(f);this.Kj.appendChild(d);this.form.appendChild(this.Kj);this.Xj.push(f);this.Xj.push(d);TB(this);v("submit",this.form,function(m){m.preventDefault();e.Tc.blur();void 0===e.tn?J(lf,e.Yn.bind(e)):"other"===e.tn.value&&""===e.Tc.value.trim()?J(jg,e.UA.bind(e)):(e.Pt().then(function(n){n.success?(n=e.username,n=M(L("%(username)s has been reported"),{username:n},!0),e.Ej.innerText=n):e.Ej.innerText=ug}).catch(function(n){e.Ej.innerText=403===n.ud.status?vg:ug}),e.qC.h(void 0),UB(e))});v("click",f,function(m){m.preventDefault();e.Hn.h(!1)});this.element.appendChild(this.form);this.element.appendChild(this.Uj);v("keydown",this.element,this.zD)}r(RB,F);function UB(a){var b=a.element.offsetWidth,c=a.element.offsetHeight;a.form.style.display="none";a.Uj.style.display="block";a.Uj.style.width=b+"px";a.Uj.style.height=c+"px";a.Ag.style.padding=c/2-a.Ag.offsetHeight/2+"px 0 0";a.ns=!0}function VB(a){a=new Q(a);return{success:"success"===S(a,"result"),Xr:S(a,"html")}}
RB.prototype.Pt=function(){var a=this;return new Promise(function(b,c){var d=void 0===a.tn?"":a.tn.value,e=a.Tc.value;return void 0===a.Zc?z("api/ts/chatmessages/report/"+a.username+"/",{category:d,additional_comments:e}).then(function(f){b(VB(f.responseText))}).catch(function(f){c(f)}):z("chatmessages/report/"+a.Zc+"/",{spammer:a.username,category:d,additional_comments:e}).then(function(f){b(VB(f.responseText))}).catch(function(f){c(f)})})};function TB(a){a.Uj=document.createElement("div");a.Ag=document.createElement("div");a.Ej=document.createElement("div");a.ab=document.createElement("button");var b=[],c=document.createElement("button");a.Ei.push(a.ab);for(var d=q(b),e=d.next();!e.done;e=d.next())a.Ei.push(e.value);a.Ei.push(c);a.Ej.innerText=zd;a.Ej.style.margin="0 0 8px 0";a.Ej.style.textAlign="center";G(a.ab,"ignoreUserLink");G(c,"closeReportLink");a.ab.style.textAlign="center";a.ab.style.fontSize="13px";a.ab.style.display="block";a.ab.style.margin="0 auto 8px";a.ab.style.background="none";a.ab.style.border="none";a.ab.style.cursor="pointer";void 0!==a.A&&WB(a,QB(a.username));d=q(b);for(e=d.next();!e.done;e=d.next())e=e.value,e.style.textAlign="center",e.style.fontSize="13px",e.style.display="block",e.style.margin="0 auto 8px",e.style.background="none",e.style.border="none",e.style.cursor="pointer";c.innerText=Uf;c.style.textAlign="center";c.style.fontSize="13px";c.style.display="block";c.style.margin="0 auto 8px";c.style.background="none";c.style.border="none";c.style.cursor="pointer";XB(c);a.Uj.style.display="none";a.Ag.style.fontSize="13px";a.Ag.style.fontFamily="Arial, Helvetica, sans-serif";a.Ag.appendChild(a.Ej);void 0!==a.A&&a.A.username()!==a.A.B()&&a.Ag.appendChild(a.ab);b=q(b);for(e=b.next();!e.done;e=b.next())a.Ag.appendChild(e.value);a.Ag.appendChild(c);a.Uj.appendChild(a.Ag);v("click",c,function(f){f.preventDefault();a.Hn.h(!0)})}
function YB(a){a.ab.disabled=!0;a.ab.style.cursor="default";a.ab.style.textDecoration="none";a.ab.onmouseenter=function(){};a.ab.onmouseleave=function(){};a.ab.onclick=function(){};G(a.ab,"disabled");var b=a.Ei.indexOf(a.ab);-1!==b&&a.Ei.splice(b,1);a.ab.blur()}function SB(a,b,c){if(document.activeElement instanceof HTMLElement){var d=b.indexOf(document.activeElement);-1===d?a.Yn():(c?(a=d-1,0>a&&(a+=b.length)):a=(d+1)%b.length,b[a].focus())}else a.Yn()}
function WB(a,b){void 0!==a.A&&(b?(a.ab.innerText=Uc(a.username),YB(a)):(a.ab.innerText=Vc(a.username),H(a.ab,"disabled"),XB(a.ab),a.ab.disabled=!1,a.ab.onclick=function(){jl()?a.ab.innerText=If:(A("IgnoreUser",{username:a.username,location:"PMTab"}),void 0!==a.A&&a.A.mf(a.username),a.ab.innerText=Uc(a.username),a.sB.h(void 0));YB(a)}))}RB.prototype.UA=function(){this.Tc.focus()};RB.prototype.Yn=function(){this.ns?this.Ei[0].focus():this.Xj[0].focus()};RB.prototype.fu=function(){};function XB(a){a.onmouseenter=function(){a.style.textDecoration="underline"};a.onmouseleave=function(){a.style.textDecoration="none"}};new D("stopCamRequest");new D("shutdownCamRequest");function ZB(a){return a.Db?"broadcaster":a.Ob?"mod":a.Ec?"inFanclub":a.Jf?"tippedTonsRecently":a.lg?"tippedALotRecently":a.If?"tippedRecently":a.ye?"hasTokens":"defaultUser"}function $B(a){return a.Db?"#ff6200":a.Ob?"#DC0000":a.Ec?"#00ff00":a.Jf?"#ad62e1":a.lg?"#d4a0ff":a.If?"#8a98ff":a.ye?"#84c6dc":"#b3b3b3"}function aC(a){if(a.Db)return Ci;if(a.Ob)return Bi;if(a.Ec)return Ai;if(a.Jf)return si;if(a.lg)return ui;if(a.If)return wi;if(a.ye)return yi}
function bC(a){if(!a.Ob&&!a.Db&&!a.Ec){if(a.Jf)return ti;if(a.lg)return vi;if(a.If)return xi;if(a.ye)return zi}}
function cC(a){a=a.toLowerCase();if(-1<["m","male"].indexOf(a))return"https://static-assets.highwebmedia.com/tsdefaultassets/gendericons/male.svg";if(-1<["f","female"].indexOf(a))return"https://static-assets.highwebmedia.com/tsdefaultassets/gendericons/female.svg";if(-1<["t","s","trans"].indexOf(a))return"https://static-assets.highwebmedia.com/tsdefaultassets/gendericons/trans.svg";if(-1<["c","couple"].indexOf(a))return"https://static-assets.highwebmedia.com/tsdefaultassets/gendericons/couple.svg";u("Could not set menu gender icon. Defaulting to male.");return"https://static-assets.highwebmedia.com/tsdefaultassets/gendericons/male.svg"};var dC;K.j(function(a){dC=a.A.B()});function eC(a){var b=void 0===dC||""===dC?a:dC;return new Promise(function(c,d){Gb("api/ts/accounts/usermenu/"+a+"/"+b+"/").then(function(e){e=new Q(e.responseText);var f=V(e,"online"),g=T(e,"username"),h=W(e,"display_age",!1),m=T(e,"gender"),n=T(e,"image_url"),p=V(e,"can_silence"),y=em(e,"silence_id"),C=V(e,"can_access"),E=V(e,"needs_supporter_to_pm");mm(e);c({username:g,Rj:h,Ki:m,Ll:n,Ih:f,lA:p,kA:C,To:E,Hp:y})}).catch(function(e){d(e)})})};var fC=[];function gC(a){F.call(this,"div",a);var b=this;this.value="";this.J=new Yb;B(a.xf.j(function(){b.input.value=""}),this.J);B(ko.j(function(c){c.ra===a.ra&&(c=c.Lc,b.input.value=""===c?b.value:c)}),this.J);this.FA=new uk(function(){var c=b.value.match(/^[\w-]*$/);go.h({ra:a.ra,Co:a.bg,Ae:null!==c,prefix:b.value})},{xc:100,md:1});fC.push(this)}r(gC,F);gC.prototype.ya=function(a){var b=this;this.element=N("div",{colorClass:"SearchBar",style:{position:"relative",width:"100%",padding:"4px",boxSizing:"border-box"}},N("input",{colorClass:"searchUserInput",className:"search_autocomplete",type:"text",placeholder:Pi,style:{background:"none",height:"24px",borderWidth:"1px",borderStyle:"solid",boxSizing:"border-box",borderRadius:"3px",margin:"0",padding:"5px 22px 5px 8px",width:"100%",outline:"none",fontFamily:"Tahoma, Arial, Helvetica, sans-serif",fontSize:"12px"},onFocus:function(){A("PMSearchStarted",{location:""===a.B?"PMWindow":"PMTab"})},onKeyDown:function(c){"ArrowDown"===c.key||"ArrowUp"===c.key||40===c.keyCode||38===c.keyCode?(c.preventDefault(),io.h({event:c,ra:a.ra})):"Enter"!==c.key&&13!==c.keyCode||jo.h(a.ra)},onInput:function(){var c=b.input.value.toLowerCase();fC.forEach(function(d){d.value=c;d.input.value=c;vk(d.FA)})},ref:function(c){return b.input=c}}),N("img",{src:"https://static-assets.highwebmedia.com/tsdefaultassets/pms/icon-search.svg",alt:"Search",style:{height:"1em",margin:"auto",position:"absolute",right:"10px",top:"10px"}}))};gC.prototype.render=function(){return this.element};gC.prototype.Lb=function(){Zb(this.J)};var hC=new D("historyPrivateMessage"),iC=new D("createNewSession"),OB;K.j(function(a){OB=a.A});function jC(a){var b=cm(a,"messages");return void 0===b?{ja:[],K:0}:{ja:b.map(function(c){return Xn(c)}),K:W(a,"num_unread")}}
function kC(a,b){b=vb({room:b});Gb("api/ts/chatmessages/pm_list/"+a+"/?"+b).then(function(c){var d=jC(new Q(c.responseText)).ja;c=!0;d=q(d);for(var e=d.next();!e.done;e=d.next())e=Object.assign(Object.assign({},e.value),{ax:c}),hC.h(e),c&&(c=!1)}).catch(function(c){u("Failed getting pm history",c)})}
function lC(a){var b=a.message,c=a.username,d=a.source,e=void 0===a.Z?"":a.Z,f=a.Wv;a=JSON.stringify({m:b,tid:jb()?Math.floor(Math.random()*ob(4)):pb(new Uint32Array(1))[0]});EB()?z("push_service/publish_private_message/",{room:e,message:a,to_user:c}).then(function(g){g=new Q(g.responseText);var h={username:c,source:d,is_reply:R(g,"is_reply"),token_color:S(g,"token_color"),in_fanclub:V(g,"in_fanclub",void 0,!1),success:"Ok"===T(g,"status")};A("SendPrivateMessage",h);g=R(g,"status");"Ok"!==g&&void 0!==f&&f(g)}).catch(function(g){u("Could not send private message: ",g)}):(A("SendPrivateMessageAttempted",{to_username:c}),NB(b,c))}var mC=new Map;function nC(a,b){var c="";void 0!==b&&(c="?"+vb({room:b}));var d="api/ts/chatmessages/user_info/"+a+"/"+c;if(mC.has(d))return mC.get(d);b=Gb(d).then(function(e){e=new Q(e.responseText);window.setTimeout(function(){mC.delete(d)},2500);return{K:W(e,"num_unread"),Ja:Un(new Q(gm(e,"user")))}}).catch(function(e){u("Error getting user info for "+a+": "+e);throw e;});mC.set(d,b);return b}var oC=new Set,qC=new uk(function(){pC(!0)},{xc:10,md:1}),rC=-1;function pC(a){function b(){var f=d();void 0!==f&&z("api/ts/chatmessages/update_pms_last_seen/",f).catch(function(g){u("post error marking PMs as read: "+g);c()})}function c(){e.forEach(function(f){return oC.add(f)})}function d(){if(0!==oC.size){e=[].concat(ha(oC));oC.clear();var f=new FormData;e.forEach(function(g){f.append("from_usernames",g)});f.append("csrfmiddlewaretoken",yb("csrftoken"));return f}}var e;a&&b();-1!==rC?(window.clearInterval(rC),rC=window.setInterval(b,6E4)):(rC=window.setInterval(b,6E4),v("beforeunload",window,function(){var f=d();void 0===f||navigator.sendBeacon("api/ts/chatmessages/update_pms_last_seen/",f)||(u("beacon error marking PMs as read"),c())}))}function sC(a,b){b=void 0===b?!1:b;oC.add(a);b?vk(qC):-1===rC&&pC(!1)};var tC={height:0,name:"",$f:"",width:0,Yk:""};function uC(a){var b=[],c=[],d=[];if(0>a.indexOf("%%%[emoticon "))a={Gf:[a],Wn:[]};else{for(var e=0;e<a.length;e+=1)if("%"===a[e])if("%%%[emoticon "===a.slice(e,e+13)){var f=e+a.slice(e,a.length).indexOf("]%%%");if("]%%%"===a.slice(f,f+4)){d.push(b.join(""));b=[];b:{e=a.slice(e,f+4);e=e.replace("%%%[emoticon ","").replace("]%%%","");e=e.split(/\|/);if(6===e.length){if(e={name:e[0],Nk:e[1],width:vC(e[2])?Number(e[2]):80,height:vC(e[3])?Number(e[3]):80,$f:e[4],Yk:e[5]},void 0!==e.Nk&&wC(e.Nk))break b}else if(5===e.length&&(e={name:e[0],$f:e[1],width:vC(e[2])?Number(e[2]):80,height:vC(e[3])?Number(e[3]):80,Yk:e[4]},wC(e.$f)))break b;e=void 0}void 0!==e?c.push(e):(u("Cannot parse emoticon: "+e),c.push(tC));e=f+4-1}}else b.push(a[e]);else b.push(a[e]);d.push(b.join(""));a={Gf:d,Wn:c}}this.Cu=a}uC.prototype.Gf=function(){return this.Cu.Gf};uC.prototype.Wn=function(){return this.Cu.Wn};function wC(a){return null===a.match(/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/g)?(u("Invalid emoticon URL"),!1):!0}function vC(a){return isNaN(parseInt(a,10))?(u("Invalid dimension argument"),!1):!0};function xC(a){var b=(Date.now()-a.getTime())/1E3;return 60>b?Qi:120>=b?Ri:3600>b?Math.floor(b/60)+" "+Ui:7200>=b?Si:86400>b?Math.floor(b/3600)+" "+Vi:172800>=b?Ti:604800>b?Math.floor(b/86400)+" "+Wi:a.toLocaleDateString()};function yC(a){F.call(this,"div",a)}r(yC,F);k=yC.prototype;k.initData=function(a){this.en=ZB(a.Ea);this.Ya=a.Ea.username;this.O=a.O;this.message=a.message;this.K=a.K;this.time=a.time;this.ot=a.ot};k.ya=function(a){var b=this,c={display:"inline-block",left:zC+"px",overflowX:"hidden",overflowY:"hidden",position:"absolute",textOverflow:"ellipsis",verticalAlign:"bottom",whiteSpace:"nowrap"},d={bottom:"8px",left:zC+"px",overflow:"hidden",position:"absolute",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"calc(100% - 35px)"},e={display:"inline-block",verticalAlign:"top"},f=void 0===this.time?"":xC(new Date(this.time)),g=AC(this.message),h=this.Ya!==this.O;h&&(d.width="calc(100% - 60px)");this.Ws=N("span",null,0!==this.K?" ("+this.K+")":"");this.Uf=N("div",{className:"timeString",style:{fontSize:"10px",position:"absolute",right:"8px",textAlign:"right",top:"8px"}},f);this.element=N("div",{colorClass:["PmListItem",0<this.K?"unreadBg":""],style:{borderTopWidth:"1px",borderTopStyle:"solid",cursor:"pointer",fontFamily:"Tahoma, Arial, Helvetica, sans-serif",fontSize:"12px",height:"40px",lineHeight:"14px",overflowX:"hidden",padding:"8px",position:"relative",textAlign:"left"},onClick:function(){a.xf.h(b.Ya)}},N(BC,{name:this.Ya,style:{marginTop:"-16px",position:"absolute",top:"50%"},color:"",size:"32px",en:this.en}),N("div",{style:c,ref:function(m){return b.oA=m}},N("span",{colorClass:this.en,style:{fontFamily:"Tahoma, Arial, Helvetica, sans-serif",fontWeight:"bold"}},this.Ya),this.Ws),this.Uf,N("div",{colorClass:"messageDiv",style:d,ref:function(m){return b.Ks=m}},h&&""!==this.message?Vj(e):"",g))};k.render=function(){return this.element};k.G=function(){F.prototype.G.call(this);CC(this)};k.qq=function(){F.prototype.qq.call(this);CC(this)};function DC(a){var b=Sj();P(b,{display:"none",position:"absolute",right:"8px",top:"calc(50% - 8px)"});b.onclick=function(d){d.stopPropagation();d.preventDefault();EC(a.Ya)};var c=a.Ks.style.width;v("mouseenter",a.element,function(){b.style.display="block";void 0!==a.Uf&&(a.Uf.style.display="none");a.Ks.style.width="calc(100% - 85px)"});v("mouseleave",a.element,function(){b.style.display="none";void 0!==a.Uf&&(a.Uf.style.display="block");a.Ks.style.width=c});a.element.appendChild(b)}
function CC(a){0<a.element.clientWidth&&void 0!==a.Uf&&(a.Uf.style.visibility=a.oA.clientWidth>a.element.clientWidth-zC-8-a.Uf.clientWidth?"hidden":"")}k.Zd=function(){return this.K};function AC(a){a=new uC(a);var b=document.createElement("span"),c=a.Gf()[0];b.innerText=c.split("\n")[0];for(c=1;c<a.Gf().length;c+=1){var d=document.createElement("span");d.style.color="lightskyblue";d.innerText=":"+a.Wn()[c-1].name;d.style.cursor="pointer";b.appendChild(d);""!==a.Gf()[c]&&(d=document.createElement("span"),d.innerText=a.Gf()[c],b.appendChild(d))}return b}var zC=48;function FC(){this.Lm=new Set;this.mo=new Set}FC.prototype.show=function(a){this.Lm.add(a);this.mo.delete(a)};FC.prototype.D=function(a){this.mo.add(a);this.Lm.delete(a)};FC.prototype.remove=function(a){this.Lm.delete(a);this.mo.delete(a)};FC.prototype.Xc=function(a){return this.Lm.has(a)};function GC(){var a=this;this.Cd=[];this.J=new Yb;co.j(function(b){HC(a,b,!0)});B(ho.j(function(b){HC(a,b,!1)}),this.J);B($n.j(function(b){var c=IC(a,b.Ya),d=void 0===c?b.O:c.Ea,e=void 0===c?0:c.K;JC.show(b.Ya);void 0===c&&b.Ya!==b.O.username?nC(b.Ya).then(function(f){KC(a,{message:b.message,K:0,time:Date.now(),O:b.O.username,Ea:f.Ja,Gt:!0})}).catch():KC(a,{message:b.message,K:b.O.username===b.Ya?e+1:0,time:Date.now(),O:b.O.username,Ea:d,Gt:!0})}),this.J);B(K.j(function(b){a.B=b.C.B;a.Cd.forEach(function(c){c.Ea.Db=c.Ea.username===b.C.B});void 0!==LC&&MC.h(b)}),this.J);B(aq.j(function(b){if(b.focus){for(var c=!1,d=q(a.Cd),e=d.next();!e.done;e=d.next())if(e=e.value,e.O===b.username||e.Ea.username===b.username){c=!0;e.Gt=!0;break}c?MC.h(void 0):nC(b.username,a.B).then(function(f){KC(a,{message:"",K:0,time:Date.now(),O:a.B,Ea:f.Ja,Gt:!0})}).catch()}}),this.J);B(fq.j(function(b){a.Cd.forEach(function(c){c.Ea.username===b.username&&(c.Ea.Ob=b.Ob,MC.h(void 0))})}),this.J)}var LC;function NC(){void 0===LC&&(LC=new GC);return LC}GC.prototype.Lb=function(){Zb(this.J)};function KC(a,b){a.Cd.unshift(b);OC.h({TB:[b],kd:!0});PC(a)}function QC(a,b){return a.Cd.find(function(c){return c.Ea.username===b})}function IC(a,b){for(var c=a.Cd.length-1;0<=c;--c){var d=a.Cd[c];if(d.Ea.username===b)return a.Cd.splice(c,1),d}}function HC(a,b,c){var d=a.Cd.find(function(e){return e.Ea.username===b});void 0!==d&&(d.K=0);sC(b,c);RC.h(b);PC(a)}
function PC(a){a=a.Cd.filter(function(b){return 0!==b.K}).length;SC.h(a)}var MC=new D("pmListDataChanged"),OC=new D("pmListDatItemAdded"),SC=new D("pmListDataNumUnread"),RC=new D("pmListDataPmRead");var TC=new Set,JC=new FC;function EC(a){eo.h(a);JC.D(a);TC.forEach(function(b){UC(b,a)})}
function BC(a){var b={width:a.size,height:a.size,borderRadius:"50%",background:a.color,textAlign:"center",color:"#FFF",display:"table-cell",fontFamily:"UbuntuLight, Tahoma, Arial, Helvetica, sans-serif",fontSize:"16px",lineHeight:"14px",margin:"auto",verticalAlign:"middle"};return N("div",{colorClass:"avatarBubble",style:Object.assign({position:"relative"},a.style)},N("div",{colorClass:a.en,style:b},a.name.charAt(0).toLocaleUpperCase()))}
function VC(){var a=Ja.current;return void 0===a.xb?{Sf:"",wb:!0}:{Sf:a.xb.username,wb:!1}}
function WC(a){F.call(this,"div",a);var b=this;this.ld=-1;this.K=0;this.cb=[];this.ra||TC.add(this);this.J=new Yb;B(io.j(function(c){if(c.ra===b.ra){c=c.event;var d=b.ld;-1<d&&(d=b.cb[d],H(d.element,"selected"),0<d.Zd()?G(d.element,"unreadBg"):H(d.element,"unreadBg"));if("ArrowDown"===c.key||40===c.keyCode)b.ld=b.ld+1>=b.cb.length?-1:b.ld+1;else if("ArrowUp"===c.key||38===c.keyCode)b.ld=-1>b.ld-1?b.cb.length-1:b.ld-1;-1<b.ld?(c=b.cb[b.ld].Ya,b.xh(b.ld,!0),ko.h({ra:b.ra,Lc:c})):ko.h({ra:b.ra,Lc:""})}}),this.J);B(jo.j(function(c){c===b.ra&&-1<b.ld&&(c=b.cb[b.ld],A("PMSearchResultClicked",{location:""===b.B?"PMWindow":"PMTab",color:c.en}),ko.h({ra:b.ra,Lc:""}),b.xf.h(c.Ya))}),this.J);B(go.j(function(c){c.ra===b.ra&&c.Co===b.bg&&(b.ld=-1,c.Ae?XC(b,c.prefix):YC(b))}),this.J);B(K.j(function(c){b.A=c.A;b.B=c.C.B;c=c.A.username();JC.D(c);VC().wb||void 0!==b.ad||(b.ad=NC());b.ra||(B(tj.j(function(){b.cb.forEach(function(d){eo.h(d.Ya)})}),b.J),ZC(b),b.A.event.ac.j(function(d){return Or(b,function f(){var g,h=this;return Aa(f,function(m){if(1==m.ma)return sa(m,new Promise(function(n){return window.setTimeout(n,1E3)}),2);if(4!=m.ma){if("privatewatching"===d.La){h.mt=null===(g=h.A)||void 0===g?void 0:"privatewatching"===g.status?g.ky:"";h.dh();m.ma=0;return}return sa(m,h.dh(),4)}h.mt=void 0;m.ma=0})})}))}),this.J);B(MC.j(function(c){void 0!==c&&(b.A=c.A,b.B=c.C.B);VC().wb||void 0!==b.ad||(b.ad=NC());b.dh()}),this.J);RC.j(function(c){var d=b.cb.find(function(e){return e.Ya===c});void 0!==d&&(d.K=0,0===d.K?(d.Ws.innerText="",H(d.element,"unreadBg")):(d.Ws.innerText=" ("+d.K+")",G(d.element,"unreadBg")))});SC.j(function(c){b.ra?b.ei(c):b.ei(b.Zd())});OC.j(function(c){var d=c.TB,e=c.kd;0===b.cb.length||!b.ra&&1===b.cb.length?b.dh():d.map(function(f){b.ra?($C(b,f.Ea.username),aD(b,f,e)):bD(b).then(function(){(void 0!==$C(b,f.Ea.username)||b.Sg.has(f.Ea.username))&&aD(b,f,e);b.ei(b.Zd())}).catch()})});aq.j(function(c){JC.show(c.username)});B(a.xf.j(function(){b.bb.style.display="block";b.ld=-1;XC(b,"")}),this.J);B(fo.j(function(c){EC(c)}),this.J);cD(this)}r(WC,F);function cD(a){function b(){for(var c=q(a.cb),d=c.next();!d.done;d=c.next())if(d=d.value,void 0!==d.Uf){var e=void 0===d.time?"":xC(new Date(d.time));d.Uf.innerText=e}window.setTimeout(b,1E4)}window.setTimeout(b,1E4)}function dD(a,b){return-1<a.cb.findIndex(function(c){return c.ot.Ea.username===b})}k=WC.prototype;k.initData=function(a){this.backgroundColor=a.bg?"#2A2C2E":"";this.borderColor=a.bg?"#7F7F7F":"#E0E0E0";this.ra=a.ra;!0===a.ag&&(this.ag=a.ag);this.bg=a.bg;VC().wb||(this.ad=NC());this.xf=a.xf;this.B="";this.Sg=new Set;this.ei=a.ei};k.ya=function(a){var b={background:this.backgroundColor,color:"#494949",fontSize:"12px",fontFamily:"UbuntuRegular, Tahoma, Arial, Helvetica, sans-serif",height:"100%",lineHeight:"16px",margin:"0 12px 0 auto",overflowX:"hidden",overflowY:"hidden",position:"relative",textAlign:"left",width:"100%",zIndex:2};a.bg?b.color="#FFF":a.ra&&(b.height="90%");this.bb=N("div",{style:{maxHeight:"calc(100% - 32px)",overflowY:"auto",width:"100%"}},this.cb);this.element=N("div",{style:b},this.bb);(!this.ra||void 0!==this.ad&&0<this.ad.Cd.length)&&eD(this)};k.render=function(){return this.element};k.Y=function(){F.prototype.Y.call(this);for(var a=q(this.cb),b=a.next();!b.done;b=a.next())b.value.Y()};k.Re=function(){F.prototype.Re.call(this);for(var a=q(this.cb),b=a.next();!b.done;b=a.next())b.value.Re()};function eD(a){var b=N("div",{style:{borderTop:""===a.B?"1px solid "+a.borderColor:""}},N(gC,{classRef:function(c){a.ig=c},borderColor:a.borderColor,bg:a.bg,ra:a.ra,xf:a.xf,B:a.B}));a.element.insertBefore(b,a.element.firstChild)}
k.dh=function(){return Or(this,function b(){var c=this,d,e,f;return Aa(b,function(g){if(1==g.ma){d=c;if(VC().wb)return g.return();YC(c);c.bb.style.top="";if(c.ra&&void 0!==c.ad&&0===c.ad.Cd.length)return fD(c),c.ei(0),g.return();void 0===c.ig&&eD(c);return sa(g,bD(c),2)}if(3!=g.ma)return sa(g,ZC(c),3);e=g.se;void 0!==c.ad&&(f=c.ad.Cd.filter(function(h){return gD(d,h)}),hD(c,f,e));g.ma=0})})};k.Lb=function(){Zb(this.J);void 0!==this.ig&&this.ig.Lb()};function YC(a){for(;null!==a.bb.firstChild;)a.bb.removeChild(a.bb.firstChild);a.cb=[]}function bD(a){return Or(a,function c(){var d=this,e,f;return Aa(c,function(g){if(1==g.ma)return e=d,d.Sg=new Set(d.cb.map(function(h){return h.Ya})),VC().wb||d.ra||void 0===d.A?(g.ma=2,g=void 0):g=sa(g,JB(d.A,"a",!1),3),g;2!=g.ma&&(f=g.se,f.Je.forEach(function(h){return e.Sg.add(h.username)}),void 0!==d.mt&&d.Sg.add(d.mt));return g.return(d.Sg)})})}k.eh=function(){return this.Sg.size};function iD(a,b){var c=VC();if(""===a.B||a.B===c.Sf)return!1;b=void 0===b?!0:a.B.startsWith(b);return!a.ra&&b&&!a.ag&&(c.wb||c.Sf!==a.B)}
function ZC(a){return Or(a,function c(){var d=this,e,f,g;return Aa(c,function(h){switch(h.ma){case 1:e=iD(d);if(!e){h.ma=2;break}if(VC().wb){YC(d);aD(d,{message:"",K:0,O:d.B,Ea:{username:d.B,Db:!0,Ec:!1,ye:!1,Ob:!1,If:!1,lg:!1,Jf:!1,Cb:"",lc:"df"}});d.bb.style.borderBottom="1px solid "+d.borderColor;h.ma=2;break}if(void 0===d.ad){h.ma=2;break}f=QC(d.ad,d.B);if(void 0!==f){h.ma=5;break}return sa(h,nC(d.B,d.B),6);case 6:return g=h.se,void 0===QC(d.ad,d.B)&&(YC(d),aD(d,{message:"",K:g.K,O:g.Ja.username,Ea:g.Ja})),h.return(e);case 5:YC(d),aD(d,f);case 2:return h.return(e)}})})}function hD(a,b,c){a.K=0;b.forEach(function(d){if(0!==d.K){JC.show(d.Ea.username);var e=!1}else{e=d.Ea.username;var f=JC;e=f.Lm.has(e)||f.mo.has(e)?!JC.Xc(d.Ea.username):!a.ra&&d.Ea.username!==a.B&&!a.Sg.has(d.Ea.username)||c&&a.B===d.Ea.username?!0:!1}e||(0<d.K&&(a.K+=1),jD(a,d),a.ra||iC.h(d.Ea.username))});a.ei(a.K);a.bb.style.borderBottom="1px solid "+a.borderColor;a.bb.style.margin="0"}
function jD(a,b,c){c=void 0===c?!1:c;var d=!a.ra;if(!dD(a,b.Ea.username)){var e=N(yC,{message:b.message,ot:b,K:b.K,Ea:b.Ea,time:b.time,O:b.O,xf:a.xf,classRef:function(g){(a.ra||b.Ea.username!==a.B)&&DC(g);c?d&&b.Ea.username!==a.B?a.cb.splice(1,0,g):a.cb.unshift(g):a.cb.push(g)}});if(c){var f=a.bb.firstChild;d&&b.Ea.username!==a.B&&VC().Sf!==a.B&&null!==f?a.bb.insertBefore(e,f.nextSibling):a.bb.insertBefore(e,f)}else a.bb.appendChild(e);a.bb.style.display="block";a.Y()}}
k.Zd=function(){if(this.ra)return this.K;for(var a=0,b=q(this.cb),c=b.next();!c.done;c=b.next())0!==c.value.Zd()&&(a+=1);return this.K=a};function UC(a,b){var c,d=a.cb.find(function(e){return e.Ya===b});void 0!==d&&(a.cb.splice(a.cb.indexOf(d),1),null===(c=d.parent)||void 0===c?void 0:c.removeChild(a),d.element.remove())}
function XC(a,b){Or(a,function d(){var e=this,f,g,h,m,n,p;return Aa(d,function(y){f=e;g=!1;void 0!==e.ad&&(YC(e),h=e.ad.Cd,iD(e,b)&&(n=QC(e.ad,e.B),m=void 0!==n?n:{message:"",K:0,O:e.B,Ea:{username:e.B,Db:!0,Ec:!1,ye:!1,Ob:!1,If:!1,lg:!1,Jf:!1,Cb:"",lc:"df"}},jD(e,m),g=!0),0<h.length&&(p=h.filter(function(C){return gD(f,C,b)}),e.bb.style.display=g||0<p.length?"block":"none",hD(e,p,g)));y.ma=0})})}function gD(a,b,c){c=void 0===c?a.HC:c;return 0===c.length||b.Ea.username.startsWith(c)}
function aD(a,b,c){gD(a,b,void 0)&&jD(a,b,void 0===c?!1:c)}function $C(a,b){for(var c,d=a.cb.length-1;0<=d;--d){var e=a.cb[d];e.Ya===b&&(c=e,a.cb.splice(d,1),e.element.remove())}return c}k.xh=function(a,b){-1<a&&(a=this.cb[a],b&&(this.bb.scrollTop=this.ld*a.element.clientHeight-this.bb.clientHeight/2),H(a.element,"unreadBg"),G(a.element,"selected"))};function fD(a){a.bb.style.marginTop="50%";a.bb.style.position="absolute";a.bb.style.textAlign="center";a.bb.style.top="-54px";a.element.style.borderTop="1px solid "+a.borderColor;a.bb.appendChild(N("img",{src:"https://static-assets.highwebmedia.com/tsdefaultassets/pms/empty-chat-state.svg",alt:"empty-chat-state"}));a.bb.appendChild(N("div",{style:{fontSize:"14px",fontFamily:"UbuntuRegular, Tahoma, Arial, Helvetica, sans-serif",lineHeight:"18px",margin:"8px 0"}},Oi));a.bb.appendChild(N("div",{style:{margin:"auto",width:"75%"}},Nc()))}ea.Object.defineProperties(WC.prototype,{HC:{configurable:!0,enumerable:!0,get:function(){var a,b;return null!==(b=null===(a=this.ig)||void 0===a?void 0:a.value.trim())&&void 0!==b?b:""}}});function kD(a,b,c){var d;Dc.call(this);var e=this;this.Rk=new Yb;this.jz=function(g){var h=g.ctrlKey||g.metaKey,m=h&&83===g.keyCode,n=h&&191===g.keyCode,p=191===g.keyCode;h=h&&76===g.keyCode;var y=27===g.keyCode;(9===g.keyCode||m||n||h||y||p)&&e.mb()};this.wh=function(){e.mb()};this.Ua=a;this.rA=b;this.dt=null!==(d=lD)&&void 0!==d?d:b.offsetParent;this.message=c;mD(this);nD(this);oD(this);this.pq();pD(this);this.mq();v("keydown",document,this.jz);v(pc(),document,this.wh);v("popstate",window,this.wh);B(yq.j(this.wh,!1),this.Rk);B(tj.j(this.wh,!1),this.Rk);B(zj.j(this.wh,!1),this.Rk);var f=window.innerWidth;B(yk.j(function(){window.innerWidth<f&&e.wh();f=window.innerWidth}),this.Rk);this.dt.appendChild(this.element);this.Re();this.hc.j(function(){e.mb()});Dc.prototype.Vg.call(this)}var lD;r(kD,Dc);function mD(a){qD=0;a.element=document.createElement("div");a.element.id="user-context-menu";a.eg=document.createElement("div");a.tf=document.createElement("div");a.eg.style.backgroundColor="";a.element.appendChild(a.eg);a.element.style.textShadow="none";a.element.style.position="absolute";a.element.style.borderRadius="4px";a.element.style.borderStyle="solid";a.element.style.borderWidth="1px";a.element.style.zIndex="1010";a.element.style.top="0";a.element.style.fontWeight="normal";a.element.style.fontFamily="Tahoma, Arial, Helvetica, sans-serif";a.element.style.fontSize="12px";a.element.style.width="188px";a.element.style.cursor="default";a.element.style.visibility="visible";B(K.j(function(b){a.Z=b.C.B;a.oh=b.C.userName;a.Sc=b.A}),a.Rk)}
function nD(a){var b=document.createElement("div");G(b,"ucmHeader");b.style.padding="9px 10px";b.style.fontWeight="bold";b.style.borderTopLeftRadius="4px";b.style.borderTopRightRadius="4px";a.name=document.createElement("div");a.name.style.display="inline-block";a.name.style.width="120px";a.name.style.height="12px";a.name.style.marginRight="10px";b.appendChild(a.name);var c=document.createElement("div");c.style.display="inline-block";c.style.width="38px";c.style.height="12px";a.Pc=document.createElement("span");G(a.Pc,"ucmAgespan");a.Pc.style.display="inline-block";a.Pc.style.width="15px";a.Pc.style.minHeight="14px";a.Pc.style.fontSize="12px";a.Pc.style.fontWeight="bold";a.Pc.style.marginRight="6px";a.Pc.style.verticalAlign="top";c.appendChild(a.Pc);G(a.Pc,"ucmPlaceholder");a.th=document.createElement("span");a.th.style.display="inline-block";a.th.style.width="15px";a.th.style.height="14px";a.th.style.verticalAlign="top";a.sh=document.createElement("img");void 0!==a.Ua.Ki?(a.sh.src=cC(a.Ua.Ki),a.sh.style.display="inline-block"):(G(a.th,"ucmPlaceholder"),a.sh.style.display="none");a.sh.height=14;a.sh.width=14;a.th.appendChild(a.sh);c.appendChild(a.th);b.appendChild(c);a.eg.appendChild(b)}
function pD(a){var b=document.createElement("a");b.innerText=a.Ua.username;G(b,ZB(a.Ua));b.style.fontWeight="bold";b.href="/"+a.Ua.username+"/";b.target="_blank";b.style.textDecoration="none";b.style.overflow="hidden";b.style.textOverflow="ellipsis";b.style.width="120px";b.style.display="inline-block";b.style.cursor="pointer";b.onmouseenter=function(){b.style.textDecoration="underline"};b.onmouseleave=function(){b.style.textDecoration="none"};v("click",a.name,function(c){A("ViewProfile",{username:a.Ua.username});c.stopPropagation();a.mb()});a.name.appendChild(b);a.V.style.background="rgba(0, 0, 0, 0.01)";a.element.style.visibility="visible"}
function rD(a){var b,c,d=document.createElement("div");d.style.width="188px";d.style.height="75px";d.style.overflow="hidden";d.style.borderRadius="4px 4px 0px 0px";if(!0===(null===(b=a.d)||void 0===b?void 0:b.Ih)){var e=document.createElement("img");v("load",e,function(){var f=d.getBoundingClientRect(),g=e.getBoundingClientRect();f.height<g.height&&(e.style.position="relative",e.style.left="0px",e.style.top=(f.height-g.height)/2+"px")});e.src=a.d.Ll;e.style.width="100%";d.appendChild(e);a.element.style.top=a.element.offsetTop-75+"px";a.element.insertBefore(d,a.element.firstChild)}H(a.Pc,"ucmPlaceholder");H(a.th,"ucmPlaceholder");!0===(null===(c=a.d)||void 0===c?void 0:c.kA)&&(!isNaN(a.d.Rj)&&18<=a.d.Rj&&(a.Pc.innerText=a.d.Rj.toString()),H(a.Pc,"ucmPlaceholder"),a.sh.src=cC(a.d.Ki),a.sh.style.display="inline-block")}
function oD(a){var b=aC(a.Ua),c=bC(a.Ua);if(void 0!==b){var d=document.createElement("div");G(d,"ucmUserLabel");d.style.padding="9px 10px";d.style.borderTopWidth="1px";d.style.borderTopStyle="solid";a.eg.appendChild(d);var e=document.createElement("div");e.style.width="74px";e.style.height="12px";e.style.width="100%";e.innerText=b;G(e,ZB(a.Ua));e.style.fontWeight="bold";d.appendChild(e);void 0!==c&&(a=document.createElement("div"),G(a,"ucmSublabel"),a.style.height="10px",a.style.fontSize="10px",a.style.marginTop="4px",a.style.webkitTextSizeAdjust="none",a.innerText=c,d.appendChild(a))}}k=kD.prototype;k.pq=function(){this.Ce=document.createElement("div");G(this.Ce,"ucmLinks");this.Ce.style.padding="5px 0";this.Ce.style.fontSize="12px";this.Ce.style.borderTopWidth="1px";this.Ce.style.borderTopStyle="solid";this.eg.appendChild(this.Ce);this.eg.appendChild(this.tf);G(this.tf,"ucmModSection");this.tf.style.borderTopWidth="1px";this.tf.style.borderTopStyle="solid";this.tf.style.padding="5px 0";this.tf.style.display="none";sD(this,this.Ua.username)};function sD(a,b){void 0!==a.oh&&a.oh!==b&&(a.FD=new er(a.oh,b,function(){a.mb()},function(){a.position()}),a.eg.appendChild(a.FD.element))}
k.mq=function(){if(this.oh!==this.Ua.username)if(void 0===this.Sc)u("ignoreText: Chatconnection should be defined");else{var a=tD(this,this.Ua.username);this.Ce.appendChild(a);a=uD(this,this.Ua.username);this.Ce.appendChild(a);this.Z!==this.oh&&(a=vD(this,this.Ua.username,this.Sc),this.Ce.appendChild(a));""!==this.message&&(a=wD(this,this.Ua.username,this.message),this.Ce.appendChild(a))}else this.Ce.style.display="none"};k.Zu=function(){return!1};function xD(a){if(void 0!==a.d&&a.d.lA&&(void 0===a.d.Hp||a.Zu())){var b=document.createElement("div"),c=a.Qf(),d=yD(),e=a.d.username;d.style.paddingLeft="20px";c.appendChild(d);b.appendChild(c);d.innerText=void 0!==a.d.Hp?Lf:Kf;c.onclick=function(){void 0!==a.d&&void 0!==a.d.Hp&&void 0!==a.Z?z("edit_room_ban/",{banid:String(a.d.Hp),action:"remove_silence",room_username:a.Z}).catch(function(f){u(f);J("Error removing silence from user "+e)}):uc("Silence "+a.Ua.username+"?",function(){A("SilenceUser",{username:a.Ua.username,to_user:a.Ua.username});z("roomsilence/"+a.Ua.username+"/"+a.Z+"/",{}).catch(function(f){u(f);J("Error silencing user "+a.Ua.username)})});a.mb()};a.tf.appendChild(b);a.tf.style.display=""}}
k.Dr=function(){if(I())return{Su:I(),Ru:I()};for(var a,b,c=this.dt;void 0!==c&&"body"!==c.tagName.toLowerCase();c=null===c.parentElement?void 0:c.parentElement){var d=c,e=window.getComputedStyle(d);void 0===a&&"hidden"===e.overflowY&&(a=d);void 0===b&&"hidden"===e.overflowX&&(b=d);d=q([a,b]);a=d.next().value;b=d.next().value;if(void 0!==a&&void 0!==b)break}return{Su:a,Ru:b}};k.position=function(a){if(void 0===a?0:a){a=this.rA.getBoundingClientRect();if(document.body.contains(this.name)){var b=this.name.getBoundingClientRect(),c=this.element.offsetLeft+(a.left-b.left);this.element.style.top=this.element.offsetTop+(a.top-b.top)+"px";this.element.style.left=c+"px"}a=window.innerHeight-(this.element.getBoundingClientRect().top+this.element.offsetHeight+37);0>a&&(this.element.style.top=parseInt(this.element.style.top.slice(0,-2))+a+"px")}b=this.Dr();a=b.Su;b=b.Ru;b=void 0===b?document.documentElement:b;var d=(void 0===a?document.documentElement:a).getBoundingClientRect(),e=b.getBoundingClientRect();c=this.element.getBoundingClientRect();a=d.bottom-c.height;b=e.right-c.width;d=d.top;e=e.left;var f=c.top;c=c.left;d>f&&(this.element.style.top=this.element.offsetTop+(d-f)+4+"px");e>c&&(this.element.style.left=this.element.offsetLeft+(e-c)+4+"px");a<f&&(this.element.style.top=this.element.offsetTop+(a-f)-4+"px");b<c&&(this.element.style.left=this.element.offsetLeft+(b-c)-
4+"px")};k.mb=function(){2!==qD&&(Dc.prototype.mb.call(this),void 0!==this.jl&&this.jl.fu(),x("keydown",document,this.jz),x(pc(),document,this.wh),x("popstate",window,this.wh),Zb(this.Rk),this.dt.removeChild(this.element),this.Nf(),qD=2)};function tD(a,b){var c=a.Qf(),d=document.createElement("div"),e=yD();G(c,"ucmPMLink");c.appendChild(d);c.appendChild(e);e.innerText=of;G(d,"ucmSendIcon");d.style.padding="0px 4px 0 0";d.style.verticalAlign="bottom";d.style.width="14px";d.style.height="14px";d.style.display="inline-block";d.style.marginRight="4px";v("click",c,function(f){a.mb();jl('You must be logged in to send a private message. Click "OK" to login.')||(A("StartPrivateMessage",{username:b,to_user:b,location:"PMTab"}),aq.h({username:b,focus:!0,Nm:a.Nm}),JC.show(b),f.stopPropagation())});return c}function uD(a,b){var c=a.Qf(),d=document.createElement("div"),e=yD();e.innerText=pf;G(d,"ucmMentionIcon");d.style.width="14px";d.style.height="14px";d.style.padding="0px 4px 0 0px";d.style.verticalAlign="bottom";d.style.display="inline-block";d.style.marginRight="4px";c.id="ucm-mentionuser";c.appendChild(d);c.appendChild(e);v("click",c,function(){bq.h(b);a.mb()});return c}
function vD(a,b,c){var d=a.Qf(),e=document.createElement("div"),f=yD();QB(b)?(f.style.paddingLeft="20px",f.innerText=Bf):(G(d,"notIgnored"),f.style.paddingLeft="0",f.innerText=Df,d.appendChild(e));G(d,"ucmIgnoreLink");d.appendChild(f);G(e,"ucmIgnoreIcon");e.style.padding="0px 4px 0 0px";e.style.verticalAlign="bottom";e.style.width="14px";e.style.height="14px";e.style.display="inline-block";e.style.marginRight="4px";v("click",d,function(){A("IgnoreUser",{username:b,to_user:b,location:"PMTab"});QB(b)?c.nu(b):c.mf(b);a.mb()});return d}
function wD(a,b,c){var d=a.Qf(),e=document.createElement("div"),f=yD();G(d,"ucmReportLink");d.appendChild(e);d.appendChild(f);G(e,"ucmReportIcon");e.style.padding="0 4px 0 0";e.style.verticalAlign="middle";e.style.width="14px";e.style.height="14px";e.style.display="inline-block";e.style.marginRight="4px";f.innerText=Ef;v("click",d,function(){A("ReportChatUser",{username:b,to_user:b});a.element.removeChild(a.eg);a.jl=new RB(b,c,a.Sc,!0);a.element.appendChild(a.jl.element);a.position();a.jl.Yn();a.jl.Hn.j(function(){a.mb()})});return d}k.Qf=function(){var a=document.createElement("div");a.style.padding="3px 10px";a.style.whiteSpace="nowrap";a.style.fontWeight="normal";a.style.fontFamily="Tahoma, Arial, Helvetica, sans-serif";a.style.fontSize="12px";a.style.webkitTextSizeAdjust="none";G(a,"ucmLinkColor");zD(a);return a};function yD(){var a=document.createElement("span");a.style.fontWeight="normal";a.style.fontFamily="Tahoma, Arial, Helvetica, sans-serif";a.style.fontSize="12px";a.style.webkitTextSizeAdjust="none";G(a,"ucmLinkColor");return a}function zD(a){G(a,"ucmLinkHover");a.onmouseenter=function(){a.style.cursor="pointer"};a.onmouseleave=function(){a.style.cursor="default"}}var qD=2;function AD(a,b,c,d,e){function f(m){m.preventDefault();null===g.element.parentElement?u("Username span has no parent"):(A("OpenUserContextMenu",{username:a.username}),BD(g,a,g.element,c))}b=void 0===b?!1:b;c=void 0===c?"":c;d=void 0===d?!0:d;e=void 0===e?!1:e;F.call(this);var g=this;this.element.style.height="auto";this.element.style.width="auto";this.element.style.position="";this.element.style.display="inline-block";this.element.style.maxWidth="100%";this.element.style.textOverflow="ellipsis";this.element.style.whiteSpace="nowrap";this.element.style.verticalAlign="top";var h=CD();this.element.appendChild(h);this.element.setAttribute("data-purecolor",$B(a));this.element.className="purecolor";b||(this.element.setAttribute("data-purecolor",$B(a)),G(this.element,"purecolor"));G(this.element,ZB(a));this.element.style.fontWeight="bold";this.element.appendChild(document.createTextNode(a.username));b=document.createElement("span");h=!d;b.classList.add("notesIcon_"+a.username);d&&b.classList.add("notesIcon_msg");b.style.display=Vq().El(a.username)?"":"none";d=Rq(Oq(),""!==c||h,e,d,h);b.appendChild(d);this.element.appendChild(b);h&&(d=document.createElement("img"),d.style.display="inline-block",d.style.height="16px",d.style.margin="0 5px",d.style.verticalAlign="middle",d.src=cC(a.Ki),this.element.insertBefore(d,this.element.firstChild),this.element.style.whiteSpace="nowrap");this.element.onmouseenter=function(){g.element.style.textDecoration="underline";g.element.style.cursor="pointer"};this.element.onmouseleave=function(){g.element.style.textDecoration="none";g.element.style.cursor="default"};v("click",this.element,f);v("contextmenu",this.element,f)}r(AD,F);function BD(a,b,c,d){if(2===qD){qD=0;var e=a.vv(b,c,void 0===d?"":d);e.position(!0);eC(b.username).then(function(f){2!==qD&&e.Ua.username===f.username&&(void 0===e.d&&(e.d=f,e.Nm=e.d.To,rD(e),xD(e),qD=1),e.position())}).catch(function(f){u("Could not process user menu request: "+f)})}}AD.prototype.vv=function(a,b,c){return new kD(a,b,c)};function DD(a,b){a.element.innerText="@"+a.element.innerText;b&&(G(a.element,"mentionHl"),a.element.style.padding="2px");return a.element}function CD(){var a=document.createElement("span");a.style.verticalAlign="middle";return a};var ED,FD=[];function GD(a){a=a.match(/[^\uD800-\uDFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDFFF]/g);return null!==a?a:[]}function HD(a){a=a.match(/<img/g);return null!==a&&1===a.length}function ID(a){for(var b=0;b<FD.length;b+=1)FD[b].name===a.name&&FD.splice(b,1);16===FD.length&&FD.pop();FD.unshift(a);a=FD.map(function(c){return JSON.stringify({value:c.value,name:c.name})}).join("|");window.localStorage.setItem("emojiRecents",a);return FD}
function JD(){return new Promise(function(a){var b=window.localStorage.getItem("emojiRecents");null!==b?a(b.split("|").map(function(c){c=JSON.parse(c);return{value:c.value,name:c.name}})):a([])})}function KD(){var a=JD(),b=Gb("api/ts/emoticons/search_emojis/");ED=Promise.all([a,b]).then(function(c){var d=q(c);c=d.next().value;d=d.next().value;FD=c;return[FD,new Q(d.responseText)]})}
function LD(a){void 0===ED&&KD();return void 0!==ED?ED.then(function(b){var c=q(b);b=c.next().value;c=c.next().value;return"recent"===a?b:"smileys-people"===a?(b=R(c,"smileys-emotion"),c=R(c,"people-body"),MD(b.concat(c))):MD(R(c,a))}):Promise.reject()}
function qE(a){return Gb("api/ts/emoticons/search_emojis/?keywords="+encodeURIComponent(a)).then(function(b){b=new Q(b.responseText);var c=[R(b,"smileys-emotion"),R(b,"people-body"),R(b,"animals-nature"),R(b,"food-drink"),R(b,"activities"),R(b,"travel-places"),R(b,"objects"),R(b,"symbols"),R(b,"flags")];b=[];c=q(c);for(var d=c.next();!d.done;d=c.next())d=d.value,void 0!==d&&b.push(MD(d));return b.reduce(function(e,f){return e.concat(f)})}).catch(function(){return[]})}
function MD(a){return a.map(function(b){return{value:b.character,name:b.name}})};var rE={yE:17,shift:16,alt:18,PF:91,gH:93,oE:20,JH:9},sE={left:37,pu:38,right:39,ur:40};function tE(a){if(void 0===a||13===a||27===a)return!1;for(var b in sE)if(a===sE[b])return!1;for(var c in rE)if(a===rE[c])return!1;return!0};var uE=new D("focusingInputFromKeypress");function vE(a,b){F.call(this);var c=this;this.gD=a;this.maxLength=b;this.kc={uf:-1,dm:-1};this.gC="";this.gj=-1;this.oe=[{Uw:"",Vw:[],kc:this.kc}];this.bh=0;this.Pn=new Set;this.xr=this.Ct=this.IA=!1;this.maxLength=b;this.element.classList.add("customInput");this.element.classList.add("noScrollbar");this.element.style.position="relative";this.element.style.outline="none";this.element.style.border="none";this.element.style.boxSizing="border-box";this.element.style.fontSize="12px";this.element.style.whiteSpace="nowrap";this.element.style.overflowY="hidden";this.element.style.overflowX="scroll";this.element.contentEditable="true";qq(this.element,"text");var d=new uk(function(){wE(c,!0)},{xc:10,md:0}),e=new uk(function(){xE(c,!0)},{xc:10,md:0}),f=new uk(function(){yE(c)},{xc:10,md:1}),g=!1;v("input",this.element,function(h){g||c.Ct||(g=!0,"historyUndo"===h.inputType?vk(d):"historyRedo"===h.inputType?vk(e):(vk(f),zE(c,!0)),AE(c),g=!1)});ib()&&window.setInterval(function(){document.activeElement===c.element&&yE(c)},200);v("paste",this.element,function(h){h.preventDefault();null!==h.clipboardData&&(h=null!==window.clipboardData&&void 0!==window.clipboardData?window.clipboardData.getData("Text"):h.clipboardData.getData("text/plain"),BE(c,h))});v("click",this.element,function(h){if(null!==h.target&&h.target!==c.element){var m=window.getSelection();if(null!==m){var n=document.createRange(),p=h.target;h.offsetX<p.offsetWidth/2?n.setStartBefore(p):n.setStartAfter(p);n.collapse(!0);m.removeAllRanges();m.addRange(n)}}AE(c)});v("keydown",this.element,function(h){if("Enter"===h.key)h.preventDefault(),c.submit();else if(CE(c,h))h.preventDefault();else if(h.ctrlKey||h.metaKey){if(-1!==["u","b","i"].indexOf(h.key))h.preventDefault();else if("z"===h.key&&!h.shiftKey)wE(c),h.preventDefault();else if("z"===h.key&&h.shiftKey||"y"===h.key)xE(c),h.preventDefault();c.Pn.add(h.key)}});v("keyup",this.element,function(h){ib()&&tE(h.which)&&(!c.Pn.has(h.key)||h.repeat)?DE(c):-1===["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].indexOf(h.key)&&-1===["MetaLeft","MetaRight"].indexOf(h.code)||AE(c);c.Pn.delete(h.key)});v("focus",this.element,function(){c.xr=!0;void 0!==c.placeholder&&(c.placeholder.style.display="none",c.placeholder.textContent="")});v("blur",this.element,function(){c.xr=!1;void 0!==c.placeholder&&""===EE(c)&&(c.placeholder.style.display="",c.placeholder.textContent=c.gC);c.Pn.clear()});uE.j(function(h){CE(c,h)&&h.preventDefault()})}r(vE,F);function BE(a,b,c){if(""!==b&&((void 0===c?0:c)&&FE(a),a.focus(!0),GE(a),HE(a)&&(c=window.getSelection(),null!==c&&0<c.rangeCount&&c.getRangeAt(0).deleteContents()),b=b.replace(/\r?\n|\r/g," "),b=b.replace(/ /g,"\u00a0"),b=IE(b,JE(a)),""!==b)){var d=document.createElement("div");d.textContent=b;var e={unselectable:"on"};twemoji.parse(d,{attributes:function(){return e}});b=window.getSelection();if(null!==b&&0<b.rangeCount){c=b.getRangeAt(0);var f=[].concat(ha(d.childNodes)).reverse();d=f[0];f=q(f);for(var g=f.next();!g.done;g=f.next())c.insertNode(g.value);c.setStartAfter(d);c.collapse(!0);b.removeAllRanges();b.addRange(c)}DE(a);KE(a)}}function EE(a){var b="",c=!1;a=q(a.element.childNodes);for(var d=a.next();!d.done;d=a.next())d=d.value,d instanceof HTMLImageElement?(b+=d.alt,c=!0):null!==d.textContent&&(!c||":"!==d.textContent[0]&&"@"!==d.textContent[0]||(b+=" "),b+=d.textContent,c=!1);return b.replace(/\s/g," ")}function JE(a){return a.maxLength-EE(a).length}
function FE(a){var b=window.getSelection();if(null!==b){var c=document.createRange();c.selectNodeContents(a.element);c.collapse(!1);b.removeAllRanges();b.addRange(c);AE(a)}}function LE(a,b){document.activeElement!==a.element&&ME(a);a=NE(a);var c=window.getSelection();null!==c&&(a.textContent=b,b=document.createRange(),b.selectNodeContents(a),b.collapse(!1),c.removeAllRanges(),c.addRange(b))}function OE(a){a=NE(a);return null!==a.textContent?a.textContent.replace(/\s/g," "):""}
function PE(a,b){var c=NE(a),d=window.getSelection();if(null!==d&&0<d.rangeCount){var e=document.createRange();e.selectNodeContents(c);e.setStart(c,b);KE(a);d.removeAllRanges();d.addRange(e)}}function QE(a){var b=window.getSelection();null!==b&&0<b.rangeCount&&(b=b.getRangeAt(0),b.startContainer!==a.element&&a.element.contains(b.startContainer)&&(zE(a,!1),b.deleteContents(),DE(a)))}k=vE.prototype;k.focus=function(a){a=void 0===a?!1:a;document.activeElement!==this.element&&document.body.contains(this.element)&&(this.element.focus(),a?ME(this):FE(this),KE(this))};k.blur=function(){this.element.blur()};k.disable=function(){this.blur();this.element.contentEditable="false"};k.enable=function(){this.element.contentEditable="true"};k.submit=function(){if(this.gD()){for(var a=this.element.innerHTML,b=/<img[^>]+alt="?([^"\s]+)"?\s*/g,c=b.exec(a);null!==c;)A("emojiSent",{value:c[1]}),c=b.exec(a);""!==EE(this)&&(GE(this),a=window.getSelection(),null!==a&&(b=document.createRange(),b.selectNodeContents(this.element),a.removeAllRanges(),a.addRange(b),b.deleteContents(),b.collapse(!0)),DE(this))}};function yE(a){var b=window.getSelection();if(null!==b&&0<b.rangeCount){var c=NE(a);if(null!==c.textContent&&twemoji.test(c.textContent)){var d=c.textContent,e=document.createRange();e.selectNodeContents(c);b.removeAllRanges();b.addRange(e);e.deleteContents();BE(a,d);c=NE(a);""!==c.textContent&&(e.setStartBefore(c),e.collapse(!0),b.removeAllRanges(),b.addRange(e),AE(a))}}}
function HE(a){var b=window.getSelection();return null!==b&&0<b.rangeCount&&document.activeElement===a.element&&(a=b.getRangeAt(0),a.startContainer!==a.endContainer||a.startOffset!==a.endOffset)?!0:!1}function CE(a,b){return 0<JE(a)?!1:!b.ctrlKey&&!b.metaKey&&tE(b.which)&&-1===["Backspace","Delete"].indexOf(b.key)&&!HE(a)}function DE(a){AE(a);zE(a,!0)}function zE(a,b){window.clearTimeout(a.gj);a.gj=-1;a.IA||(b?a.gj=window.setTimeout(function(){RE(a);a.gj=-1},300):RE(a))}
function GE(a){-1!==a.gj&&(window.clearTimeout(a.gj),a.gj=-1,RE(a))}function RE(a){AE(a);var b=EE(a);a.oe.splice(a.bh+1,a.oe.length);a.oe[a.oe.length-1].Uw===b&&a.oe.pop();var c=[].concat(ha(a.element.childNodes)).map(function(d){return d.cloneNode(!0)});a.oe.push({Uw:b,Vw:c,kc:a.kc});20<a.oe.length&&a.oe.shift();a.bh=a.oe.length-1;SE(a)}function wE(a,b){b=void 0===b?!1:b;A(b?"BrowserTriggeredUndo":"HotkeyTriggeredUndo");a.bh!==a.oe.length-1||b||zE(a,!1);0<a.bh&&(a.bh--,TE(a,a.oe[a.bh]),SE(a))}
function xE(a,b){A((void 0===b?0:b)?"BrowserTriggeredRedo":"HotkeyTriggeredRedo");a.bh<a.oe.length-1&&(a.bh++,TE(a,a.oe[a.bh]),SE(a))}function TE(a,b){a.element.innerHTML="";b.Vw.forEach(function(c){a.element.append(c.cloneNode())});a.kc=b.kc;ME(a);KE(a)}
function SE(a){if(a.xr&&!document.queryCommandSupported("insertText")){a.Ct=!0;var b=function(){document.execCommand("insertText",!1,"~");document.execCommand("delete",!1)},c=window.getSelection();if(null!==c&&0<c.rangeCount){var d=c.getRangeAt(0);c.removeAllRanges();b();c.addRange(d)}else b();a.Ct=!1}}function NE(a){AE(a);return 0===a.element.childNodes.length?a.element:-1===a.kc.uf?a.element.childNodes[0]:a.element.childNodes[a.kc.uf]}
function UE(a){return VE(a,!0).getBoundingClientRect().left-a.element.getBoundingClientRect().left}function WE(a){var b=OE(a).length;return 0<b&&a.kc.dm!==b?!1:![].concat(ha(a.element.childNodes)).slice(a.kc.uf+1).some(function(c){var d,e;return"IMG"===c.nodeName||0<(null!==(e=null===(d=c.textContent)||void 0===d?void 0:d.length)&&void 0!==e?e:0)})}
function VE(a,b){b=void 0===b?!1:b;var c=document.createRange();if(0===a.element.childNodes.length)return c.setStart(a.element,0),c;var d=a.element.childNodes[a.kc.uf];-1===a.kc.uf?c.setStartBefore(a.element.childNodes[0]):""===d.textContent?c.setStartAfter(d):c.setStart(d,a.kc.dm);if(b){var e,f;a=c.startContainer;if(0!==(null!==(f=null===(e=null===a||void 0===a?void 0:a.textContent)||void 0===e?void 0:e.length)&&void 0!==f?f:0))if(null!==window.getSelection())for(;0<c.startOffset;){if(/^\s/.test(c.toString())){c.setStart(a,c.startOffset+1);break}c.setStart(a,c.startOffset-1)}else c=document.createRange()}return c}
function AE(a){var b=window.getSelection();if(null!==b&&0<b.rangeCount&&document.activeElement===a.element){b=b.getRangeAt(0).cloneRange();b.collapse(!1);var c=b.startContainer===a.element?b.startOffset-1:Array.from(a.element.childNodes).indexOf(b.startContainer);if(-1===c)a.kc={uf:-1,dm:-1};else if(""===a.element.childNodes[c].textContent)a.kc={uf:c,dm:-1};else{var d=a.element.childNodes[c].textContent;a.kc={uf:c,dm:b.startContainer===a.element?d.length:b.startOffset}}}}
function ME(a){if(!(0===a.element.childNodes.length||a.kc.uf>=a.element.childNodes.length)){var b=window.getSelection();null!==b&&(a=VE(a),a.collapse(!0),b.removeAllRanges(),b.addRange(a))}}function KE(a){var b=0;if(-1!==a.kc.uf){b=a.element.childNodes[a.kc.uf];var c=document.createRange();c.setStart(a.element,0);c.setEndAfter(b);b=c.getBoundingClientRect().width}a.element.scrollLeft=Math.max(a.element.scrollLeft,b+3-a.element.offsetWidth)}
function IE(a,b){if(a.length<=b)return a;for(var c=-1,d=0,e=q(a),f=e.next();!f.done;f=e.next()){f=f.value;if(d+f.length>b)break;twemoji.test(f)&&(c=d);d+=f.length}if(-1!==c){a:{var g=a.substr(c,a.length);if(twemoji.test(g)){e=-1;var h=f="",m=0;g=q(GD(g));for(var n=g.next();!n.done;n=g.next())n=n.value,-1===e&&twemoji.test(n)?(e=m,h=f=n):-1!==e&&(h=""+h+n,twemoji.test(n)&&HD(twemoji.parse(h))&&(f=h)),m+=n.length;if(-1!==e){e={cF:e,NA:f};break a}}e=void 0}if(void 0!==e&&c+e.NA.length>b)return a.substr(0,c)}return a.substr(0,d)};var XE={"/tip":function(a){var b={};if(0<a.length){var c=Number(a[0]);isNaN(c)?b.message=a.join(" "):(a.shift(),b.amount=c,0<a.length&&(b.message=a.join(" ")))}return{Js:b,messageType:1}},"/debug":function(){return{messageType:2}}};function YE(a){if("/"===a.trim().charAt(0)){a:{var b=a.match(/(\S+)/g);if(null!==b){var c=b.shift();if(Object.prototype.hasOwnProperty.call(XE,c)){b=XE[c](b);break a}}b={messageType:0}}if(0!==b.messageType)return b}return{messageType:0,Js:a}};new D("MobileVideoControls:tap");new D("MobilePureChat:tap");new D("MobilePureChat:drag");new D("MobilePureChat:dragEnd");new D("MobileFullscreenSendChat");new D("MobilePlayer:Resize");new D("MobilePlayer:changeSize");new D("mobilePMChatLinkFullscreenToggle");new D("mobilePureChatChange");var ZE=[40,37,39,38,13,27,32,9];function $E(a){Dc.call(this);var b=this;this.config=a;this.hc.j(function(){void 0!==b.selectedIndex&&BE(b.config.pa," ",!0);b.D()});v("keyup",this.config.pa.element,function(c){b.xw(c)});v("keydown",this.config.pa.element,function(c){if(b.visible){13===c.keyCode&&b.D();38===c.keyCode&&(c.preventDefault(),b.zp(!0));40===c.keyCode&&(c.preventDefault(),b.zp(!1));if(9===c.keyCode||39===c.keyCode||32===c.keyCode)c.preventDefault(),b.D(),BE(b.config.pa," ",!0),FE(b.config.pa);if(27===c.keyCode||37===c.keyCode)c.preventDefault(),b.D(),QE(b.config.pa)}})}r($E,Dc);k=$E.prototype;k.xw=function(a){this.ho(a)};k.initData=function(){Dc.prototype.initData.call(this);this.list=document.createElement("div");this.kz="";this.cache=new Map;this.visible=!1;this.delay=0;this.J=new Yb};k.ya=function(){Dc.prototype.ya.call(this);G(this.element,"emoticonAutocompleteModal");this.element.style.visibility="hidden";this.element.style.width="auto";this.element.style.height="auto";this.element.style.borderWidth="1px";this.element.style.borderStyle="solid";this.element.style.borderBottom="none";this.element.style.fontFamily="Helvetica, Arial, sans-serif";this.element.style.cursor="pointer";this.list.style.width="260px";this.list.style.maxHeight="180px";this.list.style.overflowY="scroll";this.element.appendChild(this.list)};k.Lb=function(){Zb(this.J)};k.G=function(){var a=UE(this.config.pa)+this.config.Tl;this.element.style.left=Math.max(4,Math.min(a,this.config.pa.element.clientWidth-this.config.vm))+"px"};k.ho=function(a){var b=this;if(0<=this.delay&&-1===ZE.indexOf(a.keyCode)){var c=OE(this.config.pa).match(this.ry);null!==c?(this.prefix=c[2],a=this.cache.get(this.prefix),void 0!==a?(this.items=a,this.dh(c[1])):(clearTimeout(this.EA),this.EA=window.setTimeout(function(){b.getData().then(function(d){b.items=aF(b,d.responseText);b.cache.set(b.prefix,b.items);b.dh(c[1])}).catch(function(d){u("Error autocomplete modal: "+d)})},100))):this.D()}};k.dh=function(a){this.Pf();this.element.style.display=0===this.items.length?"none":"block";for(var b=0;b<this.items.length;b+=1)bF(this,this.items[b],b);b=0>=this.list.children.length?0:this.list.children.item(this.list.children.length-1).offsetTop;this.list.scrollTop=b;this.kz=a;this.visible||this.show()};k.Pf=function(){for(;null!==this.list.firstChild;)this.list.removeChild(this.list.firstChild);this.selectedIndex=void 0};k.zp=function(a){this.ui();a=void 0===this.selectedIndex?a?this.items.length-1:0:this.selectedIndex+(a?-1:1);0>a?a=this.items.length-1:a>=this.items.length&&(a=0);cF(this,a,!0)};k.xh=function(a){void 0!==this.selectedIndex&&0<this.items.length&&(this.ui(),G(this.items[this.selectedIndex].element,"selectedEmoticon"),a&&(this.list.scrollTop=this.selectedIndex*this.list.firstChild.clientHeight-this.list.clientHeight/2),a=OE(this.config.pa).replace(new RegExp(this.iC+"$"),this.items[this.selectedIndex].Lc),LE(this.config.pa,a),PE(this.config.pa,this.kz.length+1))};k.show=function(){var a=this;0<=this.delay&&window.setTimeout(function(){null!==OE(a.config.pa).match(a.ry)&&(a.element.style.visibility="visible",0===pk(a.element.style.width)&&(a.element.style.width="auto"),a.element.style.height="auto",a.Vg(),a.Y(),a.visible=!0)},this.delay)};k.D=function(){this.mb();this.element.style.visibility="hidden";this.element.style.width="0";this.element.style.height="0";this.visible=!1;this.Pf()};k.ui=function(){for(var a=q(this.items),b=a.next();!b.done;b=a.next())H(b.value.element,"selectedEmoticon")};k.getData=function(){var a=this,b=new XMLHttpRequest;return new Promise(function(c,d){b.onload=function(){Fb(b.status)?c(b):d(new Eb(b))};b.onerror=function(){d(new Eb(b))};b.open("GET","https://emote.highwebmedia.com/autocomplete?slug="+a.prefix+"&_="+Date.now());b.withCredentials=!1;b.timeout=6E4;b.send()})};function bF(a,b,c){var d=document.createElement("div");d.innerText=b.Lc;d.style.padding="2px 8px";a.Sy(b)&&(d.style.display="none");d.onclick=function(e){cF(a,c,!1);e.preventDefault()};a.list.appendChild(d);b.element=d}function cF(a,b,c){a.iC=void 0===a.selectedIndex?a.prefix:a.items[a.selectedIndex].Lc;a.selectedIndex=b;a.xh(c);a.config.pa.focus()}k.Sy=function(){return!1};k.isVisible=function(){return this.visible};var dF,eF=new D("videoModeChanged",{Bd:100});Yj.Td.j(function(){eF.h(void 0)});function fF(){$E.apply(this,arguments)}r(fF,$E);k=fF.prototype;k.initData=function(){$E.prototype.initData.call(this);this.Ed=document.createElement("div");this.Dd=document.createElement("img");this.Lf=document.createElement("div");this.ry=/(^|.*\s):([\w-]+)$/};k.ya=function(){var a=this;G(this.Ed,"previewWrapper");this.Ed.style.display="none";this.Ed.style.width="260px";this.Ed.style.height="110px";this.Ed.style.lineHeight="110px";this.Ed.style.borderBottomWidth="1px";this.Ed.style.borderBottomStyle="solid";this.Ed.style.textAlign="center";this.Ed.onclick=function(){void 0!==a.selectedIndex&&Nv.h(a.items[a.selectedIndex])};this.element.appendChild(this.Ed);$E.prototype.ya.call(this);this.Dd.src="https://static-assets.highwebmedia.com/tsdefaultassets/loading.png";this.Dd.style.maxWidth="240px";this.Dd.style.maxHeight="80px";this.Dd.style.verticalAlign="middle";this.Dd.style.padding="10px 10px 16px 10px";this.Ed.appendChild(this.Dd);G(this.Lf,"hrefColor");this.Lf.innerText="VIEW / REPORT EMOTICON";this.Lf.style.fontSize="10px";this.Lf.style.position="relative";this.Lf.style.bottom="8px";this.Lf.style.lineHeight="0";this.Lf.onmouseenter=function(){a.Lf.style.textDecoration="underline"};this.Lf.onmouseleave=function(){a.Lf.style.textDecoration="none"};this.Ed.appendChild(this.Lf);this.J.add(K.j(function(b){dF=b.C.Zf;a.delay=parseInt(b.C.oa.Sj)}));this.J.add(zq.j(function(b){a.delay=parseInt(b.Sj)}));this.J.add(eF.j(function(){void 0!==a.V&&a.D()}))};k.xw=function(a){36<JE(this.config.pa)&&WE(this.config.pa)&&(this.ho(a),this.G())};k.Pf=function(){$E.prototype.Pf.call(this);this.Ed.style.display="none"};k.xh=function(a){$E.prototype.xh.call(this,a);void 0!==this.selectedIndex&&(this.Dd.src="https://static-assets.highwebmedia.com/tsdefaultassets/loading.png",this.Dd.src=this.items[this.selectedIndex].url,this.Ed.style.display="block")};function aF(a,b){b=new Q(b);T(b,"slug");var c=gm(b,"emoticons"),d=[];c=q(c);for(var e=c.next();!e.done;e=c.next())e=e.value,d.push({Lc:e.slug,url:e.url,element:gF,Rh:e.score});d=d.map(function(f){var g=void 0===f.Rh?0:f.Rh;f.Lc===a.prefix?f.Rh=g+1E5:0===f.Lc.indexOf(a.prefix)&&(f.Rh=g+9E3);return f});d=d.sort(function(f,g){return(void 0===f.Rh?0:f.Rh)-(void 0===g.Rh?0:g.Rh)});mm(b);return d}k.Sy=function(a){return 0<=dF.indexOf(a.Lc)};var gF=document.createElement("div");function hF(){var a=this;this.Ml=new Set;this.au=!1;this.Iq=new Yb;this.zb=[];K.j(function(b){a.Sc=b.A;a.wb=b.A.Qe;B(b.A.event.ac.j(function(c){var d=c.La;c=c.rd;a.wb||-1<["offline","notconnected","hidden","passwordprotected"].indexOf(d)||(c="privatespying"!==c&&"privatewatching"!==c,d="privatespying"!==d&&"privatewatching"!==d,!c&&d?(a.fn=void 0,iF(a)):c&&!d?(a.fn=void 0,iF(a,!1)):iF(a))}),a.Iq);a.wb||B(b.A.event.Aa.j(function(c){c=q(c.ja);for(var d=c.next();!d.done;d=c.next()){d=q(d.value);for(var e=d.next();!e.done;e=d.next())e=e.value,0===e.ic&&void 0!==e.Ja&&jF(a,e.Ja)}}),a.Iq)});vc.j(function(){Zb(a.Iq)})}var kF;function lF(){void 0===kF&&(kF=new hF);return kF}function iF(a,b){void 0===a.fn&&(a.fn=a.vt(void 0===b?!0:b),mF(a));return a.fn}hF.prototype.Pf=function(){this.zb=[]};function mF(a){window.setTimeout(function(){a.fn=void 0},6E4)}
function nF(a){a.au||(a.zb.sort(function(b,c){return b.Ja.username.toLowerCase()<c.Ja.username.toLowerCase()?-1:b.Ja.username.toLowerCase()>c.Ja.username.toLowerCase()?1:0}),a.au=!0);return a.zb}hF.prototype.Je=function(){return this.zb.map(function(a){return a.Ja})};hF.prototype.vt=function(a){var b=this;a=void 0===a?!0:a;return JB(this.Sc).then(function(c){var d=document.createElement("div");a?oF(b):b.zb=[];c=q(c.Je);for(var e=c.next();!e.done;e=c.next())e=e.value,void 0!==b.El(e.username)||b.zb.push({Ja:e,element:d,visible:!1,pt:!1}),b.Ml.has(e.username)&&(pF.h(void 0),b.Ml.delete(e.username));return b.zb}).catch(function(c){u("Error loading username autocomplete: "+c);return b.zb})};function jF(a,b){var c=document.createElement("div");a.au=!1;var d=a.El(b.username);void 0===d?a.zb.push({Ja:b,element:c,visible:!1,pt:!0}):(d.Ja=b,d.pt=!0);a.Ml.has(b.username)&&(pF.h(void 0),a.Ml.delete(b.username))}function qF(a,b){b=q(b);for(var c=b.next();!c.done;c=b.next())a.Ml.add(c.value)}function oF(a){a.zb=a.zb.filter(function(b){return b.pt})}hF.prototype.El=function(a){return this.zb.find(function(b){return b.Ja.username===a})};ea.Object.defineProperties(hF.prototype,{count:{configurable:!0,enumerable:!0,get:function(){return this.zb.length}}});var pF=new D("updateUserMention",{dd:!1}),rF=[40,37,39,38,13,27,32,9],sF=new D("videoModeChanged",{Bd:20});function tF(a){Dc.call(this,a);var b=this;this.config=a;this.Ff=this.isVisible=!1;this.J=new Yb;this.zb=lF();this.element.style.visibility="hidden";this.element.style.width="auto";this.element.style.height="auto";this.element.style.borderBottom="none";this.element.style.fontFamily="Helvetica, Arial, sans-serif";this.element.style.cursor="pointer";this.element.style.userSelect="none";this.hc.j(function(){uF(b)&&BE(b.config.pa," ",!0);b.D()});this.list=document.createElement("div");this.list.style.width="260px";this.list.style.maxHeight="180px";this.list.style.overflowY="scroll";this.element.appendChild(this.list);v("keyup",this.config.pa.element,function(c){36<JE(b.config.pa)&&(b.ho(c),b.G())});v("keydown",this.config.pa.element,function(c){if(b.isVisible||b.Ff){var d=OE(b.config.pa);if(13===c.keyCode&&" "!==d[d.length-1])c.preventDefault(),b.D(),LE(b.config.pa,d+" "),FE(b.config.pa);else if(38===c.keyCode||40===c.keyCode)c.preventDefault(),b.zp(38===c.keyCode);else if(9===c.keyCode||39===c.keyCode||32===c.keyCode)c.preventDefault(),c.stopPropagation(),b.D(),BE(b.config.pa," ",!0),FE(b.config.pa);else if(27===c.keyCode||37===c.keyCode)c.preventDefault(),b.D(),QE(b.config.pa)}});B(zq.j(function(c){b.delay=parseInt(c.Sj)}),this.J);B(sF.j(function(){b.D()}),this.J);B(K.j(function(c){b.delay=parseInt(c.C.oa.Sj);b.D();b.Pf();b.zb.Pf()}),this.J);G(this.element,"userMentionModal")}r(tF,Dc);k=tF.prototype;k.Lb=function(){Zb(this.J)};k.G=function(){var a=UE(this.config.pa)+this.config.Tl;this.element.style.left=Math.max(4,Math.min(a,this.config.pa.element.clientWidth-this.config.vm))+"px"};k.ho=function(a){Or(this,function c(){var d=this,e;return Aa(c,function(f){if(1==f.ma){if(!(0<=d.delay&&-1===rF.indexOf(a.keyCode))){f.ma=0;return}e=OE(d.config.pa).match(/(^|\s)@([\w-]*)$/);if(null===e||!WE(d.config.pa)){d.D();f.ma=0;return}return sa(f,iF(d.zb),4)}d.prefix=e[2];d.ds=d.prefix;d.dh();f.ma=0})})};k.Pf=function(){for(;null!==this.list.firstChild;)this.list.removeChild(this.list.firstChild);this.selectedIndex=-1};k.dh=function(){var a=this;this.Pf();" "===this.prefix[this.prefix.length-1]&&this.D();var b=!1;this.Uh=nF(this.zb);this.Uh.forEach(function(d,e){""===a.prefix||d.Ja.username.toLowerCase().startsWith(a.prefix.toLowerCase())?(vF(a,d,e),b=!0):d.visible=!1});if(b){var c=0>=this.list.children.length?0:this.list.children.item(this.list.children.length-1).offsetTop;this.list.scrollTop=c;this.isVisible||this.show()}else this.D(),this.Ff=!0};function vF(a,b,c){var d=document.createElement("div");d.classList.add("userMentionModalItem");G(d,ZB(b.Ja));d.innerText=b.Ja.username;d.style.padding="2px 8px";d.onclick=function(){a.selectedIndex===c?(a.D(),BE(a.config.pa," ",!0)):(a.selectedIndex=c,a.xh(!1),a.config.pa.focus())};d.style.fontWeight="bold";d.style.textOverflow="ellipsis";d.style.overflow="hidden";b.element=d;b.visible=!0;a.list.appendChild(d)}
k.zp=function(a){var b;this.ds=uF(this)?this.Uh[this.selectedIndex].Ja.username:this.prefix;var c=!1;this.ui();do if(this.selectedIndex=uF(this)?this.selectedIndex+(a?-1:1):a?this.Uh.length-1:0,0>this.selectedIndex){if(c)break;this.selectedIndex=this.Uh.length-1;c=!0}else if(this.selectedIndex>=this.Uh.length){if(c)break;this.selectedIndex=0;c=!0}while(null===(b=this.Uh[this.selectedIndex])||void 0===b||!b.visible);this.xh(!0)};k.ui=function(){this.list.querySelectorAll("div.highlight").forEach(function(a){H(a,"highlight")})};k.xh=function(a){if(uF(this)){this.ui();var b=this.Uh[this.selectedIndex],c=this.list.clientHeight,d=this.list.firstChild.getBoundingClientRect().height;a&&(this.list.scrollTop=this.selectedIndex*d-c/2);G(b.element,"highlight");a=b.Ja.username;LE(this.config.pa,OE(this.config.pa).replace(new RegExp(this.ds+"$"),a));this.ds=a;a=OE(this.config.pa).lastIndexOf(a);-1<a&&PE(this.config.pa,a)}};k.show=function(){var a=this;this.Ff=!0;0<=this.delay&&window.setTimeout(function(){a.element.style.visibility="";a.Vg();a.Y();a.isVisible=!0},this.delay)};k.D=function(){this.mb();this.element.style.visibility="hidden";this.Ff=this.isVisible=!1;this.Pf()};function uF(a){return-1!==a.selectedIndex&&a.selectedIndex<a.Uh.length};var wF=new D("goPMList"),xF=new D("ignoreUser");function yF(a){F.call(this);this.element=N("div",{colorClass:"PMControlBar",style:{width:"100%",height:"31px",lineHeight:"32px",borderBottom:"#BDBDBD 1px solid",display:"flex",justifyContent:"space-between"},id:"pm-control-bar"},N("span",{colorClass:"backButton",style:{marginLeft:"10px",cursor:"pointer",fontSize:"12px"},onClick:function(){wF.h(a)}},Mi));this.element.classList.add("pm-control-bar")}r(yF,F);function zF(){var a=this;this.Zt=!1;this.sw=function(){return a.element};this.Xc=function(){return a.Zt};this.Iw=function(){a.element.style.display="none";a.Zt=!1};this.Xy=function(){a.element.style.display="block";a.Zt=!0};this.element=N("div",{style:{display:"none",textAlign:"center"}},Ni)};function AF(){var a=this;this.Pm=new Map;this.supported=!0;this.supported=Qa()&&Oa()||Ma();this.$d();v("beforeunload",window,function(){a.close()});lj.j(function(b){b&&cb()&&(b=gb(),void 0!==b&&13>b?a.$d():void 0!==a.context&&a.context.resume())})}
AF.prototype.$d=function(){var a=this;if(this.supported)if(Oa()){Em("Using audio context");this.close();this.context="webkitAudioContext"in window?new webkitAudioContext:new AudioContext;var b=function(){if(void 0!==a.context){var c=a.context.createBufferSource();c.buffer=a.context.createBuffer(1,1,22050);c.connect(a.context.destination);c.start(0)}x("click",document,b);x("touchstart",document,b);x("touchend",document,b)};v("click",document,b);v("touchstart",document,b);v("touchend",document,b)}else Em("Using audio elements");else w("Sounds are not supported.")};AF.prototype.close=function(){void 0!==this.context&&("close"in this.context&&this.context.close(),this.context=void 0)};function BF(a,b,c){a.Pm.set(b,{ready:!1});if(void 0!==a.context){var d=new XMLHttpRequest;d.open("GET",c,!0);d.responseType="arraybuffer";d.onload=function(){200>d.status||300<=d.status?u("Error requesting sound "+b+" "+d.status+" "+d.statusText):void 0===a.context?u("unexpected"):a.context.decodeAudioData(d.response.slice(0),function(e){a.Pm.set(b,{ready:!0,buffer:e})},function(e){u("Error decoding sound "+b+" "+e)})};d.onerror=function(){u("Error requesting sound "+b+" ("+new Eb(d)+")")};d.send()}else Ma()&&a.Pm.set(b,{ready:!0,yq:new Audio(c)})}
function CF(a){BF(a,"huge","https://static-assets.highwebmedia.com/tsdefaultassets/sounds/classic/huge.mp3");BF(a,"large","https://static-assets.highwebmedia.com/tsdefaultassets/sounds/classic/large.mp3");BF(a,"medium","https://static-assets.highwebmedia.com/tsdefaultassets/sounds/classic/medium.mp3");BF(a,"small","https://static-assets.highwebmedia.com/tsdefaultassets/sounds/classic/small.mp3");BF(a,"tiny","https://static-assets.highwebmedia.com/tsdefaultassets/sounds/classic/tiny.mp3")}
AF.prototype.hp=function(a,b){if(DF(this,a,b)){var c=this.Pm.get(a);if(void 0!==c&&c.ready)if(void 0!==c.buffer)if(void 0===this.context)u("unexpected");else{var d=this.context.createBufferSource();d.buffer=c.buffer;c=this.context.createGain();d.connect(c);c.connect(this.context.destination);c.gain.value=b/3.5/100;d.start(0)}else void 0!==c.yq?(c.yq.volume=b/100,b=c.yq.play(),void 0!==b&&b.catch(function(e){u("Error playing sound "+a+" ("+e+")")})):u("Missing sound buffer or element for "+a)}};function DF(a,b,c){return a.supported&&0!==c?100<c||0>c||isNaN(c)?(u("setSoundVolume: invalid volume "+c),!1):a.Pm.has(b)?!0:(u("Unknown sound: "+b),!1):!1};function EF(){Rk.apply(this,arguments)}r(EF,Rk);EF.prototype.Ln=function(){var a=Rk.prototype.Ln.call(this);a.style.fontFamily="UbuntuMedium, Helvetica, Arial, sans-serif";return a};function FF(a,b,c){Dc.call(this);var d=this;this.Pk=a;this.og=b;this.LC=c;this.mj="public";this.ob=0;this.Qi=this.Eo=!1;this.Nv=96;this.ai=new D("tipSent");this.closed=new D("tipClosed");this.isVisible=!1;this.element.id="SplitModeTipCallout";G(this.element,"defaultColor");this.element.style.display="none";this.element.style.position="absolute";this.element.style.width="390px";this.element.style.height="auto";this.element.style.top="0";this.element.style.borderWidth="2px";this.element.style.borderStyle="solid";this.element.style.borderRadius="4px";this.element.style.fontFamily="UbuntuRegular, Helvetica, Arial, sans-serif";this.element.style.fontSize="12px";this.element.style.overflow="visible";v("keydown",this.element,function(e){27===e.keyCode&&d.D();9===e.keyCode&&(e.shiftKey?d.X.hasFocus()&&!$k(d.X)?d.ea.focus():document.activeElement===d.ea?d.da.focus():d.X.hasFocus()||$k(d.X):d.X.hasFocus()&&!al(d.X)?d.da.focus():document.activeElement===d.da?d.ea.focus():d.X.hasFocus()||al(d.X),e.preventDefault())});this.Ue=Kj("","","74px");G(this.Ue,"bottomDivot");this.element.appendChild(this.Ue);this.$m=Jj("","","74px");G(this.$m,"topDivot");this.element.appendChild(this.$m);this.Ko=Lj("","","30px");G(this.Ko,"leftDivot");this.element.appendChild(this.Ko);this.V.style.bottom="";a=document.createElement("div");G(a,"titleBar");a.innerText=sd;a.style.fontSize="15px";a.style.fontFamily="UbuntuBold, Helvetica, Arial, sans-serif";a.style.padding="6px";this.element.appendChild(a);a=document.createElement("div");a.style.display="inline-block";a.style.width="100%";b=document.createElement("span");b.innerText=$e;b.style.fontWeight="bold";b.style.display="inline-block";b.style.padding="6px";a.appendChild(b);this.Mc=document.createElement("span");G(this.Mc,"tokenBalance");this.Mc.style.display="inline-block";this.Mc.style.fontWeight="bold";this.Mc.style.padding="6px 6px 6px 0";a.appendChild(this.Mc);b=document.createElement("a");G(b,"purchaseTokens");b.innerText=Cd;b.href="/tipping/purchase_tokens/";b.style.display="inline-block";b.style.fontSize="11px";b.style.marginLeft="12px";b.style.cssFloat="right";b.style.padding="6px";b.style.textDecoration="underline";b.onclick=function(){el("embed"===d.Pk);return!1};a.appendChild(b);this.element.appendChild(a);this.yb=document.createElement("div");G(this.yb,"warning");this.yb.style.display="none";this.yb.style.fontWeight="bold";this.yb.style.padding="6px";this.yb.style.textAlign="center";this.yb.style.position="absolute";this.yb.style.left="50%";a=document.createElement("div");a.innerText=bf;this.yb.appendChild(a);a=document.createElement("div");a.innerText=cf;this.yb.appendChild(a);this.element.appendChild(this.yb);this.Fe=document.createElement("form");a=document.createElement("label");b=document.createElement("span");b.innerText=df;b.style.display="inline-block";b.style.padding="6px";a.appendChild(b);this.da=cl();this.da.value="25";this.da.min="1";this.da.style.width="5em";this.da.style.display="inline-block";this.da.style.padding="4px";this.da.style.borderWidth="1px";this.da.style.borderStyle="solid";this.da.style.borderRadius="4px";this.da.onclick=function(){d.Ji()};a.appendChild(this.da);this.Fe.appendChild(a);this.Nd=document.createElement("div");this.Nd.innerText=pd;this.Nd.style.padding="6px 6px 0 6px";this.Fe.appendChild(this.Nd);this.le=document.createElement("div");this.ea=document.createElement("textarea");G(this.ea,"tipMessageInput");this.ea.maxLength=255;this.ea.style.width="100%";this.ea.style.height="40px";this.ea.style.resize="none";this.ea.style.margin="6px";this.ea.style.padding="4px";this.ea.style.borderWidth="1px";this.ea.style.borderStyle="solid";this.ea.style.borderRadius="4px";this.ea.style.boxSizing="border-box";this.le.appendChild(this.ea);this.Fe.appendChild(this.le);this.Nd.onclick=function(){d.ea.select()};this.ae=document.createElement("div");G(this.ae,"warning");this.ae.innerText=ef;this.ae.style.display="none";this.ae.style.paddingLeft="5px";a.appendChild(this.ae);a=document.createElement("div");this.da.oninput=function(){GF(d)};a.style.textAlign="right";a.style.position="relative";this.dc=document.createElement("div");this.dc.innerText=ff;this.dc.style.position="absolute";this.dc.style.display="none";this.dc.style.fontSize="10px";this.dc.style.lineHeight="1.3em";this.dc.style.padding="6px";this.dc.style.textAlign="left";this.dc.style.top="6px";this.dc.style.left="0px";a.appendChild(this.dc);this.X=new EF;this.H(this.X,a);this.Fe.appendChild(a);this.element.appendChild(this.Fe);K.j(function(e){d.Nr=e.C.Nr;d.hb=e.C.hb;d.Z=e.A.B();e.A.event.ac.j(function(f){switch(f.La){case "privatewatching":d.mj="private";break;default:d.mj="public"}})});xA.j(function(e){d.uu(e.gd)});this.G();v("submit",this.Fe,function(e){e.preventDefault();var f=parseInt(d.da.value);d.isVisible&&!isNaN(f)&&d.X.isEnabled()&&(A("SendTipClicked",{amount:f,location:"PMTab"}),100<f&&!d.Qi?(Xk(d.X,Ic(f)),d.Qi=!0,d.G()):(d.da.blur(),e=d.ea.value,void 0!==d.ta&&(e=""===d.ea.value?d.ta.value:d.ta.value+" | "+d.ea.value),AA({Z:d.Z,oz:d.da.value,message:e,source:d.Pk,pz:d.mj,xj:d.X.xj,Qd:O()}).then(function(g){g.success?A("SendTipSuccess",{amount:f,location:"PMTab"}):void 0!==g.error?J(g.error):u("unknown send tip error");HF(d);d.ea.value="";void 0!==g.Ym&&wA.h({gd:g.Ym,Z:d.Z});d.ai.h({amount:f,success:g.success})}).catch(function(g){u("Error sending tip. status: "+g);d.ai.h({amount:f,success:!1})}),d.D()))});this.hc.j(function(){d.D()});this.closed.j(function(){d.X.rc.D(!0)})}r(FF,Dc);k=FF.prototype;k.G=function(){this.le.style.width=Math.max(0,this.element.clientWidth-12)+"px";this.dc.style.maxWidth=Math.max(0,this.element.offsetWidth-this.X.element.offsetWidth-15)+"px";var a=nk(this.LC);this.Ue.style.display="none";this.$m.style.display="none";this.Ko.style.display="none";if("fixed"===this.og.style.position)this.Ko.style.display="block",this.element.style.top=a.top-30+"px",this.element.style.left=a.right+12+"px";else{var b=a.left-70,c=Math.max(0,b+this.element.offsetWidth-ck()+4);0>b-c&&(c+=b-c);this.element.style.left=b-c+"px";hb()||this.element.offsetHeight+a.bottom+20>bk()+document.documentElement.scrollTop?(this.Ue.style.display="block",this.Ue.style.left=this.Nv+c+"px",this.element.style.top=a.top-this.element.offsetHeight-11+"px"):(this.$m.style.display="block",this.$m.style.left=this.Nv+c+"px",this.element.style.top=a.bottom+14+"px")}this.V.style.height=document.documentElement.offsetHeight+"px"};function GF(a){/^[1-9]\d*$/.test(a.da.value)?(a.X.enable(),a.ae.style.display="none",0<a.ob&&parseInt(a.da.value)>a.ob?a.Eo||(A("TokenAmountTooHigh"),a.Eo=!0):a.Eo=!1):(a.X.disable(),a.ae.style.display="inline-block");a.Qi&&HF(a)}function HF(a){var b=a.X;Yk(b);b.Ij&&!b.Wl&&(b.Wl=!0,b.Hb.style.borderRadius="4px 0 0 4px",b.we.style.display="inline-block",b.Vj=[b.Hb,b.we],b.Y());a.Qi=!1}
k.show=function(a){var b=this;if(!this.hb)J("This broadcaster doesn't accept tips.");else if(!jl('You must be logged in to tip. Click "OK" to login.')){void 0!==a.amount&&(this.da.value=a.amount.toString(),GF(this));this.ea.value=void 0!==a.message?a.message:"";this.yb.style.display=this.Nr?"block":"none";this.dc.style.display=void 0!==a.dn&&a.dn?"none":"block";if(eb()){var c=document.createElement("input");c.type="text";c.style.opacity="0";c.style.height="0px";document.body.appendChild(c);c.focus({preventScroll:!0})}bl(this.Pk,this.X);this.Mc.innerText=qe+"...";yA(this.Z).then(function(d){b.da.max=d.ob.toString();if(void 0!==d.Ok){b.Nd.innerText=d.Ok.label;void 0!==b.ta&&b.le.removeChild(b.ta);b.ta=document.createElement("select");G(b.ta,"tipOptionsSelect");b.ta.style.width="100%";b.ta.style.fontSize=".8125em";b.ta.style.margin="6px";b.ta.style.borderWidth="1px";b.ta.style.borderStyle="solid";b.ta.style.boxSizing="border-box";b.le.insertBefore(b.ta,b.ea);var e=document.createElement("option");e.innerText="-- "+kf+" --";b.ta.appendChild(e);d=q(d.Ok.options);for(e=d.next();!e.done;e=d.next()){var f=e.value;e=document.createElement("option");e.innerText=f.label;e.value=f.label;b.ta.appendChild(e)}}else void 0!==b.ta&&(b.Nd.innerText=pd,b.ea.value="",b.le.removeChild(b.ta),b.ta=void 0);b.element.style.display="block";b.Vg();b.G();b.Ji();void 0!==c&&document.body.removeChild(c);b.isVisible=!0}).catch(function(d){u("Error getting token balance. status: "+d);b.Mc.innerText=Qf})}};k.D=function(){this.element.style.display="none";this.da.blur();this.mb();this.isVisible=!1;this.closed.h(void 0)};k.Ji=function(){document.activeElement!==this.da&&(this.da.focus(),this.da.setSelectionRange(0,9999))};k.uu=function(a){this.ob=a;this.Mc.innerText=a+" "+Hc(a)};var IF=new D("dossier");function JF(){F.call(this);this.Xz=new AF;this.Go=0;this.J=new Yb;this.Es={B:"",Zb:""}}r(JF,F);k=JF.prototype;k.Lr=function(){};k.Kr=function(){};k.kf=function(){(new Sb("AutoLgnPopUpDly")).active&&window.setTimeout(function(){Vm()},3E3)};k.jf=function(){};function KF(a){zq.j(function(b){a.Me=b.Me;a.ka.N instanceof xs&&LF(a)})}function MF(a,b,c){a.jb=a.H(new FF("embed",b,c));xq.j(function(d){a.jb.isVisible?a.jb.D():a.jb.show(d)});a.jb.ai.j(function(){a.jb.D()})}
k.Tt=function(){var a;Gt.j(function(b){void 0===a&&(a=new Ht);a.nf(b)});yq.j(function(b){Wm(b)});il=function(){yq.h(!0)}};function NF(a){yk.j(function(){a.Y();a.jf()});window.onorientationchange=function(){nc();a.Y()}}function OF(a,b){PF(a,b);tj.j(function(c){PF(a,c)});K.j(function(c){a.kf(c)})}function QF(a,b){document.title=a+" at Chaturbate: "+b}function LF(a){function b(){void 0===window.xmovie.SetTipVol?window.setTimeout(function(){b()},100):window.xmovie.SetTipVol(a.Me)}b()}
function PF(a,b){Mb=b;if(b!==a.Es.B){a.Es={B:b,Zb:""};a.Go+=1;var c=a.Go;a.uw(b).then(function(d){c===a.Go&&a.Zs(d,!0)}).catch(function(d){if(d instanceof Eb&&""!==d.ud.responseText)if("application/json"!==d.ud.getResponseHeader("Content-Type"))u("Error reading room dossier error",{room:b,error:d.ud.responseText});else{var e=new Q(d.ud.responseText);switch(S(e,"code",!1)){case "access-denied":J("Access Denied for room: "+b+"\n\n"+T(e,"detail"));break;case "unauthorized":window.top.location.href="/auth/login/?next="+
window.location.pathname+window.location.search;break;case "password-required":break;default:u("Error parsing room dossier error",{room:b,error:d.ud.responseText})}}else u("Error occurred while processing room dossier: "+d,{room:b})})}}k.uw=function(a){return Up(a)};k.Zs=function(a){var b=this;void 0!==this.jv&&this.jv();void 0!==this.Pz&&this.Pz();QF(a.B,a.Zb);this.Es.Zb=a.Zb;IF.h(a);this.A=new GB(a);this.A.event.hu.j(function(f){QF(a.B,f)});this.Me=a.oa.Me;CF(this.Xz);this.A.event.hp.j(function(){});this.Lr(a.Hg);var c={C:a,A:this.A};this.ka.N.kf(c);var d,e;this.jv=function(){clearInterval(d);window.clearTimeout(e);b.A.disconnect();b.ka.N.stop();Zb(b.J);vc.h(void 0)};EB()||"offline"===c.C.ib&&this.Kr();K.h(c);this.J.add(this.A.event.ac.j(function(f){"notconnected"===f.rd&&(d=window.setInterval(function(){MB(b.A)},3E4));var g="privatewatching"===f.rd||"privatewatching"===f.La;if("notconnected"===f.rd||g)e=window.setTimeout(function(){MB(b.A)},2E3);switch(f.La){case "passwordprotected":b.ka.N.stop()}}));this.J.add(zq.j(function(f){var g=b.A,h=f.lj;g.jj=f.jj;g.lj=h}));this.Y()};K.j(function(){});K.j(function(){});function RF(a){switch(a){case "male":return"m";case "female":return"f";case "trans":return"t";case "couple":return"c";case "followed":return"o";default:return u("Cannot convert category "+a),""}};function SF(a){var b=[],c=!1;return function(){return new Promise(function(d,e){if(c)d(b);else return c=!0,a().finally(function(){c=!1}).then(function(f){d(f)}).catch(function(f){e(f)})})}};function TF(){var a=this;this.EB=10;this.Ap=new Set;this.offset=0;this.next=SF(function(){return Or(a,function c(){var d=this,e,f,g,h,m;return Aa(c,function(n){if(1==n.ma)return e=d,f={genders:(0<d.pw.length?d.pw:void 0===d.zv?window.default_gender.split(""):[d.zv]).join(","),room:d.Av,limit:d.EB,offset:d.offset},sa(n,Gb("api/ts/roomlist/more-rooms/?"+vb(f)),2);g=n.se;h=new Q(g.responseText);m=JSON.parse(km(h,"rooms"));d.offset+=m.length;return n.return(m.filter(function(p){return!e.Ap.has(p.username)}).filter(function(p){e.Ap.add(p);return!0}))})})});this.offset=0;this.listener=K.j(function(b){a.zv=RF(b.C.Ft);a.Av=b.A.B();a.Ap.add(a.Av)},!1,!0)}function UF(a,b){b=void 0===b?[]:b;a.pw=b;a.offset=0;a.Ap=new Set}TF.prototype.Lb=function(){this.listener.removeListener()};function VF(a,b){a=new Q(a);b={gk:{username:b,dF:W(a,"fan_club_cost",!1),BB:V(a,"fan_club_is_member"),kB:V(a,"performer_has_fanclub"),eF:T(a,"fan_club_join_url"),location:T(a,"location"),Ww:km(a,"interested_in"),ny:T(a,"real_name"),Ik:Ec(T(a,"sex")),iw:W(a,"follower_count"),Rj:W(a,"display_age",!1),Pu:T(a,"body_decorations"),Mv:T(a,"display_birthday",!1),nx:S(a,"time_since_last_broadcast"),Yy:T(a,"smoke_drink"),Qu:T(a,"body_type"),languages:T(a,"languages"),ib:T(a,"room_status"),To:V(a,"needs_supporter_to_pm")},Du:T(a,"about_me"),Gz:T(a,"wish_list"),cy:function(c){var d=[];c=q(JSON.parse(c));for(var e=c.next();!e.done;e=c.next())e=new Q(JSON.stringify(e.value)),d.push({id:W(e,"id"),name:T(e,"name"),zA:T(e,"cover_url"),gd:W(e,"tokens"),ix:V(e,"is_video"),ZH:V(e,"video_has_sound"),AD:V(e,"user_can_access"),fF:V(e,"fan_club_only"),Fo:T(e,"label_text"),xs:T(e,"label_color"),UG:V(e,"pending_approval",!1,!1),VH:V(e,"user_has_purchased")}),mm(e);return d}(km(a,"photo_sets")),Zy:function(c){var d=[];c=q(JSON.parse(c));for(var e=c.next();!e.done;e=c.next())e=new Q(JSON.stringify(e.value)),d.push({id:W(e,"id"),rz:T(e,"title_name"),Ll:T(e,"image_url"),gd:W(e,"tokens"),cH:V(e,"purchased"),Fo:T(e,"label_text"),xs:T(e,"label_color")}),mm(e);return d}(km(a,"social_medias")),oF:function(c){if(void 0!==c)return{description:c.description,eB:c.game_url,image:c.image_64x64,name:c.name,uid:c.uid,MD:c.viewers}}(im(a,"game_selection"))};mm(a);a=gm(a,"split_test_state_bio_rm_links");A("BioLoaded",{eligible:a.eligible,active:a.active});return b}function WF(a){return new Promise(function(b,c){Gb("api/biocontext/"+a+"/").then(function(d){b(VF(d.responseText,a))}).catch(function(d){c(d)})})};function XF(){var a=this;this.op=new Map;this.Gu=function(b){a.op.set(b,(new Date).getTime())};this.uy=function(b){a.op.delete(b)};window.setInterval(function(){for(var b=(new Date).getTime(),c=q(a.op),d=c.next();!d.done;d=c.next())d=d.value,5E3<b-d[1]&&a.uy(d[0])},5E3);wc.j(function(b){a.uy(b)})}function YF(a,b){var c=a.op.get(b);if(void 0!==c&&5E3>(new Date).getTime()-c)return a.Gu(b),!1;a.Gu(b);return!0};function ZF(){this.Se=[]}ZF.prototype.kd=function(a){this.remove(a);this.Se.unshift(a)};function $F(a,b){a.remove(b);a.Se.push(b)}ZF.prototype.remove=function(a){a=this.Se.indexOf(a);-1!==a&&this.Se.splice(a,1)};function aG(){this.Bi=new ZF;this.zi=new ZF}aG.prototype.kd=function(a){this.zi.remove(a);this.Bi.kd(a)};function bG(a){var b=a.Bi.Se.shift();void 0!==a.Xa&&a.zi.kd(a.Xa);return a.Xa=b}function cG(a){var b=a.zi.Se.shift();void 0!==a.Xa&&a.Bi.kd(a.Xa);return a.Xa=b}function dG(a){for(;;){var b=a.Bi.Se.pop();if(void 0===b)break;$F(a.zi,b)}void 0!==a.Xa&&($F(a.zi,a.Xa),a.Xa=void 0)}aG.prototype.remove=function(a){this.zi.remove(a);this.Bi.remove(a);this.Xa===a&&(this.Xa=void 0)};function eG(a,b){a.kd(b);bG(a)};function fG(a){if(void 0===a)return gG();a={name:T(a,"name",!1),uD:T(a,"template",!1),dw:U(a,"row1_label",!1),Jy:U(a,"row2_label",!1),lz:U(a,"row3_label",!1),ew:U(a,"row1_value",!1),Ky:U(a,"row2_value",!1),mz:U(a,"row3_value",!1)};return gG(a)}
function gG(a){var b=document.createElement("tr"),c=document.createElement("tr"),d=document.createElement("tr");if(void 0!==a){var e=a.uD,f=[],g=[];if(""!==a.dw){var h=document.createElement("th");h.style.padding="2px";h.innerText=a.dw;f.push(h);b.appendChild(h);h=document.createElement("td");h.innerText=a.ew;b.appendChild(h);g.push(h);h.style.width="50%";h.style.paddingLeft="10px"}else h=document.createElement("td"),h.innerText=a.ew,h.colSpan=2,g.push(h),b.appendChild(h),h.style.textAlign="center";""!==a.Jy?(h=document.createElement("th"),h.style.padding="2px",h.style.fontWeight="bold",h.innerText=a.Jy,f.push(h),c.appendChild(h),h=document.createElement("td"),h.innerText=a.Ky,g.push(h),c.appendChild(h),h.style.width="50%",h.style.paddingLeft="10px"):(h=document.createElement("td"),h.innerText=a.Ky,h.colSpan=2,g.push(h),c.appendChild(h),h.style.textAlign="center");""!==a.lz?(h=document.createElement("th"),h.style.padding="2px",h.innerText=a.lz,f.push(h),d.appendChild(h),h=document.createElement("td"),h.innerText=a.mz,g.push(h),d.appendChild(h),h.style.width="50%",h.style.paddingLeft="10px"):(h=document.createElement("td"),h.innerText=a.mz,h.colSpan=2,g.push(h),d.appendChild(h),h.style.textAlign="center");a=q(f);for(h=a.next();!h.done;h=a.next())h=h.value,h.style.overflow="hidden",h.style.display="block",h.style.cssFloat="right";if("3_rows_of_labels"===e)G(f[0],"threeRowsOfLabels"),f[0].style.display="block",f[0].style.margin="0px auto",f[0].style.height="16px",f[0].style.fontWeight="bold";else if("3_rows_11_21_31"===e||"3_rows_11_22_32"===e)G(g[0],"threeRows-11-21-31"),g[0].style.fontWeight="bold"}else e=document.createElement("td"),b.appendChild(e.cloneNode()),c.appendChild(e.cloneNode()),d.appendChild(e.cloneNode());G(b,"rowOne");b.style.height="33.3333%";G(c,"rowTwo");c.style.height="33.3333%";G(d,"rowThree");d.style.height="33.3333%";e=document.createElement("table");e.id="AppPanelTable";e.style.fontSize="11px";e.style.lineHeight="1.7em";e.style.width="100%";e.style.height="100%";e.style.borderCollapse="collapse";e.style.margin="0 auto";e.appendChild(b);e.appendChild(c);e.appendChild(d);return e};function hG(a){var b=new Q(a);a={backgroundColor:U(b,"background-color",!1),color:U(b,"color",!1),textAlign:U(b,"text-align",!1),fontStyle:U(b,"font-style",!1),fontWeight:U(b,"font-weight",!1)};var c=km(b,"col_1",!1);""!==c&&(a.xa=iG(c));b=km(b,"col_2",!1);""!==b&&(a.data=iG(b));return a}
function iG(a){a=new Q(a);return{backgroundColor:U(a,"background-color",!1),color:U(a,"color",!1),left:U(a,"left",!1),textAlign:U(a,"text-align",!1),fontStyle:U(a,"font-style",!1),fontWeight:U(a,"font-weight",!1),value:U(a,"value",!1),width:U(a,"width",!1)}}
function jG(a){var b=document.createElement("div");b.style.height="23px";b.style.lineHeight="23px";b.style.width="270px";if(void 0!==a){b.style.backgroundColor=a.backgroundColor;b.style.color=a.color;b.style.fontStyle=a.fontStyle;b.style.fontWeight=a.fontWeight;b.style.textAlign=a.textAlign;if(void 0!==a.xa){var c=kG(a.xa);b.appendChild(c)}void 0!==a.data&&(a=kG(a.data),b.appendChild(a))}return b}
function kG(a){var b=document.createElement("div");b.style.position="absolute";b.style.whiteSpace="nowrap";b.style.overflow="hidden";b.style.textOverflow="ellipsis";b.style.position="absolute";b.style.backgroundColor=a.backgroundColor;b.style.color=a.color;b.style.fontStyle=a.fontStyle;b.style.fontWeight=a.fontWeight;b.style.textAlign=a.textAlign;b.innerText=a.value;b.style.width=a.width;b.style.left=a.left;return b};function lG(){F.call(this);var a=this;this.gp=new D("panelUpdated");this.vh=!1;this.element.style.display="inline-block";this.element.style.paddingLeft="5px";this.element.style.paddingTop="3px";this.element.style.paddingRight="5px";this.element.style.paddingBottom="3px";this.element.style.position="";this.element.style.width="270px";this.element.style.height="69px";this.element.style.textShadow="none";this.element.style.fontSize="11px";this.element.style.lineHeight="1.7em";K.j(function(b){a.Aj(b.A.B());b.A.event.ut.j(function(){a.Aj(b.A.B())});b.A.event.pA.j(function(){a.Aj(b.A.B())})});this.ni=fG();this.element.appendChild(this.ni)}r(lG,F);lG.prototype.Aj=function(a){var b=this;Gb("api/panel_context/"+a+"/").then(function(c){0<b.element.children.length&&b.element.removeChild(b.ni);c=new Q(c.responseText);if("no-content"===T(c,"code",!1))b.vh=!1,b.ni=fG();else{b.vh=!0;var d=T(c,"template",!1);switch(d){case "image_template":T(c,"name",!1);T(c,"template",!1);var e=R(c,"layers");if(void 0!==e&&e instanceof Array&&0!==e.length){d=[];var f=q(e);for(var g=f.next();!g.done;g=f.next()){e=d;var h=e.push;g=JSON.stringify(g.value);g=new Q(g);g={color:U(g,"color",!1),filename:U(g,"filename",!1),fontFamily:U(g,"font-family",!1),fontSize:U(g,"font-size",!1),fontStyle:U(g,"font-style",!1),fontWeight:U(g,"font-weight",!1),height:U(g,"height",!1),Ll:U(g,"image_url",!1),rx:U(g,"type",!1),left:U(g,"left",!1),maxWidth:U(g,"max-width",!1),opacity:U(g,"opacity",!1),text:U(g,"text",!1),textAlign:U(g,"text-align",!1),top:U(g,"top",!1),width:U(g,"width",!1)};h.call(e,g)}f=d}d=km(c,"table",!1);if(0!==d.length){d=new Q(d);var m={backgroundColor:U(d,"background-color",!1),color:U(d,"color",!1),textAlign:U(d,"text-align",!1),fontStyle:U(d,"font-style",!1),fontWeight:U(d,"font-weight",!1)};e=km(d,"row_1",!1);""!==e&&(m.CC=hG(e));e=km(d,"row_2",!1);""!==e&&(m.EC=hG(e));d=km(d,"row_3",!1);""!==d&&(m.DC=hG(d))}d=document.createElement("div");d.style.position="absolute";d.style.height="69px";d.style.width="270px";d.style.backgroundColor="white";d.style.overflow="hidden";d.style.font="1em 'UbuntuRegular', Arial, Helvetica, sans-serif";if(void 0!==f)for(f=q(f),e=f.next();!e.done;e=f.next())if(e=e.value,"text"===e.rx){h=d;g=h.appendChild;var n=document.createElement("span");n.style.position="absolute";n.style.whiteSpace="nowrap";n.style.overflow="hidden";n.style.textOverflow="ellipsis";n.style.lineHeight="normal";n.style.color=e.color;n.style.fontFamily=e.fontFamily;n.style.fontSize=e.fontSize;n.style.fontStyle=e.fontStyle;n.style.fontWeight=e.fontWeight;n.style.left=e.left;n.style.maxWidth=e.maxWidth;n.innerText=e.text;n.style.textAlign=e.textAlign;n.style.top=e.top;n.style.width=e.width;g.call(h,n)}else"image"===e.rx&&(h=d,g=h.appendChild,n=document.createElement("img"),n.style.position="absolute",n.alt=e.filename,n.style.height=e.height,n.src=e.Ll,n.style.left=e.left,n.style.top=e.top,n.style.width=e.width,g.call(h,n));if(void 0!==m){f=m;m=document.createElement("div");m.style.height="69px";m.style.width="270px";m.style.backgroundColor=f.backgroundColor;m.style.color=f.color;m.style.fontStyle=f.fontStyle;m.style.fontWeight=f.fontWeight;m.style.textAlign=f.textAlign;f=q([f.CC,f.EC,f.DC]);for(e=f.next();!e.done;e=f.next())e=e.value,e=void 0!==e?jG(e):jG(),m.appendChild(e);d.appendChild(m)}b.ni=d;break;case "3_rows_11_21_31":case "3_rows_11_22_32":case "3_rows_12_21_31":case "3_rows_12_22_31":case "3_rows_of_labels":b.ni=fG(c);break;default:b.vh=!1,b.ni=fG(),w("template of type ("+d+"): is not supported")}mm(c)}b.element.appendChild(b.ni);b.gp.h(void 0)}).catch(function(c){u("Error fetching app panel ("+c+")")})};function mG(a){var b=this;this.config=a;this.oc=new lG;this.oc.element.style.width="270px";this.oc.element.style.position="relative";this.Gq=this.vh=!1;K.j(function(){b.vh=!1;b.Gq=!1;b.wn=void 0;b.Be=void 0;window.setTimeout(function(){b.Gq=!0;b.vh&&nG(b)},2E3)});this.oc.gp.j(function(){b.vh=!0;b.Gq&&nG(b)})}
function nG(a){if(a.oc.vh){if(void 0!==a.Be){for(var b=0;b<a.Be.children.length;b+=1)a.Be.removeChild(a.Be.children.item(b));a.Be.appendChild(oG(a))}void 0===a.wn?(a.config.ba(a.oc.element,function(){return pG(a)}),a.wn=a.config.Dl()):(b=a.oc.element.offsetTop-a.config.hB(),(0>b||b>a.config.gB()-30)&&20<a.config.Qo(a.wn)&&(a.config.rp(a.oc.element),a.config.ba(a.oc.element,function(){return pG(a)}),a.wn=a.config.Dl()))}}function oG(a){a=a.oc.element.cloneNode(!0);a.style.width="270px";return a}
function pG(a){void 0!==a.Be&&null!==a.Be.parentNode&&a.Be.parentNode.removeChild(a.Be);a.Be=document.createElement("div");a.Be.appendChild(oG(a));return a.Be};function qG(a){return Or(this,function c(){var d;return Aa(c,function(e){d={room_user:a.Ey,created_by:a.wv,banned_user:a.Lu,is_silence:a.hx.toString()};return e.return(z("api/ts/chat/ban-id/",d).then(function(f){return JSON.parse(f.responseText).banid}))})})}function rG(a,b,c,d,e){z("edit_room_ban/",{banid:String(a),action:b,room_username:c}).then(function(f){f=f.responseText;if(null===f)e();else{try{var g=JSON.parse(f)}catch(h){e();return}void 0!==g.error?e():d()}}).catch(function(){e()})};function sG(a,b,c,d,e){function f(n){var p;null===n||void 0===n?void 0:n.preventDefault();null===(p=g.parentElement)||void 0===p?void 0:p.removeChild(g);Array.from(document.getElementsByClassName("undo-ban-options-"+a.Xg)).forEach(function(y){var C;null===(C=y.parentElement)||void 0===C?void 0:C.removeChild(y)})}var g=N("div",{className:"undo-ban-options-"+a.Xg,style:{boxSizing:"border-box",padding:"2px 5px 3px 25px",fontWeight:"bold"}}),h=N("a",{href:"#",className:"msg-link",onClick:function(n){null===n||void 0===n?void 0:n.preventDefault();f();rG(b,a.Ah?"remove_ban":"remove_silence",c.C.B,function(){d(a.Ah?$i:aj)},function(){d(a.Ah?bj:dj)})}},ej),m=N("a",{href:"#",style:{color:"inherit"},onClick:f},"(",rf,")");g.appendChild(h);a.Ah||c.C.userName!==c.C.B||(h=N("a",{href:"#",style:{color:"red"},onClick:function(n){null===n||void 0===n?void 0:n.preventDefault();uc(Wc(a.Xg),function(){f();rG(b,"convert_to_ban",c.C.B,function(){PB(c.A,a.Xg);e({Xg:a.Xg,Kk:c.C.B,Ah:!0},c)},function(){d(cj)})})}},fj),g.appendChild(document.createTextNode("\u00a0".repeat(5))),g.appendChild(h));g.appendChild(document.createTextNode("\u00a0".repeat(5)));g.appendChild(m);return g};K.j(function(){});function tG(){var a=this;this.Qp=this.Pp=this.Sp=this.Rp=this.qk=this.Xl=0;this.jb=this.A=void 0;this.Mz="SessionMetrics";this.Nt=function(){uG(a)&&(A(a.Mz,{messageSuccessCount:a.qk,messageFailCount:a.Xl-a.qk,tipSuccessCount:a.Rp,tipSuccessTotal:a.Sp,tipFailCount:a.Pp,tipFailTotal:a.Qp,refreshCount:void 0===a.ct?void 0:Number(a.ct),modeChange:!!a.Rs,newMode:a.Rs,currentMode:a.nh}),vG(a))};this.$B=function(){uG(a)&&vk(a.MB)};this.Vx=function(b){void 0!==b.amount&&(!0===b.success?(a.Rp+=1,a.Sp+=b.amount):(a.Pp+=1,0<b.amount&&(a.Qp+=b.amount)))};this.Nx=function(){a.Xl+=1};this.bp=function(b){void 0!==a.A&&b.O.username===a.A.username()&&a.qk<a.Xl&&(a.qk+=1)};this.FC=function(){void 0!==window.sessionStorage&&uG(a)&&window.sessionStorage.setItem("refreshMeta",JSON.stringify({href:window.location.href,unloadTimestamp:(new Date).getTime()}))};vG(this);this.GB=(new Date).getTime();this.ct=wG(this);this.nh=ak();this.MB=new uk(function(){var b=O();a.nh!==b&&(a.Rs=b,a.Nt(),a.nh=b)},{xc:100,md:1});K.once(function(){Yj.Td.j(a.$B)});vc.j(this.Nt);v("beforeunload",window,this.Nt);v("beforeunload",window,this.FC)}function xG(a,b){b!==a.jb&&(void 0!==a.jb&&a.jb.ai.removeListener(a.Vx),a.jb=b,a.jb.ai.j(a.Vx,!1))}function uG(a){return void 0!==a.A&&!a.A.Qe}function vG(a){a.Xl=0;a.qk=0;a.Rp=0;a.Sp=0;a.Pp=0;a.Qp=0;a.Rs=void 0;a.ct=!1}
function yG(){if(void 0!==window.performance){var a=[];void 0!==window.performance.getEntriesByType&&(a=window.performance.getEntriesByType("navigation"));if(0<a.length)switch(a[0].type){case "navigate":return 0;case "reload":return 1;case "back_forward":return 2;case "prerender":return 3;default:return 255}else return window.performance.navigation.type}}
function wG(a){var b,c=yG();if(1===c)return!0;if(0===c||void 0===c){c=null===(b=window.sessionStorage)||void 0===b?void 0:b.getItem("refreshMeta");if(null===c||void 0===c)return;b=JSON.parse(c);return b.href===window.location.href&&b.unloadTimestamp>a.GB-1E4}return!1};var zG=new Set;function AG(a){zG.forEach(function(b){a!==b.Z&&b.Lb()})}IF.j(function(a){AG(a.B)});function BG(a,b){var c;null===(c=a.nj)||void 0===c?void 0:c.Lb();if(c="AnonymousUser"!==b.userName&&0<b.ev.trim().length){c=b.kl;var d=b.B;c===d?c=!0:(c="rules_accepted_"+c+"_"+d,c=t()?"true"===localStorage.getItem(c):"true"===xb(c));c=!c}if(c)return a=new CG({yo:a.ia,va:a.va,Z:b.B,userName:b.kl,text:b.ev.trim(),vb:a,Kb:b.oa}),a.element.style.zIndex="2",a}
function CG(a,b){b=void 0===b?!1:b;var c;F.call(this);var d=this;this.Ez=new D("visibilityChanged",{dd:!1});this.Vy=function(){d.show()};this.Lo=!1;this.J=new Yb;this.isVisible=!1;this.av=function(e){"Tab"===e.key&&(document.activeElement===d.rn?d.kv.focus():d.rn.focus(),e.stopPropagation(),e.preventDefault())};zG.add(this);this.element.style.position="absolute";this.element.style.textAlign="center";this.element.style.height="auto";b?(this.element.style.width="70%",this.element.style.left="15%"):(this.element.style.width="95%",this.element.style.left="2.5%");this.element.style.bottom="10px";this.element.style.borderWidth="1px";this.element.style.borderStyle="solid";this.element.style.borderRadius="4px";this.element.style.margin="0 auto";this.element.style.padding="10px";this.element.style.boxSizing="border-box";this.element.style.maxHeight="95%";this.element.style.fontFamily="Tahoma, Arial, Helvetica, sans-serif";G(this.element,"rulesModal");this.yo=a.yo;this.sl=a.va;this.Z=a.Z;this.vb=null!==(c=a.vb)&&void 0!==c?c:void 0;this.userName=a.userName;this.cn(a.Kb);B(zq.j(function(e){d.cn(e)}),this.J);this.$d(a.text);this.Lo||(v("focus",this.sl.element,this.Vy),this.Lo=!0);DG(this)}r(CG,F);k=CG.prototype;k.cn=function(a){this.element.style.fontFamily=a.fontFamily;this.element.style.fontSize=a.fontSize};k.$d=function(a){this.element.style.display="none";var b=document.createElement("div");b.style.fontWeight="bold";b.style.textAlign="left";b.style.paddingBottom="5px";b.style.whiteSpace="nowrap";b.style.textOverflow="ellipsis";b.style.overflow="hidden";b.innerText=""+this.Z[0].toUpperCase()+this.Z.substring(1)+"'s Rules:";this.element.appendChild(b);this.Vm=EG(this,a);a=document.createElement("div");G(a,"scrollIndicator");a.style.height="50px";a.style.position="absolute";a.style.bottom="0";a.style.fontWeight="bold";a.style.textAlign="center";a.style.boxSizing="border-box";a.style.width="calc(100% - 20px)";this.Hy=a;a=document.createElement("div");a.style.position="relative";a.appendChild(this.Vm);a.appendChild(this.Hy);this.element.appendChild(a);this.rn=this.Rq();this.kv=this.Kn();this.element.appendChild(this.rn);this.element.appendChild(this.kv);this.G()};function EG(a,b){var c=document.createElement("div");c.style.whiteSpace="pre-line";c.style.textAlign="left";c.style.lineHeight="1.4";c.style.height="auto";c.style.paddingBottom="15px";c.style.boxSizing="border-box";c.style.width="100%";c.style.overflowY="scroll";c.style.$x="break-word";c.style.fI="break-word";c.style.wordWrap="break-word";c.style.cssText+="; -ms-overflow-style: -ms-autohiding-scrollbar";c.style.marginBottom="3px";c.style.paddingRight="15px";c.onscroll=function(){DG(a)};c.appendChild(document.createTextNode(b));Rl(c);return c}function DG(a){a.Hy.style.display=1>=a.Vm.scrollHeight-a.Vm.scrollTop-a.Vm.clientHeight?"none":"block"}k.G=function(){var a=this.vb.element.getBoundingClientRect().height;this.Vm.style.maxHeight="calc("+a+"px - 120px)";DG(this)};k.show=function(a){a=void 0===a?!1:a;this.isVisible||(this.isVisible=!0,this.element.style.display="block",this.sl.disable(),this.yo.style.pointerEvents="none",this.G(),this.rn.focus(),v("keydown",document,this.av,!0),a||this.Ez.h(this.isVisible))};k.D=function(a){a=void 0===a?!1:a;this.isVisible&&(this.isVisible=!1,this.element.style.display="none",this.sl.enable(),this.yo.style.pointerEvents="",this.vb.Y(),x("keydown",document,this.av,!0),a||this.Ez.h(this.isVisible))};k.accept=function(){var a="rules_accepted_"+this.userName+"_"+this.Z;t()?localStorage.setItem(a,"true"):zb(a,"true",1);AG();this.sl.focus()};k.Lb=function(){this.D();this.Lo&&(x("focus",this.sl.element,this.Vy),this.Lo=!1);Zb(this.J);void 0!==this.parent&&(delete this.parent.nj,this.parent.removeChild(this));zG.delete(this)};k.Rq=function(){var a=this,b=document.createElement("button");b.innerText=Xi;b.style.fontFamily="'UbuntuRegular',sans-serif";b.style.display="inline-block";b.style.boxSizing="content-box";b.style.width="calc(100% - 16px)";b.style.padding="8px";b.style.borderRadius="4px";b.style.cursor="pointer";b.style.fontWeight="500";b.style.lineHeight="16px";b.style.whiteSpace="nowrap";b.style.overflow="hidden";b.style.textOverflow="ellipsis";b.style.fontSize="120%";b.style.zIndex="2";v("click",b,function(){a.accept()});G(b,"acceptRulesButton");return b};k.Kn=function(){var a=this,b=document.createElement("button"),c=document.createElement("img");c.src="https://static-assets.highwebmedia.com/tsdefaultassets/close_icon.svg";c.style.backgroundColor="inherit";b.appendChild(c);b.style.boxSizing="border-box";b.style.padding="5px";b.style.position="absolute";b.style.top="2px";b.style.right="2px";b.style.cursor="pointer";v("click",b,function(){a.D()});G(b,"closeRulesButton");return b};function FG(a,b,c){kD.call(this,a,b,c)}r(FG,kD);FG.prototype.pq=function(){var a=this;kD.prototype.pq.call(this);if(this.oh!==this.Ua.username){this.tf.style.display="";this.np=document.createElement("div");this.np.style.borderTop="1px solid #F0F0F0";this.np.style.padding="5px 0";this.jo=document.createElement("div");this.jo.style.padding="9px 10px";this.jo.style.borderTop="1px solid #F0F0F0";this.eg.insertBefore(this.np,this.tf.nextSibling);this.eg.appendChild(this.jo);var b=this.Qf(),c=yD();c.style.paddingLeft="20px";this.tf.appendChild(b);b.appendChild(c);c.innerText=Di;v("click",b,function(){a.mb();jl('You must be logged in to ban a user. Click "OK" to login.')||uc(Wc(a.Ua.username),function(){A("BanUser",{username:a.Ua.username});z("roomban/"+a.Ua.username+"/"+a.Z+"/",{}).then(function(){void 0!==a.Sc?PB(a.Sc,a.Ua.username):u("Chat Connection undefined when trying to ban a user")}).catch(function(m){u(m);J("Error banning user "+a.Ua.username)})})});b=document.createElement("div");c=document.createElement("img");var d=document.createElement("span");c.src="https://static-assets.highwebmedia.com/tsdefaultassets/ico-tip.gif";c.style.width="13px";c.style.height="13px";c.style.padding="2px 4px 0 1px";b.appendChild(c);b.appendChild(d);d.innerText=Xc(this.Ua.username)+":";this.jo.appendChild(b);c=document.createElement("div");d=document.createElement("div");var e=document.createElement("div");c.style.paddingLeft="20px";d.style.paddingLeft="20px";e.style.paddingLeft="20px";var f=document.createElement("span"),g=document.createElement("span"),h=document.createElement("span");c.appendChild(f);d.appendChild(g);e.appendChild(h);f.innerText=Yc(0);g.innerText=Zc(0);h.innerText=$c(0);b.appendChild(c);b.appendChild(d);b.appendChild(e);void 0!==this.Z&&void 0!==this.oh&&z("api/getchatusermenu/",{roomname:this.Z,fromuser:this.oh,touser:this.Ua.username}).then(function(m){a.np.appendChild(GG(a,!!m.getResponseHeader("X-Target_Is_Mod"),a.Ua));f.innerText=Yc(HG(m.getResponseHeader("X-Tipped_Performer_Last_Hour")));g.innerText=Zc(HG(m.getResponseHeader("X-Tipped_Performer_Last_24_Hours")));h.innerText=$c(HG(m.getResponseHeader("X-Tipped_Performer_Last_Two_Weeks")))}).catch(function(m){u(m);J("Error fetching user menu")})}};FG.prototype.mq=function(){kD.prototype.mq.call(this);var a=this.Qf();a.style.display="none";var b=document.createElement("img");b.style.padding="0px 4px 0 0";b.style.verticalAlign="bottom";a.appendChild(b);b=yD();a.appendChild(b);K.once(function(){});this.Ce.prepend(a)};function GG(a,b,c){var d=a.Qf(),e=yD();e.style.paddingLeft="20px";if(b){e.innerText=Ei;var f='You must be logged in to remove a moderator. Click "OK" to login.';var g="removemoderator/"+c.username+"/"+a.Z+"/"}else e.innerText=Fi,f='You must be logged in to promote a user to moderator. Click "OK" to login.',g="addmoderator/"+c.username+"/"+a.Z+"/";var h="Error promoting user "+c.username;v("click",d,function(){a.mb();jl(f)||z(g,{}).then(function(){fq.h({Ob:!b,username:c.username})}).catch(function(m){u(m);J(h)})});d.appendChild(e);return d}function HG(a){if(null===a)return 0;a=Number(a);return 0>a?0:a}FG.prototype.Zu=function(){return!0};function IG(a,b,c,d){AD.call(this,a,void 0===b?!1:b,void 0===c?"":c,void 0===d?!0:d)}r(IG,AD);IG.prototype.vv=function(a,b,c){return new FG(a,b,c)};function JG(a,b){"string"===typeof a&&-1!==a.indexOf(".")&&1===parseFloat(a)&&(a="100%");var c="string"===typeof a&&-1!==a.indexOf("%");a=360===b?a:Math.min(b,Math.max(0,parseFloat(a)));c&&(a=parseInt(String(a*b),10)/100);return 1E-6>Math.abs(a-b)?1:a=360===b?(0>a?a%b+b:a%b)/parseFloat(String(b)):a%b/parseFloat(String(b))}function KG(a){a=parseFloat(a);if(isNaN(a)||0>a||1<a)a=1;return a}function LG(a){return 1>=a?100*Number(a)+"%":a}function MG(a){return 1===a.length?"0"+a:String(a)};function NG(a,b,c){a=JG(a,255);b=JG(b,255);c=JG(c,255);var d=Math.max(a,b,c),e=Math.min(a,b,c),f=0,g=(d+e)/2;if(d===e)f=e=0;else{var h=d-e;e=.5<g?h/(2-d-e):h/(d+e);switch(d){case a:f=(b-c)/h+(b<c?6:0);break;case b:f=(c-a)/h+2;break;case c:f=(a-b)/h+4}f/=6}return{hf:f,Jc:e,qb:g}}function OG(a,b,c){0>c&&(c+=1);1<c&&--c;return c<1/6?a+6*(b-a)*c:.5>c?b:c<2/3?a+(b-a)*(2/3-c)*6:a}
function PG(a,b,c,d){a=[MG(Math.round(a).toString(16)),MG(Math.round(b).toString(16)),MG(Math.round(c).toString(16))];return d&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}
function QG(a,b,c,d,e){a=[MG(Math.round(a).toString(16)),MG(Math.round(b).toString(16)),MG(Math.round(c).toString(16)),MG(Math.round(255*parseFloat(d)).toString(16))];return e&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")};var RG={XD:"#f0f8ff",ZD:"#faebd7",$D:"#00ffff",aE:"#7fffd4",cE:"#f0ffff",dE:"#f5f5dc",gE:"#ffe4c4",aA:"#000000",hE:"#ffebcd",blue:"#0000ff",iE:"#8a2be2",lE:"#a52a2a",mE:"#deb887",nE:"#5f9ea0",pE:"#7fff00",rE:"#d2691e",uE:"#ff7f50",vE:"#6495ed",wE:"#fff8dc",xE:"#dc143c",zE:"#00ffff",AE:"#00008b",BE:"#008b8b",CE:"#b8860b",DE:"#a9a9a9",EE:"#006400",FE:"#a9a9a9",GE:"#bdb76b",HE:"#8b008b",IE:"#556b2f",JE:"#ff8c00",KE:"#9932cc",LE:"#8b0000",ME:"#e9967a",NE:"#8fbc8f",OE:"#483d8b",PE:"#2f4f4f",QE:"#2f4f4f",RE:"#00ced1",SE:"#9400d3",UE:"#ff1493",VE:"#00bfff",XE:"#696969",YE:"#696969",aF:"#1e90ff",gF:"#b22222",hF:"#fffaf0",jF:"#228b22",mF:"#ff00ff",nF:"#dcdcdc",pF:"#f8f8ff",rF:"#daa520",qF:"#ffd700",vF:"#808080",green:"#008000",wF:"#adff2f",xF:"#808080",BF:"#f0fff0",CF:"#ff69b4",FF:"#cd5c5c",GF:"#4b0082",IF:"#fffff0",JF:"#f0e68c",NF:"#fff0f5",MF:"#e6e6fa",OF:"#7cfc00",RF:"#fffacd",SF:"#add8e6",TF:"#f08080",UF:"#e0ffff",VF:"#fafad2",WF:"#d3d3d3",XF:"#90ee90",YF:"#d3d3d3",ZF:"#ffb6c1",$F:"#ffa07a",aG:"#20b2aa",bG:"#87cefa",cG:"#778899",dG:"#778899",eG:"#b0c4de",fG:"#ffffe0",gG:"#00ff00",hG:"#32cd32",iG:"#faf0e6",jG:"#ff00ff",kG:"#800000",mG:"#66cdaa",nG:"#0000cd",oG:"#ba55d3",pG:"#9370db",qG:"#3cb371",rG:"#7b68ee",sG:"#00fa9a",tG:"#48d1cc",uG:"#c71585",wG:"#191970",xG:"#f5fffa",yG:"#ffe4e1",zG:"#ffe4b5",BG:"#ffdead",CG:"#000080",GG:"#fdf5e6",HG:"#808000",IG:"#6b8e23",wk:"#ffa500",KG:"#ff4500",LG:"#da70d6",NG:"#eee8aa",OG:"#98fb98",PG:"#afeeee",QG:"#db7093",SG:"#ffefd5",TG:"#ffdab9",WG:"#cd853f",YG:"#ffc0cb",ZG:"#dda0dd",$G:"#b0e0e6",dH:"#800080",eH:"#663399",red:"#ff0000",hH:"#bc8f8f",iH:"#4169e1",kH:"#8b4513",lH:"#fa8072",mH:"#f4a460",oH:"#2e8b57",pH:"#fff5ee",sH:"#a0522d",vH:"#c0c0c0",xH:"#87ceeb",yH:"#6a5acd",zH:"#708090",AH:"#708090",BH:"#fffafa",DH:"#00ff7f",GH:"#4682b4",tan:"#d2b48c",KH:"#008080",NH:"#d8bfd8",QH:"#ff6347",SH:"#40e0d0",bI:"#ee82ee",cI:"#f5deb3",PD:"#ffffff",dI:"#f5f5f5",gI:"#ffff00",hI:"#9acd32"};function SG(a){var b,c=0,d=0,e=0,f=1,g=!1,h=!1;"string"===typeof a&&(a=TG(a));if("object"===typeof a){if(UG(a.r)&&UG(a.Ca)&&UG(a.b))c=255*JG(a.r,255),d=255*JG(a.Ca,255),e=255*JG(a.b,255),g=!0,h="%"===String(a.r).substr(-1)?"prgb":"rgb";else if(isNaN(Number(a.y))||isNaN(Number(a.by))||isNaN(Number(a.gy)))if(UG(a.hf)&&UG(a.Jc)&&UG(a.Tk)){d=LG(a.Jc);e=LG(a.Tk);g=a.hf;g=6*JG(g,360);c=JG(d,100);e=JG(e,100);d=Math.floor(g);var m=g-d;g=e*(1-c);h=e*(1-m*c);m=e*(1-(1-m)*c);var n=d%6;c=255*[e,h,g,g,m,e][n];d=255*[m,e,e,h,g,g][n];e=255*[g,g,m,e,e,h][n];g=!0;h="hsv"}else UG(a.hf)&&UG(a.Jc)&&UG(a.qb)?(d=LG(a.Jc),e=LG(a.qb),c=a.hf,c=JG(c,360),d=JG(d,100),e=JG(e,100),0===d?g=d=e:(g=.5>e?e*(1+d):e+d-e*d,h=2*e-g,e=OG(h,g,c+1/3),d=OG(h,g,c),g=OG(h,g,c-1/3)),c=255*e,d*=255,e=255*g,g=!0,h="hsl"):isNaN(Number(a.qb))||isNaN(Number(a.a))||isNaN(Number(a.b))||(e=(a.qb+16)/116,g=a.a/500+e,h=e-a.b/200,g=.95047*(.008856<g*g*g?g*g*g:(g-16/116)/7.787),e=.008856<e*e*e?e*e*e:(e-16/116)/7.787,h=1.08883*(.008856<h*h*h?h*h*h:(h-16/116)/7.787),c=3.2406*g+-1.5372*e+-.4986*h,d=-.9689*g+1.8758*e+.0415*h,e=.0557*g+-.204*e+1.057*h,c=.0031308<c?1.055*Math.pow(c,1/2.4)-.055:12.92*c,d=.0031308<d?1.055*Math.pow(d,1/2.4)-.055:12.92*d,e=.0031308<e?1.055*Math.pow(e,1/2.4)-.055:12.92*e,c=255*Math.max(0,Math.min(1,c)),d=255*Math.max(0,Math.min(1,d)),e=255*Math.max(0,Math.min(1,e)),g=!0,h="lab");else e=a.y,g=a.by,d=a.gy,c=Math.round(e+1.402*d),d=Math.round(e-.344*g-.714*d),e=Math.round(e+1.772*g),g=!0,h="ypbpr";Object.prototype.hasOwnProperty.call(a,"a")&&(f=a.a)}f=KG(f);return{ok:g,format:null!==(b=a.format)&&void 0!==b?b:h,r:Math.min(255,Math.max(c,0)),Ca:Math.min(255,Math.max(d,0)),b:Math.min(255,Math.max(e,0)),a:f}}
var VG=/(?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?)/,WG=/rgb[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,XG=/rgba[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,YG=/hsl[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,ZG=/hsla[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,$G=/hsv[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,aH=/hsva[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,bH=/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,cH=/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,dH=/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,eH=/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/;function TG(a){a=a.trim().toLowerCase();if(0===a.length)return!1;var b=!1;if(RG[a])a=RG[a],b=!0;else if("transparent"===a)return{r:0,Ca:0,b:0,a:0,format:"name"};var c=WG.exec(a);if(null!==c)return{r:c[1],Ca:c[2],b:c[3]};c=XG.exec(a);if(null!==c)return{r:c[1],Ca:c[2],b:c[3],a:c[4]};c=YG.exec(a);if(null!==c)return{hf:c[1],Jc:c[2],qb:c[3]};c=ZG.exec(a);if(null!==c)return{hf:c[1],Jc:c[2],qb:c[3],a:c[4]};c=$G.exec(a);if(null!==c)return{hf:c[1],Jc:c[2],Tk:c[3]};c=aH.exec(a);if(null!==c)return{hf:c[1],Jc:c[2],Tk:c[3],a:c[4]};c=eH.exec(a);if(null!==c)return{r:parseInt(c[1],16),Ca:parseInt(c[2],16),b:parseInt(c[3],16),a:parseInt(c[4],16)/255,format:b?"name":"hex8"};c=cH.exec(a);if(null!==c)return{r:parseInt(c[1],16),Ca:parseInt(c[2],16),b:parseInt(c[3],16),format:b?"name":"hex"};c=dH.exec(a);if(null!==c)return{r:parseInt(c[1]+c[1],16),Ca:parseInt(c[2]+c[2],16),b:parseInt(c[3]+c[3],16),a:parseInt(c[4]+c[4],16)/255,format:b?"name":"hex8"};c=bH.exec(a);return null!==c?{r:parseInt(c[1]+c[1],16),Ca:parseInt(c[2]+
c[2],16),b:parseInt(c[3]+c[3],16),format:b?"name":"hex"}:!1}function UG(a){return!!VG.exec(String(a))};function fH(a,b){var c=this;a=void 0===a?"":a;b=void 0===b?{}:b;var d;this.Vi=function(e){return c.ll.Vi(e)};this.Sn=function(e){return c.ll.Sn(e)};this.jg=function(e){return c.ll.jg(e)};this.Oo=function(e){return c.ll.Oo(e)};if(a instanceof fH)return a.clone();"number"===typeof a&&(a={r:a>>16,Ca:(a&65280)>>8,b:a&255});a=SG(a);this.r=a.r;this.Ca=a.Ca;this.b=a.b;this.a=a.a;this.zm=Math.round(100*this.a)/100;this.format=null!==(d=b.format)&&void 0!==d?d:a.format;1>this.r&&(this.r=Math.round(this.r));1>this.Ca&&(this.Ca=Math.round(this.Ca));1>this.b&&(this.b=Math.round(this.b));this.Ae=a.ok;gH(this);hH(this);iH(this)}function gH(a){a.gq={Vi:function(b){var c=jH(a);c.qb+=b/100;c.qb=Math.min(1,Math.max(0,c.qb));return kH(c)},Sn:function(b){return a.gq.Vi(-b)},jg:function(b){var c=jH(a);c.qb=b;return kH(c)},Oo:function(b){b=kH(b).gq.Jg;var c=jH(a);c.qb=b;return kH(c)},get Jg(){return jH(a).qb}}}
function hH(a){a.fq={Vi:function(b){var c=lH(a);c.qb+=b/100;c.qb=Math.min(1,Math.max(0,c.qb));return kH(c)},Sn:function(b){return a.fq.Vi(-b)},jg:function(b){var c=lH(a);c.qb=b;return kH(c)},Oo:function(b){b=kH(b).fq.Jg;var c=lH(a);c.qb=b;return kH(c)},get Jg(){return lH(a).qb}}}
function iH(a){a.hq={Vi:function(b){var c=mH(a);c.y+=b/100*255;c.y=Math.min(1,Math.max(0,c.y));return kH(c)},Sn:function(b){return a.hq.Vi(-b)},jg:function(b){var c=mH(a);c.y=b;return kH(c)},Oo:function(b){b=kH(b).hq.Jg;var c=mH(a);c.y=b;return kH(c)},get Jg(){return mH(a).y}}}function kH(a){var b=void 0===b?{}:b;return new fH(void 0===a?"":a,b)}function nH(a,b){a.a=KG(b);a.zm=Math.round(100*a.a)/100;return a}
function lH(a){var b=a.r,c=a.Ca,d=a.b;b/=255;c/=255;d/=255;b=.04045<b?Math.pow((b+.055)/1.055,2.4):b/12.92;c=.04045<c?Math.pow((c+.055)/1.055,2.4):c/12.92;d=.04045<d?Math.pow((d+.055)/1.055,2.4):d/12.92;a=(.4124*b+.3576*c+.1805*d)/.95047;var e=.2126*b+.7152*c+.0722*d;b=(.0193*b+.1192*c+.9505*d)/1.08883;a=.008856<a?Math.pow(a,1/3):7.787*a+16/116;e=.008856<e?Math.pow(e,1/3):7.787*e+16/116;b=.008856<b?Math.pow(b,1/3):7.787*b+16/116;return{qb:116*e-16,a:500*(a-e),b:200*(e-b)}}
function jH(a){var b=NG(a.r,a.Ca,a.b);return{hf:360*b.hf,Jc:b.Jc,qb:b.qb,a:a.a}}function oH(a,b){return PG(a.r,a.Ca,a.b,void 0===b?!1:b)}function pH(a){return{r:Math.round(a.r),Ca:Math.round(a.Ca),b:Math.round(a.b),a:a.a}}function mH(a){var b=a.r,c=a.Ca;a=a.b;return{y:.299*b+.587*c+.114*a,by:-.169*b-.331*c+.5*a,gy:.5*b-.419*c-.081*a}}function qH(a){var b=Math.round(a.r),c=Math.round(a.Ca),d=Math.round(a.b);return 1===a.a?"rgb("+b+", "+c+", "+d+")":"rgba("+b+", "+c+", "+d+", "+a.zm+")"}
function rH(a){function b(c){return Math.round(100*JG(c,255))}return 1===a.a?"rgb("+b(a.r)+"%, "+b(a.Ca)+"%, "+b(a.b)+"%)":"rgba("+b(a.r)+"%, "+b(a.Ca)+"%, "+b(a.b)+"%, "+a.zm+")"}function sH(a){if(0===a.a)return"transparent";if(1>a.a)return!1;a="#"+PG(a.r,a.Ca,a.b,!1);for(var b=q(Object.entries(RG)),c=b.next();!c.done;c=b.next()){var d=q(c.value);c=d.next().value;d=d.next().value;if(a===d)return c}return!1}
fH.prototype.toString=function(a){var b=!!a;a=null!==a&&void 0!==a?a:this.format;var c=!1,d=1>this.a&&0<=this.a;if(!b&&d&&(a.startsWith("hex")||"name"===a))return"name"===a&&0===this.a?sH(this):qH(this);"rgb"===a&&(c=qH(this));"prgb"===a&&(c=rH(this));if("hex"===a||"hex6"===a)c="#"+oH(this,!1);"hex3"===a&&(c="#"+oH(this,!0));"hex4"===a&&(c="#"+QG(this.r,this.Ca,this.b,this.a,!0));"hex8"===a&&(c="#"+QG(this.r,this.Ca,this.b,this.a,!1));"name"===a&&(c=sH(this));"hsl"===a&&(d=NG(this.r,this.Ca,this.b),b=Math.round(360*d.hf),c=Math.round(100*d.Jc),d=Math.round(100*d.qb),c=1===this.a?"hsl("+b+", "+c+"%, "+d+"%)":"hsla("+b+", "+c+"%, "+d+"%, "+this.zm+")");if("hsv"===a){c=this.r;d=this.Ca;var e=this.b;c=JG(c,255);d=JG(d,255);e=JG(e,255);a=Math.max(c,d,e);var f=Math.min(c,d,e),g=0;b=a-f;if(a===f)g=0;else{switch(a){case c:g=(d-e)/b+(d<e?6:0);break;case d:g=(e-c)/b+2;break;case e:g=(c-d)/b+4}g/=6}c=Math.round(360*g);b=Math.round(100*(0===a?0:b/a));a=Math.round(100*a);c=1===this.a?"hsv("+c+", "+b+"%, "+
a+"%)":"hsva("+c+", "+b+"%, "+a+"%, "+this.zm+")"}return null!==c&&void 0!==c?c:"#"+oH(this,!1)};fH.prototype.clone=function(){return kH(this.toString())};ea.Object.defineProperties(fH.prototype,{ll:{configurable:!0,enumerable:!0,get:function(){return 1===tH?this.gq:0===tH?this.fq:this.hq}},Jg:{configurable:!0,enumerable:!0,get:function(){return this.ll.Jg}},Yw:{configurable:!0,enumerable:!0,get:function(){return qH(this)===qH(kH("black"))}},jx:{configurable:!0,enumerable:!0,get:function(){return qH(this)===qH(kH("white"))}},DB:{configurable:!0,enumerable:!0,get:function(){return 0===this.a}},Dt:{configurable:!0,enumerable:!0,get:function(){var a=1>this.a?[this.r,this.Ca,this.b,this.a]:[this.r,this.Ca,this.b];var b=Math.max.apply(Math,ha(a));a=Math.min.apply(Math,ha(a));return b-a}}});ea.Object.defineProperties(fH,{Fv:{configurable:!0,enumerable:!0,get:function(){return kH("#202223")}},Gv:{configurable:!0,enumerable:!0,get:function(){return kH("#DEDEDE")}},aA:{configurable:!0,enumerable:!0,get:function(){return kH("black")}},PD:{configurable:!0,enumerable:!0,get:function(){return kH("white")}},yD:{configurable:!0,enumerable:!0,get:function(){return kH("transparent")}}});var tH=1;var uH=/\s*,\s*/,vH=/(?:[+-]?\d*\.?\d+)(?:%|[a-z]+)?/,xH=wH(["(?:",/#(?:[a-f0-9]{6}|[a-f0-9]{3})/,"|","(?:rgb|hsl)",/\(\s*(?:\d{1,3}\s*,\s*){2}\d{1,3}\s*\)/,"|","(?:rgba|hsla)",/\(\s*(?:\d{1,3}\s*,\s*){2}\d{1,3}\s*,\s*\d*\.?\d+\)/,"|",/[_a-z-][_a-z0-9-]*/,")"],""),yH=wH([xH,"(?:\\s+",vH,"(?:\\s+",vH,")?)?"],""),zH=wH(["(?:",yH,uH,")*",yH],""),AH=["(?:(",wH(["(?:(",/(?:[+-]?\d*\.?\d+)(?:deg|grad|rad|turn)/,")|",/to\s+((?:(?:left|right|top|bottom)(?:\s+(?:top|bottom|left|right))?))/,")"],""),")",uH,")?(",zH,")"],BH=["\\s*(",xH,")","(?:\\s+","(",vH,"))?","(?:",uH,"\\s*)?"];function CH(a,b,c){var d;this.Mk=[];this.line=c[1];a=b.exec(a);if(null!==a)for(this.angle=a[1],b=wH(BH,"gi"),c=b.exec(a[4]);null!==c;)this.Mk.push({color:kH(c[1]),position:null!==(d=c[2])&&void 0!==d?d:""}),c=b.exec(a[4])}function DH(a){a=void 0===a?"":a;if(0!==a.trim().length&&a.trim().toLowerCase().startsWith("linear-gradient")){var b=wH(AH,"gi"),c=b.exec(a);if(null!==c)return new CH(a,b,c)}}
CH.prototype.Yw=function(){return this.Mk.every(function(a){return qH(a.color)===qH(kH("black"))})};CH.prototype.jx=function(){return this.Mk.every(function(a){return qH(a.color)===qH(kH("white"))})};CH.prototype.toString=function(){var a=[];void 0!==this.angle&&a.push(this.angle);for(var b=q(this.Mk),c=b.next();!c.done;c=b.next())c=c.value,a.push((qH(c.color)+" "+c.position).trim());return"linear-gradient("+a.join(", ")+")"};function wH(a,b){return new RegExp(a.reduce(function(c,d){return c+("string"===typeof d?d:d.source)},""),b)};xj.j(function(a){a="darkmode"===a;for(var b=q(document.querySelectorAll(".dm-adjust")),c=b.next();!c.done;c=b.next())EH(c.value,a)});function EH(a,b){var c,d;a=a.firstElementChild;if(null!==a){var e=a.classList.contains("roomNotice");if(!e||a.innerText.startsWith("Notice:")){var f=b?null!==(c=a.getAttribute("dm-adjust-bg"))&&void 0!==c?c:"#202223":null!==(d=a.getAttribute("dm-init-bg"))&&void 0!==d?d:"white";f.startsWith("linear-gradent")?a.style.backgroundImage=f:a.style.background=f;b=b?a.getAttribute("dm-adjust-fg"):a.getAttribute("dm-init-fg");c=e?a:a.querySelector("span.msg-text");null!==b&&null!==c&&(c.style.color=b)}}}
tH=2;var FH=fH.Fv.Jg,GH=fH.Gv.Jg;function HH(a){this.background=a.Nu;this.Na=a.Zv;IH(this)}function IH(a){var b,c=DH(a.background);a.$v=qH(nH(nH(kH(null!==(b=a.Na)&&void 0!==b?b:fH.Gv),1).jg(GH),1));void 0!==c?(c.Mk.forEach(function(d){var e=pH(d.color);var f=pH(kH(fH.Fv));e=kH({r:f.r+(e.r-f.r)*e.a,Ca:f.Ca+(e.Ca-f.Ca)*e.a,b:f.b+(e.b-f.b)*e.a});d.color=e.jg(FH)}),a.Aq=c.toString()):(b=kH(a.background),a.Aq=!b.Ae||b.jx||b.DB||b.Yw?"#202223":qH(b.jg(FH)))}
function JH(a){a.style.textShadow="1px 1px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000"}
function KH(a,b,c){b=(null!==b&&void 0!==b?b:"").trim();c=(null!==c&&void 0!==c?c:"").trim();var d=a.firstElementChild,e=d,f=a;if(d.classList.contains("roomNotice")){if(f=d,!e.innerText.startsWith("Notice:"))return}else e=a.querySelector(".msg-text");a=kH(b);e.style.color=10>a.Dt?"#D3D3D3":qH(nH(a.jg(GH),1));0<c.length?(a=DH(c),void 0!==a?(a.Mk.forEach(function(g){var h=g.color.a;g.color=10>g.color.Dt?fH.yD:nH(g.color.jg(FH),h)}),f.style.background=a.toString()):(c=kH(c),10>c.Dt?(f.style.removeProperty("background"),JH(e)):(a=c.a,c=nH(c.jg(FH),a),f.style.background=qH(c),1>a&&JH(e)))):JH(e)};var LH,MH,NH={};K.j(function(a){LH=a.C.Ft;MH=a.A;NH.Kd=a.C.oa.Kd;NH.Zf=a.C.Zf;NH.Gc=!1});zq.j(function(a){NH.Kd=a.Kd});function OH(a){a=sq(a);a=new oA(a.red,a.green,a.blue);var b=a.brightness();pA(a,255-b/3);return"rgb("+a.red+", "+a.green+", "+a.blue+")"}function PH(a,b,c,d){return 0===a?new IG(b,c,d):new AD(b,c,d,!0,!0)}
function QH(a,b,c){var d=RH(a.O.username);d.style.fontSize="";var e=PH(b,a.O,!1,a.Zc);e.element.style.paddingRight="4px";d.appendChild(e.element);var f=Uv(new Tv(NH),a.message);f.style.color=void 0!==a.Ie?a.Ie:"#FFFFFF";void 0!==a.font&&(e.element.style.fontFamily=a.font,f.style.fontFamily=a.font);f.className="purecolor";f.classList.add("msg-text");d.appendChild(f);ib()?window.setTimeout(function(){twemoji.parse(d,{className:"emojiChat"})},0):twemoji.parse(d,{className:"emojiChat"});KH(d,a.Ie,a.backgroundColor);SH(d,b,c);return d}function SH(a,b,c){var d,e=a.querySelectorAll(".username-mention");a=[];var f=lF(),g=f.Je(),h={};e=q(e);for(var m=e.next();!m.done;h={qn:h.qn},m=e.next()){m=m.value;h.qn=m.innerText.replace("@","").toLowerCase();var n=g.find(function(p){return function(y){return y.username===p.qn}}(h));void 0!==n?(n=DD(PH(b,n,!1),c===n.username),null===(d=m.parentElement)||void 0===d?void 0:d.replaceChild(n,m)):a.push(h.qn)}qF(f,a)}
function TH(a,b,c){var d=RH();d.style.padding="1px 5px";var e=document.createElement("div");e.style.display="inline-block";void 0!==a.background?(e.style.background=a.background,e.style.color=void 0!==a.Na?a.Na:"#000000",e.style.padding="2px",e.style.textShadow="none"):e.style.color=void 0!==a.Na?a.Na:"#aaaaaa";G(e,"roomNotice");e.style.fontWeight=void 0!==a.weight?a.weight:"normal";d.appendChild(UH(b,e,a.ja,void 0!==a.background));twemoji.parse(e,{className:"emojiChat"});KH(d,a.Na,a.background);SH(d,b,c);return d}function UH(a,b,c,d){c=q(c);for(var e=c.next();!e.done;e=c.next()){var f=document.createElement("div");e=q(e.value);for(var g=e.next();!g.done;g=e.next())switch(g=g.value,g.ic){case 1:f.appendChild(VH(g));break;case 0:f.appendChild(PH(a,g.Ja,d,"").element);break;case 2:f.appendChild(WH(g.message));break;case 3:f.appendChild(XH(Fe,function(){"privatespying"!==MH.status&&Zx(MH)}));break;default:u("Unknown roomNotice type for: "+g)}b.appendChild(f)}return b}
function XH(a,b){var c=document.createElement("a");G(c,"msg-link");c.style.textDecoration="underline";c.innerText=a;c.onclick=b;c.style.cursor="pointer";return c}function WH(a){var b=document.createElement("a");b.href="/tag/"+a+"/"+LH;G(b,"msg-link");b.style.textDecoration="none";b.innerText="#"+a;return b}function YH(a){var b=RH();b.innerText=a;b.style.color=OH("#aaaaaa");return b}
function ZH(a,b){function c(e){var f=document.createElement("span");f.innerText=e;return f}var d=RH();d.style.color=OH("#aaaaaa");d.appendChild(c(b?Qc:Pc));d.appendChild(document.createElement("br"));d.appendChild(c(Rc+" "));b=XH(Sc,function(){});b.href="/supporter/upgrade/";b.target="_blank";b.onclick=function(){A("SupporterPageOpened",{source:"chat"})};d.appendChild(b);d.appendChild(c(" "+Tc(a)+"."));return d}
function RH(a){a=void 0===a?"":a;var b=document.createElement("div");b.style.fontFamily="Tahoma,Arial,Helvetica,sans-serif";b.style.boxSizing="border-box";b.style.paddingTop="3px";b.style.paddingBottom="3px";b.style.paddingLeft="5px";b.style.paddingRight="5px";b.style.$x="break-word";b.style.wordWrap="break-word";0<a.length&&b.setAttribute("data-nick",a);return b}
function VH(a){var b=document.createElement("span");!1!==a.ay?b=Uv(new Tv(NH),a.message):b.innerText=a.message;b.style.color=void 0!==a.Na?a.Na:"";b.style.background=void 0!==a.background?a.background:"";b.style.fontWeight=void 0!==a.weight?a.weight:"";return b}function $H(a){var b=RH();return a.pC(b)};function aI(){F.call(this);this.element=N("div",{className:"buttonHolder",style:{position:"absolute",right:"6px"}});bI(this)}r(aI,F);function bI(a){a.element.style.top="calc(50% - "+a.height()/2+"px)"}function cI(a,b){var c;a.element.appendChild(b);b.style.display="inline-block";b.style.top=(a.height()-b.getBoundingClientRect().height)/2+"px";null===(c=a.parent)||void 0===c?void 0:c.Y();bI(a);return b}
function dI(a,b){var c;a.H(b);b.element.style.display="inline-block";b.element.style.top=(a.height()-b.element.getBoundingClientRect().height)/2+"px";null===(c=a.parent)||void 0===c?void 0:c.Y();bI(a);return b}aI.prototype.height=function(){return this.element.getBoundingClientRect().height};aI.prototype.width=function(){return this.element.getBoundingClientRect().width};function eI(){var a=document.createElement("div");a.className="msg-list-wrapper-split";a.style.boxSizing="border-box";a.style.overflow="auto";a.style.margin="0 auto 5px";a.style.padding="5px";return a}function fI(){var a=document.createElement("div");a.style.width="100%";a.className="notice-list-fvm";qq(a,"text");a.style.cursor="text";return a}
function gI(){var a=document.createElement("div");a.className="msg-list-fvm";G(a,"message-list");a.style.width="100%";qq(a,"text");a.style.cursor="text";a.style.paddingBottom="4px";return a}function hI(){var a=document.createElement("form");a.style.display="inline-block";a.style.boxSizing="border-box";a.style.margin="0 auto";return a}
function iI(){var a=document.createElement("div");G(a,"inputDiv");a.style.height="28px";a.style.boxSizing="border-box";a.style.position="absolute";a.style.left="5px";a.style.bottom="3px";a.style.border="1px solid #acacac";a.style.borderRadius="4px 4px 0 0";a.style.fontSize="12px";return a}
function jI(a,b){a=new vE(a,b);G(a.element,"msg-input");a.element.style.margin="6px";a.element.style.height="16px";a.element.style.fontFamily="Helvetica, Arial, sans-serif";a.element.style.lineHeight="15px";return a}
function kI(a,b){a=void 0===a?!0:a;b=void 0===b?!1:b;F.call(this);var c=this;this.Ut=a;this.pi=function(){H(c.element,"disabled");G(c.element,"send-button-gradient")};this.element=document.createElement("span");this.element.innerText=Vb()?we:ve;this.element.style.lineHeight="1.2";this.element.style.fontFamily="UbuntuRegular, Helvetica, Arial, sans-serif";this.element.style.fontSize="12px";this.element.style.color="#ffffff";this.element.style.padding="3px 5px";this.element.style.borderRadius="4px";this.element.style.boxSizing="border-box";this.element.style.display="inline-block";G(this.element,"send-button");G(this.element,"disabled");Vb()&&G(this.element,"modern");!1===this.Ut&&this.pi();this.element.classList.add(b?"theatermodeSendButtonPm":"theatermodeSendButtonChat")}r(kI,F);function lI(){var a=document.createElement("span");a.textContent="\ud83d\ude01";a.style.cursor="pointer";a.style.marginRight="6px";a.style.fontSize="15px";a.style.lineHeight="15px";twemoji.parse(a,{className:"emojiButton"});return a}
function mI(a,b){b=void 0===b?!1:b;F.call(this);var c=this;this.$i=a;this.ce=b;this.nq=new D("addMessageHtml",{dd:!1});this.yt=new D("removeMessageHtml",{dd:!1});this.oj=new D("scrolledToBottom");this.za=gI();this.gm=fI();this.Sa=eI();this.sf=0;this.J=new Yb;this.Cf=this.ce;this.de=!1;this.iu=function(){c.eb()};this.element.id="ChatTabContents";this.element.style.position="static";this.element.style.boxSizing="border-box";this.element.style.fontSize="12px";this.element.style.overflow="";this.element.classList.add(b?"TheatermodeChatDivPm":"TheatermodeChatDivChat");this.Sa.appendChild(this.gm);this.Sa.appendChild(this.za);b&&this.element.appendChild((new yF(!1)).element);this.element.appendChild(this.Sa);nI(this);var d=!1,e=!1,f=new uk(function(){d=!1},{xc:50,md:1});v("scroll",this.Sa,function(){var g=c.Sa.scrollTop;b&&0===g&&oI(c)&&dq.h();d||(d=!0,e=oI(c));vk(f);!oI(c)&&e&&(c.oj.h(),e=!1)});this.J.add(IF.j(function(g){c.nj=BG(c,g);void 0!==c.nj&&c.H(c.nj)}));this.J.add(K.j(function(g){c.element.style.fontSize=g.C.oa.fontSize;pI(c);c.Sf=g.A.username();g.C.B===g.C.userName&&(c.de=!0);c.Cf="offline"===g.C.ib&&EB()&&c.ce;c.Cf||c.$b.pi()}));B(zq.j(function(g){c.element.style.fontSize=g.fontSize;pI(c)}),this.J);this.zg=this.H(new fF({pa:this.va,Tl:16,vm:207}));this.ce||(this.Dj=this.H(new tF({pa:this.va,Tl:16,vm:207})),B(pF.j(function(){SH(c.za,c.de?0:1,c.Sf)}),this.J));B(Co.j(function(){c.Cf=!1;c.$b.pi()}),this.J);this.zg.element.classList.add(b?"theatermodeEmoticonAutocompleteModalPm":"theatermodeEmoticonAutocompleteModalChat")}
r(mI,F);function nI(a){var b=hI(),c=a.ce?4096:1024;a.ia=iI();a.element.appendChild(a.ia);a.vd=new aI;a.Vf=cI(a.vd,lI());a.$b=dI(a.vd,new kI(a.Cf,a.ce));a.va=jI(function(){return a.Mt()},c);a.va.element.classList.add(a.ce?"theatermodeInputFieldPm":"theatermodeInputFieldChat");a.Vf.classList.add(a.ce?"theatermodeEmojiButtonPm":"theatermodeEmojiButtonChat");b.appendChild(a.va.element);a.ia.appendChild(b);a.ia.appendChild(a.vd.element);bI(a.vd);v("mousedown",a.ia,function(d){if(d.target===a.ia||d.target===b)a.va.focus(),d.preventDefault()});v("click",a.$b.element,function(){a.va.submit()});v("click",a.Vf,function(){$p.h(a.Vf)});v("submit",b,function(d){d.preventDefault();a.va.submit()})}function pI(a){a.Sa.style.lineHeight=Number(a.element.style.fontSize.slice(0,-2))+7+"pt"}k=mI.prototype;k.Lb=function(){var a,b;Zb(this.J);null===(a=this.zg)||void 0===a?void 0:a.Lb();null===(b=this.Dj)||void 0===b?void 0:b.Lb()};k.Mt=function(){if(jl('You must be logged in to send a message. Click "OK" to login.')||this.Cf)return!1;var a=EE(this.va);this.eb();if(""!==a.trim()){var b=YE(a);switch(b.messageType){case 2:this.$i.lm();break;case 1:this.$i.km(b.Js);break;default:this.$i.im(a)}}b=a.match(/@[a-zA-Z0-9_]+/gm);a=lF();if(null!==b){b=q(b);for(var c=b.next();!c.done;c=b.next())c=c.value.replace("@",""),void 0!==a.El(c)&&A("UserMentionMessage")}this.va.blur();return!0};k.G=function(){this.ia.style.width=this.element.clientWidth-10+"px";var a=this.ia.clientWidth-18-this.vd.width();this.va.element.style.width=Math.max(0,a)+"px";bI(this.vd);this.eb();void 0!==this.zg&&(this.zg.element.style.bottom=this.ia.offsetHeight+2+"px");void 0!==this.Dj&&(this.Dj.element.style.bottom=this.ia.offsetHeight+2+"px")};function oI(a){return a.Sa.scrollTop<=a.Sa.scrollHeight-(a.Sa.offsetHeight+20)}k.eb=function(){oI(this)&&this.oj.h();this.Sa.scrollTop=this.Sa.scrollHeight-this.Sa.offsetHeight};k.ug=function(a){this.gm.appendChild(a)};k.ba=function(a,b,c){var d=this;b=void 0===b?!1:b;c=void 0===c?!1:c;var e=oI(this);e||a.querySelectorAll("img").forEach(function(g){var h=g.src;g.src="";g.onload=d.iu;g.src=h});this.za.appendChild(a);var f=this.za.childElementCount-1E3;for(b?this.za.prepend(a):this.za.appendChild(a);0<f;--f)b=this.za.firstElementChild,null!==b&&this.za.removeChild(b);e||this.eb();this.nq.h({KB:function(){return a.cloneNode(!0)}});c&&(this.sf+=1);return a};k.rp=function(a){this.za.removeChild(a)};k.Dl=function(){return this.sf};k.Qo=function(a){return this.sf-a};k.Em=function(a){this.vr=a};k.io=function(a){for(var b=[],c=q(this.za.childNodes),d=c.next();!d.done;d=c.next())d=d.value,d.getAttribute("data-nick")===a&&b.push(d);a=q(b);for(b=a.next();!b.done;b=a.next())this.za.removeChild(b.value)};k.clear=function(){for(this.sf=0;null!==this.za.firstChild;)this.za.removeChild(this.za.firstChild)};k.Vc=function(){this.va.focus()};k.ue=function(){this.va.blur()};k.xt=function(a){this.yt.h(a)};k.Ad=function(){return document.activeElement===this.va.element};k.oi=function(a){BE(this.va,a,!0)};function qI(){var a=document.createElement("div");a.className="msg-list-wrapper-fvm";a.style.width="100%";a.style.boxSizing="border-box";a.style.overflow="auto";return a}function rI(){var a=document.createElement("div");a.style.width="100%";a.className="notice-list-fvm";qq(a,"text");a.style.cursor="text";return a}function sI(){var a=document.createElement("div");a.className="msg-list-fvm";a.style.width="100%";a.style.overflowX="hidden";qq(a,"text");a.style.cursor="text";return a}
function tI(){var a=document.createElement("form");a.style.display="inline-block";a.style.boxSizing="border-box";return a}function uI(){var a=document.createElement("div");G(a,"chat-input-div");a.style.height="27px";a.style.boxSizing="border-box";a.style.position="absolute";a.style.bottom="0";a.style.fontSize="12px";return a}
function vI(a,b){a=new vE(a,b);G(a.element,"chat-input-field");a.element.style.margin="6px";a.element.style.height="15px";a.element.style.fontFamily="Helvetica, Arial, sans-serif";a.element.style.lineHeight="15px";return a}
function wI(a,b){b=void 0===b?!0:b;F.call(this);var c=this;this.J=a;this.Ut=b;this.element=document.createElement("span");this.element.innerText=Vb()?we:ve;this.element.style.fontSize="12px";this.element.style.padding="5px 8px 4px";this.element.style.marginRight="6px";this.element.style.borderRadius="4px";this.element.style.boxSizing="border-box";this.element.style.display="inline-block";this.element.style.position="absolute";this.element.style.bottom="2px";G(this.element,"send-button");G(this.element,"disabled");Vb()&&G(this.element,"modern");a=K.j(function(d){c.element.style.right=!0===d.C.hb?"37px":"0px"});void 0!==this.J&&this.J.add(a);!1===this.Ut&&this.pi()}r(wI,F);wI.prototype.pi=function(){H(this.element,"disabled");G(this.element,"send-button-gradient")};function xI(a){sj.h({});a.stopPropagation();a.preventDefault()}
function yI(a){var b=document.createElement("span");G(b,"tip-button");b.innerText=Vb()?ye:xe;b.style.fontSize="12px";b.style.padding="5px 8px 4px";b.style.marginRight="2px";G(b,"tip-button-gradient");b.style.borderRadius="4px";b.style.boxSizing="border-box";b.style.cursor="pointer";b.style.display="inline-block";b.style.position="absolute";b.style.right="2px";b.style.bottom="2px";v("mousedown",b,function(d){d.stopPropagation()});v("click",b,xI);var c=K.j(function(d){b.style.display=!0===d.C.hb?"inline-block":"none"});void 0!==a&&a.add(c);return b}function zI(){var a=document.createElement("span");a.textContent="\ud83d\ude01";a.style.cursor="pointer";a.style.marginRight="6px";a.style.fontSize="15px";a.style.position="absolute";a.style.bottom="6px";twemoji.parse(a,{className:"emojiButton"});return a}
function AI(a,b){b=void 0===b?!1:b;F.call(this);var c=this;this.$i=a;this.ce=b;this.nq=new D("addMessageHtml",{dd:!1});this.yt=new D("removeMessageHtml",{dd:!1});this.oj=new D("scrolledToBottom");this.za=sI();this.gm=rI();this.Sa=qI();this.mw=new D("formSubmitted");this.sf=0;this.pr=new Map;this.J=new Yb;this.Cf=this.ce;this.iu=function(){c.eb()};this.element.id="FVChatTabContents";this.element.style.fontSize="12px";this.element.style.overflow="";this.element.classList.add(b?"FullvideoChatDivPm":"FullvideoChatDivChat");G(this.element,"hasDarkBackground");this.Sa.appendChild(this.gm);this.Sa.appendChild(this.za);this.ce&&this.element.appendChild((new yF(!0)).element);this.element.appendChild(this.Sa);var d=tI();this.ia=uI();this.va=vI(function(){return c.Mt()},b?4096:1024);this.va.element.classList.add(b?"fullvideoInputFieldPm":"fullvideoInputFieldChat");this.Vf=zI();this.Vf.classList.add(b?"fullvideoEmojiButtonPm":"fullvideoEmojiButtonChat");this.Lt=new wI(this.J,this.Cf);this.$b=this.Lt.element;this.$b.classList.add(b?"fullvideoSendButtonPm":"fullvideoSendButtonChat");this.wj=yI(this.J);d.appendChild(this.va.element);this.ia.appendChild(d);this.ia.appendChild(this.Vf);this.ia.appendChild(this.$b);this.Vf.onload=function(){c.Y()};var e=!1;v("mousedown",this.ia,function(m){if(m.target===c.ia||m.target===d)c.va.focus(),m.preventDefault()});v("submit",d,function(m){m.preventDefault();c.va.submit()});v("click",this.$b,function(m){m.stopPropagation();c.va.submit()});v("click",this.Vf,function(m){m.stopPropagation();$p.h(c.Vf)});var f=!1,g=!1,h=new uk(function(){f=!1},{xc:50,md:1});v("scroll",this.Sa,function(){var m=c.Sa.scrollTop;b&&0===m&&oI(c)&&dq.h();f||(f=!0,g=oI(c));vk(h);!oI(c)&&g&&(c.oj.h(),g=!1)});this.ia.appendChild(this.wj);this.element.appendChild(this.ia);this.J.add(IF.j(function(m){c.nj=BG(c,m);void 0!==c.nj&&c.H(c.nj)}));this.J.add(K.j(function(m){c.element.style.fontSize=m.C.oa.fontSize;c.Sf=m.A.username();m.C.B===m.C.userName&&(e=!0);c.wj.style.display=!0===m.C.hb?"inline-block":"none";pI(c);c.Cf="offline"===m.C.ib&&EB()&&c.ce;c.Cf||c.Lt.pi()}));this.J.add(zq.j(function(m){c.element.style.fontSize=m.fontSize;pI(c)}));this.zg=this.H(new fF({pa:this.va,Tl:10,vm:167}));this.ce||(this.Dj=this.H(new tF({pa:this.va,Tl:10,vm:167})),B(pF.j(function(){SH(c.za,e?0:1,c.Sf)}),this.J));this.zg.element.classList.add(b?"fullvideoEmoticonAutocompleteModalPm":"fullvideoEmoticonAutocompleteModalChat");B(Co.j(function(){c.Lt.pi();c.Cf=!1}),this.J)}r(AI,F);k=AI.prototype;k.Lb=function(){var a,b;Zb(this.J);null===(a=this.zg)||void 0===a?void 0:a.Lb();null===(b=this.Dj)||void 0===b?void 0:b.Lb()};k.Mt=function(){if(jl('You must be logged in to send a message. Click "OK" to login.')||this.Cf)return!1;var a=EE(this.va);this.eb();if(""!==a.trim()){var b=YE(a);switch(b.messageType){case 2:this.$i.lm();break;case 1:this.$i.km(b.Js);break;default:this.$i.im(a)}}var c=a.match(/@[a-zA-Z0-9_]+/gm);b=lF();if(null!==c){var d={};c=q(c);for(var e=c.next();!e.done;d={eq:d.eq},e=c.next())d.eq=e.value,void 0!==b.Je().find(function(f){return function(g){return g.username===f.eq.replace("@","")}}(d))&&A("UserMentionMessage")}this.mw.h(a);return!0};k.G=function(){var a=oI(this);BI(this);this.ia.style.width=this.element.clientWidth+"px";var b=this.ia.clientWidth-18-6-Math.ceil(this.wj.offsetWidth+this.$b.offsetWidth+this.Vf.offsetWidth)-4;b=Math.max(0,b);this.va.element.style.width=b+"px";a||this.eb();void 0!==this.zg&&(this.zg.element.style.bottom=this.ia.offsetHeight+"px");void 0!==this.Dj&&(this.Dj.element.style.bottom=this.ia.offsetHeight+"px")};function BI(a){var b=Math.max(0,a.element.clientHeight-27);a.ce&&(b-=32);a.Sa.style.height=b+"px"}k.eb=function(){var a=this;oI(this)&&this.oj.h();this.Sa.scrollTop=this.Sa.scrollHeight;this.Sa.scrollLeft=0;window.setTimeout(function(){oI(a)&&a.eb()},0)};k.ug=function(a){this.gm.appendChild(a)};k.ba=function(a,b,c,d){var e=this;c=void 0===c?!1:c;d=void 0===d?!1:d;var f=this.Sa.scrollTop,g=oI(this);g||a.querySelectorAll("img").forEach(function(h){var m=h.src;h.src="";h.onload=e.iu;h.src=m});c?this.za.prepend(a):this.za.appendChild(a);if(g)BI(this),this.Sa.scrollTop=f;else{for(c=this.za.childElementCount-1E3;0<c;--c)f=this.za.firstElementChild,null!==f&&this.za.removeChild(f);BI(this);this.eb()}void 0!==b&&this.pr.set(a,b);this.nq.h({KB:function(){return void 0!==b?b():a.cloneNode(!0)}});d&&(this.sf+=1);return a};k.rp=function(a){this.pr.delete(a);this.za.removeChild(a)};k.Dl=function(){return this.sf};k.Qo=function(a){return this.sf-a};k.Em=function(a){this.vr=a};k.D=function(){this.za.style.opacity="0"};k.show=function(){this.za.style.opacity="1"};k.clear=function(){for(this.sf=0;null!==this.za.firstChild;)this.za.removeChild(this.za.firstChild);this.pr.clear()};k.Vc=function(){this.va.focus()};k.ue=function(){this.va.blur()};k.xt=function(a){this.yt.h(a)};k.Ad=function(){return document.activeElement===this.va.element};k.oi=function(a){BE(this.va,a,!0)};var CI=new D("userCountUpdate");function DI(){function a(){if(void 0!==b.parent&&!b.Hm){var d=b.parent;Ml(d,d.children()[0])}}Nl.call(this);var b=this;this.eh=0;this.zb=[];this.Hm=this.de=!1;this.yw=document.createElement("span");this.Mu=Ae+" ";this.element.id="UserListTab";this.element.style.overflow="visible";this.element.style.fontFamily="Tahoma, Helvetica, Arial, sans-serif";this.element.style.boxSizing="border-box";this.element.style.position="relative";this.Oc=document.createElement("div");this.Oc.style.width="100%";this.Oc.style.overflow="auto";this.Oc.style.padding="6px";this.Oc.style.boxSizing="border-box";this.element.appendChild(this.Oc);this.ia=iI();var c=hI();this.pb=jI(function(){return!1},4096);v("click",this.pb.element,a);v("focus",this.pb.element,a);this.vd=new aI;this.$b=cI(this.vd,(new kI(!1)).element);this.$b.style.marginLeft="6px";this.$b.onclick=a;c.appendChild(this.pb.element);this.ia.appendChild(c);this.ia.appendChild(this.vd.element);this.element.appendChild(this.ia);this.yi();K.j(function(d){b.de=d.C.userName===d.C.B;b.Sc=d.A;b.Sc.event.ac.j(function(e){"privatewatching"!==e.rd&&"privatewatching"!==e.La||window.setTimeout(function(){b.refresh(!1)},2E3)});b.Sc.event.zy.j(function(e){b.eh=e;CI.h(b.eh)});b.clear(d.C.Kx);b.$y=d.C.oa.az});zq.j(function(d){b.$y=d.az})}r(DI,Nl);function EI(a){void 0===a.$g&&(a.$g=Tj(),a.$g.style.height="1em",a.$g.style.paddingTop="1px");a.P.element.textContent="";a.P.element.style.fill="currentColor";a.P.element.appendChild(a.$g);a.P.element.appendChild(document.createTextNode("\u00a0"));a.yw.style.verticalAlign="top";a.P.element.appendChild(a.yw);a.Mu=""}k=DI.prototype;k.hj=function(){for(;null!==this.Oc.firstChild;)this.Oc.removeChild(this.Oc.firstChild)};k.yi=function(){var a=document.createElement("div");G(a,"defaultTooltipColor");a.innerText=mf+"...";a.style.margin="8px 0";this.Oc.style.fontSize="12px";this.Oc.appendChild(a)};k.cr=function(){var a=this,b=document.createElement("div");b.style.margin="6px";b.style.cssFloat="right";var c=document.createElement("span");c.innerText=nf;c.style.cursor="pointer";G(c,"refreshUsersLink");c.onmouseenter=function(){c.style.textDecoration="underline"};c.onmouseleave=function(){c.style.textDecoration="none"};v("click",c,function(d){a.vt();d.preventDefault()});b.appendChild(c);this.Oc.appendChild(b)};k.vt=function(){this.hj();this.yi();this.refresh(!1)};k.clear=function(a){this.eh=a;CI.h(this.eh);this.hj();this.yi();this.G()};k.refresh=function(a){var b=this;a=void 0===a?!0:a;void 0!==this.Sc&&JB(this.Sc,this.$y).then(function(c){b.eh=c.an;CI.h(c.an);if(!a){b.hj();b.cr();b.zb=c.Je;for(var d=q(b.zb),e=d.next();!e.done;e=d.next()){e=e.value;var f=document.createElement("div");P(f,{width:"auto",maxWidth:"100%",margin:"2px 0"});f.appendChild((b.de?new IG(e,!0,"",!1):new AD(e,!0,"",!1)).element);b.Oc.appendChild(f)}d=document.createElement("div");G(d,"defaultTooltipColor");d.innerText="+"+c.Hj+" anonymous user"+(1===c.Hj?"":"s");P(d,{width:"100%",margin:"2px 0",whiteSpace:"nowrap",cssFloat:"left"});b.Oc.appendChild(d);b.G()}}).catch(function(c){u("Error retrieving user list: "+c)})};k.G=function(){this.ia.style.width=this.element.clientWidth-10+"px";bI(this.vd);this.pb.element.style.width=Math.max(0,this.ia.clientWidth-18-Math.ceil(this.$b.offsetWidth)-4)+"px";this.Oc.style.height=this.element.clientHeight-28-4+1+"px"};k.gf=function(){void 0===this.$g&&(this.$g=Tj(),this.$g.style.height="1em",this.$g.style.paddingTop="1px");var a=document.createTextNode(this.Mu+"("+this.eh+")"),b=document.createElement("span");b.style.verticalAlign="top";b.appendChild(a);return Vb()?[this.$g,b]:[b]};k.Cg=function(){return"users-tab-default"};k.Vc=function(){this.pb.focus()};k.ue=function(){this.pb.blur()};k.Ad=function(){return document.activeElement===this.pb.element};k.eb=function(){this.Oc.scrollTop=this.Oc.scrollHeight-this.Oc.offsetHeight};k.Bg=function(){};k.Md=function(a){Nl.prototype.Md.call(this,a);A("FocusTab",{location:"userlist"});this.refresh(!1)};function FI(a,b){F.call(this);var c=this;this.qh=new D("forceHlsPlayerEvent");this.Gk=new D("setPlayerComponentMutedEvents");this.Rt=new D("setPlayerComponentVolumeMutedEvents");this.ip=new D("playerComponentEnterFullScreenModeEvent");this.jp=new D("playerComponentReadjustForceHlsOverlayOrderEvent");this.kp=new D("playerComponentReadjustPlayButtonContainerEvent");this.Fp=new D("showJpegPlayerComponentImage");this.Nh=new D("requestVideoQualityButtonVisibilityChange");this.mc=new D("videoOfflineChange");this.state={volume:60,T:!0};this.Ng=this.Cc=this.zl=this.Al=this.visible=this.Jl=this.be=this.hb=!1;this.tu(a);a=wb().disable_sound;void 0!==a&&"true"===a.toLowerCase()||"1"===a?(this.state.volume=0,this.state.T=!0):t()&&(a=window.localStorage.getItem("videoControls"),null!==a?(a=JSON.parse(a),this.state={volume:a.volume,T:this.cj?a.isMuted:!0}):this.state.T=!this.cj);Pb=this.state.T?0:this.state.volume;this.dl=window.navigator.userAgent;this.element.style.overflow="";this.element.style.bottom="0";this.element.style.left="0";this.element.style.height="26px";this.element.style.background="linear-gradient(180deg, rgba(50, 50, 50, 0) 0%, rgba(50, 50, 50, 0.4) 66%, rgba(50, 50, 50, 0.7) 100%)";this.kr();this.element.appendChild(this.Ba);this.lr();this.element.appendChild(this.Ma.element);this.jr(b);this.element.appendChild(this.ua);this.pc=new rl;this.pc.element.style.position="absolute";this.pc.element.style.bottom="0";this.pc.element.style.right="0";this.pc.element.style.textAlign="right";this.H(this.pc);this.ar();this.pc.element.appendChild(this.bd);this.Kc=GI(uh);var d=!1;Jz(this.Kc,this.mc)&&(this.pc.element.appendChild(this.Kc),d=!0);this.er();this.pc.element.appendChild(this.X);this.Sq();this.pc.element.appendChild(this.Rc);this.hr();this.pc.element.appendChild(this.hd);this.$q();this.pc.element.appendChild(this.ge);this.gr();this.pc.element.appendChild(this.Ib);this.Vq();this.pc.element.appendChild(this.wa);K.j(function(e){var f,g;e.C.hb?(c.Ng=e.C.te,c.Df(e.A.status),e.A.event.ac.j(function(h){c.su(h.La);c.Df(h.La);"privatespying"===h.La&&vj.h(void 0);c.Km(h.La)}),e.A.event.Xh.j(function(h){c.Ng=h.te&&!0===e.C.hb;c.Df(e.A.status)})):(c.Ng=!1,c.Df(e.A.status));null===(f=c.$a)||void 0===f?void 0:f.show();mb()&&!kb()&&!ab()&&d&&uo&&void 0===c.$a&&(c.$a=Mk(c.Kc,{width:250,content:gj,Il:!1,Ud:0,bf:"135px",Wf:function(h){return HI()?0:.45*h.getBoundingClientRect().width},qg:function(h){return HI()?.18*h.getBoundingClientRect().height:3},Ep:["fullvideo","fullscreen","theater"]},null!==(g=c.Ia.parentElement)&&void 0!==g?g:void 0),c.he&&void 0!==c.$a&&(c.$a.element.style.zIndex="100"),v("click",c.Kc,function(){var h;null===(h=c.$a)||void 0===h?void 0:Jk(h)}));c.zc=e;c.bj&&!c.zl&&(c.zl=!0,c.Uq(),c.Km(e.C.ib));c.hb=e.C.hb;c.ms="offline"===e.C.ib;c.qe();c.he||lA(c);c.pg();c.tb()});Yj.Td.j(function(e){var f,g;"fullscreen"===e.nh?null===(f=c.$a)||void 0===f?void 0:Kk(f,1):null===(g=c.$a)||void 0===g?void 0:Kk(g,0);c.pg()});yk.j(function(e){c.visible&&e||c.tb()});Zp.j(function(){c.Gh()});yq.j(function(){I()&&mA(c)});Vx.j(function(){c.pd()},!1);v(pc(),document,function(){I()&&I()===c.Gr&&Xj("fullscreen")});this.element.onmousemove=function(){c.tb()};v("click",this.element,function(e){e.stopPropagation()});this.D()}r(FI,F);k=FI.prototype;k.tu=function(a){this.Ia=a.element;this.cj=a.N.Tm;a.N instanceof hs?(this.he=!0,this.bj=a.N.Ri):this.bj=this.he=!1;this.hg=a.N.Zh;this.it=a.Bh;this.Pi=a.Pi()};k.jr=function(a){function b(d){d=d.target;c.ua.contains(d)||a.element.contains(d)||(c.Nh.h(!1),x("touchend",document,b))}var c=this;this.ua=GI("");this.ua.style.position="absolute";this.ua.style.bottom="0";this.ua.style.left="103px";this.ua.onmouseover=function(){c.Nh.h(!0);v("touchend",document,b)};this.ua.onmouseout=function(d){null!==d.relatedTarget&&(d=d.relatedTarget.parentNode,null===d||d.isEqualNode(a.element)||c.Nh.h(!1))}};k.lr=function(){function a(c){c!==b.state.volume&&(b.state.volume=c,b.state.T=0===b.state.volume,nA(b),b.qe(),b.Gb())}var b=this;this.Ma=new gq({Mb:12,Te:50});this.Ma.element.style.margin="6px 5px 0 0";this.Ma.element.style.position="absolute";this.Ma.element.style.bottom="7px";this.Ma.element.style.left="36px";this.Ma.hn.j(function(c){b.Cc&&void 0!==b.zc&&(b.pd(!1),A("ForceHLS"),b.qh.h({Bk:b.zc}),b.pe(),wq.h(void 0));b.Gk.h(!1);a(c)});this.Ma.jn.j(a);this.Ma.gn.j(function(c){a(c);0===b.state.volume&&b.Gk.h(!0);A("ChangeVolume",{volume:c});b.Gb()})};k.kr=function(){var a=this;this.Ba=document.createElement("img");this.Ba.style.height="24px";this.Ba.style.width="24px";this.Ba.style.margin="0 6px 2px 6px";this.Ba.style.cursor="pointer";this.Ba.style.position="absolute";this.Ba.style.bottom="0";this.Ba.onclick=function(){!a.he||-1<a.dl.indexOf("MSIE 10.0")||-1<a.dl.indexOf("MSIE 9.0")?(A("ToggleMute",{newState:!a.state.T}),A("ChangeVolume",{volume:a.state.volume}),a.state.T?a.pe():a.Gh(),a.tb()):void 0===a.zc?u("unexpected switch to hls",{},"VIDEO_"):(a.Cc&&a.pd(!1),A("ForceHLS"),a.qh.h({Bk:a.zc}),a.pe(),wq.h(void 0))}};k.ar=function(){this.bd=GI(Kd);this.bd.onclick=function(){vj.h(void 0)}};k.er=function(){this.X=GI(qd);this.X.id="send-tip";this.X.onclick=function(){sj.h({})}};k.Sq=function(){this.Rc=GI("Chat");this.Rc.id="chat-btn";this.Rc.style.display="none";this.Rc.onclick=function(){wj.h(void 0)}};k.hr=function(){var a=this;this.hd=GI(ze+" (0)");this.hd.id="user-list";this.hd.onclick=function(){rj.h(void 0)};CI.j(function(b){a.hd.innerText=ze+" ("+b+")"})};k.$q=function(){this.ge=GI("More Rooms");this.ge.id="more-rooms";this.ge.onclick=function(){Yp.h(void 0)}};k.gr=function(){var a=this;this.Ib=GI("Theater Mode");this.Ib.onclick=function(){var b="split";"split"===O()&&(b="theater");A("ChangeVideoMode",{videoMode:b});Xj(b);Zj();a.pg()}};k.Vq=function(){var a=this;this.be=oc();document[qc()]=function(){I()||(a.be=!1,a.wa.style.display="none",J("Full screen is unavailable."))};this.wa=GI("Full Screen");this.wa.id="full-screen";oc()||(this.wa.style.display="none");this.wa.onclick=function(){a.Qk()}};k.Df=function(a){var b=["privaterequesting","privatespying","privatewatching"];if(!this.Ng&&-1===b.indexOf(a)||!this.hg)this.bd.style.display="none";else switch(a){case "unknown":case "offline":case "notconnected":case "away":case "hidden":case "passwordprotected":case "privatenotwatching":this.bd.style.display="none";break;default:this.bd.style.display="split"===O()?"none":"inline-block"}};k.pg=function(){this.X.style.display=this.hb?"inline-block":"none";this.ge.style.display="none";this.hd.style.display="inline-block";this.Ib.innerText=Mf;this.Ib.style.display="inline-block";this.wa.innerText=Nf;this.Rc.style.display="inline";this.Kc.style.display="block";void 0!==this.zc&&this.Df(this.zc.A.status);this.be&&(this.wa.style.display="inline-block");switch(O()){case "split":this.X.style.display="none";this.hd.style.display="none";this.Rc.style.display="none";this.bd.style.display="none";this.Kc.style.display="none";this.Pi&&(this.Ib.style.display="none");break;case "videoonly":this.X.style.display="none";this.hd.style.display="none";this.Rc.style.display="none";this.bd.style.display="none";this.Kc.style.display="none";this.Ib.style.display="none";this.wa.style.display="none";break;case "theater":this.Ib.innerText=Pf;this.Ib.id="default-view";this.ge.style.display="inline-block";break;case "fullscreen":this.ge.style.display="inline-block";this.Ib.style.display="none";this.wa.innerText=Of;break;case "noninteractive-fullscreen":break;default:u("Unexpected VideoMode: "+O(),{},"VIDEO_")}this.ms&&(this.Kc.style.display="none",this.hd.style.display="none");this.tb()};k.qe=function(){var a=this.Ma.xe();0===a||this.state.T?(this.Ba.src="https://static-assets.highwebmedia.com/tsdefaultassets/volume-mute.svg",this.Ba.id="volume-mute"):33>a?(this.Ba.src="https://static-assets.highwebmedia.com/tsdefaultassets/volume-low.svg",this.Ba.id="volume-low"):66>a?(this.Ba.src="https://static-assets.highwebmedia.com/tsdefaultassets/volume-medium.svg",this.Ba.id="volume-medium"):(this.Ba.src="https://static-assets.highwebmedia.com/tsdefaultassets/volume-high.svg",this.Ba.id="volume-high")};k.Gb=function(){t()&&!this.it&&window.localStorage.setItem("videoControls",JSON.stringify({volume:this.state.volume,isMuted:this.state.T}));Pb=this.state.T?0:this.state.volume};k.update=function(){lA(this);this.Gb()};k.Gh=function(){this.Kf(!0);this.update()};k.pe=function(){this.Kf(!1);0===this.state.volume&&(this.state.volume=60);this.update()};k.toggle=function(){this.visible?this.Eg():this.tb()};k.tb=function(){var a=this,b;this.visible=!0;II(this);pq(this.element,"100ms");this.element.style.opacity="1";void 0!==this.lo&&clearTimeout(this.lo);void 0!==this.Jh&&clearTimeout(this.Jh);var c=this.Jl?2E3:5E3;this.lo=window.setTimeout(function(){a.lo=void 0;a.Jh=window.setTimeout(function(){a.Jh=void 0;a.Eg()},c-100)},100);null===(b=this.$a)||void 0===b?void 0:b.show()};function HI(){return"theater"===O()&&750>ck()}
function II(a){var b,c,d=HI();d?(a.pc.element.style.width="100px",a.pc.element.style.marginBottom="15px",null===(b=a.$a)||void 0===b?void 0:Kk(b,3,"12px")):(a.pc.element.style.width="",a.pc.element.style.marginBottom="",b="fullscreen"===O()?1:0,null===(c=a.$a)||void 0===c?void 0:Kk(c,b,"135px"));a=q(a.pc.element.children);for(c=a.next();!c.done;c=a.next())c=c.value,c instanceof HTMLElement&&"none"!==c.style.display&&(c.style.display=d?"block":"inline-block")}
k.Eg=function(){var a;this.Cc||void 0!==this.lo||(this.visible=!1,this.Jl=!0,pq(this.element,"500ms"),this.element.style.opacity="0",null===(a=this.$a)||void 0===a?void 0:a.D())};k.show=function(){this.element.style.visibility="";this.tb();this.element.style.zIndex=this.Cc?"10":"2"};k.D=function(){this.element.style.visibility="hidden"};k.fi=function(a){this.state.volume=a;this.Ma.Jd(this.state.T?0:this.state.volume);this.qe()};k.Kf=function(a){this.state.T=a;this.Ma.Jd(this.state.T?0:this.state.volume);this.qe()};k.ru=function(a){this.fi(a);this.Gb()};k.qu=function(a){this.Kf(a);this.Gb()};k.Wb=function(){return 0};k.Co=function(){return!1};k.Qk=function(){this.Cc&&this.pd();I()?nc():this.be&&this.ip.h(void 0);this.pg()};k.su=function(a){switch(a){case "unknown":case "offline":case "notconnected":case "away":case "privatenotwatching":case "hidden":case "passwordprotected":if("fullscreen"===O()){this.wa.style.display=this.be?"inline":"none";break}I()&&nc();this.wa.style.display="none";break;case "public":case "privatespying":case "privatewatching":case "privaterequesting":this.wa.style.display=this.be?"inline-block":"none";break;default:u("unexpected room status",a,"")}};k.pd=function(a){a=void 0===a?!0:a;this.Cc&&void 0!==this.zc&&(void 0!==this.Fa&&null!==this.Fa.parentElement&&(this.Fa.parentElement.removeChild(this.Fa),this.Fa=void 0),void 0!==this.la&&null!==this.la.parentElement&&(this.la.parentElement.removeChild(this.la),this.la=void 0),this.Cc=!1,this.Eg(),this.D(),this.ua.innerText="",this.ua.style.display="none",!this.Al&&a&&(this.Al=!0,A("ForceHLS"),this.qh.h({Bk:this.zc,pe:!1}),wq.h(void 0)),this.element.style.zIndex="2")};k.Wq=function(){var a=this;this.Fa=document.createElement("div");this.Fa.style.width="100%";this.Fa.style.height="100%";this.Fa.style.position="absolute";this.Fa.style.top="0";this.Fa.style.left="0";this.Fa.style.cursor="pointer";v("click",this.Fa,function(){a.pd()});v("click",this.element,function(){a.pd()});this.jp.h(this.Fa)};k.Km=function(a){void 0!==this.la&&void 0!==this.Fa&&("public"===a?(this.la.style.display="",this.Fa.style.display=""):(this.la.style.display="none",this.Fa.style.display="none"))};k.Uq=function(){var a=this;if(this.he){this.Cc=!0;this.la=document.createElement("div");var b=this.Ia.getBoundingClientRect(),c=document.createElement("img");c.src="https://static-assets.highwebmedia.com/tsdefaultassets/play-inactive.svg";c.style.width="60px";c.style.height="60px";c.style.position="relative";c.style.top="40px";c.style.left="45px";c.style.cursor="pointer";v("click",c,function(){a.pd()});this.la.style.position="absolute";this.la.style.top=b.height/2-70+"px";this.la.style.left=b.width/2-70+"px";this.la.style.cursor="pointer";this.la.style.width="140px";this.la.style.height="140px";this.la.style.borderRadius="50%";this.la.style.backgroundColor="rgba(0,0,0,0.25)";this.la.appendChild(c);this.kp.h(this.la);this.Fp.h(void 0);this.Wq();this.G()}};k.G=function(){if(void 0!==this.la){var a=this.Ia.getBoundingClientRect();this.la.style.top=a.height/2-70+"px";this.la.style.left=a.width/2-70+"px"}};k.Hx=function(a){this.cj=a};k.Ix=function(a){this.hg=a};k.Ts=function(a){this.he=a};k.Ss=function(a){this.bj=a};k.Jx=function(a){this.mc.h(a)};k.Xi=function(a){this.ua.innerText=a};k.Py=function(a){this.ua.style.display=a?"":"none"};k.Oy=function(){};k.tw=function(){return this.ua.offsetLeft};function GI(a){var b=document.createElement("span");b.innerText=a;b.style.color="#ffffff";b.style.fontSize="13px";b.style.padding="5px";b.style.marginRight="4px";b.style.cursor="pointer";b.style.display="inline-block";return b};function JI(a){Dc.call(this);var b=this;this.ka=a;this.Us=new D("notifyQualityLevelLabelChanged");this.Xi=new D("notifyQualityLevelChanged");this.At=new D("requestVideoQualityButtonVisibilityChange");this.vy=new D("requestVideoQualityModalReposition");this.Vs=new D("notifyVisibilityChanged");this.ej=new Map;this.element.style.visibility="hidden";this.element.style.width="auto";this.element.style.minWidth="100px";this.element.style.height="auto";this.element.style.backgroundColor="black";this.element.style.position="absolute";this.element.style.borderRadius="2px";this.element.style.backgroundColor="rgba(50, 50, 50, 0.7)";this.ka.N instanceof ls&&v("visibilitychange",document,function(){b.ka.KD||("visible"===document.visibilityState?(void 0!==b.lt&&(b.Xi.h(b.lt),b.lt=void 0),clearTimeout(b.ND)):"hidden"===document.visibilityState&&KI(b))});this.element.onmouseleave=function(){b.D()}}r(JI,Dc);k=JI.prototype;k.G=function(){this.vy.h(void 0)};k.clear=function(){for(;null!==this.element.firstChild;)this.element.removeChild(this.element.firstChild)};k.br=function(a){var b=this,c=document.createElement("div");c.innerText=a.label;c.style.color="#ffffff";c.style.fontSize="13px";c.style.padding="5px";c.style.marginRight="6px";c.style.cursor="pointer";c.style.width="100%";a.bi?(c.style.backgroundColor="#ffffff",c.style.color="#333333"):(c.onclick=function(){A("clickMenuLink:QualitySelect-"+a.label);b.Ge(a.label);b.Us.h(a.label)},c.onmouseenter=function(){c.style.backgroundColor="rgba(150, 150, 150, 0.3)"},c.onmouseleave=function(){c.style.backgroundColor=""});return c};k.Ge=function(a){a=this.ej.get(a);void 0===a?u("Undefined quality level key",{},"VIDEO_"):(this.Xi.h(a),this.nr=a)};function KI(a){a.ND=window.setTimeout(function(){a.lt=a.nr;a.Xi.h(0);a.nr=0},3E5)}k.show=function(){this.Vs.h(!0);this.Za();this.element.style.visibility="";this.G()};k.D=function(){this.Vs.h(!1);this.Oa();this.element.style.visibility="hidden"};function LI(a){us.call(this,a,new hy(!1),{VB:!0});var b=this;this.Hg=!0;this.KD=this.Bh=!1;P(this.element,{position:"relative",backgroundColor:"#000000",overflow:"hidden"});this.N.element.style.position="relative";this.Ab.style.position="absolute";this.Ab.style.width="88px";this.Ab.style.height="26px";this.Ab.style.top="6px";this.Ab.style.right="6px";this.Ab.style.visibility="hidden";eb()&&(this.Ab.style.opacity="0.5");this.Fb.rk.style.visibility="hidden";this.Fb.hg=this.N.Zh;this.Le=new JI(this);"IconVideoControls"===(new Tb(["IconVideoControls","TextVideoControls"],"vidctrls")).lq?this.Ka=new kA(this,this.Le):this.Ka=new FI(this,this.Le);MI(this);NI(this);this.$k();this.N.element.appendChild(this.Ab);ac(this,this.Fb);this.H(this.Le);this.H(this.Ka);this.Ka.show();this.element.onmousemove=function(){"split"===O()&&b.N.tb()}}r(LI,us);function OI(a,b){a.H(b);b.element.style.zIndex="2"}
function NI(a){a.Ka.qh.j(function(b){var c=b.pe;zs(a,b.Bk,null!==c&&void 0!==c?c:!0)});a.Ka.Gk.j(function(b){a.N.Bf(b)});a.Ka.ip.j(function(){a.N.Fi()});a.Ka.Rt.j(function(b){a.N.Hk(b.volume,b.T)});a.Ka.jp.j(function(b){a.N.element.insertBefore(b,a.N.element.firstChild)});a.Ka.kp.j(function(b){a.element.insertBefore(b,a.Ka.element)});a.Ka.Fp.j(function(){a.N instanceof hs&&(a.N.Hc.style.visibility="visible")});a.Ka.Nh.j(function(b){b?a.Le.show():a.Le.D()})}
function MI(a){a.Le.Xi.j(function(b){a.N.Ge(b)});a.Le.Us.j(function(b){a.Ka.Xi(b)});a.Le.At.j(function(b){a.Ka.Py(b)});a.Le.vy.j(function(){var b=a.Le,c=a.Ka.element.offsetHeight;b.element.style.left=a.N.element.offsetLeft+a.Ka.tw()+"px";b.element.style.bottom=c+"px"});a.Le.Vs.j(function(b){a.Ka.Oy(b)})}k=LI.prototype;k.Cq=function(){var a=this,b,c;us.prototype.Cq.call(this);this.N.yf.j(function(d){d?a.Ka.show():a.Ka.D()});null===(b=this.N.Dm)||void 0===b?void 0:b.j(function(d){var e=d.volume;d.save?a.Ka.ru(e):a.Ka.fi(e)});null===(c=this.N.qj)||void 0===c?void 0:c.j(function(d){var e=d.T;d.save?a.Ka.qu(e):a.Ka.Kf(e)});this.N.mc.j(function(d){a.Ka.Jx(d)});this.N.De.j(function(d){var e=a.Le;e.ej.clear();e.clear();for(var f=q(d),g=f.next();!g.done;g=f.next())g=g.value,e.ej.set(g.label,g.value),1===d.length&&(g.bi=!0),e.element.appendChild(e.br(g)),g.bi&&(e.Us.h(g.label),e.nr=g.value);0===d.length?e.At.h(!1):e.At.h(!0)})};k.gz=function(){this.N.element.style.position="relative"};k.G=function(){function a(){var d=b.N.Wb();b.Bh&&"split"===c&&b.N instanceof xs&&(d=32);if("theater"===c)b.Bh&&(b.N.element.style.height="100%",b.N.element.style.width="100%");else if("videoonly"===c){d=document.documentElement.clientHeight;var e=document.documentElement.clientWidth;b.element.style.height=(b.Hg?d:.75*e)+"px";b.element.style.width=(b.Hg?d/.5625:e)+"px";b.N.element.style.height="100%";b.N.element.style.width="auto"}else b.element.style.height=b.element.offsetWidth*(b.Hg?.5625:.75)+
d+"px",b.element.style.width="100%",b.N.element.style.height="100%",b.N.element.style.width="100%";b.N.element.style.left="0";b.Ab.style.visibility=Oc.Vt||b.Bh?"hidden":""}var b=this,c=O();switch(c){case "split":a();this.Bh||this.N.tb();break;case "videoonly":a();this.N.tb();break;case "theater":a();I()||this.N.tb();break;case "fullscreen":this.N.tb();break;case "noninteractive-fullscreen":break;default:u("Unexpected VideoMode: "+c)}};k.Fr=function(a){us.prototype.Fr.call(this,a);this.Ka.element.style.display="block";a=this.Ka;a.pg();a.show()};k.$k=function(){us.prototype.$k.call(this);this.Ka.Hx(this.N.Tm);this.Ka.Ix(this.N.Zh);this.N instanceof hs?(this.Ka.Ts(!0),this.Ka.Ss(this.N.Ri)):(this.Ka.Ts(!1),this.Ka.Ss(!1))};k.Pi=function(){return!1};function PI(a){LI.call(this,a)}r(PI,LI);PI.prototype.hv=function(){return"jpeg"};PI.prototype.Pi=function(){return!0};var QI;K.j(function(a){QI=a.A.B()});var RI={"---":"---",underage:Yf,advertising:Zf,abusive:$f,intoxicated:ag,"large toy":bg,"offline payments":cg,"public broadcast":dg,"service uniform":eg,sleeping:fg,gender:gg,other:hg};function SI(){F.call(this);var a=this;this.In=new D("closeReportAbuseRequest");this.element.id="AbuseReport";this.element.style.fontFamily="UbuntuBold, Arial, Helvetica, sans-serif";this.element.style.fontSize="11px";var b=document.createElement("form"),c=document.createElement("div");G(c,"defaultColor");this.ti=document.createElement("label");this.ti.style.margin="6px";this.ti.htmlFor="abuse-category";this.ti.innerText=Xf;c.appendChild(this.ti);this.ve=document.createElement("select");G(this.ve,"abuseInput");this.ve.id="abuse-category";this.ve.style.margin="6px";this.ve.style.boxSizing="border-box";for(var d in RI){var e=document.createElement("option");e.value=d;e.innerText=RI[d];this.ve.appendChild(e)}c.appendChild(this.ve);b.appendChild(c);c=document.createElement("div");c.style.paddingTop="6px";d=document.createElement("label");d.style.margin="6px";d.htmlFor="abuse-comments";d.innerText=ig;c.appendChild(d);this.yc=document.createElement("textarea");G(this.yc,"abuseInput");this.yc.id="abuse-comments";this.yc.maxLength=255;this.yc.style.width="100%";this.yc.style.resize="none";this.yc.style.margin="6px";this.yc.style.padding="4px";this.yc.style.borderWidth="1px";this.yc.style.borderStyle="solid";this.yc.style.borderRadius="4px";this.yc.style.boxSizing="border-box";this.yc.style.display="block";c.appendChild(this.yc);b.appendChild(c);this.Lj=document.createElement("div");this.Lj.style.cssFloat="right";this.Lj.style.fontFamily="UbuntuMedium, Arial, Helvetica, sans-serif";c=document.createElement("span");G(c,"submitSpan");c.innerText=tg;c.style.padding="3px 6px 4px 5px";c.style.marginRight="6px";G(c,"gradient");c.style.borderRadius="4px";c.style.boxSizing="border-box";c.style.cursor="pointer";c.style.display="inline-block";d=document.createElement("span");G(d,"cancelSpan");d.innerText=Wf;d.style.padding="3px 6px 4px 5px";d.style.marginRight="6px";G(d,"gradient");d.style.borderRadius="4px";d.style.boxSizing="border-box";d.style.cursor="pointer";d.style.display="inline-block";this.Lj.appendChild(d);this.Lj.appendChild(c);b.appendChild(this.Lj);v("click",c,function(f){f.preventDefault();"other"===a.ve.value&&""===a.yc.value?J("Please add a description of the abuse being reported."):"---"===a.ve.value?J("Please choose a category."):(a.Pt().then(function(g){g.success?J("Your abuse report has been submitted."):void 0!==g.Xr&&J(g.Xr)}).catch(function(g){403===g.ud.status?J(g.ud.responseText):J("Error sending abuse report ("+g+")")}),a.In.h(void 0))});v("click",d,function(){a.In.h(void 0)});this.element.appendChild(b)}
r(SI,F);SI.prototype.G=function(){this.ve.style.width=Math.max(0,this.element.clientWidth-12-(this.ti.offsetWidth+2*this.ti.offsetLeft))+"px";this.yc.style.width=Math.max(0,this.element.clientWidth-12)+"px";this.yc.style.height=Math.max(0,this.element.clientHeight-(this.Lj.offsetHeight+4*this.ti.offsetHeight+6+10))+"px"};SI.prototype.Pt=function(){var a=this;return new Promise(function(b,c){return z("abuse/report/"+QI+"/",{category:a.ve.value,additional_comments:a.yc.value}).then(function(d){d=new Q(d.responseText);var e={success:"success"===T(d,"result"),Xr:S(d,"html")};mm(d);b(e)}).catch(function(d){c(d)})})};function TI(a,b){var c=document.createElement("div");c.innerHTML=a;a=document.createElement("div");a.style.paddingTop="5px";var d=document.createElement("span");d.innerText=b;d.style.color="#0c6a93";d.style.padding="5px";d.style.display="inline";d.style.verticalAlign="top";a.appendChild(d);b=document.createElement("div");b.style.padding="0 10px";b.style.display="inline-block";d=q(c.getElementsByTagName("*"));for(var e=d.next();!e.done;e=d.next()){var f=e=e.value;"fixed"===f.style.position&&(f.style.position="absolute");"IMG"===f.tagName&&(e.className="bioImage");null!==f.style.top&&0>parseInt(f.style.top,10)&&(f.style.top="0");null!==f.style.marginTop&&0>parseInt(f.style.marginTop,10)&&(f.style.marginTop="0");null!==f.style.left&&0>parseInt(f.style.left,10)&&(f.style.left="0");null!==f.style.marginLeft&&0>parseInt(f.style.marginLeft,10)&&(f.style.marginLeft="0")}0!==c.children.length&&(c.children[0].style.display="unset");c.style.position="relative";b.appendChild(c);a.appendChild(b);return a}
function UI(a,b){function c(g){var h=document.createElement("div");h.style.padding="10px";h.style.position="relative";h.style.display="inline-block";h.style.height="100px";h.title=g.name;h.onmouseenter=function(){h.style.cursor="pointer";n.style.textDecoration="underline"};h.onmouseleave=function(){h.style.cursor="default";n.style.textDecoration="none"};h.onclick=function(){var p="resizable,dependent,scrollbars,height=520,width=803,top="+(screen.height/2-260).toString()+",left="+(screen.width/2-401.5).toString(),y="/photo_videos/photoset/detail/"+b+"/"+g.id;A("PhotoSetClicked",{source:"BioTab",photoset_id:g.id,cost:g.gd,is_video:g.ix});ij(y,void 0,p);return!1};var m=document.createElement("img");m.src=g.zA;m.width=150;m.height=100;m.className="userUpload";h.appendChild(m);g.AD||(m=document.createElement("img"),m.src="https://static-assets.highwebmedia.com/images/locked_rectangle4.png",m.width=150,m.height=100,m.style.top="10px",m.style.left="10px",m.style.position="absolute",m.style.border="none",h.appendChild(m));g.ix&&(m=document.createElement("img"),m.src="https://static-assets.highwebmedia.com/images/play3.png",m.height=20,m.style.position="absolute",m.style.top="10px",m.style.left="10px",h.appendChild(m));""!==g.Fo&&(m=document.createElement("span"),m.innerText=g.Fo,m.style.backgroundColor=g.xs,m.style.position="absolute",m.style.top="92px",m.style.right="15px",m.style.fontSize="10px",m.style.padding="2px",h.appendChild(m));var n=document.createElement("div");n.innerText=g.name;n.style.fontSize="12px";n.style.position="absolute";n.style.top="111px";n.style.left="0px";n.style.paddingLeft="13px";n.style.color="#0c6a93";n.style.maxWidth="145px";n.style.whiteSpace="nowrap";n.style.textOverflow="ellipsis";n.style.overflow="hidden";h.appendChild(n);return h}var d=document.createElement("div");d.style.position="relative";d.style.paddingTop="5px";d.style.paddingBottom="25px";var e=document.createElement("span");e.innerText=ae+":";e.style.color="#0c6a93";e.style.padding="5px";d.appendChild(e);e=document.createElement("div");e.style.paddingLeft="5px";a=q(a);for(var f=a.next();!f.done;f=a.next())e.appendChild(c(f.value));d.appendChild(e);return d}
function VI(a,b){function c(g){var h=document.createElement("div");h.style.padding="10px";h.style.position="relative";h.style.display="inline-block";h.style.height="100px";h.title=g.rz;h.onmouseenter=function(){h.style.cursor="pointer";n.style.textDecoration="underline"};h.onmouseleave=function(){h.style.cursor="default";n.style.textDecoration="none"};h.onclick=function(){ij("/socials/social_media/"+b+"/"+g.id,void 0,"resizable,dependent,scrollbars,height=520,width=803,top="+(screen.height/2-260).toString()+
",left="+(screen.width/2-401.5).toString());return!1};var m=document.createElement("img");m.src=g.Ll;m.width=150;m.height=100;m.className="userUpload";h.appendChild(m);m=document.createElement("span");m.innerText=g.Fo;m.style.backgroundColor=g.xs;m.style.position="absolute";m.style.top="92px";m.style.right="15px";m.style.fontSize="10px";m.style.padding="2px";h.appendChild(m);var n=document.createElement("div");n.innerText=g.rz;n.style.fontSize="12px";n.style.position="absolute";n.style.top="111px";n.style.left="0px";n.style.paddingLeft="13px";n.style.color="#0c6a93";n.style.maxWidth="145px";n.style.whiteSpace="nowrap";n.style.textOverflow="ellipsis";n.style.overflow="hidden";h.appendChild(n);return h}var d=document.createElement("div");d.style.position="relative";d.style.paddingTop="5px";d.style.paddingBottom="25px";var e=document.createElement("span");e.innerText=qf+":";e.style.color="#0c6a93";e.style.padding="5px";d.appendChild(e);e=document.createElement("div");e.style.paddingLeft="5px";a=q(a);for(var f=a.next();!f.done;f=a.next())e.appendChild(c(f.value));d.appendChild(e);return d}
function WI(a){function b(f,g){var h=document.createElement("div"),m=document.createElement("div");m.style.position="relative";m.style.paddingLeft="5px";m.style.display="inline";var n=document.createElement("span");n.style.color="#0c6a93";n.innerText=f;m.appendChild(n);f=document.createElement("div");f.style.position="absolute";f.style.paddingRight="5px";f.style.display="inline";f.style.left="150px";f.style.overflow="hidden";f.style.textOverflow="ellipsis";f.style.whiteSpace="nowrap";n=document.createElement("span");n.style.whiteSpace="nowrap";n.innerText=g;f.appendChild(n);h.style.paddingTop="5px";h.appendChild(m);h.appendChild(f);return h}var c=document.createElement("div"),d=a.username.charAt(0).toUpperCase()+a.username.slice(1);if("public"===a.ib){var e=document.createElement("a");e.href="./?"+a.username;e.text="View "+d+"'s Cam";e.style.position="relative";e.style.padding="5px 5px 5px 0";e.style.textAlign="right";e.style.display="inline-block";e.style.width="100%";e.style.fontSize="14px";e.style.textDecoration="none";e.onmouseenter=function(){e.style.textDecoration="underline"};e.onmouseleave=function(){e.style.textDecoration="none"};v("click",e,function(f){f.preventDefault();tj.h(a.username)});c.appendChild(e)}""!==a.ny&&c.appendChild(b(be+":",a.ny));isNaN(a.iw)||c.appendChild(b(ce+":",a.iw.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")));""!==a.Ik&&("Couple"===a.Ik?c.appendChild(b(ee+":",""+a.Ik.charAt(0).toUpperCase()+a.Ik.substring(1))):c.appendChild(b(de+":",""+a.Ik.charAt(0).toUpperCase()+a.Ik.substring(1))));""!==a.Mv&&c.appendChild(b(fe+":",a.Mv));isNaN(a.Rj)||c.appendChild(b(ge+":",a.Rj.toString()));""!==a.Qu&&c.appendChild(b(he+":",a.Qu));""!==a.Pu&&c.appendChild(b(ie+":",a.Pu));""!==a.Ww&&(d=JSON.parse(a.Ww).join(", "),c.appendChild(b(je+":",d)));""!==a.location&&c.appendChild(b(ke+":",a.location));void 0!==a.nx&&c.appendChild(b(le+":",a.nx));""!==a.languages&&c.appendChild(b(me+":",a.languages));""!==a.Yy&&c.appendChild(b(ne+":",a.Yy));return c}
function XI(a){F.call(this);var b=this;this.element.style.color="#000";YI(this,WF(a));this.By=function(c){YI(b,WF(c.C.B))};K.j(this.By,!1)}r(XI,F);function YI(a,b){void 0!==a.content&&a.element.removeChild(a.content.Ga);var c=document.createElement("span");c.innerText=pe+"...";a.element.appendChild(c);a.element.style.display="block";b.then(function(d){var e=document.createElement("div");e.style.fontSize="14px";var f=WI(d.gk);e.appendChild(f);var g=void 0;0<d.Zy.length&&(g=VI(d.Zy,d.gk.username),e.appendChild(g));var h=void 0;0<d.cy.length&&(h=UI(d.cy,d.gk.username),e.appendChild(h));var m=void 0;""!==d.Du&&(m=TI(d.Du,Zd+":"),e.appendChild(m));var n=void 0;""!==d.Gz&&(n=TI(d.Gz,$d+":"),e.appendChild(n));a.content={Ga:e,gk:f,CH:g,XG:h,UH:m,eI:n};a.content.Ga.style.position="relative";a.content.Ga.style.paddingRight="3px";a.content.Ga.style.cursor="default";a.content.Ga.style.overflow="scroll";a.content.Ga.style.height="100%";a.element.removeChild(c);a.element.appendChild(a.content.Ga);a.Y()}).catch(function(d){u("Bio Content error: "+d);d=document.createElement("div");d.style.position="absolute";d.style.height="100%";d.style.width="100%";d.style.top="0";d.style.left="0";d.style.display="block";var e=document.createElement("span");e.innerText=oe;e.style.display="block";e.style.padding="10px";d.appendChild(e);a.content={Ga:d};a.element.removeChild(c);a.element.appendChild(a.content.Ga)})}XI.prototype.G=function(){if(void 0!==this.content&&void 0!==this.content.gk)for(var a=q(this.content.gk.childNodes),b=a.next();!b.done;b=a.next())b=b.value.childNodes[1],void 0!==b&&(b.style.maxWidth=this.element.offsetWidth-150-5+"px")};XI.prototype.Nf=function(){K.removeListener(this.By)};function ZI(){Ll.call(this);var a=this;this.K=0;this.element.id="chat-box";this.element.style.overflow="";this.F=new AI({km:function(b){sj.h(b)},lm:function(){HB(a.A)},im:function(b){LB(a.A,b)}});this.H(this.F);this.tq=new mG({ba:function(b,c){return a.F.ba(b,c)},rp:function(b){a.F.rp(b)},Dl:function(){return a.F.Dl()},Qo:function(b){return a.F.Qo(b)},hB:function(){return a.F.Sa.scrollTop},gB:function(){return a.F.element.offsetHeight}});K.j(function(b){a.A=b.A;a.F.ba(YH("Rules: No spamming. Do not insist the cam hosts to do as you please. Do not announce other rooms or websites that would conflict with this room. Avoid any argumentative and/or rude posts related to the cam viewing. Do not attempt to post your e-mail address in the public chat."));a.F.ba(YH('To send a tip, press CTRL+S or type "/tip 25".'));if(0<b.C.vg.length){var c=a.F,d=c.ba,e=b.C.B;b=b.C.vg;var f=RH(),g=document.createElement("span");g.innerText=Lc(e);f.appendChild(g);for(e=0;e<b.length;e+=1)g=document.createElement("a"),g.href=b[e].Hu,g.target="_blank",g.innerText=b[e].uq,g.style.color=OH("#1c8fc8"),g.style.textDecoration="none",f.appendChild(g),e<b.length-1&&(g=document.createElement("span"),g.innerText=", ",f.appendChild(g));f.style.color=OH("#aaaaaa");d.call(c,f)}});vc.j(function(){a.F.clear()})}r(ZI,Ll);k=ZI.prototype;k.Zd=function(){return this.K};k.G=function(){Ll.prototype.G.call(this)};k.eb=function(){this.F.eb()};k.gf=function(){return[document.createTextNode(99<this.K?ue+" (99+)":0<this.K?ue+" ("+this.K+")":ue)]};k.Cg=function(){return"chat-tab-fvm"};k.Vc=function(){this.F.Vc()};k.ue=function(){};k.Ad=function(){return this.F.Ad()};function $I(a){Ql(a)||(a.K+=1);a.Pb()}k.Za=function(){Ll.prototype.Za.call(this);this.K=0;this.Pb();this.F.eb()};k.io=function(a){for(var b=[],c=q(this.F.za.childNodes),d=c.next();!d.done;d=c.next())d=d.value,d.getAttribute("data-nick")===a&&b.push(d);a=q(b);for(b=a.next();!b.done;b=a.next())this.F.za.removeChild(b.value)};k.oi=function(a){this.F.oi(a)};k.Bg=function(){return this.F.va};k.Md=function(a){Ll.prototype.Md.call(this,a);A("FocusTab",{location:"chat"})};function aJ(a){Ll.call(this);var b=this;this.Bs=a;this.K=0;this.nm=new D("incomingPm");this.Xb=new Map;this.ha=new aG;this.Ot=function(c){var d=b.Xb.get(b.ha.Xa);d.bl||(d.F.ba(YH(c)),d.bl=!0)};this.element.style.overflow="";this.qd=new WC({ra:!1,bg:!0,xf:co,ei:function(c){c!==b.K&&(b.K=c,b.Pb())}});this.H(this.qd);aq.j(function(c){b.zd();bJ(b);void 0===b.Xb.get(c.username)&&b.Gg(c.username,!1,c.Nm);eG(b.ha,c.username);b.Pb();b.Ug();c.focus&&Ol(b)});K.j(function(c){b.A=c.A;b.Os=c.C.userName;b.B=c.C.B});eo.j(function(c){b.wi(c)});co.j(function(c){b.zd();eG(b.ha,c);b.Ug()});wF.j(function(c){b.Mm(c,!0)});xF.j(function(){A("IgnoreUser",{location:"PMTab"});b.A.mf(b.ha.Xa)});dq.j(function(){var c=b.Xb.get(b.ha.Xa);!1===c.Nl&&b.Ds(c)});iC.j(function(c){b.ha.kd(c);b.Gg(c,!1,!1)});$n.j(function(c){var d=cJ(b);b.zh()&&dJ(b)&&void 0!==d&&d.es()&&(c.Ya!==d.username||oI(d.F)||ho.h(d.username))})}r(aJ,Ll);k=aJ.prototype;k.Mm=function(a,b){b=void 0===b?!1:b;a&&(this.zd(),a=this.A.B()===this.Os,b||1<this.qd.bb.childNodes.length||a?(this.qd.element.style.display="block",this.qd.Y()):(eG(this.ha,this.A.B()),this.Ug()))};function bJ(a){a.qd.element.style.display="none"}k.eb=function(){var a=cJ(this);void 0!==a&&a.F.eb()};k.Zd=function(){return this.K};k.gf=function(){return[document.createTextNode(99<this.K?"PM (99+)":0<this.K?"PM ("+this.K+")":"PM")]};k.Md=function(){A("FocusTab",{location:"PM",unread:this.Zd()});Ol(this);this.Mm(!0)};k.lk=function(){return!1};k.Cg=function(){return"pm-tab-fvm"};function dJ(a){return"block"===a.element.style.display}k.Vc=function(){var a=cJ(this);void 0===a?u("session undefined"):a.F.Vc()};k.ue=function(){};k.Ad=function(){var a=cJ(this);return void 0===a?(u("session undefined"),!1):a.F.Ad()};k.G=function(){Ll.prototype.G.call(this);var a=cJ(this);void 0!==a&&a.F.eb()};k.Gg=function(a,b,c,d){var e=this;d=void 0===d?!1:d;var f,g,h=this.Xb.get(a);if(void 0===h){var m=rA();m.innerHTML=Mc(a);m.style.textAlign="center";m.style.width="auto";m.style.borderBottom="1px solid #acacac";m.style.margin="0 10px 5px 5px";m.style.display="none";m.style.color="#cfcfcf";var n=new AI({km:function(p){sj.h(p)},lm:function(){HB(e.A)},im:function(p){e.ha.kd(a);lC({message:p,username:a,source:"roomviewPM",Z:e.A.B(),Wv:e.Ot})}},!0);h={F:n,K:0,hm:0,username:a,Nj:m,Kg:new zF,pf:!1,Ql:!1,Nl:!1,bl:!1,es:function(){return"none"!==n.element.style.display}};n.oj.j(function(){e.zh()&&dJ(e)&&cJ(e)===h&&ho.h(a)});this.Xb.set(a,h);h.F.ug(YH(cd(a)));h.F.ug(YH(Nc()));!b&&c?(c=null!==(g=null===(f=Ja.current.xb)||void 0===f?void 0:f.hb)&&void 0!==g?g:!1,h.F.ug(ZH(a,c))):h.F.ug(h.Kg.sw());h.F.element.style.display="none";this.H(h.F)}else h.Nj.style.display="";d||!0!==b||h.Ql||(h.Ql=!0,this.nm.h({username:a}));void 0===this.ha.Xa&&eG(this.ha,a);return h};k.Ds=function(a){if(!a.Kg.Xc()){a.Kg.Xy();var b=a.F.za.clientHeight,c=a.F.vr;void 0!==c&&(c=vb({offset:c,room:this.A.B()}),Gb("api/ts/chatmessages/pm_list/"+a.username+"/?"+c).then(function(d){a.Kg.Iw();d=JSON.parse(d.responseText).messages;30>d.length&&(a.Nl=!0);var e=d.length-1;d.reverse().map(function(f,g){f=Xn(new Q(f));a.F.ba(QH(f,1),void 0,!0,!0);g===e&&void 0!==f.Zc&&a.F.Em(f.Zc)});a.F.Sa.scrollTop=a.F.za.clientHeight-b}).catch())}};k.ba=function(a,b,c,d,e){d=void 0===d?!1:d;this.ha.kd(c);var f=this.Gg(c,b!==this.A.username(),!1,d);d&&!1===f.pf&&(f.pf=!0);this.A.username()===b||Ql(this)&&this.ha.Xa===c||(f.K+=1,f.hm+=1,this.Pb());f.pf&&(a=f.F.ba(a,void 0,void 0,!0));void 0!==e&&f.F.Em(e);return a};k.om=function(a){if(Ql(this)){var b=cJ(this);void 0!==b&&b.F.ba(a)}};function cJ(a){if(void 0!==a.ha.Xa)return a.Xb.get(a.ha.Xa)}function eJ(a){return a.Gp("next")}
k.Gp=function(a){function b(){return"next"===a?bG(c.ha):cG(c.ha)}var c=this;this.zd();for(var d=b(),e=!1;void 0!==d&&d!==this.A.B()&&!this.qd.Sg.has(d)&&0!==this.qd.eh();)this.ha.remove(d),d=b(),void 0!==d||e||("next"===a?fJ(c):(c.zd(),dG(c.ha)),d=b(),e=!0);if(void 0===d)return!1;this.Ug();return!0};k.wi=function(a){if(a!==this.B){var b=this.Xb.get(a);if(void 0!==b){var c=Ql(this)&&this.ha.Xa===a;this.ha.remove(a);b.F.Lb();this.removeChild(b.F);this.Xb.delete(a);c&&(eJ(this)||this.Bs());this.Pb();eo.h(b.username);fo.h(b.username)}}};k.vi=function(){var a=cJ(this);void 0===a?u("cannot close current tab"):this.wi(a.username)};function fJ(a){a.zd();for(a=a.ha;;){var b=a.zi.Se.pop();if(void 0===b)break;$F(a.Bi,b)}void 0!==a.Xa&&($F(a.Bi,a.Xa),a.Xa=void 0)}function gJ(a){a.zd();a.ha=new aG}
k.Ug=function(){var a=this.ha.Xa;void 0===a&&(a=this.A.B(),eG(this.ha,a));var b=this.Xb.get(a);void 0===b&&this.Gg(a,!1,!1);b=this.Xb.get(a);!this.zh()||b.pf||this.A.Qe||(b.pf=!0,kC(b.username,this.A.B()));bJ(this);b.F.element.style.display="block";b.F.Y();dJ(this)&&this.zh()&&(0<b.K&&(b.K=0,this.Pb()),ho.h(b.username),wc.h(b.username));b.F.ba(b.Nj);b.username!==this.B&&b.F.ba(b.Nj)};k.zd=function(){var a=cJ(this);void 0!==a&&(a.F.element.style.display="none")};k.Bg=function(){var a=cJ(this);if(void 0!==a)return a.F.va};k.zh=function(){var a=O();return"theater"===a||"fullvideo"===a||"fullscreen"===a};function hJ(){function a(){if(!b.Hm&&(qr(b.Kb),void 0!==b.parent)){var f=b.parent;Ml(f,f.children()[0])}}Ll.call(this);var b=this;this.Kb=new gr;this.Hm=!1;this.element.id="FVChatSettingsTab";this.element.style.fontSize="12px";this.element.style.fontFamily="Tahoma, Arial, Helvetica, sans-serif";ac(this,this.Kb);H(this.Kb.Vl,"link");G(this.Kb.Vl,"manage-ignored-link");this.ia=uI();this.ia.style.position="absolute";var c=tI();this.pb=vI(function(){return!1},4096);v("click",this.pb.element,a);v("focus",this.pb.element,a);this.$b=(new wI(void 0,!1)).element;this.$b.style.fontFamily="UbuntuRegular, Helvetica, Arial, sans-serif";this.wj=yI();this.wj.style.fontFamily="UbuntuRegular, Helvetica, Arial, sans-serif";c.appendChild(this.pb.element);this.ia.appendChild(c);this.ia.appendChild(this.$b);this.ia.appendChild(this.wj);this.element.appendChild(this.ia);var d=document.createElement("div");d.innerText=te;d.style.position="absolute";d.style.top="10px";d.style.right="10px";d.style.fontFamily="UbuntuRegular, Helvetica, Arial, sans-serif";d.style.color="#000000";d.style.backgroundColor="#d8deea";d.style.border="1px solid #acacac";d.style.borderRadius="4px";d.style.padding="8px 12px";d.style.opacity="0";this.element.appendChild(d);Yj.Td.j(function(){"split"!==O()&&ac(b,b.Kb)});var e;this.Kb.Jq.j(function(){clearTimeout(e);pq(d,"250ms");d.style.opacity="1";e=window.setTimeout(function(){pq(d,"1000ms");d.style.opacity="0"},3E3)})}r(hJ,Ll);k=hJ.prototype;k.Li=function(){return Object.assign(Object.assign({},Ll.prototype.Li.call(this)),{minWidth:"16px",backgroundImage:Vb()?"":"url(https://static-assets.highwebmedia.com/tsdefaultassets/ico-preferences.png)",backgroundRepeat:"no-repeat",backgroundPosition:"center"})};k.G=function(){if("split"!==O()){this.ia.style.width=this.element.clientWidth+"px";var a=this.$b.getBoundingClientRect();a=a.right-a.left;var b=this.wj.getBoundingClientRect();a=this.ia.clientWidth-12-6-Math.ceil(b.right-b.left+a)-4;a=Math.max(0,a);this.pb.element.style.width=a+"px";this.Kb.element.style.height=this.element.clientHeight-27+"px"}};k.gf=function(){return Vb()?[Uj(3)]:Ll.prototype.gf.call(this)};k.Cg=function(){return"settings-tab-fvm"};k.Vc=function(){};k.ue=function(){this.pb.blur()};k.Ad=function(){return document.activeElement===this.pb.element};k.eb=function(){};k.Bg=function(){return this.pb};k.Md=function(a){Ll.prototype.Md.call(this,a);A("FocusTab",{location:"chatSettings"})};function iJ(){Hl.call(this);var a=this;this.de=!1;this.Mg=new Yb;this.element.style.overflow="";this.W=Il(this,new ZI);this.qa=Il(this,new aJ(function(){Ml(a,a.W)}));this.sj=Il(this,new hJ);Ml(this,this.W);Vb()?(this.W.P.element.style.borderTopLeftRadius="4px",this.sj.P.element.textContent="",this.sj.P.element.appendChild(Uj(2))):this.Rb.element.style.padding="1px 2px 0 0";K.j(function(c){a.de=c.C.userName===c.C.B;a.A=c.A;a.Z=c.C.B;Ml(a,a.W);gJ(a.qa);c.A.event.Ek.j(function(d){a.Qs(d,c.A.username())});c.A.event.Aa.j(function(d){a.$l(d,c.A.username())});ao.j(function(d){a.$l(d,c.A.username())});c.A.event.jy.j(function(d){var e=QH(d,jJ(a));a.qa.ba(e,d.O.username,d.Ya)});c.A.event.sp.j(function(d){a.W.io(d.username);a.W.F.xt(d.username);a.qa.wi(d.username)});c.A.event.sq.j(function(d){c.A.al&&a.W.F.ba(YH("DEBUG: "+d))});c.A.event.Xo.j(function(d){a.Fl(d,c)});B($n.j(function(d){a.qa.ba(QH(d,jJ(a)),d.O.username,d.Ya)},!1),a.Mg);B(hC.j(function(d){var e=d.ax?d.Zc:void 0;a.qa.ba(QH(d,jJ(a)),d.O.username,d.Ya,!0,e)},!1),a.Mg);B(bo.j(function(d){a.W.F.ba(YH(d.message))},!1),a.Mg)});vc.j(function(){Zb(a.Mg)});cq.j(function(c){c?a.W.F.ba(YH("Debug mode enabled. Type /debug again to disable.")):a.W.F.ba(YH("Debug mode disabled."))});xc.j(function(c){a.W.F.ba($H(c));c.na&&a.qa.om($H(c))});bq.j(function(c){"split"!==O()&&(Ml(a,a.W),a.W.oi("@"+c+" "))});var b=new XF;this.qa.nm.j(function(c){YF(b,c.username)&&JB(a.A,"a",!1).then(function(d){-1!==d.Je.map(function(e){return e.username}).indexOf(c.username)&&a.W.F.ba(TH({ja:[[{ic:1,message:"New private conversation from "+c.username+" "},{ic:1,message:"(Press TAB to cycle through your conversations)",Na:"#cd0000",weight:"700"}]],na:!1},jJ(a)))}).catch()})}r(iJ,Hl);k=iJ.prototype;k.Fl=function(a,b){return Or(this,function d(){var e=this,f,g,h,m,n;return Aa(d,function(p){if(1==p.ma)return f=e,e.de||a.Kk===b.C.userName?p=sa(p,qG({Lu:a.Xg,wv:a.Kk,hx:!a.Ah,Ey:b.C.B}),3):(p.ma=0,p=void 0),p;g=p.se;h=function(y,C){return f.Fl(y,C)};m=function(y){f.Yt(y)};n=sG(a,g,b,m,h);void 0!==n&&e.W.F.ba(n);p.ma=0})})};k.Yt=function(a){this.W.F.ba(YH(a))};k.Qs=function(a,b){$I(this.W);jF(lF(),a.O);a=QH(a,jJ(this),b);this.W.F.ba(a)};k.$l=function(a,b){b=TH(a,jJ(this),b);this.W.F.ba(b);a.na&&this.qa.om(TH(a,jJ(this)))};function jJ(a){return a.de?0:1}k.G=function(){this.window.style.height=this.element.clientHeight-this.Rb.element.offsetHeight+"px"};k.ec=function(){return Hl.prototype.ec.call(this)};k.children=function(){return Hl.prototype.children.call(this)};k.Ev=function(){qr(this.sj.Kb);Hl.prototype.ec.call(this)===this.W?this.qa.lk()||(Ml(this,this.qa),fJ(this.qa),eJ(this.qa)||u("no pmSessions")):0<this.W.Zd()?Ml(this,this.W):eJ(this.qa)||Ml(this,this.W)};k.vi=function(){Hl.prototype.ec.call(this)===this.qa&&this.qa.vi()};var kJ=new D("emojiAdded"),lJ="\ud83c\udffb \ud83c\udffc \ud83c\udffd \ud83c\udffe \ud83c\udfff ".split(" "),mJ=new D("toneChange",{Bd:500});function nJ(a){Dc.call(this);var b=this;this.lb=a;this.Bv="";this.oy=new Yb;this.Iy=new Yb;oJ(this);this.hc.j(function(){b.D()});v("keydown",document,function(c){(tE(c.which)||27===c.keyCode||13===c.keyCode)&&b.D()});v("keydown",this.ig,function(c){c.stopPropagation()});v("click",this.element,function(c){c.stopPropagation();window.setTimeout(function(){""!==b.ig.value&&b.ig.focus()},0)})}r(nJ,Dc);nJ.prototype.ya=function(){var a=this;Dc.prototype.ya.call(this);var b={position:"relative",padding:"8px 8px 0px 8px",height:"219px",boxSizing:"border-box",overflowY:"scroll"},c=new uk(function(){pJ(a)},{xc:200,md:1});this.Ue=Kj("","","",1);G(this.Ue,"divot");this.Ue.style.bottom="-37px";var d;this.element=N("div",{style:{position:"absolute",visibility:"hidden",width:"284px",height:"261px",borderWidth:"1px",borderStyle:"solid",borderRadius:"4px",boxSizing:"border-box",fontFamily:"UbuntuMedium, Helvetica, Arial, sans-serif",fontSize:"12px",bottom:"60px",zIndex:1001},colorClass:"emojiSelectionModal"},N("div",{style:{position:"static",width:"calc(100% - 8px)",height:"28px",boxSizing:"border-box",margin:"4px",borderWidth:"1px",borderStyle:"solid",borderRadius:"4px"},colorClass:"searchBar"},N("div",{style:{position:"relative",width:"15px",height:"15px",top:"50%",transform:"translateY(-50%)",cssFloat:"left",left:"7px"},colorClass:"searchIcon"}),N("div",{style:{marginLeft:"22px",height:"100%"}},N("input",{style:{position:"static",width:"calc(100% - 10px)",height:"calc(100% - 2px)",padding:"0px",borderWidth:"0px",marginLeft:"4px",outline:"none"},ref:function(e){a.ig=e},onInput:function(){vk(c)}}))),N("div",{style:b,ref:function(e){a.zr=e}},N("a",{style:{position:"absolute",lineHeight:"14px",right:"22px",top:"9px",cursor:"pointer"},ref:function(e){d=e},onMouseEnter:function(){P(d,{textDecoration:"underline"})},onMouseLeave:function(){P(d,{textDecoration:""})},colorClass:"uploadLink",onClick:function(){return qJ(a)}},Ye)),N("div",{style:Object.assign({display:"none"},b),ref:function(e){a.Sh=e}}),rJ(this),this.Ue)};function oJ(a){KD();sJ(a,Pe,"recent",function(b){a.zk=b});sJ(a,Qe,"smileys-people");sJ(a,Re,"animals-nature");sJ(a,Se,"food-drink");sJ(a,Te,"activities");sJ(a,Ue,"travel-places");sJ(a,Ve,"objects");sJ(a,We,"symbols");sJ(a,Xe,"flags")}
function sJ(a,b,c,d){d=void 0===d?function(){}:d;var e;b=N("div",null,N("div",{style:{lineHeight:"16px"},colorClass:"sectionTitle"},b),N("div",{ref:function(f){e=f;d(f)}}));a.zr.appendChild(b);LD(c).then(function(f){tJ(a,e,f)}).catch()}
function tJ(a,b,c,d){var e={};c=q(c);for(var f=c.next();!f.done;e={hi:e.hi,Wk:e.Wk},f=c.next())e.hi=f.value,e.Wk=N("div",{style:{position:"relative",display:"inline-block",width:"32px",height:"32px",cursor:"pointer",borderRadius:"2px",fontSize:"22px"},colorClass:"emojiDiv",onClick:function(g){return function(){var h=g.hi,m=b===a.zk,n=uJ(h,a.Bv),p=a.lb.ec().Bg();void 0!==p&&(BE(p,n),kJ.h(void 0),A("emojiAdded",{name:h.name,value:h.value}),h=ID(h),m?a.qt=h:vJ(a,h))}}(e)}),wJ(e.Wk,e.hi.value),uJ(e.hi,"\ud83c\udffd")!==e.hi.value&&(f=mJ.j(function(g){return function(h){wJ(g.Wk,uJ(g.hi,h))}}(e)),null===d||void 0===d?void 0:d.add(f)),b.appendChild(e.Wk)}function vJ(a,b){if(null!==a.zk.parentNode){var c=a.zk.cloneNode(!1);Zb(a.oy);tJ(a,c,b,a.oy);a.zk.parentNode.replaceChild(c,a.zk);a.zk=c}}
function rJ(a){var b={height:"24px",width:"24px",fontSize:"24px",position:"relative",top:"50%",transform:"translateY(-50%)",cssFloat:"left",marginRight:"8px",cursor:"pointer"};window.setTimeout(function(){mJ.j(function(h){a.Bv=h;a.Dv.textContent="\ud83d\udc4b"+h;twemoji.parse(a.Dv,{className:"emojiToneChoice"})});mJ.h(xJ())},0);for(var c=N("div",{style:{position:"relative",left:"-1px",borderWidth:"1px",borderStyle:"solid",borderRadius:"0px 0px 3px 3px",width:"100%",height:"40px"},colorClass:"toneSelect"},N("div",{style:{position:"relative",cssFloat:"right",height:"100%",right:"17px"}},N("div",{style:{position:"relative",top:"50%",transform:"translateY(-50%)",cssFloat:"left",marginRight:"8px"},colorClass:"sectionTitle"},Ze+": "),N("div",{style:{position:"relative",width:"32px",height:"32px",top:"50%",transform:"translateY(-50%)",borderRadius:"2px",cssFloat:"left",cursor:"pointer"},colorClass:"currentToneContainer",ref:function(h){a.Cv=h},onClick:function(){a.Cv.style.display="none";a.ku.style.display="inline-block"}},N("div",{style:{height:"24px",width:"24px",fontSize:"24px",position:"relative",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},ref:function(h){a.Dv=h}})),N("div",{style:{fontSize:"24px",display:"none",height:"100%"},ref:function(h){a.ku=h}}))),d={},e=q(lJ.entries()),f=e.next();!f.done;d={pn:d.pn},f=e.next()){f=q(f.value);var g=f.next().value;d.pn=f.next().value;f=g===lJ.length-1?Object.assign(b,{marginRight:"4px"}):b;f=N("div",{style:f,onClick:function(h){return function(){var m=h.pn;window.localStorage.setItem("emojiTone",m);mJ.h(m);yJ(a)}}(d)},"\ud83d\udc4b"+d.pn);twemoji.parse(f,{className:"emojiToneChoice"});a.ku.appendChild(f)}return c}function yJ(a){a.Cv.style.display="inline-block";a.ku.style.display="none"}function xJ(){var a,b=null!==(a=window.localStorage.getItem("emojiTone"))&&void 0!==a?a:"";return-1===lJ.indexOf(b)?(u("Bad emojiTone value",b),""):b}
function uJ(a,b){var c=GD(a.value)[0],d=a.value.split(c);1<d.length&&d[1][0]===twemoji.convert.fromCodePoint("fe0f")&&(d[1]=d[1].slice(1,d[1].length));b=d.join(c+b);return HD(twemoji.parse(b))?b:a.value}
function pJ(a){var b=a.ig.value;1>=b.length?(P(a.zr,{display:"block"}),P(a.Sh,{display:"none"})):(P(a.zr,{display:"none"}),P(a.Sh,{display:"block"}),qE(b).then(function(c){if(null!==a.Sh.parentNode){var d=a.Sh.cloneNode(!1);a.Sh.parentNode.replaceChild(d,a.Sh);a.Sh=d}Zb(a.Iy);tJ(a,a.Sh,c,a.Iy)}).catch())}
function wJ(a,b){var c=twemoji.parse(b),d=c.match(/<img/g);if(null!==d&&1<d.length&&(c=new RegExp(twemoji.convert.fromCodePoint("fe0f"),"g"),b=b.replace(c,""),c=twemoji.parse(b),d=c.match(/<img/g),null!==d&&1<d.length))return;b=c.match(new RegExp('src="'+twemoji.base+'72x72/(.*?).png"'));if(null!==b){b=b[1];c=N("span",{style:{position:"relative",display:"block",top:"50%",left:"50%"}});c.classList.add("sprite-twemoji-"+b);for(c.classList.add("sprite-twemoji");null!==a.firstChild;)a.removeChild(a.firstChild);a.appendChild(c)}}function qJ(a){window.use_uploaded_emoticon=function(b){var c=a.lb.ec().Bg();if(void 0!==c){var d=EE(c);""===d||/\s/.test(d[d.length-1])?BE(c,b,!0):BE(c," "+b,!0)}};ij("/emoticons/","_blank","height=615, width=850");a.D();return!1}nJ.prototype.show=function(a){a.appendChild(this.V);a.appendChild(this.element);this.Mh();this.Vg();this.element.style.visibility="";A("emojiSelectorOpened")};nJ.prototype.D=function(){if("hidden"!==this.element.style.visibility){this.mb();yJ(this);this.element.style.visibility="hidden";this.ig.value="";pJ(this);var a=this.lb.ec().Bg();void 0!==a&&a.focus(!0);void 0!==this.qt&&(vJ(this,this.qt),this.qt=void 0)}};nJ.prototype.Mh=function(){this.element.style.left=-this.element.offsetWidth+35+"px";this.Ue.style.left=this.element.offsetWidth-37+"px";0>this.element.getBoundingClientRect().left+window.scrollX&&(this.element.style.left="-25px",this.Ue.style.left="23px")};function zJ(a){var b=new iJ;Gp.call(this,a,b,{Ne:"Chat",minWidth:150,minHeight:100,$e:400,Ze:250,Tf:[1,3],Ph:!0,Mx:function(){c.lb.ec().eb()},Mr:[b.Rb.element]});var c=this;G(this.element,"draggableCanvasChatWindow");G(this.element,"hasDarkBackground");H(this.Fc,"innerDiv");G(this.Fc,"chatInnerDiv");b.W.F.mw.j(function(){c.blur()});v("blur",b.W.F.va.element,function(){if(a.Wr!==c||Rm())a.xd=void 0,a.gw.h(void 0)});v("mouseleave",this.element,function(){a.Wr=void 0;a.Fz.h(void 0)});var d=!0;K.j(function(f){d=f.A.Qe});var e;Yj.Td.j(function(f){e=f.nh;void 0!==c.Di&&"split"===e&&c.Di.D()});$p.j(function(f){d?yq.h(!0):"split"!==e&&(void 0===c.Di&&(c.Di=new nJ(b)),c.Di.show(f))});this.lb=b}r(zJ,Gp);function AJ(a){F.call(this);var b=this;this.ap=a;this.element.style.position="static";this.element.style.overflow="auto";this.element.style.padding="4px 7px";this.element.style.boxSizing="border-box";this.element.style.fontSize="12px";this.element.style.minWidth="230px";this.element.style.maxWidth="230px";this.element.style.height="auto";a=q(this.children());for(var c=a.next();!c.done;c=a.next())c.value.element.style.margin="2px 0";K.j(function(d){var e=d.C.te;BJ(b,e,d.A.status);d.A.event.ac.j(function(f){BJ(b,e,f.La)});d.A.event.Xh.j(function(f){e=f.te;BJ(b,e,d.A.status)})})}r(AJ,F);function BJ(a,b,c){cc(a);a:switch(c){case "privatewatching":case "privatespying":var d=!0;break a;default:d=!1}if(d)void 0===a.$u&&(a.$u=new CJ),a.H(a.$u);else{a:switch(c){case "privaterequesting":b=!0;break a;case "privatespying":case "privatewatching":case "privatenotwatching":case "away":b=!1}b&&(void 0===a.rm&&(a.rm=new DJ(a.ap)),a.H(a.rm))}a.ap()}
function EJ(){F.call(this);G(this.element,"showsComponent");this.element.style.display="inline-block";this.element.style.height="auto";this.element.style.position="relative";this.element.style.padding="5px 5px";this.element.style.borderWidth="1px";this.element.style.borderStyle="solid";this.element.style.boxSizing="border-box";this.element.style.borderRadius="3px";this.element.style.font="UbuntuRegular, Arial, Helvetica, sans-serif";this.element.style.fontSize="12px";this.element.style.lineHeight="14px";this.element.style.textAlign="center"}r(EJ,F);function FJ(){var a=document.createElement("div");G(a,"showsHeader");a.innerText=Fg;a.style.width="100%";a.style.margin="5px 0";a.style.fontSize="14px";a.style.fontFamily="UbuntuMedium, Arial, Helvetica, sans-serif";a.style.fontWeight="500";a.style.letterSpacing="-0.05em";return a}
function GJ(){var a=document.createElement("div");G(a,"showsButton");G(a,"showsButtonGradient");a.style.display="inline-block";a.innerText=Dg;a.style.borderWidth="1px";a.style.borderStyle="solid";a.style.boxSizing="border-box";a.style.borderRadius="4px";a.style.fontWeight="bold";a.style.padding="6px 10px";a.style.margin="5px 0";a.style.cursor="pointer";a.style.textDecoration="none";return a}
function DJ(a){EJ.call(this);var b=this;this.ap=a;this.xa=FJ();this.button=GJ();this.Lh=this.Fd=0;this.li=!1;this.element.appendChild(this.xa);this.yk=document.createElement("div");this.yk.style.margin="5px 0";this.yk.style.lineHeight="16px";this.yk.style.letterSpacing="-0.05em";this.Wp=document.createElement("div");G(this.Wp,"tokensRequirement");this.Wp.style.fontFamily="UbuntuMedium, Arial, Helvetica, sans-serif";this.yk.appendChild(this.Wp);this.So=document.createElement("div");G(this.So,"minutesRequirement");this.yk.appendChild(this.So);this.element.appendChild(this.yk);this.element.appendChild(this.button);this.dj=document.createElement("div");G(this.dj,"showsFooter");this.dj.innerText=Ag;this.dj.style.fontSize="9px";this.dj.style.lineHeight="125%";this.dj.style.margin="5px 0";this.element.appendChild(this.dj);K.j(function(c){c.A.event.ac.j(function(d){"privaterequesting"===d.La?(b.button.innerText=Cg,b.button.onclick=function(){ay(c.A)}):(b.button.innerText=Dg,b.button.onclick=function(){Xx(c.A)},b.update())});c.A.event.Xh.j(function(d){HJ(b,d.li,d.Fd,d.Lh);switch(c.A.status){case "privaterequesting":break;default:b.update()}});HJ(b,c.C.li,c.C.Fd,c.C.Lh);b.update()})}r(DJ,EJ);function HJ(a,b,c,d){a.li=b;a.Fd=c;a.Lh=d}
DJ.prototype.update=function(){var a=this.Wp;var b=this.Fd;b=M(L("%(price)s tokens per minute"),{price:b},!0);a.innerText=b;a=this.So;b=this.Lh;b=M(L("(minimum %(minMinutes)s minutes)"),{minMinutes:b},!0);a.innerText=b;this.So.style.display=0===this.Lh?"none":"block";this.dj.style.display=this.li?"block":"none";this.ap()};function CJ(){F.call(this);var a=this;this.yj=document.createElement("div");this.element.style.display="inline-block";this.element.style.height="auto";this.element.style.position="relative";this.element.style.boxSizing="border-box";this.element.style.borderRadius="3px";this.element.style.font="UbuntuRegular, Arial, Helvetica, sans-serif";this.element.style.fontSize="12px";this.element.style.lineHeight="14px";this.element.style.minWidth="200px";this.element.style.textAlign="center";this.yj.style.display="block";this.yj.style.fontSize="16px";this.yj.style.lineHeight="18px";this.yj.style.margin="5px 0";G(this.yj,"tokenTextArea");this.element.appendChild(this.yj);var b=document.createElement("div");G(b,"cancelShowButton");G(b,"cancelShowButtonGradient");b.style.display="inline-block";b.style.boxSizing="border-box";b.style.borderRadius="4px";b.style.padding="6px 10px";b.style.margin="5px 0";b.style.cursor="pointer";b.style.textDecoration="none";this.element.appendChild(b);K.j(function(c){IJ(a,c.C.ob);c.A.event.Op.j(function(d){d.O.username===c.A.username()&&IJ(a,a.Zz-d.amount)});c.A.event.ac.j(function(d){function e(){ay(c.A)}switch(d.La){case "privatewatching":b.innerText=Bg;b.onclick=e;break;case "privatespying":b.innerText=Eg;b.onclick=e;break;default:b.onclick=function(){}}})});xA.j(function(c){IJ(a,c.gd)})}r(CJ,F);function IJ(a,b){a.Zz=b;a.yj.innerText=b+" "+Hc(b)};var JJ;K.j(function(a){JJ=a.C.B});function KJ(a,b,c){F.call(this);var d=this;this.Z=a;this.element.style.position="relative";this.element.style.padding="4px";this.Dk=document.createElement("a");this.Dk.href="/"+a+"/";this.element.appendChild(this.Dk);v("click",this.Dk,function(e){A("LoadRoomFromRoomList",{location:c+"_draggable",from_broadcaster:JJ,broadcaster:d.Z});e.metaKey||e.ctrlKey||(tj.h(d.Z),e.preventDefault())});tb(["click","mousedown","touchstart"],this.Dk,function(){un(d.Z,"mr",b)});this.kj=document.createElement("img");this.kj.style.height="100%";this.kj.style.width="100%";this.kj.style.cursor="pointer";this.kj.className="moreRooms";this.kj.id="roomImage"+b;this.Dk.appendChild(this.kj);this.Zb=document.createElement("div");this.Zb.innerText=a;this.Zb.style.position="absolute";this.Zb.style.bottom="7px";this.Zb.style.color="#ffffff";this.Zb.style.fontSize="19px";this.Zb.style.textShadow="1px 1px 1px #000, -1px -1px 1px #000, 1px -1px 1px #000, -1px 1px 1px #000";this.Zb.classList.add("roomTitle"+b);this.Dk.appendChild(this.Zb);this.Ta=new Im(this.Z,this.kj);this.element.onmouseenter=function(){d.Ta.tj()};this.element.onmouseleave=function(){Km(d.Ta,!1)}}r(KJ,F);KJ.prototype.G=function(){void 0!==this.parent?this.Zb.style.left=this.parent.element.offsetWidth/2-this.Zb.offsetWidth/2+"px":u("Room does not have a parent")};KJ.prototype.Nf=function(){Km(this.Ta,!1);F.prototype.Nf.call(this)};KJ.prototype.Fk=function(){this.Ta.Fk()};function LJ(a){F.call(this);var b=this;this.ow=[];this.ao=[];this.xn=!0;this.Fs=!1;this.Gs="genders";this.Af=[];this.up=new TF;this.Dh=!1;this.source=a;this.element.style.fontSize="12px";this.element.style.overflowY="scroll";v("scroll",this.element,function(){MJ(b)});t()&&(a=window.localStorage.getItem(this.Gs),null!==a&&(this.Af=JSON.parse(a),void 0===Ja.current.xb&&(a=this.Af.indexOf(RF("followed")),0<=a&&this.Af.splice(a,1))));this.ff=document.createElement("div");this.ff.style.margin="2px 2px 0 2px";this.ff.style.whiteSpace="nowrap";this.ff.style.textAlign="center";this.element.appendChild(this.ff);NJ(this,"Female",Je);NJ(this,"Male",Ke);NJ(this,"Couple",Me);NJ(this,"Trans",Le);this.Ul=document.createElement("div");G(this.Ul,"defaultTooltipColor");this.Ul.innerText=pe+"...";this.Ul.style.margin="4px";OJ(this);var c=document.createElement("p");G(c,"defaultTooltipColor");c.style.cursor="pointer";c.style.padding="0";c.style.margin="0";c.onclick=function(){OJ(b)};v("mouseenter",c,function(){c.style.textDecoration="underline"});v("mouseleave",c,function(){c.style.textDecoration=""});c.innerText=Ie;c.style.textAlign="left";this.ff.appendChild(c);this.xB=window.setInterval(function(){for(var d=q(b.children()),e=d.next();!e.done;e=d.next())Jm(e.value.Ta,0)},3E4);this.vq()}r(LJ,F);LJ.prototype.close=function(){clearInterval(this.xB);this.up.Lb()};function PJ(a,b){a.Fs&&(a.element.removeChild(a.Ul),a.Fs=!1);b=q(b);for(var c=b.next();!c.done;c=b.next())a.H(new KJ(c.value,a.children().length+1,a.source))}
LJ.prototype.children=function(){return F.prototype.children.call(this)};function NJ(a,b,c){function d(){return"Followed"===b&&jl('You must be logged in to view your followed cams. Click "OK" to login.')}var e=-1<a.Af.indexOf(RF(b.toLowerCase())),f=new Eq(12,e);Dq(f,function(){d()?Cq(f,!1):QJ(a)});f.Da.name=b.toLowerCase();f.Gm(b);0<a.ao.length&&(f.element.style.marginLeft="12px");f.element.style.top="2px";a.ff.appendChild(f.element);a.ow.push(f);e=document.createElement("img");e.src="https://static-assets.highwebmedia.com/tsdefaultassets/icon"+b+".png";e.style.position="relative";e.style.top="2px";e.style.cursor="pointer";e.style.width="16px";e.style.height="16px";e.style.marginLeft="3px";e.title=c;e.onclick=function(){d()||(Bq(f,!f.Da.checked),QJ(a))};a.ff.appendChild(e);e=document.createElement("span");G(e,"defaultTooltipColor");e.innerText=c;e.style.position="relative";e.style.top="1px";e.style.marginLeft="4px";e.style.cursor="pointer";e.onclick=function(){d()||(Bq(f,!f.Da.checked),QJ(a))};a.ff.appendChild(e);a.ao.push(e)}
function QJ(a){a.Af=[];for(var b=q(a.ow),c=b.next();!c.done;c=b.next())c=c.value,c.Da.checked&&a.Af.push(RF(c.Ir()));A("ChangeRoomListGender",{selectedGenders:a.Af});t()&&(0===a.Af.length?window.localStorage.removeItem(a.Gs):window.localStorage.setItem(a.Gs,JSON.stringify(a.Af)));OJ(a)}
LJ.prototype.G=function(){F.prototype.G.call(this);for(var a=this.element.clientWidth-8,b=q(this.children()),c=b.next();!c.done;c=b.next())c=c.value,c.element.style.width=a+"px",c.element.style.height=.5625*(this.element.clientWidth-8)+"px";this.ff.style.width=a+"px";if(!this.xn&&this.ff.scrollWidth<=a){c=q(this.ao);for(b=c.next();!b.done;b=c.next())b.value.style.display="inline-block";this.xn=!0}if(this.xn&&this.ff.scrollWidth>a){a=q(this.ao);for(b=a.next();!b.done;b=a.next())b.value.style.display="none";this.xn=!1}MJ(this)};function OJ(a){cc(a);a.Fs=!0;a.element.appendChild(a.Ul);void 0!==Ja.current.xb&&-1<a.Af.indexOf(RF("followed"))?(a.Dh=!0,Gs().then(function(b){0<b.length&&(RJ(a),PJ(a,b));SJ(a);a.Y();a.Dh=!1}).catch()):(SJ(a),a.Y())}function SJ(a){UF(a.up,a.Af.filter(function(b){return b!==RF("followed")}));a.up.next().then(function(b){TJ(a,b.map(function(c){return c.username}))}).catch(function(b){a.Dh=!1;u("getNewIterator: "+b)})}
function UJ(a){a.Dh||(a.Dh=!0,a.up.next().then(function(b){TJ(a,b.map(function(c){return c.username}))}).catch(function(b){a.Dh=!1;u("loadMoreRooms: "+b)}))}function TJ(a,b){0<b.length?(RJ(a),PJ(a,b),a.Y(),a.Dh=!1,MJ(a)):a.Dh=!1}
function RJ(a){for(var b=.5625*(a.element.clientWidth-8),c=a.element.scrollTop,d=[],e=q(a.children()),f=e.next();!f.done;f=e.next())if(f=f.value,f.element.offsetTop-c<-15*b)d.push(f);else break;b=q(d);for(f=b.next();!f.done;f=b.next())d=f.value,c-=d.element.offsetHeight,a.removeChild(d);a.element.scrollTop=c}function MJ(a){a.element.scrollTop+2.8125*(a.element.clientWidth-8)>=a.element.scrollHeight-a.element.offsetHeight&&UJ(a)}
LJ.prototype.vq=function(){var a=this;Hm&&v("pageshow",window,function(b){b.persisted&&a.children().forEach(function(c){c.Fk()})})};function VJ(a){F.call(this);var b=this;this.Pk=a;this.mj="public";this.ob=0;this.Qi=this.Eo=!1;this.ai=new D("tipSent");this.Ex=new D("notifyAttemptSendTip");this.Ty=new D("tipCalloutShouldReposition");this.bu=!1;this.element.id="FVTipCallout";G(this.element,"defaultTooltipColor");this.element.style.minWidth="368px";this.element.style.minHeight="175px";this.element.style.overflow="visible";a=document.createElement("div");a.style.display="inline-block";var c=document.createElement("span");c.innerText=$e;c.style.display="inline-block";c.style.fontSize="13px";c.style.fontWeight="bold";c.style.padding="6px";a.appendChild(c);this.Mc=document.createElement("span");G(this.Mc,"tokenBalance");this.Mc.innerText=qe+"...";this.Mc.style.display="inline-block";this.Mc.style.fontSize="13px";this.Mc.style.fontWeight="bold";this.Mc.style.padding="6px 6px 6px 0";a.appendChild(this.Mc);K.j(function(m){b.Z=m.A.B();m.A.event.ac.j(function(n){switch(n.La){case "privatewatching":b.mj="private";break;default:b.mj="public"}})});xA.j(function(m){b.uu(m.gd)});var d=document.createElement("a");G(d,"purchaseTokens");d.innerText=Hd;d.href="/tipping/purchase_tokens/";d.style.display="inline-block";d.style.position="absolute";d.style.right="0";d.style.fontSize="13px";d.style.padding="6px";d.onclick=function(){el();return!1};d.onmouseenter=function(){d.style.textDecoration="underline"};d.onmouseleave=function(){d.style.textDecoration="none"};a.appendChild(d);this.element.appendChild(a);this.wD=a;this.yb=document.createElement("div");G(this.yb,"warning");this.yb.style.display="none";this.yb.style.fontSize="13px";this.yb.style.fontWeight="bold";this.yb.style.padding="6px";this.yb.style.textAlign="center";this.yb.style.position="absolute";this.yb.style.left="50%";a=document.createElement("div");a.innerText=bf;this.yb.appendChild(a);a=document.createElement("div");a.innerText=cf;this.yb.appendChild(a);this.element.appendChild(this.yb);this.Fe=document.createElement("form");c=document.createElement("label");a=document.createElement("span");a.innerText=df;a.style.display="inline-block";a.style.fontSize="13px";a.style.padding="6px";c.appendChild(a);this.da=cl();this.da.value="25";this.da.min="1";this.da.style.width="5em";this.da.style.display="inline-block";this.da.style.fontSize="13px";this.da.style.padding="4px";this.da.style.borderWidth="1px";this.da.style.borderStyle="solid";this.da.style.borderRadius="4px";this.da.onclick=function(){b.Ji()};this.ae=document.createElement("div");G(this.ae,"warning");this.ae.innerText=ef;this.ae.style.display="none";this.ae.style.paddingLeft="5px";a=document.createElement("div");this.da.oninput=function(){GF(b)};c.appendChild(this.da);c.appendChild(this.ae);this.Fe.appendChild(c);c=document.createElement("label");this.Nd=document.createElement("div");this.Nd.innerText=pd;this.Nd.style.fontSize="13px";this.Nd.style.padding="6px 6px 0 6px";c.appendChild(this.Nd);this.le=document.createElement("div");this.ea=document.createElement("textarea");G(this.ea,"tipMessageInput");this.ea.maxLength=255;this.ea.style.width="100%";this.ea.style.resize="none";this.ea.style.fontSize="13px";this.ea.style.margin="6px";this.ea.style.padding="4px";this.ea.style.borderWidth="1px";this.ea.style.borderStyle="solid";this.ea.style.borderRadius="4px";this.ea.style.boxSizing="border-box";this.le.appendChild(this.ea);this.Nd.onclick=function(){b.ea.select()};c.appendChild(this.le);this.Fe.appendChild(c);a.style.textAlign="right";a.style.position="relative";c=document.createElement("div");c.style.textAlign="left";this.dc=document.createElement("div");this.dc.innerText=ff;c.style.position="absolute";this.dc.style.display="none";c.style.fontSize="10px";c.style.cssFloat="left";c.style.lineHeight="1.3em";c.style.padding="6px";c.style.textAlign="left";c.style.left="0px";a.appendChild(c);c.appendChild(this.dc);this.X=new EF;this.H(this.X,a);this.Rm=document.createElement("div");this.Rm.style.fontSize="10px";var e=document.createElement("label"),f=document.createElement("span");f.innerText=jf;f.style.cursor="pointer";var g=new Eq(12);g.Tr=!0;g.element.style.top="2px";g.element.style.marginLeft="3px";Dq(g,function(){b.bu=!b.bu});e.appendChild(f);e.appendChild(g.element);this.Rm.appendChild(e);c.appendChild(this.Rm);this.Fe.appendChild(a);v("keydown",this.element,function(m){9===m.keyCode&&(m.preventDefault(),m.shiftKey?b.X.hasFocus()&&!$k(b.X)?g.focus():document.activeElement===g.Da?b.ea.focus():document.activeElement===b.ea?b.da.focus():b.X.hasFocus()||$k(b.X):b.X.hasFocus()&&!al(b.X)?b.da.focus():document.activeElement===b.da?b.ea.focus():document.activeElement===b.ea?g.focus():b.X.hasFocus()||al(b.X))});this.element.appendChild(this.Fe);this.G();var h;v("submit",this.Fe,function(m){m.preventDefault();var n=parseInt(b.da.value);if(!isNaN(n)&&b.X.isEnabled())if(A("SendTipClicked",{amount:n,location:"PMTab"}),100<n&&!b.Qi)Xk(b.X,Ic(n)),b.Qi=!0,b.G();else if(b.da.blur(),void 0===h){m=O();var p=b.ea.value;void 0!==b.ta&&(p=""===b.ea.value?b.ta.value:b.ta.value+" | "+b.ea.value);AA({Z:b.Z,oz:b.da.value,message:p,source:b.Pk,pz:b.mj,xj:b.X.xj,Qd:m}).then(function(y){y.success?A("SendTipSuccess",{amount:n,location:"PMTab"}):void 0!==y.error?J(y.error):u("unknown send tip error");HF(b);b.ea.value="";void 0!==y.Ym&&wA.h({gd:y.Ym,Z:b.Z});b.ai.h({amount:n,success:y.success})}).catch(function(y){u("Error sending tip ("+y+")");b.ai.h({amount:n,success:!1})});b.Ex.h({amount:n});h=window.setTimeout(function(){return h=void 0},250)}})}r(VJ,F);VJ.prototype.G=function(){this.le.style.width=Math.max(0,this.element.clientWidth-12)+"px";this.dc.style.maxWidth=Math.max(0,this.element.offsetWidth-this.X.element.offsetWidth-15)+"px"};VJ.prototype.show=function(a){var b=this;this.X.rc.D(!0);this.element.style.minWidth=450>ck()?"340px":"368px";void 0!==a.amount&&(this.da.value=a.amount.toString(),GF(this));this.ea.value=void 0!==a.message?a.message:"";void 0!==a.dn&&a.dn?(this.dc.style.display="none",this.Rm.style.lineHeight="3em"):(this.dc.style.display="block",this.Rm.style.lineHeight="");bl(this.Pk,this.X);yA(this.Z).then(function(c){b.da.max=c.ob.toString();if(void 0!==c.Ok){b.Nd.innerText=c.Ok.label;void 0!==b.ta&&b.le.removeChild(b.ta);b.ta=document.createElement("select");G(b.ta,"tipOptionsSelect");b.ta.style.width="100%";b.ta.style.fontSize=".8125em";b.ta.style.margin="6px";b.ta.style.borderWidth="1px";b.ta.style.borderStyle="solid";b.ta.style.boxSizing="border-box";b.le.insertBefore(b.ta,b.ea);var d=document.createElement("option");d.innerText="-- "+kf+" --";b.ta.appendChild(d);c=q(c.Ok.options);for(d=c.next();!d.done;d=c.next()){var e=d.value;d=document.createElement("option");d.innerText=e.label;d.value=e.label;b.ta.appendChild(d)}}else void 0!==b.ta&&(b.Nd.innerText=pd,b.ea.value="",b.le.removeChild(b.ta),b.ta=void 0);b.G();b.Ty.h(void 0);b.Ji()}).catch(function(c){u("Error getting token balance ("+c+")")})};VJ.prototype.Ji=function(a){if(document.activeElement!==this.da||(void 0===a?0:a))this.da.focus(),this.da.setSelectionRange(0,9999)};VJ.prototype.uu=function(a){this.ob=a;this.Mc.innerText=a+" "+Hc(a)};function WJ(a){var b=a.element.parentElement;a.element.style.visibility="hidden";document.body.appendChild(a.element);a.element.style.width=a.wD.offsetWidth+"px";a.element.style.height="auto";var c=[a.element.offsetWidth,a.element.offsetHeight];document.body.removeChild(a.element);null===b||void 0===b?void 0:b.appendChild(a.element);a.element.style.visibility="";return c};var XJ,YJ=!1;K.j(function(a){XJ=a.A;YJ=a.C.userName===a.C.B});function ZJ(){F.call(this);this.vu=new D("UserListWindow:userCountUpdate");this.zb=[];this.element.id="users-list";this.element.style.padding="0 6px";this.element.style.boxSizing="border-box";this.element.style.position="";this.yi();this.refresh(!1)}r(ZJ,F);k=ZJ.prototype;k.hj=function(){for(;null!==this.element.firstChild;)this.element.removeChild(this.element.firstChild)};k.yi=function(){var a=document.createElement("div");G(a,"defaultTooltipColor");a.innerText=mf+"...";a.style.margin="6px 0";this.element.style.fontSize="12px";this.element.appendChild(a)};k.cr=function(){var a=this,b=document.createElement("div");G(b,"defaultTooltipColor");b.style.margin="6px 0";var c=document.createElement("span");c.innerText=nf;c.id="refresh-userlist";c.style.cursor="pointer";v("click",c,function(d){a.hj();a.yi();a.refresh(!1);d.preventDefault()});v("mouseenter",c,function(){c.style.textDecoration="underline"});v("mouseleave",c,function(){c.style.textDecoration=""});b.appendChild(c);this.element.appendChild(b)};k.clear=function(a){this.vu.h(a);this.hj();this.yi();this.G()};k.refresh=function(a){var b=this;a=void 0===a?!0:a;JB(XJ).then(function(c){b.vu.h(c.an);if(!a){b.hj();b.cr();b.zb=c.Je;for(var d=q(b.zb),e=d.next();!e.done;e=d.next()){var f=e.value;e=document.createElement("div");e.style.width="auto";e.style.margin="2px 0";e.style.fw="left";e.style.whiteSpace="nowrap";e.style.overflow="hidden";e.style.maxWidth="100%";e.style.textOverflow="ellipsis";var g=e,h=g.appendChild,m=!document.body.classList.contains("darkmode");m=void 0===m?!0:m;f=YJ?new IG(f,m,"",!1):new AD(f,m,"",!1,!0);h.call(g,f.element);b.element.appendChild(e)}d=document.createElement("div");G(d,"defaultTooltipColor");d.innerText="+"+c.Hj+" anonymous user"+(1===c.Hj?"":"s");d.style.width="100%";d.style.margin="6px 0";d.style.whiteSpace="nowrap";d.style.fw="left";b.element.appendChild(d);b.G()}}).catch(function(c){u("Error retrieving user list: "+c)})};k.G=function(){F.prototype.G.call(this)};function $J(a,b){a=void 0===a?"fullvideo":a;F.call(this);var c=this;this.Cp=b;this.vA=[];this.Vk=new ZF;this.TA=new D("focusChanging",{dd:!1});this.gw=new D("focusChanged",{dd:!1});this.RD=new D("windowOpened",{dd:!1});this.QD=new D("windowClosed",{dd:!1});this.Fz=new D("windowHover",{dd:!1});this.Kq=new D("chatVisibilityChanged",{dd:!1});this.element.style.overflow="";this.element.style.pointerEvents="none";this.source=a;this.Wa=aK(this,new zJ(this));aq.j(function(g){c.Wa.fc||(c.Wa.element.style.display="",c.Wa.fc=!0,c.Kq.h(!0));g.focus&&Ip(c,c.Wa);c.Wa.Y()});rj.j(function(){if(void 0!==c.xu&&c.xu.fc)c.removeChild(c.xu);else{bK(c,"Users");var g=new ZJ,h=function(y){"privatewatching"!==y.rd&&"privatewatching"!==y.La||window.setTimeout(function(){g.refresh(!1)},2E3);"notconnected"===y.rd&&(g.refresh(!1),g.element.scrollTop=0)},m=!0,n=function(y){y.A.event.ac.j(h,!1);m||g.clear(y.C.Kx);m=!1};K.j(n);var p=aK(c,new Gp(c,g,{title:ze,Ph:!0,Ne:"Users",minWidth:100,minHeight:100,$e:190,Ze:230,Tf:[0,2]}));g.element.style.overflowY="auto";c.Y();g.vu.j(function(y){p.Gm(ze+" ("+y+")")});p.gg=function(){K.removeListener(n)};c.xu=p}});wj.j(function(){c.Wa.fc?(c.Wa.element.style.display="none",c.Wa.fc=!1,c.Kq.h(!1)):(c.Wa.element.style.display="",c.Wa.fc=!0,Ip(c,c.Wa),c.Kq.h(!0));c.Y()});bq.j(function(){c.Wa.fc||wj.h(void 0);Ip(c,c.Wa);c.Wr=c.Wa;c.Wa.lb.W.Vc()});Yp.j(function(){void 0!==c.Ns&&c.Ns.fc?c.removeChild(c.Ns):(cK(c),c.Y())});qj.j(function(g){function h(p){n.Gm(p.C.B)}bK(c,"Bio");var m=new XI(g),n=aK(c,new Gp(c,m,{title:g,Ph:!0,Ne:"Bio",Ze:400,$e:360,minWidth:360,minHeight:100,Tf:[0,2],gg:function(){K.removeListener(h)}}));K.j(h,!1);c.Y()});var d;K.j(function(g){d=g.C.hb});var e;sj.j(function(g){if(void 0!==g.amount||!dK(c)){A("OpenTipCallout");void 0===c.jb&&(c.jb=new VJ(a),c.jb.Ex.j(function(n){e=n.amount;void 0!==c.fd&&sj.h({})}),c.jb.Ty.j(function(){if(void 0!==c.fd&&void 0!==c.jb){var n=q(WJ(c.jb)),p=n.next().value;n=n.next().value;c.fd.resize(n,p);c.Y()}}));void 0===g.amount&&(g.amount=e);var h=function(){void 0!==c.fd&&c.removeChild(c.fd)};if(d)var m=!jl('You must be logged in to tip. Click "OK" to login.');else J("This broadcaster doesn't accept tips."),m=!1;m&&(void 0!==c.Cp&&xG(c.Cp,c.jb),c.jb.show(g),void 0!==c.fd?Ip(c,c.fd):(m=q(WJ(c.jb)),g=m.next().value,m=m.next().value,c.fd=aK(c,new Gp(c,c.jb,{title:sd,Ph:!1,Ne:"Tip",minWidth:g+4,minHeight:m+4,$e:g,Ze:m,Tf:[4],gg:function(){K.removeListener(h);c.fd=void 0},Xs:function(){void 0!==c.jb&&c.jb.Ji()},Ys:function(n){if(void 0===c.fd)return u("undefined tipwindow"),!0;27===n.keyCode?c.removeChild(c.fd):83===n.keyCode&&n.ctrlKey&&c.removeChild(c.fd);return!0}})),c.fd.Fc.style.boxSizing="",K.j(h,!1),c.Y(),c.jb.Ji(!0)))}});var f;K.j(function(g){0<g.C.vg.length&&(f=g.C.vg[0].uq,void 0!==c.Vz&&c.Vz.Gm("App: "+f));void 0!==c.tc&&c.tc.fc&&c.removeChild(c.tc);var h=g.A.status,m=!g.C.hb||!g.C.te;g.A.event.ac.j(function(p){h=p.La;switch(p.La){case "unknown":case "offline":case "notconnected":case "away":case "hidden":case "privatenotwatching":case "passwordprotected":void 0!==c.tc&&c.tc.fc&&c.removeChild(c.tc);break;case "privaterequesting":case "privatewatching":case "privatespying":break;default:m&&void 0!==c.tc&&c.tc.fc&&c.removeChild(c.tc)}});var n=["privaterequesting","privatespying","privatewatching"];g.A.event.Xh.j(function(p){p.te||-1!==n.indexOf(h)||void 0!==c.tc&&c.tc.fc&&c.removeChild(c.tc)})});uj.j(function(){void 0!==c.fh&&c.fh.fc?c.removeChild(c.fh):(void 0!==c.fh&&c.removeChild(c.fh),c.tg=new SI,c.fh=aK(c,new Gp(c,c.tg,{title:Ce,Ph:!0,Ne:"Abuse",minWidth:270,minHeight:200,$e:270,Ze:200,Tf:[3,1],Xs:function(){void 0!==c.tg&&c.tg.ve.focus()},Ys:function(){return!0},gg:function(){c.fh=void 0}})),c.Y(),c.tg.In.j(function(){void 0!==c.fh&&c.removeChild(c.fh)}))});vj.j(function(){void 0!==c.tc&&c.tc.fc?c.removeChild(c.tc):(void 0===c.rm&&(c.rm=new AJ(function(){void 0!==c.tc&&c.tc.fc&&c.tc.jt.apply()})),c.tc=aK(c,new Gp(c,c.rm,{title:yg,Ph:!1,Ne:"Private",zn:!0,minWidth:248,minHeight:270,$e:248,Ze:270,Tf:[2,1]})),c.Y())});this.un=new Nr;eK(this,this.un);"1"===wb().room_list&&cK(this);Ip(this,void 0)}r($J,F);function cK(a){bK(a,"Rooms");var b=new LJ(a.source),c=225+sk();a.Ns=aK(a,new Gp(a,b,{title:Ee,Ph:!0,Ne:"Rooms",minWidth:c,minHeight:100,$e:c,Ze:385,Tf:[1,2],gg:function(){b.close()}}))}$J.prototype.G=function(){F.prototype.G.call(this);for(var a=q([].concat(this.Vk.Se)),b=a.next();!b.done;b=a.next())b.value.jt.apply();void 0!==this.un&&(this.un.element.style.left=(this.element.clientWidth-this.un.element.offsetWidth)/2+"px")};function Ip(a,b){if(!a.tC&&a.xd!==b){if(void 0!==a.xd){var c=a.xd;c.Fc.style.opacity=void 0!==c.config.bA?c.config.bA:"1";void 0!==c.config.Mx&&c.config.Mx();if(document.activeElement!==document.body&&void 0!==document.activeElement&&null!==document.activeElement)try{document.activeElement.blur()}catch(f){}}a.TA.h(b);if(void 0!==b){A("FocusWindow",{windowName:b.config.Ne});a.Vk.kd(b);c=a.children().length+10;for(var d=q([].concat(a.Vk.Se)),e=d.next();!e.done;e=d.next())e.value.element.style.zIndex=""+c,--c;d=q(a.vA);for(e=d.next();!e.done;e=d.next())e.value.element.style.zIndex=""+c,--c;b.Fc.style.opacity="1";void 0!==b.config.Xs&&b.config.Xs()}a.xd=b;a.gw.h(b)}}$J.prototype.H=function(){throw Error("addChild not supported");};function eK(a,b,c){b.element.style.pointerEvents="auto";F.prototype.H.call(a,b,c)}
function aK(a,b){b.Qv.j(function(c){a.tC=c});v("mousedown",b.element,function(c){a.xd!==b&&(Ip(a,b),c.preventDefault())});v("mouseover",b.element,function(){a.Wr=b;a.Fz.h(b)});a.Vk.kd(b);eK(a,b,void 0);Ip(a,b);a.RD.h(b);b.fc=!0;return b}$J.prototype.removeChild=function(a){a.fc=!1;void 0!==a.gg&&a.gg();Ip(this,void 0);this.Vk.remove(a);F.prototype.removeChild.call(this,a);this.QD.h(a)};function bK(a,b){for(var c=q([].concat(a.Vk.Se)),d=c.next();!d.done;d=c.next())if(d=d.value,d.config.Ne===b){a.removeChild(d);d===a.xd&&Ip(a,void 0);break}}function dK(a){var b=!1;void 0!==a.fd&&a.fd.fc&&void 0!==a.jb&&!a.jb.bu&&(a.removeChild(a.fd),b=!0);return b};var fK,gK;function hK(){var a=document.getElementById("ChatTabContainer");null!==a&&(a=a.offsetTop,0<a&&window.scrollTo(0,a))}
function iK(a,b){function c(){return void 0!==document.activeElement&&null!==document.activeElement&&0<=["input","textarea","select","button"].indexOf(document.activeElement.tagName.toLowerCase())&&!Rm()}function d(){return a.Wa.lb.ec().Ad()||b.ec().Ad()}Yj.Td.j(function(){fK=void 0});var e=new ec,f=0;Ej.j(function(h){f=h?f+1:f-1});fc(e,{keyCode:9,ij:!1,P:function(h){if(!(!d()&&c()&&a.xd!==a.fd||Rm()||Rm())){Ip(a,a.Wa);var m=function(n){if(h.shiftKey)if(qr(n.sj.Kb),Hl.prototype.ec.call(n)===n.W){if(!n.qa.lk()){Ml(n,n.qa);var p=n.qa;p.zd();dG(p.ha);n.qa.Gp("prev")||u("no pmSessions")}}else n.qa.Gp("prev")||Ml(n,n.W);else n.Ev()};"split"===O()?(m(a.Wa.lb),m(b)):(m(b),m(a.Wa.lb));hK();h.preventDefault();h.stopPropagation()}}});fc(e,{keyCode:13,ij:!1,P:function(h){d()?jl()?h.preventDefault():Ya().scrollTop===gK&&void 0!==fK&&(Ya().scrollTop=fK,fK=void 0):(Ip(a,a.Wa),("split"===O()?b:a.Wa.lb).ec().Vc())}});fc(e,{keyCode:27,ij:!1,P:function(h){Rm()?(void 0!==Pm&&Pm.D(),Ip(a,void 0),fK=void 0):(h.stopPropagation(),h.preventDefault(),void 0!==a.xd&&a.xd.tA&&a.removeChild(a.xd),Ip(a,void 0),Ya().scrollTop===gK&&void 0!==fK&&(b.ec().ue(),Ya().scrollTop=fK,fK=void 0))}});fc(e,{keyCode:76,ij:!0,P:function(h){if("split"===O()||a.xd===a.Wa)if("split"!==O()||dJ(b.qa))h.stopPropagation(),h.preventDefault(),a.Wa.lb.vi(),b.vi()}});fc(e,{keyCode:83,ij:!0,P:function(h){h.stopPropagation();h.preventDefault();"split"===O()||"hidden"===a.element.style.visibility?xq.h({dn:!0}):sj.h({dn:!0})}});var g=[32,34,33];v("keydown",document,function(h){(27===h.keyCode||h.ctrlKey||h.metaKey?0:Rm()||-1!==g.indexOf(h.keyCode)||0!==f||!d()&&c())||void 0!==a.xd&&Lp(a.xd,h)||gc(e,h)||h.ctrlKey||h.metaKey||!tE(h.which)||(fK=Ya().scrollTop,"split"!==O()&&Ip(a,a.Wa),uE.h(h),("split"===O()?b:a.Wa.lb).ec().Vc(),window.setTimeout(function(){gK=Ya().scrollTop},0))})};var jK,kK,lK={};K.j(function(a){lK.Kd=a.C.oa.Kd;lK.Zf=a.C.Zf;lK.Gc=!1;jK=a.C.Ft;kK=a.A});zq.j(function(a){lK.Kd=a.Kd});function mK(a,b,c){return 0===a?new IG(b,!0,c):new AD(b,!0,c)}
function nK(a,b,c){var d=oK(a.O.username),e=qA();e.style.padding="0";var f=mK(b,a.O,a.Zc);f.element.style.paddingRight="4px";e.appendChild(f.element);e.style.marginRight="4px";var g=Uv(new Tv(lK),a.message);void 0!==a.Ie&&(g.style.color=a.Ie);void 0!==a.font&&(f.element.style.fontFamily=a.font,g.style.fontFamily=a.font);G(g,"msg-text");g.classList.add("split-mode");void 0!==a.backgroundColor&&(e.style.background=a.backgroundColor);pK(d,e,new HH({Zv:a.Ie,Nu:a.backgroundColor}));e.appendChild(g);d.appendChild(e);ib()?window.setTimeout(function(){twemoji.parse(d,{className:"emojiChat"})},0):twemoji.parse(d,{className:"emojiChat"});SH(d,b,c);return d}
function qK(a,b,c){var d=oK(a.qr),e=document.createElement("div");e.style.display="inline-block";if(void 0!==a.background)e.style.background=a.background,e.style.marginTop="1px",e.style.textShadow="none",G(e,"hasBg"),"#ff8b45"===a.background&&(e.style.padding="0px 4px",G(e,"bright-background"));else{var f=tA(void 0!==a.Na?a.Na:"#aaaaaa");e.setAttribute("data-purecolor",f);e.className="purecolor"}"#ff3"===a.background&&G(e,"isTip");G(e,"roomNotice");e.style.color=void 0!==a.Na?a.Na:"";e.style.fontWeight=void 0!==a.weight?a.weight:"normal";d.appendChild(rK(b,e,a.ja));twemoji.parse(e,{className:"emojiChat"});d.innerText.startsWith("Notice:")&&e.removeAttribute("data-purecolor");pK(d,e,new HH({Zv:a.Na,Nu:a.background}));SH(d,b,c);twemoji.parse(d);return d}
function pK(a,b,c){var d,e,f=void 0!==c.Aq,g=void 0!==c.$v;if(f||g)a.classList.add("dm-adjust"),f&&(b.setAttribute("dm-adjust-bg",c.Aq),b.setAttribute("dm-init-bg",null!==(d=c.background)&&void 0!==d?d:"")),g&&(b.setAttribute("dm-adjust-fg",c.$v),b.setAttribute("dm-init-fg",null!==(e=c.Na)&&void 0!==e?e:""))}
function rK(a,b,c){c=q(c);for(var d=c.next();!d.done;d=c.next()){var e=document.createElement("div");d=q(d.value);for(var f=d.next();!f.done;f=d.next())switch(f=f.value,f.ic){case 1:e.appendChild(sK(f));break;case 0:e.appendChild(mK(a,f.Ja).element);break;case 2:e.appendChild(tK(f.message));break;case 3:e.appendChild(uK("spy private show",function(){"privatespying"!==kK.status&&Zx(kK)}));break;case 4:e.appendChild(uK("start private show",function(){"privaterequesting"===kK.status&&cy()}));break;default:u("Unknown roomNotice type for: "+
JSON.stringify(f))}b.appendChild(e)}return b}function uK(a,b){var c=document.createElement("a");G(c,"msg-link");c.style.textDecoration="underline";c.innerText=a;c.onclick=b;c.style.cursor="pointer";return c}function tK(a){var b=document.createElement("a");b.href="/tag/"+a+"/"+jK;G(b,"camSubjectTagColor");b.style.textDecoration="none";b.innerText="#"+a;return b}function vK(a){var b=oK();b.innerText=a;b.setAttribute("data-purecolor",tA("#aaaaaa"));b.className="purecolor";return b}
function wK(a,b){function c(e){var f=document.createElement("span");f.innerText=e;return f}var d=oK();d.setAttribute("data-purecolor",tA("#aaaaaa"));d.className="purecolor";d.appendChild(c(b?Qc:Pc));d.appendChild(document.createElement("br"));d.appendChild(c(Rc+" "));b=uK(Sc,function(){});b.href="/supporter/upgrade/";b.target="_blank";G(b,"msg-link");b.onclick=function(){A("SupporterPageOpened",{source:"chat"})};d.appendChild(b);d.appendChild(c(" "+Tc(a)+"."));return d}
function oK(a){a=void 0===a?"":a;var b=document.createElement("div");b.classList.add("msg-text");b.style.fontFamily="Tahoma,Arial,Helvetica,sans-serif";b.style.boxSizing="border-box";b.style.paddingTop="2px";b.style.paddingBottom="3px";b.style.paddingLeft="5px";b.style.paddingRight="5px";b.style.$x="break-word";b.style.wordWrap="break-word";0<a.length&&b.setAttribute("data-nick",a);return b}
function sK(a){var b=document.createElement("span");!1!==a.ay?b=Uv(new Tv(lK),a.message):b.innerText=a.message;b.style.color=void 0!==a.Na?a.Na:"";b.style.backgroundColor=void 0!==a.background?a.background:"";b.style.fontWeight=void 0!==a.weight?a.weight:"";return b}function xK(a){var b=oK();return a.pC(b)};function yK(){Ll.call(this);var a=this;this.K=0;this.element.style.overflow="";this.F=new mI({lm:function(){HB(a.A)},km:function(b){xq.h(b)},im:function(b){LB(a.A,b);a.F.ue()}});this.H(this.F);K.j(function(b){a.A=b.A;a.F.ba(vK("Rules: No spamming. Do not insist the cam hosts to do as you please. Do not announce other rooms or websites that would conflict with this room. Avoid any argumentative and/or rude posts related to the cam viewing. Do not attempt to post your e-mail address in the public chat."));a.F.ba(vK("To go to next room, press CTRL+/. To send a tip, press CTRL+S or type \"/tip 25\". To disable emoticons or adjust autocomplete settings, click the 'Gear' tab above."));if(0<b.C.vg.length){var c=a.F,d=c.ba,e=b.C.B;b=b.C.vg;var f=oK(),g=document.createElement("span");g.innerText=Lc(e);f.appendChild(g);for(e=0;e<b.length;e+=1)g=document.createElement("a"),g.href=b[e].Hu,g.target="_blank",g.innerText=b[e].uq,G(g,"msg-link"),g.style.textDecoration="none",f.appendChild(g),e<b.length-1&&(g=document.createElement("span"),g.innerText=", ",f.appendChild(g));f.setAttribute("data-purecolor",tA("#aaaaaa"));f.className="purecolor";d.call(c,f)}Ol(a)});vc.j(function(){a.F.clear()})}r(yK,Ll);k=yK.prototype;k.Zd=function(){return this.K};k.G=function(){Ll.prototype.G.call(this);this.F.eb()};k.eb=function(){this.F.eb()};k.gf=function(){var a=Vb()?Yi:ue;return[document.createTextNode(99<this.K?a+" (99+)":0<this.K?a+" ("+this.K+")":a)]};k.Cg=function(){return"chat-tab-default"};k.Vc=function(){this.F.Vc()};k.ue=function(){this.F.ue()};k.Ad=function(){return this.F.Ad()};k.Za=function(){Ll.prototype.Za.call(this);this.K=0;this.Pb();this.F.eb()};k.io=function(a){for(var b=[],c=q(this.F.za.childNodes),d=c.next();!d.done;d=c.next())d=d.value,d.getAttribute("data-nick")===a&&b.push(d);a=q(b);for(b=a.next();!b.done;b=a.next())this.F.za.removeChild(b.value)};k.oi=function(a){this.F.oi(a)};k.Bg=function(){return this.F.va};k.Md=function(a){Ll.prototype.Md.call(this,a);A("FocusTab",{location:"chat"})};function zK(a,b){Nl.call(this);var c=this;this.Bs=a;this.ag=b;this.K=0;this.nm=new D("incomingPm");this.Xb=new Map;this.ha=new aG;this.Ot=function(d){var e=c.Xb.get(c.ha.Xa);e.bl||(e.F.ba(vK(d)),e.bl=!0)};this.element.style.overflow="hidden";this.qd=new WC({ra:!1,bg:!1,xf:co,ei:function(d){d!==c.K&&(c.K=d,c.Pb())},ag:this.ag});this.H(this.qd);aq.j(function(d){c.zd();bJ(c);void 0===c.Xb.get(d.username)&&c.Gg(d.username,!1,d.Nm);eG(c.ha,d.username);c.Pb();c.Ug();d.focus&&Ol(c)});K.j(function(d){c.A=d.A;c.Os=d.C.userName;c.B=d.C.B});eo.j(function(d){c.wi(d)});co.j(function(d){c.zd();eG(c.ha,d);c.Ug()});wF.j(function(d){c.Mm(d,!0)});dq.j(function(){var d=c.Xb.get(c.ha.Xa);!1===d.Nl&&c.Ds(d)});iC.j(function(d){c.ha.kd(d);c.Gg(d,!1,!1)});$n.j(function(d){var e=cJ(c);c.zh()&&dJ(c)&&void 0!==e&&e.es()&&(d.Ya!==e.username||oI(e.F)||ho.h(e.username))})}r(zK,Nl);k=zK.prototype;k.Mm=function(a,b){b=void 0===b?!1:b;if(!a){this.zd();a=this.ag&&0===this.qd.bb.childNodes.length;var c=this.A.B()===this.Os;b||1<this.qd.bb.childNodes.length||a||c?(this.qd.element.style.display="block",this.qd.Y()):(this.ag||eG(this.ha,this.A.B()),this.Ug())}};k.eb=function(){var a=cJ(this);void 0!==a&&a.F.eb()};k.Zd=function(){return this.K};k.gf=function(){return[document.createTextNode(99<this.K?"PM (99+)":0<this.K?"PM ("+this.K+")":"PM")]};k.Md=function(a){Nl.prototype.Md.call(this,a);A("FocusTab",{location:"PM",unread:this.Zd()});Ol(this);this.Mm(!1)};k.lk=function(){return!1};k.Cg=function(){return"pm-tab-default"};k.Vc=function(){var a=cJ(this);void 0===a?u("session undefined"):a.F.Vc()};k.ue=function(){var a=cJ(this);void 0===a?u("session undefined"):a.F.ue()};k.Ad=function(){var a=cJ(this);return void 0===a?(u("session undefined"),!1):a.F.Ad()};k.G=function(){Nl.prototype.G.call(this);var a=cJ(this);void 0!==a&&a.F.eb()};k.Gg=function(a,b,c,d){var e=this;d=void 0===d?!1:d;var f,g,h=this.Xb.get(a);if(void 0===h){var m=rA();m.innerHTML=Mc(a);m.style.textAlign="center";m.style.width="auto";m.style.borderBottom="1px solid #acacac";m.style.margin="0 10px 5px 5px";m.style.display="none";m.style.color="#cfcfcf";var n=new mI({km:function(p){xq.h(p)},lm:function(){HB(e.A)},im:function(p){e.ha.kd(a);lC({message:p,username:a,source:"roomviewPM",Z:e.A.B(),Wv:e.Ot})}},!0);h={F:n,K:0,hm:0,username:a,Nj:m,Kg:new zF,pf:!1,Ql:!1,Nl:!1,bl:!1,es:function(){return"none"!==n.element.style.display}};n.oj.j(function(){e.zh()&&dJ(e)&&cJ(e)===h&&ho.h(a)});this.Xb.set(a,h);h.F.ug(vK(cd(a)));h.F.ug(vK(Nc()));!b&&c?(c=null!==(g=null===(f=Ja.current.xb)||void 0===f?void 0:f.hb)&&void 0!==g?g:!1,h.F.ug(wK(a,c))):h.F.ug(h.Kg.sw());h.F.element.style.display="none";this.H(h.F)}else h.Nj.style.display="";d||!0!==b||h.Ql||(h.Ql=!0,this.nm.h({username:a}));void 0===this.ha.Xa&&eG(this.ha,a);return h};k.Ds=function(a){if(!a.Kg.Xc()){a.Kg.Xy();var b=a.F.za.clientHeight,c=a.F.vr;c=void 0!==c?vb({offset:c,room:this.A.B()}):vb({room:this.A.B()});Gb("api/ts/chatmessages/pm_list/"+a.username+"/?"+c).then(function(d){a.Kg.Iw();d=JSON.parse(d.responseText).messages;30>d.length&&(a.Nl=!0);var e=d.length-1;d.reverse().forEach(function(f,g){f=Xn(new Q(f));a.F.ba(nK(f,1),!0,!0);g===e&&void 0!==f.Zc&&a.F.Em(f.Zc)});a.F.Sa.scrollTop=a.F.za.clientHeight-b}).catch()}};k.ba=function(a,b,c,d,e){d=void 0===d?!1:d;EH(a,document.body.classList.contains("darkmode"));this.ha.kd(c);var f=this.Gg(c,b!==this.A.username(),!1,d);d&&!1===f.pf&&(f.pf=!0);this.A.username()===b||Ql(this)&&this.ha.Xa===c||(f.K+=1,f.hm+=1,this.Pb());f.pf&&(a=f.F.ba(a,void 0,!0));void 0!==e&&f.F.Em(e);return a};k.om=function(a){if(Ql(this)){var b=cJ(this);void 0!==b&&b.F.ba(a)}};k.Gp=function(a){function b(){return"next"===a?bG(c.ha):cG(c.ha)}var c=this;this.zd();for(var d=b(),e=!1;void 0!==d&&d!==this.A.B()&&!this.qd.Sg.has(d)&&0!==this.qd.eh();)this.ha.remove(d),d=b(),void 0!==d||e||("next"===a?fJ(c):(c.zd(),dG(c.ha)),d=b(),e=!0);if(void 0===d)return!1;this.Ug();return!0};k.wi=function(a){if(a!==this.B){var b=this.Xb.get(a);if(void 0!==b){var c=Ql(this)&&this.ha.Xa===a;this.ha.remove(a);b.F.Lb();this.removeChild(b.F);this.Xb.delete(a);c&&(eJ(this)||this.Bs());this.Pb();eo.h(b.username);fo.h(b.username)}}};k.vi=function(){var a=cJ(this);void 0===a?u("cannot close current tab"):this.wi(a.username)};k.Ug=function(){var a=this.ha.Xa;void 0===a&&(a=this.A.B(),eG(this.ha,a));var b=this.Xb.get(a);void 0===b&&this.Gg(a,!1,!1);b=this.Xb.get(a);"split"!==O()||b.pf||this.A.Qe||(b.pf=!0,kC(b.username,this.A.B()));bJ(this);b.F.element.style.display="block";b.F.Sa.style.display="block";b.F.ia.style.display="block";b.F.Y();dJ(this)&&this.zh()&&(0<b.K&&(b.K=0,this.Pb()),ho.h(b.username),wc.h(b.username));eq.h();b.username!==this.B&&b.F.ba(b.Nj)};k.zd=function(){var a=cJ(this);void 0!==a&&(a.F.element.style.display="none")};k.Bg=function(){var a=cJ(this);if(void 0!==a)return a.F.va};k.zh=function(){return"split"===O()};function AK(){function a(){if(!b.Hm&&(qr(b.Kb),void 0!==b.parent)){var f=b.parent;Ml(f,f.children()[0])}}Nl.call(this);var b=this;this.Kb=new gr;this.Hm=!1;this.element.id="SplitModeChatSettingsTab";G(this.element,"defaultColor");this.element.style.fontSize="12px";this.element.style.fontFamily="Tahoma, Arial, Helvetica, sans-serif";this.element.style.boxSizing="border-box";this.ia=iI();var c=hI();this.pb=jI(function(){return!1},4096);v("click",this.pb.element,a);v("focus",this.pb.element,a);this.vd=new aI;this.$b=cI(this.vd,(new kI(!1)).element);this.$b.style.marginLeft="6px";this.$b.onclick=a;c.appendChild(this.pb.element);this.ia.appendChild(c);this.ia.appendChild(this.vd.element);this.element.appendChild(this.ia);this.element.appendChild(this.ia);var d=document.createElement("div");d.innerText=te;d.style.position="absolute";d.style.top="30px";d.style.right="10px";d.style.fontFamily="UbuntuRegular, Helvetica, Arial, sans-serif";d.style.color="#000000";d.style.backgroundColor="#d8deea";d.style.border="1px solid #acacac";d.style.borderRadius="4px";d.style.padding="8px 12px";d.style.opacity="0";this.element.appendChild(d);Yj.Td.j(function(){"split"===O()&&(ac(b,b.Kb),b.Kb.element.style.margin="0")});var e;this.Kb.Jq.j(function(){clearTimeout(e);pq(d,"250ms");d.style.opacity="1";e=window.setTimeout(function(){pq(d,"1000ms");d.style.opacity="0"},3E3)})}r(AK,Nl);k=AK.prototype;k.Li=function(){var a=Object.assign(Object.assign({},Nl.prototype.Li.call(this)),{backgroundImage:Vb()?"":this.collapsed?"none":"url(https://static-assets.highwebmedia.com/tsdefaultassets/ico-preferences.png)",backgroundRepeat:"no-repeat",backgroundPosition:"center",boxSizing:"border-box",minHeight:"20px",height:"unset"});Vb()?this.collapsed||(a.paddingTop="1px"):a.minWidth="34px";return a};k.G=function(){"split"===O()&&(bI(this.vd),this.ia.style.width=this.element.clientWidth-10+"px",this.pb.element.style.width=Math.max(0,this.ia.clientWidth-18-Math.ceil(this.$b.offsetWidth)-4)+"px",this.Kb.element.style.height=this.element.clientHeight-28-4+1+"px")};k.gf=function(){if(this.collapsed){if(Vb()){var a=Uj();a.style.paddingRight="2px";a.firstChild.style.transform="translatey(2px)";return[a,document.createTextNode(se)]}return[document.createTextNode(re)]}return Vb()?[Uj(2)]:[]};k.Cg=function(){return"settings-tab-default"};k.Vc=function(){this.pb.focus()};k.ue=function(){this.pb.blur()};k.Ad=function(){return document.activeElement===this.pb.element};k.eb=function(){this.Kb.element.scrollTop=this.Kb.element.scrollHeight-this.Kb.element.offsetHeight};k.Bg=function(){return this.pb};k.Md=function(a){Nl.prototype.Md.call(this,a);A("FocusTab",{location:"chatSettings"})};function BK(a){function b(){c.qa=Il(c,new zK(function(){Ml(c,c.W)},c.ag));c.qa.Za()}a=void 0===a?!1:a;Hl.call(this);var c=this;this.ag=a;this.W=new yK;this.Cj=new DI;this.de=!1;this.Mg=new Yb;this.Rb.element.style.boxSizing="border-box";this.Rb.element.style.borderBottom="";this.Rb.element.style.height="22px";this.window.style.width="";this.window.style.position="";this.element.id="ChatTabContainer";this.element.style.display="inline-block";this.element.style.fontFamily="UbuntuRegular, Helvetica, Arial, sans-serif";this.element.style.borderRadius="4px 4px 0 0";this.element.style.margin="0 0 6px 8px";this.element.style.boxSizing="border-box";this.element.style.overflow="";this.ke=Object.assign(Object.assign({},this.ke),{position:"static",fontSize:Vb()?"11px":"12px",marginRight:Vb()?"":"2px",padding:Vb()?"0px 8px":"3px 8px"});this.W=Il(this,this.W);Vb()?(b(),this.Cj=Il(this,this.Cj),this.sj=Il(this,new AK),this.W.P.element.style.borderTopLeftRadius="4px",EI(this.Cj)):(this.Cj=Il(this,this.Cj),b(),this.sj=Il(this,new AK),this.Rb.element.style.padding="1px 3px 0 3px");this.Ar=CK(this);this.Rb.H(this.Ar);Ml(this,this.W);K.j(function(e){c.de=e.C.userName===e.C.B;c.A=e.A;Ml(c,c.W);gJ(c.qa);c.de||aq.h({username:e.C.B,focus:!1,Nm:e.C.To});e.A.event.Ek.j(function(f){c.Qs(f,e.A.username())});e.A.event.Aa.j(function(f){c.$l(f,e.A.username())});ao.j(function(f){c.$l(f,e.A.username())});e.A.event.jy.j(function(f){var g=nK(f,jJ(c));c.qa.ba(g,f.O.username,f.Ya)});e.A.event.sp.j(function(f){c.W.io(f.username);c.W.F.xt(f.username);c.qa.wi(f.username)});e.A.event.ac.j(function(f){"notconnected"===f.rd&&c.Qn===c.Cj&&c.Cj.refresh(!1)});e.A.event.sq.j(function(f){e.A.al&&c.W.F.ba(vK("DEBUG: "+f))});e.A.event.Xo.j(function(f){c.Fl(f,e)});B($n.j(function(f){c.qa.ba(nK(f,jJ(c)),f.O.username,f.Ya)},!1),c.Mg);B(hC.j(function(f){var g=f.ax?f.Zc:void 0;c.qa.ba(nK(f,jJ(c)),f.O.username,f.Ya,!0,g)},!1),c.Mg);B(bo.j(function(f){c.W.F.ba(vK(f.message))},!1),c.Mg)});vc.j(function(){Zb(c.Mg)});cq.j(function(e){e?c.W.F.ba(vK("Debug mode enabled. Type /debug again to disable.")):c.W.F.ba(vK("Debug mode disabled."))});xc.j(function(e){c.W.F.ba(xK(e));e.na&&c.qa.om(xK(e))});CI.j(function(){c.Pb()});bq.j(function(e){"split"===O()&&(Ml(c,c.W),c.W.oi("@"+e+" "),c.W.Vc())});ik.j(function(){c.Ar.Wd.nb()&&c.Ar.Wd.Oa()});var d=new XF;this.qa.nm.j(function(e){YF(d,e.username)&&JB(c.A,"a",!1).then(function(f){-1!==f.Je.map(function(g){return g.username}).indexOf(e.username)&&c.W.F.ba(qK({ja:[[{ic:1,message:"New private conversation from "+e.username+" "},{ic:1,message:"(Press TAB to cycle through your conversations)",Na:"#cd0000",weight:"700"}]],na:!1},jJ(c)))}).catch()});aq.j(function(){window.setTimeout(function(){c.Y()},0)});eq.j(function(){c.G()})}r(BK,Hl);k=BK.prototype;k.Qs=function(a,b){$I(this.W);jF(lF(),a.O);a=nK(a,jJ(this),b);EH(a,document.body.classList.contains("darkmode"));this.W.F.ba(a,void 0,!0)};k.$l=function(a,b){b=qK(a,jJ(this),b);EH(b,document.body.classList.contains("darkmode"));this.W.F.ba(b);a.na&&this.qa.om(qK(a,jJ(this)))};function CK(a){var b=new xl(void 0,!0);G(b,"tab");Vb()?P(b,Object.assign(Object.assign({},a.ke),{position:"absolute",height:"22px",width:"32px"})):P(b,Object.assign(Object.assign({},a.ke),{position:"absolute",height:"19px",width:"32px"}));P(b.Wd,{width:"105px",padding:"8px 0",borderWidth:"1px",borderStyle:"solid"});G(b.Wd,"chat-tabs-dropdown-border");return b}k.xq=function(a){a=Hl.prototype.xq.call(this,a);a.element.classList.add("chat-tab-handle");return a};k.Fl=function(a,b){return Or(this,function d(){var e=this,f,g,h,m,n;return Aa(d,function(p){if(1==p.ma)return f=e,e.de||a.Kk===b.C.userName?p=sa(p,qG({Lu:a.Xg,wv:a.Kk,hx:!a.Ah,Ey:b.C.B}),3):(p.ma=0,p=void 0),p;g=p.se;h=function(y,C){return f.Fl(y,C)};m=function(y){f.Yt(y)};n=sG(a,g,b,m,h);void 0!==n&&e.W.F.ba(n);p.ma=0})})};k.Yt=function(a){this.W.F.ba(vK(a))};k.G=function(){var a=this;Hl.prototype.G.call(this);var b=this.element.clientHeight-28-this.Rb.element.offsetHeight-8;this.W.F.Sa.style.height=b+"px";window.setTimeout(function(){var c=cJ(a.qa);void 0!==c&&(c.F.Sa.style.height=b-32+"px")},0);this.Rb.Y()};k.ec=function(){return Hl.prototype.ec.call(this)};k.children=function(){return Hl.prototype.children.call(this)};k.Ev=function(){qr(this.sj.Kb);Hl.prototype.ec.call(this)===this.W?this.qa.lk()||(Ml(this,this.qa),fJ(this.qa),eJ(this.qa)||u("no pmSessions")):0<this.W.Zd()?Ml(this,this.W):eJ(this.qa)||Ml(this,this.W);this.Y()};k.vi=function(){Hl.prototype.ec.call(this)===this.qa&&this.qa.vi()};function DK(){Dc.call(this);var a=this;this.element.id="AbuseReportModal";this.element.style.visibility="hidden";this.element.style.maxWidth="350px";this.element.style.height="203px";this.element.style.borderWidth="2px";this.element.style.borderStyle="solid";this.element.style.borderRadius="4px";this.element.style.overflow="";v("keydown",this.element,function(c){27===c.keyCode&&a.D()});var b=Jj("","","295px");G(b,"divot");this.element.appendChild(b);this.xa=document.createElement("div");G(this.xa,"header");this.xa.innerText=Ce;this.xa.style.fontSize="15px";this.xa.style.fontFamily="UbuntuBold, Arial, Helvetica, sans-serif";this.xa.style.padding="6px";this.element.appendChild(this.xa);this.hc.j(function(){a.D()})}r(DK,Dc);DK.prototype.show=function(a){var b=this;this.tg=this.H(new SI);this.tg.In.j(function(){b.D()});this.tp=a;this.Vg();this.G();this.tg.element.style.height=Math.max(0,this.element.clientHeight-this.xa.clientHeight)+"px";this.element.style.visibility="";this.tg.ve.focus();this.Y()};DK.prototype.G=function(){void 0===this.tp?this.D():(this.element.style.top=this.tp.offsetHeight-4+"px",this.element.style.left=this.tp.offsetLeft+this.tp.offsetWidth-this.element.offsetWidth+(518>ck()&&"split"===O()?4:-4)+"px")};DK.prototype.D=function(){this.removeChild(this.tg);this.mb();this.element.style.visibility="hidden"};function EK(a,b){F.call(this);var c=this;this.ka=a;this.ko=this.Cs=!1;this.Vd=b;this.element.id="VideoPanel";this.element.style.position="relative";this.element.style.display="inline-block";this.element.style.borderRadius="4px 4px 0 0";this.element.style.boxSizing="border-box";this.element.style.height="auto";this.element.style.fontFamily="UbuntuRegular, Helvetica, Arial, sans-serif";this.element.style.fontSize="11px";this.element.style.overflow="visible";lD=this.element;var d;this.cd=document.createElement("a");G(this.cd,"reportAbuseLink");this.cd.href="#";this.cd.innerText=De;this.cd.style.fontSize="10px";this.cd.style.fontFamily="UbuntuMedium, Helvetica, Arial, sans-serif";this.cd.style.textDecoration="none";this.cd.style.padding="8px 6px 12px 0";this.cd.style.cssFloat="right";this.cd.onmouseenter=function(){c.cd.style.textDecoration="underline"};this.cd.onmouseleave=function(){c.cd.style.textDecoration="none"};this.cd.onclick=function(p){p.preventDefault();void 0===d&&(d=c.H(new DK));d.show(c.cd)};this.element.appendChild(this.cd);this.uc=document.createElement("div");G(this.uc,"defaultColor");this.uc.style.fontFamily="UbuntuMedium, Helvetica, Arial, sans-serif";this.uc.style.height="22px";this.uc.style.lineHeight="24px";this.uc.style.overflow="hidden";this.uc.style.fontSize="12px";this.uc.style.padding="4px 0 4px 9px";this.uc.onmouseenter=function(){c.uc.clientHeight<c.uc.scrollHeight-2&&(c.Qb.style.visibility="",c.Qb.style.top=c.uc.offsetTop+c.uc.offsetHeight+2+"px")};this.uc.onmouseleave=function(){c.Qb.style.visibility="hidden"};this.Qb=document.createElement("div");G(this.Qb,"roomSubjectTooltip");G(this.Qb,"roomSubjectToolTipColor");this.Qb.style.visibility="hidden";this.Qb.style.fontFamily="UbuntuRegular, Arial, Helvetica, sans-serif";this.Qb.style.fontSize="12px";this.Qb.style.boxSizing="border-box";this.Qb.style.zIndex="999";this.Qb.style.position="absolute";this.Qb.style.borderRadius="4px";this.Qb.style.borderWidth="1px";this.Qb.style.borderStyle="solid";this.Qb.style.padding="10px";this.Qb.style.width="500px";this.Qb.style.height="auto";this.Qb.style.lineHeight="16px";this.element.appendChild(this.uc);this.element.appendChild(this.Qb);OI(this.ka,b);this.H(this.ka);this.cl=new rl;this.H(this.cl);this.Qc=document.createElement("span");this.Qc.style.width="270px";this.Qc.style.height="69px";this.Qc.style.display="inline-block";this.Qc.style.verticalAlign="top";this.Qc.style.margin="0";this.cl.element.appendChild(this.Qc);this.oc=b.Wa.lb.W.tq.oc;this.oc.gp.j(function(){if("split"===O()){for(;null!==c.Qc.firstChild;)c.Qc.removeChild(c.Qc.firstChild);c.Qc.appendChild(c.oc.element.cloneNode(!0))}});window.setTimeout(function(){c.ko=!0},2E3);Yj.Td.j(function(p){p=p.nh;c.cl.element.style.display="split"===p?"block":"none";c.Qc.style.display="split"===p?"inline-block":"none";c.Hf.style.display="split"===p?"inline-block":"none";c.element.style.border="split"===p||"theater"===p?"1px solid #acacac":"none";c.uc.style.display="fullscreen"===p?"none":"block";c.cd.style.display="fullscreen"===p?"none":"inline";"split"===p||"theater"===p?G(c.element,"border"):H(c.element,"border");c.Aj()});yk.j(function(){c.Aj()});this.Hf=document.createElement("div");G(this.Hf,"defaultColor");this.Hf.style.height="69px";this.Hf.style.boxSizing="border-box";this.Hf.style.fontSize="11px";this.Hf.style.overflow="hidden";this.Hf.style.display="inline-block";this.Hf.style.verticalAlign="top";this.Hf.style.margin="0";this.cl.element.appendChild(this.Hf);a=document.createElement("div");a.style.display="block";a.style.boxSizing="border-box";a.style.width="100%";a.style.height="100%";a.style.padding="2px 10px";this.Hf.appendChild(a);b=document.createElement("div");G(b,"currentBalance");b.style.display="block";b.style.height="19px";a.appendChild(b);var e=document.createElement("span");e.innerText=af;b.appendChild(e);this.ob=document.createElement("span");this.ob.innerText="0";this.ob.style.fontSize="15px";this.ob.style.fontFamily="UbuntuBold, Helvetica, Arial, sans-serif";b.appendChild(this.ob);this.Up=document.createElement("span");this.Up.innerText=" tokens";b.appendChild(this.Up);b=document.createElement("div");b.style.display="inline-block";b.style.verticalAlign="top";b.style.width="130px";b.style.textOverflow="ellipsis";b.style.overflow="hidden";b.style.whiteSpace="nowrap";a.appendChild(b);var f=FK(Id);f.style.margin="2px 0 0 0";f.href="/tipping/purchase_tokens/";f.onclick=function(){el();return!1};f.onmouseenter=function(){f.style.textDecoration="underline"};f.onmouseleave=function(){f.style.textDecoration="none"};b.appendChild(f);var g=FK(uh),h=!1;Jz(g,this.ka.mc)&&(b.appendChild(g),h=!0);this.Ic=FK(Ld);this.Ic.style.display="none";b.appendChild(this.Ic);var m=document.createElement("div");m.innerText=Bd;m.style.display="none";a.appendChild(m);this.Ly=document.createElement("span");this.Ly.style.display="none";a.appendChild(this.Ly);var n=new Yb;zj.j(function(){var p;return null===(p=c.$a)||void 0===p?void 0:p.D()});K.j(function(p){var y;null===(y=c.$a)||void 0===y?void 0:y.show();mb()&&!kb()&&!ab()&&h&&uo&&void 0===c.$a&&(c.$a=Mk(g,{width:250,content:gj,Il:!1,Ud:c.ka.N instanceof
hs?0:1,bf:"30px",Wf:function(){return 20},qg:function(){return 3},Ep:["split"]}),v("click",g,function(){var E;null===(E=c.$a)||void 0===E?void 0:Jk(E)}));c.uc.innerText=p.C.Zb;c.Qb.innerText=p.C.Zb;y=isNaN(p.C.ob)?0:p.C.ob;c.ob.innerText=""+y;c.Up.innerText=" "+Hc(y);c.hb=p.C.hb;var C=p.C.te;c.hb?(c.X.style.display="inline-block",m.style.display="none",p.A.event.Xh.j(function(E){C=E.te;GK(c,C,p.A,p.A.status)}),p.A.event.ac.j(function(E){var ja;if(c.ka.N.Zh){var ba=function(){GK(ra,C,p.A,E.La)},ra=c;Vp(p,E)?ba():Wp(p,E).then(ba);"passwordprotected"===E.La&&(null===(ja=c.$a)||void 0===ja?void 0:ja.D())}})):(c.X.style.display="none",GK(c,!1,p.A,p.C.ib),m.style.display="block",m.style.position="absolute",m.style.top="54px");B(fy.j(function(){GK(c,C,p.A,p.C.ib)}),n);B(p.A.event.hu.j(function(E){c.uc.innerText=E;c.Qb.innerText=E}),n);c.ko=!1;window.setTimeout(function(){c.ko=!0},2E3);g.style.display="offline"===p.C.ib?"none":"block"});xA.j(function(p){c.ob.innerText=""+p.gd;c.Up.innerText=" "+Hc(p.gd)});this.X=function(p){var y=document.createElement("span");y.innerText=p;y.title=p;y.style.overflow="hidden";y.style.lineHeight="1.4";y.style.height="21px";y.style.maxWidth="76px";y.style.fontSize="12px";y.style.fontFamily="UbuntuMedium, Helvetica, Arial, sans-serif";y.style.margin="11px 0px 11px 0px";y.style.textOverflow="ellipsis";y.style.padding="3px 10px 3px";y.style.borderRadius="4px";y.style.boxSizing="border-box";y.style.cursor="pointer";y.style.display="none";return y}(rd);G(this.X,"sendTipButton");this.X.style.textShadow="#588d3d 1px 1px 0px";this.X.style.marginRight="4px";G(this.X,"gradient");a.appendChild(this.X);this.X.onclick=function(){xq.h({})};vc.j(function(){Zb(n)})}r(EK,F);EK.prototype.Aj=function(){var a=this;if("split"===O())this.oc.element.style.padding="0",this.oc.gp.h(void 0);else{for(;null!==this.Qc.firstChild;)this.Qc.removeChild(this.Qc.firstChild);this.oc.element.style.padding="3px 5px";this.ko?nG(this.Vd.Wa.lb.W.tq):window.setTimeout(function(){nG(a.Vd.Wa.lb.W.tq)},2E3)}0<this.element.clientWidth&&500>this.element.clientWidth?(this.oc.element.style.width="100%",this.Qc.style.width="100%"):(this.oc.element.style.width="270px",this.Qc.style.width="270px")};function FK(a){var b=document.createElement("a");G(b,"panelLink");b.innerText=a;b.title=a;b.style.lineHeight="1.3";b.style.display="block";b.style.maxWidth="130px";b.style.overflow="hidden";b.style.textOverflow="ellipsis";b.style.textDecoration="none";b.style.cursor="pointer";b.onmouseenter=function(){b.style.textDecoration="underline"};b.onmouseleave=function(){b.style.textDecoration="none"};return b}
function GK(a,b,c,d){a.Ic.innerText=Ld;var e=["privaterequesting","privatewatching","privatespying"];if(b||-1!==e.indexOf(d))switch(a.Ic.style.display="block",a.Ic.onclick=function(){Xx(c)},b=function(f){f.preventDefault();a.Cs||(a.Cs=!0,ay(c,function(){a.Cs=!1}))},d){case "privaterequesting":a.Ic.innerText=Qd;a.Ic.style.maxWidth="130px";a.Ic.onclick=b;break;case "privatenotwatching":a.Ic.innerText=Md;a.Ic.style.maxWidth="130px";a.Ic.onclick=function(){Zx(c)};break;case "privatewatching":case "privatespying":a.Ic.innerText=Sd;a.Ic.style.maxWidth="100px";a.Ic.onclick=b;break;case "offline":case "away":case "hidden":case "notconnected":a.Ic.style.display="none";a.Ic.style.maxWidth="130px";break;case "passwordprotected":case "public":break;default:w("unexpected status for updatePrivateState: "+d)}else a.Ic.style.display="none"}function hk(a){return a.uc.offsetHeight+a.cl.element.offsetHeight+4};function HK(a,b){F.call(this);var c=this;this.wm=4;this.ka=a;this.Vd=b;G(this.element,"BaseRoomContents");this.element.style.position="static";this.element.style.display="block";this.element.style.height="auto";this.element.style.borderStyle="solid";this.element.style.borderWidth="1px";this.element.style.borderRadius="4px";this.element.style.padding=this.wm+"px";this.element.style.margin="12px 0 17px 12px";this.element.style.overflow="visible";this.element.style.boxSizing="border-box";this.Hh=document.createElement("div");G(this.Hh,"offlineRoomNotice");this.Hh.innerText=Jf;this.Hh.style.display="none";this.Hh.style.fontFamily="UbuntuRegular, Arial, Helvetica, sans-serif";this.Hh.style.fontSize="12px";this.Hh.style.fontWeight="bold";this.Hh.style.margin="13px 0";this.element.appendChild(this.Hh);this.og=document.createElement("div");G(this.og,"topSectionWrapper");this.og.style.width="100%";this.og.style.height="auto";this.element.appendChild(this.og);this.bc=this.H(new EK(this.ka,this.Vd),this.og);this.Bt=this.H(this.tv(),this.og);this.lb=this.H(new BK,this.og);$p.j(function(e){d?yq.h(!0):"split"===O()&&(void 0===c.Di&&(c.Di=new nJ(c.lb)),c.Di.show(e))});var d=!0;K.j(function(e){d=e.A.Qe})}r(HK,F);HK.prototype.tv=function(){return new dk(this)};HK.prototype.G=function(){var a=this.bc.element.offsetHeight;this.lb.element.style.width=this.element.clientWidth-this.bc.element.offsetWidth-16+"px";this.lb.element.style.height=a+"px"};function IK(a,b){dk.call(this,a);this.$=a;this.kn=b}r(IK,dk);k=IK.prototype;k.Dp=function(){var a=this.bk(),b=this.Cl(a);b>this.ak()&&(b=this.ak(),a=b/kk(this));!this.kn&&(300>b||500>a)&&(a=502,b=this.Cl(a));this.state.videoWidth=a;this.state.videoHeight=b};k.jf=function(){this.Dp();"split"===O()&&(this.$.bc.element.style.width=this.state.videoWidth+"px",this.$.bc.ka.element.style.height=this.state.videoHeight+"px",this.$.lb.element.style.width=this.$.element.clientWidth-this.state.videoWidth-this.element.offsetWidth-2*this.$.wm+"px")};k.Cl=function(a){return a*(this.$.bc.ka.Hg?.5625:.75)+this.$.bc.ka.N.Wb()};k.bk=function(){return window.innerWidth-this.Ro()-10};k.ak=function(){return window.innerHeight-116};k.Ro=function(){return 200};function JK(a,b,c){HK.call(this,a,b);this.kn=c;this.element.style.padding="0";this.element.style.margin="0";this.element.style.overflow="hidden";this.Vd.element.style.display="none";Xj(this.kn?"videoonly":"split",{h:!0});this.element.style.margin="0";this.element.style.padding="0 0 10px";this.Bt.element.style.display="none"}r(JK,HK);JK.prototype.Ro=function(){return 200};JK.prototype.tv=function(){return new IK(this,this.kn)};JK.prototype.G=function(){this.kn||this.Bt.jf();HK.prototype.G.call(this)};var KK=!1;function LK(a,b,c){JF.call(this,a,b);this.vB=b;this.Ti=c;this.Cp=new tG;document.getElementById("main").appendChild(this.element);this.element.style.lineHeight="normal";this.Ti?(this.element.style.height="",this.element.style.overflow="visible"):this.element.style.overflow="auto";KF(this);OF(this,a);this.Nn(this.vB);b=new $J;this.$=new JK(this.ka,b,this.Ti);this.$.element.style.display="none";this.$.element.style.minWidth="800px";this.ka.Ka.Gr=this.$.bc.element;iK(b,this.$.lb);if(this.Ti){this.H(this.ka);b=document.createElement("a");c=document.createElement("div");document.body.appendChild(b);b.appendChild(c);var d=wb(),e={};void 0!==d.disable_sound&&(e.disable_sound=d.disable_sound);var f="_blank";void 0!==d.target&&(f=d.target);d=vb(e);b.href="/"+a+"/?"+d;b.target=f;c.style.position="absolute";c.style.top="0";c.style.bottom="0";c.style.left="0";c.style.right="0"}else this.H(this.$);this.Tt();MF(this,this.$.og,this.$.bc.X);NF(this)}r(LK,JF);k=LK.prototype;k.Nn=function(a){this.ka=new PI(a);this.Ti&&(this.ka.element.style.position="absolute",this.ka.element.style.top="0px",this.ka.element.style.left="0px")};k.uw=function(a){return!KK&&window.initialRoomDossier&&!0!==Ja.current.cx?Tp(window.initialRoomDossier):Up(a)};k.Zs=function(a,b){JF.prototype.Zs.call(this,a,b);A("LoadRoom");a=this.Cp;b=this.A;b!==a.A&&(void 0!==a.A&&(a.A.event.Po.removeListener(a.Nx),a.A.event.Ek.removeListener(a.bp),$n.removeListener(a.bp)),a.A=b,a.A.event.Po.j(a.Nx),a.A.event.Ek.j(a.bp),$n.j(a.bp))};k.kf=function(a){JF.prototype.kf.call(this,a);QF(a.C.B,a.C.Zb);this.$.element.style.display="block";this.Me=a.C.oa.Me;this.ka.N instanceof xs&&LF(this);fl(a.C.ob);this.Y();KK||(KK=!0)};k.Lr=function(a){JF.prototype.Lr.call(this,a);var b=this.ka;b.Hg=a;b.N instanceof xs&&(b.N.ws=a);b.Y()};k.Kr=function(){JF.prototype.Kr.call(this);if(this.Ti){var a=document.createElement("div");a.innerText=Jf;a.style.margin="10px 0";this.element.appendChild(a);this.ka.element.style.display="none"}else this.$.element.innerText=Jf,this.$.element.style.padding="10px 0"};k.G=function(){JF.prototype.G.call(this);this.$.Bt.Dp()};function MK(){Cx.apply(this,arguments)}r(MK,Cx);MK.prototype.et=function(a){Cx.prototype.et.call(this,a);this.context.Ti=a.embed_video_only;this.context.Z=a.room_name;this.context.OA=a.smc_tooltip_enabled;this.context.OA&&(uo=!0)};MK.prototype.$d=function(){NK(this);Ex(this);Rx();Vq(void 0===this.context.xb)};function NK(a){Ux().then(function(b){new LK(a.context.Z,b,a.context.Ti)}).catch()}MK.prototype.oq=function(a,b){Cx.prototype.oq.call(this,a,b);Dw(a.auth,this.context.Z)};window.TS=MK;var OK=window.newrelic;function PK(a,b,c){c=void 0===c?{}:c;try{if(void 0!==OK){var d={};d["attributes.level"]=a;if("object"===typeof c)for(var e in c)d["attributes."+e]=c[e];OK.noticeError(b,d)}}catch(f){u("New Relic Error in reportError: "+f.toString())}}function Em(a){void 0!==window.console&&console.info(a,"")}
function w(a,b,c){c=void 0===c?"":c;void 0!==window.console&&console.warn(c.concat("WARN "),a,void 0===b?"":b);try{var d="object"===typeof a?JSON.stringify(a):a.toString()}catch(e){d=""+a}PK(c.concat("WARN"),Error(d),b)}function u(a,b,c){c=void 0===c?"":c;void 0!==window.console&&console.error(c.concat("ERROR "),a,void 0===b?"":b);try{var d="object"===typeof a?JSON.stringify(a):a.toString()}catch(e){d=""+a}PK(c.concat("ERROR"),Error(d),b)}function Zy(){}
window.onerror=function(a,b,c,d,e){try{var f=JSON.stringify(e)}catch(g){f=""+e}u(['"Message: " '+a,'"URL: "  '+b,'"Line: " '+c,'"Column: " '+d,'"Error object: " '+f].join("\n"),{},"");return!1};}).call(this);